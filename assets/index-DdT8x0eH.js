var rW=Object.defineProperty;var IN=e=>{throw TypeError(e)};var aW=(e,t,n)=>t in e?rW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var se=(e,t,n)=>aW(e,typeof t!="symbol"?t+"":t,n),PN=(e,t,n)=>t.has(e)||IN("Cannot "+n);var HN=(e,t,n)=>(PN(e,t,"read from private field"),n?n.call(e):t.get(e)),GN=(e,t,n)=>t.has(e)?IN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),iE=(e,t,n,i)=>(PN(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function oW(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rE={exports:{}},Wh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN;function sW(){if(YN)return Wh;YN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:o,ref:r!==void 0?r:null,props:a}}return Wh.Fragment=t,Wh.jsx=n,Wh.jsxs=n,Wh}var XN;function lW(){return XN||(XN=1,rE.exports=sW()),rE.exports}var ap=lW(),aE={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VN;function uW(){if(VN)return Be;VN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),p=Symbol.iterator;function y(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function _(F,H,ae){this.props=F,this.context=H,this.refs=S,this.updater=ae||v}_.prototype.isReactComponent={},_.prototype.setState=function(F,H){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,H,"setState")},_.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function w(){}w.prototype=_.prototype;function A(F,H,ae){this.props=F,this.context=H,this.refs=S,this.updater=ae||v}var $=A.prototype=new w;$.constructor=A,b($,_.prototype),$.isPureReactComponent=!0;var M=Array.isArray;function k(){}var T={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(F,H,ae){var pe=ae.ref;return{$$typeof:e,type:F,key:H,ref:pe!==void 0?pe:null,props:ae}}function B(F,H){return R(F.type,H,F.props)}function U(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function Q(F){var H={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ae){return H[ae]})}var G=/\/+/g;function I(F,H){return typeof F=="object"&&F!==null&&F.key!=null?Q(""+F.key):H.toString(36)}function z(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(k,k):(F.status="pending",F.then(function(H){F.status==="pending"&&(F.status="fulfilled",F.value=H)},function(H){F.status==="pending"&&(F.status="rejected",F.reason=H)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function D(F,H,ae,pe,ve){var De=typeof F;(De==="undefined"||De==="boolean")&&(F=null);var Xe=!1;if(F===null)Xe=!0;else switch(De){case"bigint":case"string":case"number":Xe=!0;break;case"object":switch(F.$$typeof){case e:case t:Xe=!0;break;case d:return Xe=F._init,D(Xe(F._payload),H,ae,pe,ve)}}if(Xe)return ve=ve(F),Xe=pe===""?"."+I(F,0):pe,M(ve)?(ae="",Xe!=null&&(ae=Xe.replace(G,"$&/")+"/"),D(ve,H,ae,"",function(Fe){return Fe})):ve!=null&&(U(ve)&&(ve=B(ve,ae+(ve.key==null||F&&F.key===ve.key?"":(""+ve.key).replace(G,"$&/")+"/")+Xe)),H.push(ve)),1;Xe=0;var Nt=pe===""?".":pe+":";if(M(F))for(var me=0;me<F.length;me++)pe=F[me],De=Nt+I(pe,me),Xe+=D(pe,H,ae,De,ve);else if(me=y(F),typeof me=="function")for(F=me.call(F),me=0;!(pe=F.next()).done;)pe=pe.value,De=Nt+I(pe,me++),Xe+=D(pe,H,ae,De,ve);else if(De==="object"){if(typeof F.then=="function")return D(z(F),H,ae,pe,ve);throw H=String(F),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Xe}function q(F,H,ae){if(F==null)return F;var pe=[],ve=0;return D(F,pe,"","",function(De){return H.call(ae,De,ve++)}),pe}function Y(F){if(F._status===-1){var H=F._result;H=H(),H.then(function(ae){(F._status===0||F._status===-1)&&(F._status=1,F._result=ae)},function(ae){(F._status===0||F._status===-1)&&(F._status=2,F._result=ae)}),F._status===-1&&(F._status=0,F._result=H)}if(F._status===1)return F._result.default;throw F._result}var Z=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ue={map:q,forEach:function(F,H,ae){q(F,function(){H.apply(this,arguments)},ae)},count:function(F){var H=0;return q(F,function(){H++}),H},toArray:function(F){return q(F,function(H){return H})||[]},only:function(F){if(!U(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Be.Activity=g,Be.Children=ue,Be.Component=_,Be.Fragment=n,Be.Profiler=r,Be.PureComponent=A,Be.StrictMode=i,Be.Suspense=c,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Be.__COMPILER_RUNTIME={__proto__:null,c:function(F){return T.H.useMemoCache(F)}},Be.cache=function(F){return function(){return F.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(F,H,ae){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var pe=b({},F.props),ve=F.key;if(H!=null)for(De in H.key!==void 0&&(ve=""+H.key),H)!N.call(H,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&H.ref===void 0||(pe[De]=H[De]);var De=arguments.length-2;if(De===1)pe.children=ae;else if(1<De){for(var Xe=Array(De),Nt=0;Nt<De;Nt++)Xe[Nt]=arguments[Nt+2];pe.children=Xe}return R(F.type,ve,pe)},Be.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Be.createElement=function(F,H,ae){var pe,ve={},De=null;if(H!=null)for(pe in H.key!==void 0&&(De=""+H.key),H)N.call(H,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(ve[pe]=H[pe]);var Xe=arguments.length-2;if(Xe===1)ve.children=ae;else if(1<Xe){for(var Nt=Array(Xe),me=0;me<Xe;me++)Nt[me]=arguments[me+2];ve.children=Nt}if(F&&F.defaultProps)for(pe in Xe=F.defaultProps,Xe)ve[pe]===void 0&&(ve[pe]=Xe[pe]);return R(F,De,ve)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(F){return{$$typeof:l,render:F}},Be.isValidElement=U,Be.lazy=function(F){return{$$typeof:d,_payload:{_status:-1,_result:F},_init:Y}},Be.memo=function(F,H){return{$$typeof:f,type:F,compare:H===void 0?null:H}},Be.startTransition=function(F){var H=T.T,ae={};T.T=ae;try{var pe=F(),ve=T.S;ve!==null&&ve(ae,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(k,Z)}catch(De){Z(De)}finally{H!==null&&ae.types!==null&&(H.types=ae.types),T.T=H}},Be.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Be.use=function(F){return T.H.use(F)},Be.useActionState=function(F,H,ae){return T.H.useActionState(F,H,ae)},Be.useCallback=function(F,H){return T.H.useCallback(F,H)},Be.useContext=function(F){return T.H.useContext(F)},Be.useDebugValue=function(){},Be.useDeferredValue=function(F,H){return T.H.useDeferredValue(F,H)},Be.useEffect=function(F,H){return T.H.useEffect(F,H)},Be.useEffectEvent=function(F){return T.H.useEffectEvent(F)},Be.useId=function(){return T.H.useId()},Be.useImperativeHandle=function(F,H,ae){return T.H.useImperativeHandle(F,H,ae)},Be.useInsertionEffect=function(F,H){return T.H.useInsertionEffect(F,H)},Be.useLayoutEffect=function(F,H){return T.H.useLayoutEffect(F,H)},Be.useMemo=function(F,H){return T.H.useMemo(F,H)},Be.useOptimistic=function(F,H){return T.H.useOptimistic(F,H)},Be.useReducer=function(F,H,ae){return T.H.useReducer(F,H,ae)},Be.useRef=function(F){return T.H.useRef(F)},Be.useState=function(F){return T.H.useState(F)},Be.useSyncExternalStore=function(F,H,ae){return T.H.useSyncExternalStore(F,H,ae)},Be.useTransition=function(){return T.H.useTransition()},Be.version="19.2.4",Be}var WN;function yC(){return WN||(WN=1,aE.exports=uW()),aE.exports}var ew=yC();const Mu=oW(ew);var oE={exports:{}},Qh={},sE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QN;function cW(){return QN||(QN=1,(function(e){function t(D,q){var Y=D.length;D.push(q);e:for(;0<Y;){var Z=Y-1>>>1,ue=D[Z];if(0<r(ue,q))D[Z]=q,D[Y]=ue,Y=Z;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var q=D[0],Y=D.pop();if(Y!==q){D[0]=Y;e:for(var Z=0,ue=D.length,F=ue>>>1;Z<F;){var H=2*(Z+1)-1,ae=D[H],pe=H+1,ve=D[pe];if(0>r(ae,Y))pe<ue&&0>r(ve,ae)?(D[Z]=ve,D[pe]=Y,Z=pe):(D[Z]=ae,D[H]=Y,Z=H);else if(pe<ue&&0>r(ve,Y))D[Z]=ve,D[pe]=Y,Z=pe;else break e}}return q}function r(D,q){var Y=D.sortIndex-q.sortIndex;return Y!==0?Y:D.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],f=[],d=1,g=null,p=3,y=!1,v=!1,b=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function $(D){for(var q=n(f);q!==null;){if(q.callback===null)i(f);else if(q.startTime<=D)i(f),q.sortIndex=q.expirationTime,t(c,q);else break;q=n(f)}}function M(D){if(b=!1,$(D),!v)if(n(c)!==null)v=!0,k||(k=!0,Q());else{var q=n(f);q!==null&&z(M,q.startTime-D)}}var k=!1,T=-1,N=5,R=-1;function B(){return S?!0:!(e.unstable_now()-R<N)}function U(){if(S=!1,k){var D=e.unstable_now();R=D;var q=!0;try{e:{v=!1,b&&(b=!1,w(T),T=-1),y=!0;var Y=p;try{t:{for($(D),g=n(c);g!==null&&!(g.expirationTime>D&&B());){var Z=g.callback;if(typeof Z=="function"){g.callback=null,p=g.priorityLevel;var ue=Z(g.expirationTime<=D);if(D=e.unstable_now(),typeof ue=="function"){g.callback=ue,$(D),q=!0;break t}g===n(c)&&i(c),$(D)}else i(c);g=n(c)}if(g!==null)q=!0;else{var F=n(f);F!==null&&z(M,F.startTime-D),q=!1}}break e}finally{g=null,p=Y,y=!1}q=void 0}}finally{q?Q():k=!1}}}var Q;if(typeof A=="function")Q=function(){A(U)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,I=G.port2;G.port1.onmessage=U,Q=function(){I.postMessage(null)}}else Q=function(){_(U,0)};function z(D,q){T=_(function(){D(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(D){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var Y=p;p=q;try{return D()}finally{p=Y}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(D,q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var Y=p;p=D;try{return q()}finally{p=Y}},e.unstable_scheduleCallback=function(D,q,Y){var Z=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,D){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Y+ue,D={id:d++,callback:q,priorityLevel:D,startTime:Y,expirationTime:ue,sortIndex:-1},Y>Z?(D.sortIndex=Y,t(f,D),n(c)===null&&D===n(f)&&(b?(w(T),T=-1):b=!0,z(M,Y-Z))):(D.sortIndex=ue,t(c,D),v||y||(v=!0,k||(k=!0,Q()))),D},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(D){var q=p;return function(){var Y=p;p=q;try{return D.apply(this,arguments)}finally{p=Y}}}})(lE)),lE}var ZN;function fW(){return ZN||(ZN=1,sE.exports=cW()),sE.exports}var uE={exports:{}},Pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN;function dW(){if(KN)return Pn;KN=1;var e=yC();function t(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,f,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:c,containerInfo:f,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Pn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(c,f,null,d)},Pn.flushSync=function(c){var f=o.T,d=i.p;try{if(o.T=null,i.p=2,c)return c()}finally{o.T=f,i.p=d,i.d.f()}},Pn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},Pn.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Pn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,g=l(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(c,{crossOrigin:g,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Pn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=l(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},Pn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,g=l(d,f.crossOrigin);i.d.L(c,d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Pn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=l(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},Pn.requestFormReset=function(c){i.d.r(c)},Pn.unstable_batchedUpdates=function(c,f){return c(f)},Pn.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},Pn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Pn.version="19.2.4",Pn}var JN;function hW(){if(JN)return uE.exports;JN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),uE.exports=dW(),uE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eR;function gW(){if(eR)return Qh;eR=1;var e=fW(),t=yC(),n=hW();function i(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var u=s,h=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(h=u.return),s=u.return;while(s)}return u.tag===3?h:null}function o(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function l(s){if(s.tag===31){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function c(s){if(a(s)!==s)throw Error(i(188))}function f(s){var u=s.alternate;if(!u){if(u=a(s),u===null)throw Error(i(188));return u!==s?null:s}for(var h=s,m=u;;){var x=h.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){h=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===h)return c(x),s;if(E===m)return c(x),u;E=E.sibling}throw Error(i(188))}if(h.return!==m.return)h=x,m=E;else{for(var C=!1,O=x.child;O;){if(O===h){C=!0,h=x,m=E;break}if(O===m){C=!0,m=x,h=E;break}O=O.sibling}if(!C){for(O=E.child;O;){if(O===h){C=!0,h=E,m=x;break}if(O===m){C=!0,m=E,h=x;break}O=O.sibling}if(!C)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?s:u}function d(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s;for(s=s.child;s!==null;){if(u=d(s),u!==null)return u;s=s.sibling}return null}var g=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var G=Symbol.for("react.client.reference");function I(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===G?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case k:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case v:return"Portal";case A:return s.displayName||"Context";case w:return(s._context.displayName||"Context")+".Consumer";case $:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case T:return u=s.displayName||null,u!==null?u:I(s.type)||"Memo";case N:u=s._payload,s=s._init;try{return I(s(u))}catch{}}return null}var z=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},Z=[],ue=-1;function F(s){return{current:s}}function H(s){0>ue||(s.current=Z[ue],Z[ue]=null,ue--)}function ae(s,u){ue++,Z[ue]=s.current,s.current=u}var pe=F(null),ve=F(null),De=F(null),Xe=F(null);function Nt(s,u){switch(ae(De,u),ae(ve,s),ae(pe,null),u.nodeType){case 9:case 11:s=(s=u.documentElement)&&(s=s.namespaceURI)?fN(s):0;break;default:if(s=u.tagName,u=u.namespaceURI)u=fN(u),s=dN(u,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}H(pe),ae(pe,s)}function me(){H(pe),H(ve),H(De)}function Fe(s){s.memoizedState!==null&&ae(Xe,s);var u=pe.current,h=dN(u,s.type);u!==h&&(ae(ve,s),ae(pe,h))}function qe(s){ve.current===s&&(H(pe),H(ve)),Xe.current===s&&(H(Xe),Gh._currentValue=Y)}var fe,tn;function Qe(s){if(fe===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);fe=u&&u[1]||"",tn=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+s+tn}var jt=!1;function nn(s,u){if(!s||jt)return"";jt=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(K){var W=K}Reflect.construct(s,[],oe)}else{try{oe.call()}catch(K){W=K}s.call(oe.prototype)}}else{try{throw Error()}catch(K){W=K}(oe=s())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(K){if(K&&W&&typeof K.stack=="string")return[K.stack,W.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),C=E[0],O=E[1];if(C&&O){var L=C.split(`
`),V=O.split(`
`);for(x=m=0;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;for(;x<V.length&&!V[x].includes("DetermineComponentFrameRoot");)x++;if(m===L.length||x===V.length)for(m=L.length-1,x=V.length-1;1<=m&&0<=x&&L[m]!==V[x];)x--;for(;1<=m&&0<=x;m--,x--)if(L[m]!==V[x]){if(m!==1||x!==1)do if(m--,x--,0>x||L[m]!==V[x]){var te=`
`+L[m].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=m&&0<=x);break}}}finally{jt=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?Qe(h):""}function Gr(s,u){switch(s.tag){case 26:case 27:case 5:return Qe(s.type);case 16:return Qe("Lazy");case 13:return s.child!==u&&u!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return nn(s.type,!1);case 11:return nn(s.type.render,!1);case 1:return nn(s.type,!0);case 31:return Qe("Activity");default:return""}}function nh(s){try{var u="",h=null;do u+=Gr(s,h),h=s,s=s.return;while(s);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Ix=Object.prototype.hasOwnProperty,Px=e.unstable_scheduleCallback,Hx=e.unstable_cancelCallback,FY=e.unstable_shouldYield,LY=e.unstable_requestPaint,Pi=e.unstable_now,UY=e.unstable_getCurrentPriorityLevel,Pk=e.unstable_ImmediatePriority,Hk=e.unstable_UserBlockingPriority,T0=e.unstable_NormalPriority,BY=e.unstable_LowPriority,Gk=e.unstable_IdlePriority,qY=e.log,jY=e.unstable_setDisableYieldValue,ih=null,Hi=null;function ys(s){if(typeof qY=="function"&&jY(s),Hi&&typeof Hi.setStrictMode=="function")try{Hi.setStrictMode(ih,s)}catch{}}var Gi=Math.clz32?Math.clz32:HY,IY=Math.log,PY=Math.LN2;function HY(s){return s>>>=0,s===0?32:31-(IY(s)/PY|0)|0}var M0=256,k0=262144,O0=4194304;function Il(s){var u=s&42;if(u!==0)return u;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function D0(s,u,h){var m=s.pendingLanes;if(m===0)return 0;var x=0,E=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var O=m&134217727;return O!==0?(m=O&~E,m!==0?x=Il(m):(C&=O,C!==0?x=Il(C):h||(h=O&~s,h!==0&&(x=Il(h))))):(O=m&~E,O!==0?x=Il(O):C!==0?x=Il(C):h||(h=m&~s,h!==0&&(x=Il(h)))),x===0?0:u!==0&&u!==x&&(u&E)===0&&(E=x&-x,h=u&-u,E>=h||E===32&&(h&4194048)!==0)?u:x}function rh(s,u){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&u)===0}function GY(s,u){switch(s){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yk(){var s=O0;return O0<<=1,(O0&62914560)===0&&(O0=4194304),s}function Gx(s){for(var u=[],h=0;31>h;h++)u.push(s);return u}function ah(s,u){s.pendingLanes|=u,u!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function YY(s,u,h,m,x,E){var C=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var O=s.entanglements,L=s.expirationTimes,V=s.hiddenUpdates;for(h=C&~h;0<h;){var te=31-Gi(h),oe=1<<te;O[te]=0,L[te]=-1;var W=V[te];if(W!==null)for(V[te]=null,te=0;te<W.length;te++){var K=W[te];K!==null&&(K.lane&=-536870913)}h&=~oe}m!==0&&Xk(s,m,0),E!==0&&x===0&&s.tag!==0&&(s.suspendedLanes|=E&~(C&~u))}function Xk(s,u,h){s.pendingLanes|=u,s.suspendedLanes&=~u;var m=31-Gi(u);s.entangledLanes|=u,s.entanglements[m]=s.entanglements[m]|1073741824|h&261930}function Vk(s,u){var h=s.entangledLanes|=u;for(s=s.entanglements;h;){var m=31-Gi(h),x=1<<m;x&u|s[m]&u&&(s[m]|=u),h&=~x}}function Wk(s,u){var h=u&-u;return h=(h&42)!==0?1:Yx(h),(h&(s.suspendedLanes|u))!==0?0:h}function Yx(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xx(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Qk(){var s=q.p;return s!==0?s:(s=window.event,s===void 0?32:zN(s.type))}function Zk(s,u){var h=q.p;try{return q.p=s,u()}finally{q.p=h}}var vs=Math.random().toString(36).slice(2),Mn="__reactFiber$"+vs,Ei="__reactProps$"+vs,Tc="__reactContainer$"+vs,Vx="__reactEvents$"+vs,XY="__reactListeners$"+vs,VY="__reactHandles$"+vs,Kk="__reactResources$"+vs,oh="__reactMarker$"+vs;function Wx(s){delete s[Mn],delete s[Ei],delete s[Vx],delete s[XY],delete s[VY]}function Mc(s){var u=s[Mn];if(u)return u;for(var h=s.parentNode;h;){if(u=h[Tc]||h[Mn]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(s=bN(s);s!==null;){if(h=s[Mn])return h;s=bN(s)}return u}s=h,h=s.parentNode}return null}function kc(s){if(s=s[Mn]||s[Tc]){var u=s.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return s}return null}function sh(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s.stateNode;throw Error(i(33))}function Oc(s){var u=s[Kk];return u||(u=s[Kk]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function vn(s){s[oh]=!0}var Jk=new Set,eO={};function Pl(s,u){Dc(s,u),Dc(s+"Capture",u)}function Dc(s,u){for(eO[s]=u,s=0;s<u.length;s++)Jk.add(u[s])}var WY=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tO={},nO={};function QY(s){return Ix.call(nO,s)?!0:Ix.call(tO,s)?!1:WY.test(s)?nO[s]=!0:(tO[s]=!0,!1)}function N0(s,u,h){if(QY(u))if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(u);return}}s.setAttribute(u,""+h)}}function R0(s,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttribute(u,""+h)}}function po(s,u,h,m){if(m===null)s.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(u,h,""+m)}}function pr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function iO(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ZY(s,u,h){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,u);if(!s.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var x=m.get,E=m.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return x.call(this)},set:function(C){h=""+C,E.call(this,C)}}),Object.defineProperty(s,u,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function Qx(s){if(!s._valueTracker){var u=iO(s)?"checked":"value";s._valueTracker=ZY(s,u,""+s[u])}}function rO(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var h=u.getValue(),m="";return s&&(m=iO(s)?s.checked?"true":"false":s.value),s=m,s!==h?(u.setValue(s),!0):!1}function z0(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var KY=/[\n"\\]/g;function mr(s){return s.replace(KY,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Zx(s,u,h,m,x,E,C,O){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),u!=null?C==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+pr(u)):s.value!==""+pr(u)&&(s.value=""+pr(u)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),u!=null?Kx(s,C,pr(u)):h!=null?Kx(s,C,pr(h)):m!=null&&s.removeAttribute("value"),x==null&&E!=null&&(s.defaultChecked=!!E),x!=null&&(s.checked=x&&typeof x!="function"&&typeof x!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.name=""+pr(O):s.removeAttribute("name")}function aO(s,u,h,m,x,E,C,O){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),u!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||u!=null)){Qx(s);return}h=h!=null?""+pr(h):"",u=u!=null?""+pr(u):h,O||u===s.value||(s.value=u),s.defaultValue=u}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=O?s.checked:!!m,s.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),Qx(s)}function Kx(s,u,h){u==="number"&&z0(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function Nc(s,u,h,m){if(s=s.options,u){u={};for(var x=0;x<h.length;x++)u["$"+h[x]]=!0;for(h=0;h<s.length;h++)x=u.hasOwnProperty("$"+s[h].value),s[h].selected!==x&&(s[h].selected=x),x&&m&&(s[h].defaultSelected=!0)}else{for(h=""+pr(h),u=null,x=0;x<s.length;x++){if(s[x].value===h){s[x].selected=!0,m&&(s[x].defaultSelected=!0);return}u!==null||s[x].disabled||(u=s[x])}u!==null&&(u.selected=!0)}}function oO(s,u,h){if(u!=null&&(u=""+pr(u),u!==s.value&&(s.value=u),h==null)){s.defaultValue!==u&&(s.defaultValue=u);return}s.defaultValue=h!=null?""+pr(h):""}function sO(s,u,h,m){if(u==null){if(m!=null){if(h!=null)throw Error(i(92));if(z(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),u=h}h=pr(u),s.defaultValue=h,m=s.textContent,m===h&&m!==""&&m!==null&&(s.value=m),Qx(s)}function Rc(s,u){if(u){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=u;return}}s.textContent=u}var JY=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lO(s,u,h){var m=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="":m?s.setProperty(u,h):typeof h!="number"||h===0||JY.has(u)?u==="float"?s.cssFloat=h:s[u]=(""+h).trim():s[u]=h+"px"}function uO(s,u,h){if(u!=null&&typeof u!="object")throw Error(i(62));if(s=s.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var x in u)m=u[x],u.hasOwnProperty(x)&&h[x]!==m&&lO(s,x,m)}else for(var E in u)u.hasOwnProperty(E)&&lO(s,E,u[E])}function Jx(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eX=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function F0(s){return tX.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function mo(){}var e2=null;function t2(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var zc=null,Fc=null;function cO(s){var u=kc(s);if(u&&(s=u.stateNode)){var h=s[Ei]||null;e:switch(s=u.stateNode,u.type){case"input":if(Zx(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+mr(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var m=h[u];if(m!==s&&m.form===s.form){var x=m[Ei]||null;if(!x)throw Error(i(90));Zx(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(u=0;u<h.length;u++)m=h[u],m.form===s.form&&rO(m)}break e;case"textarea":oO(s,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Nc(s,!!h.multiple,u,!1)}}}var n2=!1;function fO(s,u,h){if(n2)return s(u,h);n2=!0;try{var m=s(u);return m}finally{if(n2=!1,(zc!==null||Fc!==null)&&(_m(),zc&&(u=zc,s=Fc,Fc=zc=null,cO(u),s)))for(u=0;u<s.length;u++)cO(s[u])}}function lh(s,u){var h=s.stateNode;if(h===null)return null;var m=h[Ei]||null;if(m===null)return null;h=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(i(231,u,typeof h));return h}var yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),i2=!1;if(yo)try{var uh={};Object.defineProperty(uh,"passive",{get:function(){i2=!0}}),window.addEventListener("test",uh,uh),window.removeEventListener("test",uh,uh)}catch{i2=!1}var bs=null,r2=null,L0=null;function dO(){if(L0)return L0;var s,u=r2,h=u.length,m,x="value"in bs?bs.value:bs.textContent,E=x.length;for(s=0;s<h&&u[s]===x[s];s++);var C=h-s;for(m=1;m<=C&&u[h-m]===x[E-m];m++);return L0=x.slice(s,1<m?1-m:void 0)}function U0(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function B0(){return!0}function hO(){return!1}function _i(s){function u(h,m,x,E,C){this._reactName=h,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=C,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(h=s[O],this[O]=h?h(E):E[O]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?B0:hO,this.isPropagationStopped=hO,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=B0)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=B0)},persist:function(){},isPersistent:B0}),u}var Hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q0=_i(Hl),ch=g({},Hl,{view:0,detail:0}),nX=_i(ch),a2,o2,fh,j0=g({},ch,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:l2,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==fh&&(fh&&s.type==="mousemove"?(a2=s.screenX-fh.screenX,o2=s.screenY-fh.screenY):o2=a2=0,fh=s),a2)},movementY:function(s){return"movementY"in s?s.movementY:o2}}),gO=_i(j0),iX=g({},j0,{dataTransfer:0}),rX=_i(iX),aX=g({},ch,{relatedTarget:0}),s2=_i(aX),oX=g({},Hl,{animationName:0,elapsedTime:0,pseudoElement:0}),sX=_i(oX),lX=g({},Hl,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),uX=_i(lX),cX=g({},Hl,{data:0}),pO=_i(cX),fX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gX(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=hX[s])?!!u[s]:!1}function l2(){return gX}var pX=g({},ch,{key:function(s){if(s.key){var u=fX[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=U0(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?dX[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:l2,charCode:function(s){return s.type==="keypress"?U0(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?U0(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mX=_i(pX),yX=g({},j0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mO=_i(yX),vX=g({},ch,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:l2}),bX=_i(vX),xX=g({},Hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),SX=_i(xX),EX=g({},j0,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),_X=_i(EX),wX=g({},Hl,{newState:0,oldState:0}),AX=_i(wX),CX=[9,13,27,32],u2=yo&&"CompositionEvent"in window,dh=null;yo&&"documentMode"in document&&(dh=document.documentMode);var $X=yo&&"TextEvent"in window&&!dh,yO=yo&&(!u2||dh&&8<dh&&11>=dh),vO=" ",bO=!1;function xO(s,u){switch(s){case"keyup":return CX.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SO(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lc=!1;function TX(s,u){switch(s){case"compositionend":return SO(u);case"keypress":return u.which!==32?null:(bO=!0,vO);case"textInput":return s=u.data,s===vO&&bO?null:s;default:return null}}function MX(s,u){if(Lc)return s==="compositionend"||!u2&&xO(s,u)?(s=dO(),L0=r2=bs=null,Lc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return yO&&u.locale!=="ko"?null:u.data;default:return null}}var kX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EO(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!kX[s.type]:u==="textarea"}function _O(s,u,h,m){zc?Fc?Fc.push(m):Fc=[m]:zc=m,u=km(u,"onChange"),0<u.length&&(h=new q0("onChange","change",null,h,m),s.push({event:h,listeners:u}))}var hh=null,gh=null;function OX(s){aN(s,0)}function I0(s){var u=sh(s);if(rO(u))return s}function wO(s,u){if(s==="change")return u}var AO=!1;if(yo){var c2;if(yo){var f2="oninput"in document;if(!f2){var CO=document.createElement("div");CO.setAttribute("oninput","return;"),f2=typeof CO.oninput=="function"}c2=f2}else c2=!1;AO=c2&&(!document.documentMode||9<document.documentMode)}function $O(){hh&&(hh.detachEvent("onpropertychange",TO),gh=hh=null)}function TO(s){if(s.propertyName==="value"&&I0(gh)){var u=[];_O(u,gh,s,t2(s)),fO(OX,u)}}function DX(s,u,h){s==="focusin"?($O(),hh=u,gh=h,hh.attachEvent("onpropertychange",TO)):s==="focusout"&&$O()}function NX(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return I0(gh)}function RX(s,u){if(s==="click")return I0(u)}function zX(s,u){if(s==="input"||s==="change")return I0(u)}function FX(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var Yi=typeof Object.is=="function"?Object.is:FX;function ph(s,u){if(Yi(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var h=Object.keys(s),m=Object.keys(u);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var x=h[m];if(!Ix.call(u,x)||!Yi(s[x],u[x]))return!1}return!0}function MO(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kO(s,u){var h=MO(s);s=0;for(var m;h;){if(h.nodeType===3){if(m=s+h.textContent.length,s<=u&&m>=u)return{node:h,offset:u-s};s=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=MO(h)}}function OO(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?OO(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function DO(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var u=z0(s.document);u instanceof s.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)s=u.contentWindow;else break;u=z0(s.document)}return u}function d2(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}var LX=yo&&"documentMode"in document&&11>=document.documentMode,Uc=null,h2=null,mh=null,g2=!1;function NO(s,u,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;g2||Uc==null||Uc!==z0(m)||(m=Uc,"selectionStart"in m&&d2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),mh&&ph(mh,m)||(mh=m,m=km(h2,"onSelect"),0<m.length&&(u=new q0("onSelect","select",null,u,h),s.push({event:u,listeners:m}),u.target=Uc)))}function Gl(s,u){var h={};return h[s.toLowerCase()]=u.toLowerCase(),h["Webkit"+s]="webkit"+u,h["Moz"+s]="moz"+u,h}var Bc={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionrun:Gl("Transition","TransitionRun"),transitionstart:Gl("Transition","TransitionStart"),transitioncancel:Gl("Transition","TransitionCancel"),transitionend:Gl("Transition","TransitionEnd")},p2={},RO={};yo&&(RO=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function Yl(s){if(p2[s])return p2[s];if(!Bc[s])return s;var u=Bc[s],h;for(h in u)if(u.hasOwnProperty(h)&&h in RO)return p2[s]=u[h];return s}var zO=Yl("animationend"),FO=Yl("animationiteration"),LO=Yl("animationstart"),UX=Yl("transitionrun"),BX=Yl("transitionstart"),qX=Yl("transitioncancel"),UO=Yl("transitionend"),BO=new Map,m2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");m2.push("scrollEnd");function Yr(s,u){BO.set(s,u),Pl(u,[s])}var P0=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},yr=[],qc=0,y2=0;function H0(){for(var s=qc,u=y2=qc=0;u<s;){var h=yr[u];yr[u++]=null;var m=yr[u];yr[u++]=null;var x=yr[u];yr[u++]=null;var E=yr[u];if(yr[u++]=null,m!==null&&x!==null){var C=m.pending;C===null?x.next=x:(x.next=C.next,C.next=x),m.pending=x}E!==0&&qO(h,x,E)}}function G0(s,u,h,m){yr[qc++]=s,yr[qc++]=u,yr[qc++]=h,yr[qc++]=m,y2|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function v2(s,u,h,m){return G0(s,u,h,m),Y0(s)}function Xl(s,u){return G0(s,null,null,u),Y0(s)}function qO(s,u,h){s.lanes|=h;var m=s.alternate;m!==null&&(m.lanes|=h);for(var x=!1,E=s.return;E!==null;)E.childLanes|=h,m=E.alternate,m!==null&&(m.childLanes|=h),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(x=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,x&&u!==null&&(x=31-Gi(h),s=E.hiddenUpdates,m=s[x],m===null?s[x]=[u]:m.push(u),u.lane=h|536870912),E):null}function Y0(s){if(50<Uh)throw Uh=0,$S=null,Error(i(185));for(var u=s.return;u!==null;)s=u,u=s.return;return s.tag===3?s.stateNode:null}var jc={};function jX(s,u,h,m){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(s,u,h,m){return new jX(s,u,h,m)}function b2(s){return s=s.prototype,!(!s||!s.isReactComponent)}function vo(s,u){var h=s.alternate;return h===null?(h=Xi(s.tag,u,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=u,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,u=s.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function jO(s,u){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=u,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,u=h.dependencies,s.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),s}function X0(s,u,h,m,x,E){var C=0;if(m=s,typeof s=="function")b2(s)&&(C=1);else if(typeof s=="string")C=YV(s,h,pe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=Xi(31,h,u,x),s.elementType=R,s.lanes=E,s;case b:return Vl(h.children,x,E,u);case S:C=8,x|=24;break;case _:return s=Xi(12,h,u,x|2),s.elementType=_,s.lanes=E,s;case M:return s=Xi(13,h,u,x),s.elementType=M,s.lanes=E,s;case k:return s=Xi(19,h,u,x),s.elementType=k,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:C=10;break e;case w:C=9;break e;case $:C=11;break e;case T:C=14;break e;case N:C=16,m=null;break e}C=29,h=Error(i(130,s===null?"null":typeof s,"")),m=null}return u=Xi(C,h,u,x),u.elementType=s,u.type=m,u.lanes=E,u}function Vl(s,u,h,m){return s=Xi(7,s,m,u),s.lanes=h,s}function x2(s,u,h){return s=Xi(6,s,null,u),s.lanes=h,s}function IO(s){var u=Xi(18,null,null,0);return u.stateNode=s,u}function S2(s,u,h){return u=Xi(4,s.children!==null?s.children:[],s.key,u),u.lanes=h,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}var PO=new WeakMap;function vr(s,u){if(typeof s=="object"&&s!==null){var h=PO.get(s);return h!==void 0?h:(u={value:s,source:u,stack:nh(u)},PO.set(s,u),u)}return{value:s,source:u,stack:nh(u)}}var Ic=[],Pc=0,V0=null,yh=0,br=[],xr=0,xs=null,Aa=1,Ca="";function bo(s,u){Ic[Pc++]=yh,Ic[Pc++]=V0,V0=s,yh=u}function HO(s,u,h){br[xr++]=Aa,br[xr++]=Ca,br[xr++]=xs,xs=s;var m=Aa;s=Ca;var x=32-Gi(m)-1;m&=~(1<<x),h+=1;var E=32-Gi(u)+x;if(30<E){var C=x-x%5;E=(m&(1<<C)-1).toString(32),m>>=C,x-=C,Aa=1<<32-Gi(u)+x|h<<x|m,Ca=E+s}else Aa=1<<E|h<<x|m,Ca=s}function E2(s){s.return!==null&&(bo(s,1),HO(s,1,0))}function _2(s){for(;s===V0;)V0=Ic[--Pc],Ic[Pc]=null,yh=Ic[--Pc],Ic[Pc]=null;for(;s===xs;)xs=br[--xr],br[xr]=null,Ca=br[--xr],br[xr]=null,Aa=br[--xr],br[xr]=null}function GO(s,u){br[xr++]=Aa,br[xr++]=Ca,br[xr++]=xs,Aa=u.id,Ca=u.overflow,xs=s}var kn=null,Mt=null,tt=!1,Ss=null,Sr=!1,w2=Error(i(519));function Es(s){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vh(vr(u,s)),w2}function YO(s){var u=s.stateNode,h=s.type,m=s.memoizedProps;switch(u[Mn]=s,u[Ei]=m,h){case"dialog":Ke("cancel",u),Ke("close",u);break;case"iframe":case"object":case"embed":Ke("load",u);break;case"video":case"audio":for(h=0;h<qh.length;h++)Ke(qh[h],u);break;case"source":Ke("error",u);break;case"img":case"image":case"link":Ke("error",u),Ke("load",u);break;case"details":Ke("toggle",u);break;case"input":Ke("invalid",u),aO(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Ke("invalid",u);break;case"textarea":Ke("invalid",u),sO(u,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||m.suppressHydrationWarning===!0||uN(u.textContent,h)?(m.popover!=null&&(Ke("beforetoggle",u),Ke("toggle",u)),m.onScroll!=null&&Ke("scroll",u),m.onScrollEnd!=null&&Ke("scrollend",u),m.onClick!=null&&(u.onclick=mo),u=!0):u=!1,u||Es(s,!0)}function XO(s){for(kn=s.return;kn;)switch(kn.tag){case 5:case 31:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:kn=kn.return}}function Hc(s){if(s!==kn)return!1;if(!tt)return XO(s),tt=!0,!1;var u=s.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||IS(s.type,s.memoizedProps)),h=!h),h&&Mt&&Es(s),XO(s),u===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Mt=vN(s)}else if(u===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Mt=vN(s)}else u===27?(u=Mt,Fs(s.type)?(s=XS,XS=null,Mt=s):Mt=u):Mt=kn?_r(s.stateNode.nextSibling):null;return!0}function Wl(){Mt=kn=null,tt=!1}function A2(){var s=Ss;return s!==null&&($i===null?$i=s:$i.push.apply($i,s),Ss=null),s}function vh(s){Ss===null?Ss=[s]:Ss.push(s)}var C2=F(null),Ql=null,xo=null;function _s(s,u,h){ae(C2,u._currentValue),u._currentValue=h}function So(s){s._currentValue=C2.current,H(C2)}function $2(s,u,h){for(;s!==null;){var m=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),s===h)break;s=s.return}}function T2(s,u,h,m){var x=s.child;for(x!==null&&(x.return=s);x!==null;){var E=x.dependencies;if(E!==null){var C=x.child;E=E.firstContext;e:for(;E!==null;){var O=E;E=x;for(var L=0;L<u.length;L++)if(O.context===u[L]){E.lanes|=h,O=E.alternate,O!==null&&(O.lanes|=h),$2(E.return,h,s),m||(C=null);break e}E=O.next}}else if(x.tag===18){if(C=x.return,C===null)throw Error(i(341));C.lanes|=h,E=C.alternate,E!==null&&(E.lanes|=h),$2(C,h,s),C=null}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===s){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}}function Gc(s,u,h,m){s=null;for(var x=u,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var C=x.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var O=x.type;Yi(x.pendingProps.value,C.value)||(s!==null?s.push(O):s=[O])}}else if(x===Xe.current){if(C=x.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(s!==null?s.push(Gh):s=[Gh])}x=x.return}s!==null&&T2(u,s,h,m),u.flags|=262144}function W0(s){for(s=s.firstContext;s!==null;){if(!Yi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Zl(s){Ql=s,xo=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function On(s){return VO(Ql,s)}function Q0(s,u){return Ql===null&&Zl(s),VO(s,u)}function VO(s,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},xo===null){if(s===null)throw Error(i(308));xo=u,s.dependencies={lanes:0,firstContext:u},s.flags|=524288}else xo=xo.next=u;return h}var IX=typeof AbortController<"u"?AbortController:function(){var s=[],u=this.signal={aborted:!1,addEventListener:function(h,m){s.push(m)}};this.abort=function(){u.aborted=!0,s.forEach(function(h){return h()})}},PX=e.unstable_scheduleCallback,HX=e.unstable_NormalPriority,rn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function M2(){return{controller:new IX,data:new Map,refCount:0}}function bh(s){s.refCount--,s.refCount===0&&PX(HX,function(){s.controller.abort()})}var xh=null,k2=0,Yc=0,Xc=null;function GX(s,u){if(xh===null){var h=xh=[];k2=0,Yc=NS(),Xc={status:"pending",value:void 0,then:function(m){h.push(m)}}}return k2++,u.then(WO,WO),u}function WO(){if(--k2===0&&xh!==null){Xc!==null&&(Xc.status="fulfilled");var s=xh;xh=null,Yc=0,Xc=null;for(var u=0;u<s.length;u++)(0,s[u])()}}function YX(s,u){var h=[],m={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return s.then(function(){m.status="fulfilled",m.value=u;for(var x=0;x<h.length;x++)(0,h[x])(u)},function(x){for(m.status="rejected",m.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),m}var QO=D.S;D.S=function(s,u){N5=Pi(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&GX(s,u),QO!==null&&QO(s,u)};var Kl=F(null);function O2(){var s=Kl.current;return s!==null?s:At.pooledCache}function Z0(s,u){u===null?ae(Kl,Kl.current):ae(Kl,u.pool)}function ZO(){var s=O2();return s===null?null:{parent:rn._currentValue,pool:s}}var Vc=Error(i(460)),D2=Error(i(474)),K0=Error(i(542)),J0={then:function(){}};function KO(s){return s=s.status,s==="fulfilled"||s==="rejected"}function JO(s,u,h){switch(h=s[h],h===void 0?s.push(u):h!==u&&(u.then(mo,mo),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,tD(s),s;default:if(typeof u.status=="string")u.then(mo,mo);else{if(s=At,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=u,s.status="pending",s.then(function(m){if(u.status==="pending"){var x=u;x.status="fulfilled",x.value=m}},function(m){if(u.status==="pending"){var x=u;x.status="rejected",x.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,tD(s),s}throw eu=u,Vc}}function Jl(s){try{var u=s._init;return u(s._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(eu=h,Vc):h}}var eu=null;function eD(){if(eu===null)throw Error(i(459));var s=eu;return eu=null,s}function tD(s){if(s===Vc||s===K0)throw Error(i(483))}var Wc=null,Sh=0;function em(s){var u=Sh;return Sh+=1,Wc===null&&(Wc=[]),JO(Wc,s,u)}function Eh(s,u){u=u.props.ref,s.ref=u!==void 0?u:null}function tm(s,u){throw u.$$typeof===p?Error(i(525)):(s=Object.prototype.toString.call(u),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s)))}function nD(s){function u(P,j){if(s){var X=P.deletions;X===null?(P.deletions=[j],P.flags|=16):X.push(j)}}function h(P,j){if(!s)return null;for(;j!==null;)u(P,j),j=j.sibling;return null}function m(P){for(var j=new Map;P!==null;)P.key!==null?j.set(P.key,P):j.set(P.index,P),P=P.sibling;return j}function x(P,j){return P=vo(P,j),P.index=0,P.sibling=null,P}function E(P,j,X){return P.index=X,s?(X=P.alternate,X!==null?(X=X.index,X<j?(P.flags|=67108866,j):X):(P.flags|=67108866,j)):(P.flags|=1048576,j)}function C(P){return s&&P.alternate===null&&(P.flags|=67108866),P}function O(P,j,X,re){return j===null||j.tag!==6?(j=x2(X,P.mode,re),j.return=P,j):(j=x(j,X),j.return=P,j)}function L(P,j,X,re){var Oe=X.type;return Oe===b?te(P,j,X.props.children,re,X.key):j!==null&&(j.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===N&&Jl(Oe)===j.type)?(j=x(j,X.props),Eh(j,X),j.return=P,j):(j=X0(X.type,X.key,X.props,null,P.mode,re),Eh(j,X),j.return=P,j)}function V(P,j,X,re){return j===null||j.tag!==4||j.stateNode.containerInfo!==X.containerInfo||j.stateNode.implementation!==X.implementation?(j=S2(X,P.mode,re),j.return=P,j):(j=x(j,X.children||[]),j.return=P,j)}function te(P,j,X,re,Oe){return j===null||j.tag!==7?(j=Vl(X,P.mode,re,Oe),j.return=P,j):(j=x(j,X),j.return=P,j)}function oe(P,j,X){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=x2(""+j,P.mode,X),j.return=P,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case y:return X=X0(j.type,j.key,j.props,null,P.mode,X),Eh(X,j),X.return=P,X;case v:return j=S2(j,P.mode,X),j.return=P,j;case N:return j=Jl(j),oe(P,j,X)}if(z(j)||Q(j))return j=Vl(j,P.mode,X,null),j.return=P,j;if(typeof j.then=="function")return oe(P,em(j),X);if(j.$$typeof===A)return oe(P,Q0(P,j),X);tm(P,j)}return null}function W(P,j,X,re){var Oe=j!==null?j.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Oe!==null?null:O(P,j,""+X,re);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case y:return X.key===Oe?L(P,j,X,re):null;case v:return X.key===Oe?V(P,j,X,re):null;case N:return X=Jl(X),W(P,j,X,re)}if(z(X)||Q(X))return Oe!==null?null:te(P,j,X,re,null);if(typeof X.then=="function")return W(P,j,em(X),re);if(X.$$typeof===A)return W(P,j,Q0(P,X),re);tm(P,X)}return null}function K(P,j,X,re,Oe){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return P=P.get(X)||null,O(j,P,""+re,Oe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case y:return P=P.get(re.key===null?X:re.key)||null,L(j,P,re,Oe);case v:return P=P.get(re.key===null?X:re.key)||null,V(j,P,re,Oe);case N:return re=Jl(re),K(P,j,X,re,Oe)}if(z(re)||Q(re))return P=P.get(X)||null,te(j,P,re,Oe,null);if(typeof re.then=="function")return K(P,j,X,em(re),Oe);if(re.$$typeof===A)return K(P,j,X,Q0(j,re),Oe);tm(j,re)}return null}function we(P,j,X,re){for(var Oe=null,at=null,Ce=j,He=j=0,et=null;Ce!==null&&He<X.length;He++){Ce.index>He?(et=Ce,Ce=null):et=Ce.sibling;var ot=W(P,Ce,X[He],re);if(ot===null){Ce===null&&(Ce=et);break}s&&Ce&&ot.alternate===null&&u(P,Ce),j=E(ot,j,He),at===null?Oe=ot:at.sibling=ot,at=ot,Ce=et}if(He===X.length)return h(P,Ce),tt&&bo(P,He),Oe;if(Ce===null){for(;He<X.length;He++)Ce=oe(P,X[He],re),Ce!==null&&(j=E(Ce,j,He),at===null?Oe=Ce:at.sibling=Ce,at=Ce);return tt&&bo(P,He),Oe}for(Ce=m(Ce);He<X.length;He++)et=K(Ce,P,He,X[He],re),et!==null&&(s&&et.alternate!==null&&Ce.delete(et.key===null?He:et.key),j=E(et,j,He),at===null?Oe=et:at.sibling=et,at=et);return s&&Ce.forEach(function(js){return u(P,js)}),tt&&bo(P,He),Oe}function ze(P,j,X,re){if(X==null)throw Error(i(151));for(var Oe=null,at=null,Ce=j,He=j=0,et=null,ot=X.next();Ce!==null&&!ot.done;He++,ot=X.next()){Ce.index>He?(et=Ce,Ce=null):et=Ce.sibling;var js=W(P,Ce,ot.value,re);if(js===null){Ce===null&&(Ce=et);break}s&&Ce&&js.alternate===null&&u(P,Ce),j=E(js,j,He),at===null?Oe=js:at.sibling=js,at=js,Ce=et}if(ot.done)return h(P,Ce),tt&&bo(P,He),Oe;if(Ce===null){for(;!ot.done;He++,ot=X.next())ot=oe(P,ot.value,re),ot!==null&&(j=E(ot,j,He),at===null?Oe=ot:at.sibling=ot,at=ot);return tt&&bo(P,He),Oe}for(Ce=m(Ce);!ot.done;He++,ot=X.next())ot=K(Ce,P,He,ot.value,re),ot!==null&&(s&&ot.alternate!==null&&Ce.delete(ot.key===null?He:ot.key),j=E(ot,j,He),at===null?Oe=ot:at.sibling=ot,at=ot);return s&&Ce.forEach(function(iW){return u(P,iW)}),tt&&bo(P,He),Oe}function _t(P,j,X,re){if(typeof X=="object"&&X!==null&&X.type===b&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case y:e:{for(var Oe=X.key;j!==null;){if(j.key===Oe){if(Oe=X.type,Oe===b){if(j.tag===7){h(P,j.sibling),re=x(j,X.props.children),re.return=P,P=re;break e}}else if(j.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===N&&Jl(Oe)===j.type){h(P,j.sibling),re=x(j,X.props),Eh(re,X),re.return=P,P=re;break e}h(P,j);break}else u(P,j);j=j.sibling}X.type===b?(re=Vl(X.props.children,P.mode,re,X.key),re.return=P,P=re):(re=X0(X.type,X.key,X.props,null,P.mode,re),Eh(re,X),re.return=P,P=re)}return C(P);case v:e:{for(Oe=X.key;j!==null;){if(j.key===Oe)if(j.tag===4&&j.stateNode.containerInfo===X.containerInfo&&j.stateNode.implementation===X.implementation){h(P,j.sibling),re=x(j,X.children||[]),re.return=P,P=re;break e}else{h(P,j);break}else u(P,j);j=j.sibling}re=S2(X,P.mode,re),re.return=P,P=re}return C(P);case N:return X=Jl(X),_t(P,j,X,re)}if(z(X))return we(P,j,X,re);if(Q(X)){if(Oe=Q(X),typeof Oe!="function")throw Error(i(150));return X=Oe.call(X),ze(P,j,X,re)}if(typeof X.then=="function")return _t(P,j,em(X),re);if(X.$$typeof===A)return _t(P,j,Q0(P,X),re);tm(P,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,j!==null&&j.tag===6?(h(P,j.sibling),re=x(j,X),re.return=P,P=re):(h(P,j),re=x2(X,P.mode,re),re.return=P,P=re),C(P)):h(P,j)}return function(P,j,X,re){try{Sh=0;var Oe=_t(P,j,X,re);return Wc=null,Oe}catch(Ce){if(Ce===Vc||Ce===K0)throw Ce;var at=Xi(29,Ce,null,P.mode);return at.lanes=re,at.return=P,at}finally{}}}var tu=nD(!0),iD=nD(!1),ws=!1;function N2(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function R2(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function As(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Cs(s,u,h){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(ft&2)!==0){var x=m.pending;return x===null?u.next=u:(u.next=x.next,x.next=u),m.pending=u,u=Y0(s),qO(s,null,h),u}return G0(s,m,u,h),Y0(s)}function _h(s,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var m=u.lanes;m&=s.pendingLanes,h|=m,u.lanes=h,Vk(s,h)}}function z2(s,u){var h=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var x=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var C={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?x=E=C:E=E.next=C,h=h.next}while(h!==null);E===null?x=E=u:E=E.next=u}else x=E=u;h={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=u:s.next=u,h.lastBaseUpdate=u}var F2=!1;function wh(){if(F2){var s=Xc;if(s!==null)throw s}}function Ah(s,u,h,m){F2=!1;var x=s.updateQueue;ws=!1;var E=x.firstBaseUpdate,C=x.lastBaseUpdate,O=x.shared.pending;if(O!==null){x.shared.pending=null;var L=O,V=L.next;L.next=null,C===null?E=V:C.next=V,C=L;var te=s.alternate;te!==null&&(te=te.updateQueue,O=te.lastBaseUpdate,O!==C&&(O===null?te.firstBaseUpdate=V:O.next=V,te.lastBaseUpdate=L))}if(E!==null){var oe=x.baseState;C=0,te=V=L=null,O=E;do{var W=O.lane&-536870913,K=W!==O.lane;if(K?(Je&W)===W:(m&W)===W){W!==0&&W===Yc&&(F2=!0),te!==null&&(te=te.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var we=s,ze=O;W=u;var _t=h;switch(ze.tag){case 1:if(we=ze.payload,typeof we=="function"){oe=we.call(_t,oe,W);break e}oe=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=ze.payload,W=typeof we=="function"?we.call(_t,oe,W):we,W==null)break e;oe=g({},oe,W);break e;case 2:ws=!0}}W=O.callback,W!==null&&(s.flags|=64,K&&(s.flags|=8192),K=x.callbacks,K===null?x.callbacks=[W]:K.push(W))}else K={lane:W,tag:O.tag,payload:O.payload,callback:O.callback,next:null},te===null?(V=te=K,L=oe):te=te.next=K,C|=W;if(O=O.next,O===null){if(O=x.shared.pending,O===null)break;K=O,O=K.next,K.next=null,x.lastBaseUpdate=K,x.shared.pending=null}}while(!0);te===null&&(L=oe),x.baseState=L,x.firstBaseUpdate=V,x.lastBaseUpdate=te,E===null&&(x.shared.lanes=0),Os|=C,s.lanes=C,s.memoizedState=oe}}function rD(s,u){if(typeof s!="function")throw Error(i(191,s));s.call(u)}function aD(s,u){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)rD(h[s],u)}var Qc=F(null),nm=F(0);function oD(s,u){s=ko,ae(nm,s),ae(Qc,u),ko=s|u.baseLanes}function L2(){ae(nm,ko),ae(Qc,Qc.current)}function U2(){ko=nm.current,H(Qc),H(nm)}var Vi=F(null),Er=null;function $s(s){var u=s.alternate;ae(Wt,Wt.current&1),ae(Vi,s),Er===null&&(u===null||Qc.current!==null||u.memoizedState!==null)&&(Er=s)}function B2(s){ae(Wt,Wt.current),ae(Vi,s),Er===null&&(Er=s)}function sD(s){s.tag===22?(ae(Wt,Wt.current),ae(Vi,s),Er===null&&(Er=s)):Ts()}function Ts(){ae(Wt,Wt.current),ae(Vi,Vi.current)}function Wi(s){H(Vi),Er===s&&(Er=null),H(Wt)}var Wt=F(0);function im(s){for(var u=s;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||GS(h)||YS(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Eo=0,Ie=null,St=null,an=null,rm=!1,Zc=!1,nu=!1,am=0,Ch=0,Kc=null,XX=0;function It(){throw Error(i(321))}function q2(s,u){if(u===null)return!1;for(var h=0;h<u.length&&h<s.length;h++)if(!Yi(s[h],u[h]))return!1;return!0}function j2(s,u,h,m,x,E){return Eo=E,Ie=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,D.H=s===null||s.memoizedState===null?HD:nS,nu=!1,E=h(m,x),nu=!1,Zc&&(E=uD(u,h,m,x)),lD(s),E}function lD(s){D.H=Mh;var u=St!==null&&St.next!==null;if(Eo=0,an=St=Ie=null,rm=!1,Ch=0,Kc=null,u)throw Error(i(300));s===null||on||(s=s.dependencies,s!==null&&W0(s)&&(on=!0))}function uD(s,u,h,m){Ie=s;var x=0;do{if(Zc&&(Kc=null),Ch=0,Zc=!1,25<=x)throw Error(i(301));if(x+=1,an=St=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}D.H=GD,E=u(h,m)}while(Zc);return E}function VX(){var s=D.H,u=s.useState()[0];return u=typeof u.then=="function"?$h(u):u,s=s.useState()[0],(St!==null?St.memoizedState:null)!==s&&(Ie.flags|=1024),u}function I2(){var s=am!==0;return am=0,s}function P2(s,u,h){u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~h}function H2(s){if(rm){for(s=s.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}rm=!1}Eo=0,an=St=Ie=null,Zc=!1,Ch=am=0,Kc=null}function ri(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Ie.memoizedState=an=s:an=an.next=s,an}function Qt(){if(St===null){var s=Ie.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var u=an===null?Ie.memoizedState:an.next;if(u!==null)an=u,St=s;else{if(s===null)throw Ie.alternate===null?Error(i(467)):Error(i(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},an===null?Ie.memoizedState=an=s:an=an.next=s}return an}function om(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $h(s){var u=Ch;return Ch+=1,Kc===null&&(Kc=[]),s=JO(Kc,s,u),u=Ie,(an===null?u.memoizedState:an.next)===null&&(u=u.alternate,D.H=u===null||u.memoizedState===null?HD:nS),s}function sm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return $h(s);if(s.$$typeof===A)return On(s)}throw Error(i(438,String(s)))}function G2(s){var u=null,h=Ie.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var m=Ie.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(x){return x.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=om(),Ie.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(s),m=0;m<s;m++)h[m]=B;return u.index++,h}function _o(s,u){return typeof u=="function"?u(s):u}function lm(s){var u=Qt();return Y2(u,St,s)}function Y2(s,u,h){var m=s.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var x=s.baseQueue,E=m.pending;if(E!==null){if(x!==null){var C=x.next;x.next=E.next,E.next=C}u.baseQueue=x=E,m.pending=null}if(E=s.baseState,x===null)s.memoizedState=E;else{u=x.next;var O=C=null,L=null,V=u,te=!1;do{var oe=V.lane&-536870913;if(oe!==V.lane?(Je&oe)===oe:(Eo&oe)===oe){var W=V.revertLane;if(W===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),oe===Yc&&(te=!0);else if((Eo&W)===W){V=V.next,W===Yc&&(te=!0);continue}else oe={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},L===null?(O=L=oe,C=E):L=L.next=oe,Ie.lanes|=W,Os|=W;oe=V.action,nu&&h(E,oe),E=V.hasEagerState?V.eagerState:h(E,oe)}else W={lane:oe,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},L===null?(O=L=W,C=E):L=L.next=W,Ie.lanes|=oe,Os|=oe;V=V.next}while(V!==null&&V!==u);if(L===null?C=E:L.next=O,!Yi(E,s.memoizedState)&&(on=!0,te&&(h=Xc,h!==null)))throw h;s.memoizedState=E,s.baseState=C,s.baseQueue=L,m.lastRenderedState=E}return x===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function X2(s){var u=Qt(),h=u.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=s;var m=h.dispatch,x=h.pending,E=u.memoizedState;if(x!==null){h.pending=null;var C=x=x.next;do E=s(E,C.action),C=C.next;while(C!==x);Yi(E,u.memoizedState)||(on=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),h.lastRenderedState=E}return[E,m]}function cD(s,u,h){var m=Ie,x=Qt(),E=tt;if(E){if(h===void 0)throw Error(i(407));h=h()}else h=u();var C=!Yi((St||x).memoizedState,h);if(C&&(x.memoizedState=h,on=!0),x=x.queue,Q2(hD.bind(null,m,x,s),[s]),x.getSnapshot!==u||C||an!==null&&an.memoizedState.tag&1){if(m.flags|=2048,Jc(9,{destroy:void 0},dD.bind(null,m,x,h,u),null),At===null)throw Error(i(349));E||(Eo&127)!==0||fD(m,u,h)}return h}function fD(s,u,h){s.flags|=16384,s={getSnapshot:u,value:h},u=Ie.updateQueue,u===null?(u=om(),Ie.updateQueue=u,u.stores=[s]):(h=u.stores,h===null?u.stores=[s]:h.push(s))}function dD(s,u,h,m){u.value=h,u.getSnapshot=m,gD(u)&&pD(s)}function hD(s,u,h){return h(function(){gD(u)&&pD(s)})}function gD(s){var u=s.getSnapshot;s=s.value;try{var h=u();return!Yi(s,h)}catch{return!0}}function pD(s){var u=Xl(s,2);u!==null&&Ti(u,s,2)}function V2(s){var u=ri();if(typeof s=="function"){var h=s;if(s=h(),nu){ys(!0);try{h()}finally{ys(!1)}}}return u.memoizedState=u.baseState=s,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:s},u}function mD(s,u,h,m){return s.baseState=h,Y2(s,St,typeof m=="function"?m:_o)}function WX(s,u,h,m,x){if(fm(s))throw Error(i(485));if(s=u.action,s!==null){var E={payload:x,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){E.listeners.push(C)}};D.T!==null?h(!0):E.isTransition=!1,m(E),h=u.pending,h===null?(E.next=u.pending=E,yD(u,E)):(E.next=h.next,u.pending=h.next=E)}}function yD(s,u){var h=u.action,m=u.payload,x=s.state;if(u.isTransition){var E=D.T,C={};D.T=C;try{var O=h(x,m),L=D.S;L!==null&&L(C,O),vD(s,u,O)}catch(V){W2(s,u,V)}finally{E!==null&&C.types!==null&&(E.types=C.types),D.T=E}}else try{E=h(x,m),vD(s,u,E)}catch(V){W2(s,u,V)}}function vD(s,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){bD(s,u,m)},function(m){return W2(s,u,m)}):bD(s,u,h)}function bD(s,u,h){u.status="fulfilled",u.value=h,xD(u),s.state=h,u=s.pending,u!==null&&(h=u.next,h===u?s.pending=null:(h=h.next,u.next=h,yD(s,h)))}function W2(s,u,h){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=h,xD(u),u=u.next;while(u!==m)}s.action=null}function xD(s){s=s.listeners;for(var u=0;u<s.length;u++)(0,s[u])()}function SD(s,u){return u}function ED(s,u){if(tt){var h=At.formState;if(h!==null){e:{var m=Ie;if(tt){if(Mt){t:{for(var x=Mt,E=Sr;x.nodeType!==8;){if(!E){x=null;break t}if(x=_r(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){Mt=_r(x.nextSibling),m=x.data==="F!";break e}}Es(m)}m=!1}m&&(u=h[0])}}return h=ri(),h.memoizedState=h.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:SD,lastRenderedState:u},h.queue=m,h=jD.bind(null,Ie,m),m.dispatch=h,m=V2(!1),E=tS.bind(null,Ie,!1,m.queue),m=ri(),x={state:u,dispatch:null,action:s,pending:null},m.queue=x,h=WX.bind(null,Ie,x,E,h),x.dispatch=h,m.memoizedState=s,[u,h,!1]}function _D(s){var u=Qt();return wD(u,St,s)}function wD(s,u,h){if(u=Y2(s,u,SD)[0],s=lm(_o)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=$h(u)}catch(C){throw C===Vc?K0:C}else m=u;u=Qt();var x=u.queue,E=x.dispatch;return h!==u.memoizedState&&(Ie.flags|=2048,Jc(9,{destroy:void 0},QX.bind(null,x,h),null)),[m,E,s]}function QX(s,u){s.action=u}function AD(s){var u=Qt(),h=St;if(h!==null)return wD(u,h,s);Qt(),u=u.memoizedState,h=Qt();var m=h.queue.dispatch;return h.memoizedState=s,[u,m,!1]}function Jc(s,u,h,m){return s={tag:s,create:h,deps:m,inst:u,next:null},u=Ie.updateQueue,u===null&&(u=om(),Ie.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=s.next=s:(m=h.next,h.next=s,s.next=m,u.lastEffect=s),s}function CD(){return Qt().memoizedState}function um(s,u,h,m){var x=ri();Ie.flags|=s,x.memoizedState=Jc(1|u,{destroy:void 0},h,m===void 0?null:m)}function cm(s,u,h,m){var x=Qt();m=m===void 0?null:m;var E=x.memoizedState.inst;St!==null&&m!==null&&q2(m,St.memoizedState.deps)?x.memoizedState=Jc(u,E,h,m):(Ie.flags|=s,x.memoizedState=Jc(1|u,E,h,m))}function $D(s,u){um(8390656,8,s,u)}function Q2(s,u){cm(2048,8,s,u)}function ZX(s){Ie.flags|=4;var u=Ie.updateQueue;if(u===null)u=om(),Ie.updateQueue=u,u.events=[s];else{var h=u.events;h===null?u.events=[s]:h.push(s)}}function TD(s){var u=Qt().memoizedState;return ZX({ref:u,nextImpl:s}),function(){if((ft&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function MD(s,u){return cm(4,2,s,u)}function kD(s,u){return cm(4,4,s,u)}function OD(s,u){if(typeof u=="function"){s=s();var h=u(s);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function DD(s,u,h){h=h!=null?h.concat([s]):null,cm(4,4,OD.bind(null,u,s),h)}function Z2(){}function ND(s,u){var h=Qt();u=u===void 0?null:u;var m=h.memoizedState;return u!==null&&q2(u,m[1])?m[0]:(h.memoizedState=[s,u],s)}function RD(s,u){var h=Qt();u=u===void 0?null:u;var m=h.memoizedState;if(u!==null&&q2(u,m[1]))return m[0];if(m=s(),nu){ys(!0);try{s()}finally{ys(!1)}}return h.memoizedState=[m,u],m}function K2(s,u,h){return h===void 0||(Eo&1073741824)!==0&&(Je&261930)===0?s.memoizedState=u:(s.memoizedState=h,s=z5(),Ie.lanes|=s,Os|=s,h)}function zD(s,u,h,m){return Yi(h,u)?h:Qc.current!==null?(s=K2(s,h,m),Yi(s,u)||(on=!0),s):(Eo&42)===0||(Eo&1073741824)!==0&&(Je&261930)===0?(on=!0,s.memoizedState=h):(s=z5(),Ie.lanes|=s,Os|=s,u)}function FD(s,u,h,m,x){var E=q.p;q.p=E!==0&&8>E?E:8;var C=D.T,O={};D.T=O,tS(s,!1,u,h);try{var L=x(),V=D.S;if(V!==null&&V(O,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=YX(L,m);Th(s,u,te,Ki(s))}else Th(s,u,m,Ki(s))}catch(oe){Th(s,u,{then:function(){},status:"rejected",reason:oe},Ki())}finally{q.p=E,C!==null&&O.types!==null&&(C.types=O.types),D.T=C}}function KX(){}function J2(s,u,h,m){if(s.tag!==5)throw Error(i(476));var x=LD(s).queue;FD(s,x,u,Y,h===null?KX:function(){return UD(s),h(m)})}function LD(s){var u=s.memoizedState;if(u!==null)return u;u={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:Y},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:h},next:null},s.memoizedState=u,s=s.alternate,s!==null&&(s.memoizedState=u),u}function UD(s){var u=LD(s);u.next===null&&(u=s.alternate.memoizedState),Th(s,u.next.queue,{},Ki())}function eS(){return On(Gh)}function BD(){return Qt().memoizedState}function qD(){return Qt().memoizedState}function JX(s){for(var u=s.return;u!==null;){switch(u.tag){case 24:case 3:var h=Ki();s=As(h);var m=Cs(u,s,h);m!==null&&(Ti(m,u,h),_h(m,u,h)),u={cache:M2()},s.payload=u;return}u=u.return}}function eV(s,u,h){var m=Ki();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},fm(s)?ID(u,h):(h=v2(s,u,h,m),h!==null&&(Ti(h,s,m),PD(h,u,m)))}function jD(s,u,h){var m=Ki();Th(s,u,h,m)}function Th(s,u,h,m){var x={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(fm(s))ID(u,x);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var C=u.lastRenderedState,O=E(C,h);if(x.hasEagerState=!0,x.eagerState=O,Yi(O,C))return G0(s,u,x,0),At===null&&H0(),!1}catch{}finally{}if(h=v2(s,u,x,m),h!==null)return Ti(h,s,m),PD(h,u,m),!0}return!1}function tS(s,u,h,m){if(m={lane:2,revertLane:NS(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},fm(s)){if(u)throw Error(i(479))}else u=v2(s,h,m,2),u!==null&&Ti(u,s,2)}function fm(s){var u=s.alternate;return s===Ie||u!==null&&u===Ie}function ID(s,u){Zc=rm=!0;var h=s.pending;h===null?u.next=u:(u.next=h.next,h.next=u),s.pending=u}function PD(s,u,h){if((h&4194048)!==0){var m=u.lanes;m&=s.pendingLanes,h|=m,u.lanes=h,Vk(s,h)}}var Mh={readContext:On,use:sm,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};Mh.useEffectEvent=It;var HD={readContext:On,use:sm,useCallback:function(s,u){return ri().memoizedState=[s,u===void 0?null:u],s},useContext:On,useEffect:$D,useImperativeHandle:function(s,u,h){h=h!=null?h.concat([s]):null,um(4194308,4,OD.bind(null,u,s),h)},useLayoutEffect:function(s,u){return um(4194308,4,s,u)},useInsertionEffect:function(s,u){um(4,2,s,u)},useMemo:function(s,u){var h=ri();u=u===void 0?null:u;var m=s();if(nu){ys(!0);try{s()}finally{ys(!1)}}return h.memoizedState=[m,u],m},useReducer:function(s,u,h){var m=ri();if(h!==void 0){var x=h(u);if(nu){ys(!0);try{h(u)}finally{ys(!1)}}}else x=u;return m.memoizedState=m.baseState=x,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:x},m.queue=s,s=s.dispatch=eV.bind(null,Ie,s),[m.memoizedState,s]},useRef:function(s){var u=ri();return s={current:s},u.memoizedState=s},useState:function(s){s=V2(s);var u=s.queue,h=jD.bind(null,Ie,u);return u.dispatch=h,[s.memoizedState,h]},useDebugValue:Z2,useDeferredValue:function(s,u){var h=ri();return K2(h,s,u)},useTransition:function(){var s=V2(!1);return s=FD.bind(null,Ie,s.queue,!0,!1),ri().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,u,h){var m=Ie,x=ri();if(tt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=u(),At===null)throw Error(i(349));(Je&127)!==0||fD(m,u,h)}x.memoizedState=h;var E={value:h,getSnapshot:u};return x.queue=E,$D(hD.bind(null,m,E,s),[s]),m.flags|=2048,Jc(9,{destroy:void 0},dD.bind(null,m,E,h,u),null),h},useId:function(){var s=ri(),u=At.identifierPrefix;if(tt){var h=Ca,m=Aa;h=(m&~(1<<32-Gi(m)-1)).toString(32)+h,u="_"+u+"R_"+h,h=am++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=XX++,u="_"+u+"r_"+h.toString(32)+"_";return s.memoizedState=u},useHostTransitionStatus:eS,useFormState:ED,useActionState:ED,useOptimistic:function(s){var u=ri();u.memoizedState=u.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=tS.bind(null,Ie,!0,h),h.dispatch=u,[s,u]},useMemoCache:G2,useCacheRefresh:function(){return ri().memoizedState=JX.bind(null,Ie)},useEffectEvent:function(s){var u=ri(),h={impl:s};return u.memoizedState=h,function(){if((ft&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},nS={readContext:On,use:sm,useCallback:ND,useContext:On,useEffect:Q2,useImperativeHandle:DD,useInsertionEffect:MD,useLayoutEffect:kD,useMemo:RD,useReducer:lm,useRef:CD,useState:function(){return lm(_o)},useDebugValue:Z2,useDeferredValue:function(s,u){var h=Qt();return zD(h,St.memoizedState,s,u)},useTransition:function(){var s=lm(_o)[0],u=Qt().memoizedState;return[typeof s=="boolean"?s:$h(s),u]},useSyncExternalStore:cD,useId:BD,useHostTransitionStatus:eS,useFormState:_D,useActionState:_D,useOptimistic:function(s,u){var h=Qt();return mD(h,St,s,u)},useMemoCache:G2,useCacheRefresh:qD};nS.useEffectEvent=TD;var GD={readContext:On,use:sm,useCallback:ND,useContext:On,useEffect:Q2,useImperativeHandle:DD,useInsertionEffect:MD,useLayoutEffect:kD,useMemo:RD,useReducer:X2,useRef:CD,useState:function(){return X2(_o)},useDebugValue:Z2,useDeferredValue:function(s,u){var h=Qt();return St===null?K2(h,s,u):zD(h,St.memoizedState,s,u)},useTransition:function(){var s=X2(_o)[0],u=Qt().memoizedState;return[typeof s=="boolean"?s:$h(s),u]},useSyncExternalStore:cD,useId:BD,useHostTransitionStatus:eS,useFormState:AD,useActionState:AD,useOptimistic:function(s,u){var h=Qt();return St!==null?mD(h,St,s,u):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:G2,useCacheRefresh:qD};GD.useEffectEvent=TD;function iS(s,u,h,m){u=s.memoizedState,h=h(m,u),h=h==null?u:g({},u,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var rS={enqueueSetState:function(s,u,h){s=s._reactInternals;var m=Ki(),x=As(m);x.payload=u,h!=null&&(x.callback=h),u=Cs(s,x,m),u!==null&&(Ti(u,s,m),_h(u,s,m))},enqueueReplaceState:function(s,u,h){s=s._reactInternals;var m=Ki(),x=As(m);x.tag=1,x.payload=u,h!=null&&(x.callback=h),u=Cs(s,x,m),u!==null&&(Ti(u,s,m),_h(u,s,m))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var h=Ki(),m=As(h);m.tag=2,u!=null&&(m.callback=u),u=Cs(s,m,h),u!==null&&(Ti(u,s,h),_h(u,s,h))}};function YD(s,u,h,m,x,E,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,E,C):u.prototype&&u.prototype.isPureReactComponent?!ph(h,m)||!ph(x,E):!0}function XD(s,u,h,m){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,m),u.state!==s&&rS.enqueueReplaceState(u,u.state,null)}function iu(s,u){var h=u;if("ref"in u){h={};for(var m in u)m!=="ref"&&(h[m]=u[m])}if(s=s.defaultProps){h===u&&(h=g({},h));for(var x in s)h[x]===void 0&&(h[x]=s[x])}return h}function VD(s){P0(s)}function WD(s){console.error(s)}function QD(s){P0(s)}function dm(s,u){try{var h=s.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function ZD(s,u,h){try{var m=s.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function aS(s,u,h){return h=As(h),h.tag=3,h.payload={element:null},h.callback=function(){dm(s,u)},h}function KD(s){return s=As(s),s.tag=3,s}function JD(s,u,h,m){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;s.payload=function(){return x(E)},s.callback=function(){ZD(u,h,m)}}var C=h.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){ZD(u,h,m),typeof x!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function tV(s,u,h,m,x){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=h.alternate,u!==null&&Gc(u,h,x,!0),h=Vi.current,h!==null){switch(h.tag){case 31:case 13:return Er===null?wm():h.alternate===null&&Pt===0&&(Pt=3),h.flags&=-257,h.flags|=65536,h.lanes=x,m===J0?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([m]):u.add(m),kS(s,m,x)),!1;case 22:return h.flags|=65536,m===J0?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([m]):h.add(m)),kS(s,m,x)),!1}throw Error(i(435,h.tag))}return kS(s,m,x),wm(),!1}if(tt)return u=Vi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=x,m!==w2&&(s=Error(i(422),{cause:m}),vh(vr(s,h)))):(m!==w2&&(u=Error(i(423),{cause:m}),vh(vr(u,h))),s=s.current.alternate,s.flags|=65536,x&=-x,s.lanes|=x,m=vr(m,h),x=aS(s.stateNode,m,x),z2(s,x),Pt!==4&&(Pt=2)),!1;var E=Error(i(520),{cause:m});if(E=vr(E,h),Lh===null?Lh=[E]:Lh.push(E),Pt!==4&&(Pt=2),u===null)return!0;m=vr(m,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,s=x&-x,h.lanes|=s,s=aS(h.stateNode,m,s),z2(h,s),!1;case 1:if(u=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ds===null||!Ds.has(E))))return h.flags|=65536,x&=-x,h.lanes|=x,x=KD(x),JD(x,s,h,m),z2(h,x),!1}h=h.return}while(h!==null);return!1}var oS=Error(i(461)),on=!1;function Dn(s,u,h,m){u.child=s===null?iD(u,null,h,m):tu(u,s.child,h,m)}function e5(s,u,h,m,x){h=h.render;var E=u.ref;if("ref"in m){var C={};for(var O in m)O!=="ref"&&(C[O]=m[O])}else C=m;return Zl(u),m=j2(s,u,h,C,E,x),O=I2(),s!==null&&!on?(P2(s,u,x),wo(s,u,x)):(tt&&O&&E2(u),u.flags|=1,Dn(s,u,m,x),u.child)}function t5(s,u,h,m,x){if(s===null){var E=h.type;return typeof E=="function"&&!b2(E)&&E.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=E,n5(s,u,E,m,x)):(s=X0(h.type,null,m,u,u.mode,x),s.ref=u.ref,s.return=u,u.child=s)}if(E=s.child,!gS(s,x)){var C=E.memoizedProps;if(h=h.compare,h=h!==null?h:ph,h(C,m)&&s.ref===u.ref)return wo(s,u,x)}return u.flags|=1,s=vo(E,m),s.ref=u.ref,s.return=u,u.child=s}function n5(s,u,h,m,x){if(s!==null){var E=s.memoizedProps;if(ph(E,m)&&s.ref===u.ref)if(on=!1,u.pendingProps=m=E,gS(s,x))(s.flags&131072)!==0&&(on=!0);else return u.lanes=s.lanes,wo(s,u,x)}return sS(s,u,h,m,x)}function i5(s,u,h,m){var x=m.children,E=s!==null?s.memoizedState:null;if(s===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((u.flags&128)!==0){if(E=E!==null?E.baseLanes|h:h,s!==null){for(m=u.child=s.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;m=x&~E}else m=0,u.child=null;return r5(s,u,E,h,m)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},s!==null&&Z0(u,E!==null?E.cachePool:null),E!==null?oD(u,E):L2(),sD(u);else return m=u.lanes=536870912,r5(s,u,E!==null?E.baseLanes|h:h,h,m)}else E!==null?(Z0(u,E.cachePool),oD(u,E),Ts(),u.memoizedState=null):(s!==null&&Z0(u,null),L2(),Ts());return Dn(s,u,x,h),u.child}function kh(s,u){return s!==null&&s.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function r5(s,u,h,m,x){var E=O2();return E=E===null?null:{parent:rn._currentValue,pool:E},u.memoizedState={baseLanes:h,cachePool:E},s!==null&&Z0(u,null),L2(),sD(u),s!==null&&Gc(s,u,m,!0),u.childLanes=x,null}function hm(s,u){return u=pm({mode:u.mode,children:u.children},s.mode),u.ref=s.ref,s.child=u,u.return=s,u}function a5(s,u,h){return tu(u,s.child,null,h),s=hm(u,u.pendingProps),s.flags|=2,Wi(u),u.memoizedState=null,s}function nV(s,u,h){var m=u.pendingProps,x=(u.flags&128)!==0;if(u.flags&=-129,s===null){if(tt){if(m.mode==="hidden")return s=hm(u,m),u.lanes=536870912,kh(null,s);if(B2(u),(s=Mt)?(s=yN(s,Sr),s=s!==null&&s.data==="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:xs!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},h=IO(s),h.return=u,u.child=h,kn=u,Mt=null)):s=null,s===null)throw Es(u);return u.lanes=536870912,null}return hm(u,m)}var E=s.memoizedState;if(E!==null){var C=E.dehydrated;if(B2(u),x)if(u.flags&256)u.flags&=-257,u=a5(s,u,h);else if(u.memoizedState!==null)u.child=s.child,u.flags|=128,u=null;else throw Error(i(558));else if(on||Gc(s,u,h,!1),x=(h&s.childLanes)!==0,on||x){if(m=At,m!==null&&(C=Wk(m,h),C!==0&&C!==E.retryLane))throw E.retryLane=C,Xl(s,C),Ti(m,s,C),oS;wm(),u=a5(s,u,h)}else s=E.treeContext,Mt=_r(C.nextSibling),kn=u,tt=!0,Ss=null,Sr=!1,s!==null&&GO(u,s),u=hm(u,m),u.flags|=4096;return u}return s=vo(s.child,{mode:m.mode,children:m.children}),s.ref=u.ref,u.child=s,s.return=u,s}function gm(s,u){var h=u.ref;if(h===null)s!==null&&s.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(s===null||s.ref!==h)&&(u.flags|=4194816)}}function sS(s,u,h,m,x){return Zl(u),h=j2(s,u,h,m,void 0,x),m=I2(),s!==null&&!on?(P2(s,u,x),wo(s,u,x)):(tt&&m&&E2(u),u.flags|=1,Dn(s,u,h,x),u.child)}function o5(s,u,h,m,x,E){return Zl(u),u.updateQueue=null,h=uD(u,m,h,x),lD(s),m=I2(),s!==null&&!on?(P2(s,u,E),wo(s,u,E)):(tt&&m&&E2(u),u.flags|=1,Dn(s,u,h,E),u.child)}function s5(s,u,h,m,x){if(Zl(u),u.stateNode===null){var E=jc,C=h.contextType;typeof C=="object"&&C!==null&&(E=On(C)),E=new h(m,E),u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=rS,u.stateNode=E,E._reactInternals=u,E=u.stateNode,E.props=m,E.state=u.memoizedState,E.refs={},N2(u),C=h.contextType,E.context=typeof C=="object"&&C!==null?On(C):jc,E.state=u.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(iS(u,h,C,m),E.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(C=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),C!==E.state&&rS.enqueueReplaceState(E,E.state,null),Ah(u,m,E,x),wh(),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(s===null){E=u.stateNode;var O=u.memoizedProps,L=iu(h,O);E.props=L;var V=E.context,te=h.contextType;C=jc,typeof te=="object"&&te!==null&&(C=On(te));var oe=h.getDerivedStateFromProps;te=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function",O=u.pendingProps!==O,te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O||V!==C)&&XD(u,E,m,C),ws=!1;var W=u.memoizedState;E.state=W,Ah(u,m,E,x),wh(),V=u.memoizedState,O||W!==V||ws?(typeof oe=="function"&&(iS(u,h,oe,m),V=u.memoizedState),(L=ws||YD(u,h,L,m,W,V,C))?(te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(u.flags|=4194308)):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=V),E.props=m,E.state=V,E.context=C,m=L):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{E=u.stateNode,R2(s,u),C=u.memoizedProps,te=iu(h,C),E.props=te,oe=u.pendingProps,W=E.context,V=h.contextType,L=jc,typeof V=="object"&&V!==null&&(L=On(V)),O=h.getDerivedStateFromProps,(V=typeof O=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==oe||W!==L)&&XD(u,E,m,L),ws=!1,W=u.memoizedState,E.state=W,Ah(u,m,E,x),wh();var K=u.memoizedState;C!==oe||W!==K||ws||s!==null&&s.dependencies!==null&&W0(s.dependencies)?(typeof O=="function"&&(iS(u,h,O,m),K=u.memoizedState),(te=ws||YD(u,h,te,m,W,K,L)||s!==null&&s.dependencies!==null&&W0(s.dependencies))?(V||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,K,L),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,K,L)),typeof E.componentDidUpdate=="function"&&(u.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=K),E.props=m,E.state=K,E.context=L,m=te):(typeof E.componentDidUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(u.flags|=1024),m=!1)}return E=m,gm(s,u),m=(u.flags&128)!==0,E||m?(E=u.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:E.render(),u.flags|=1,s!==null&&m?(u.child=tu(u,s.child,null,x),u.child=tu(u,null,h,x)):Dn(s,u,h,x),u.memoizedState=E.state,s=u.child):s=wo(s,u,x),s}function l5(s,u,h,m){return Wl(),u.flags|=256,Dn(s,u,h,m),u.child}var lS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uS(s){return{baseLanes:s,cachePool:ZO()}}function cS(s,u,h){return s=s!==null?s.childLanes&~h:0,u&&(s|=Zi),s}function u5(s,u,h){var m=u.pendingProps,x=!1,E=(u.flags&128)!==0,C;if((C=E)||(C=s!==null&&s.memoizedState===null?!1:(Wt.current&2)!==0),C&&(x=!0,u.flags&=-129),C=(u.flags&32)!==0,u.flags&=-33,s===null){if(tt){if(x?$s(u):Ts(),(s=Mt)?(s=yN(s,Sr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:xs!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},h=IO(s),h.return=u,u.child=h,kn=u,Mt=null)):s=null,s===null)throw Es(u);return YS(s)?u.lanes=32:u.lanes=536870912,null}var O=m.children;return m=m.fallback,x?(Ts(),x=u.mode,O=pm({mode:"hidden",children:O},x),m=Vl(m,x,h,null),O.return=u,m.return=u,O.sibling=m,u.child=O,m=u.child,m.memoizedState=uS(h),m.childLanes=cS(s,C,h),u.memoizedState=lS,kh(null,m)):($s(u),fS(u,O))}var L=s.memoizedState;if(L!==null&&(O=L.dehydrated,O!==null)){if(E)u.flags&256?($s(u),u.flags&=-257,u=dS(s,u,h)):u.memoizedState!==null?(Ts(),u.child=s.child,u.flags|=128,u=null):(Ts(),O=m.fallback,x=u.mode,m=pm({mode:"visible",children:m.children},x),O=Vl(O,x,h,null),O.flags|=2,m.return=u,O.return=u,m.sibling=O,u.child=m,tu(u,s.child,null,h),m=u.child,m.memoizedState=uS(h),m.childLanes=cS(s,C,h),u.memoizedState=lS,u=kh(null,m));else if($s(u),YS(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var V=C.dgst;C=V,m=Error(i(419)),m.stack="",m.digest=C,vh({value:m,source:null,stack:null}),u=dS(s,u,h)}else if(on||Gc(s,u,h,!1),C=(h&s.childLanes)!==0,on||C){if(C=At,C!==null&&(m=Wk(C,h),m!==0&&m!==L.retryLane))throw L.retryLane=m,Xl(s,m),Ti(C,s,m),oS;GS(O)||wm(),u=dS(s,u,h)}else GS(O)?(u.flags|=192,u.child=s.child,u=null):(s=L.treeContext,Mt=_r(O.nextSibling),kn=u,tt=!0,Ss=null,Sr=!1,s!==null&&GO(u,s),u=fS(u,m.children),u.flags|=4096);return u}return x?(Ts(),O=m.fallback,x=u.mode,L=s.child,V=L.sibling,m=vo(L,{mode:"hidden",children:m.children}),m.subtreeFlags=L.subtreeFlags&65011712,V!==null?O=vo(V,O):(O=Vl(O,x,h,null),O.flags|=2),O.return=u,m.return=u,m.sibling=O,u.child=m,kh(null,m),m=u.child,O=s.child.memoizedState,O===null?O=uS(h):(x=O.cachePool,x!==null?(L=rn._currentValue,x=x.parent!==L?{parent:L,pool:L}:x):x=ZO(),O={baseLanes:O.baseLanes|h,cachePool:x}),m.memoizedState=O,m.childLanes=cS(s,C,h),u.memoizedState=lS,kh(s.child,m)):($s(u),h=s.child,s=h.sibling,h=vo(h,{mode:"visible",children:m.children}),h.return=u,h.sibling=null,s!==null&&(C=u.deletions,C===null?(u.deletions=[s],u.flags|=16):C.push(s)),u.child=h,u.memoizedState=null,h)}function fS(s,u){return u=pm({mode:"visible",children:u},s.mode),u.return=s,s.child=u}function pm(s,u){return s=Xi(22,s,null,u),s.lanes=0,s}function dS(s,u,h){return tu(u,s.child,null,h),s=fS(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function c5(s,u,h){s.lanes|=u;var m=s.alternate;m!==null&&(m.lanes|=u),$2(s.return,u,h)}function hS(s,u,h,m,x,E){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:x,treeForkCount:E}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=h,C.tailMode=x,C.treeForkCount=E)}function f5(s,u,h){var m=u.pendingProps,x=m.revealOrder,E=m.tail;m=m.children;var C=Wt.current,O=(C&2)!==0;if(O?(C=C&1|2,u.flags|=128):C&=1,ae(Wt,C),Dn(s,u,m,h),m=tt?yh:0,!O&&s!==null&&(s.flags&128)!==0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&c5(s,h,u);else if(s.tag===19)c5(s,h,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(x){case"forwards":for(h=u.child,x=null;h!==null;)s=h.alternate,s!==null&&im(s)===null&&(x=h),h=h.sibling;h=x,h===null?(x=u.child,u.child=null):(x=h.sibling,h.sibling=null),hS(u,!1,x,h,E,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,x=u.child,u.child=null;x!==null;){if(s=x.alternate,s!==null&&im(s)===null){u.child=x;break}s=x.sibling,x.sibling=h,h=x,x=s}hS(u,!0,h,null,E,m);break;case"together":hS(u,!1,null,null,void 0,m);break;default:u.memoizedState=null}return u.child}function wo(s,u,h){if(s!==null&&(u.dependencies=s.dependencies),Os|=u.lanes,(h&u.childLanes)===0)if(s!==null){if(Gc(s,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(s!==null&&u.child!==s.child)throw Error(i(153));if(u.child!==null){for(s=u.child,h=vo(s,s.pendingProps),u.child=h,h.return=u;s.sibling!==null;)s=s.sibling,h=h.sibling=vo(s,s.pendingProps),h.return=u;h.sibling=null}return u.child}function gS(s,u){return(s.lanes&u)!==0?!0:(s=s.dependencies,!!(s!==null&&W0(s)))}function iV(s,u,h){switch(u.tag){case 3:Nt(u,u.stateNode.containerInfo),_s(u,rn,s.memoizedState.cache),Wl();break;case 27:case 5:Fe(u);break;case 4:Nt(u,u.stateNode.containerInfo);break;case 10:_s(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,B2(u),null;break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?($s(u),u.flags|=128,null):(h&u.child.childLanes)!==0?u5(s,u,h):($s(u),s=wo(s,u,h),s!==null?s.sibling:null);$s(u);break;case 19:var x=(s.flags&128)!==0;if(m=(h&u.childLanes)!==0,m||(Gc(s,u,h,!1),m=(h&u.childLanes)!==0),x){if(m)return f5(s,u,h);u.flags|=128}if(x=u.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ae(Wt,Wt.current),m)break;return null;case 22:return u.lanes=0,i5(s,u,h,u.pendingProps);case 24:_s(u,rn,s.memoizedState.cache)}return wo(s,u,h)}function d5(s,u,h){if(s!==null)if(s.memoizedProps!==u.pendingProps)on=!0;else{if(!gS(s,h)&&(u.flags&128)===0)return on=!1,iV(s,u,h);on=(s.flags&131072)!==0}else on=!1,tt&&(u.flags&1048576)!==0&&HO(u,yh,u.index);switch(u.lanes=0,u.tag){case 16:e:{var m=u.pendingProps;if(s=Jl(u.elementType),u.type=s,typeof s=="function")b2(s)?(m=iu(s,m),u.tag=1,u=s5(null,u,s,m,h)):(u.tag=0,u=sS(null,u,s,m,h));else{if(s!=null){var x=s.$$typeof;if(x===$){u.tag=11,u=e5(null,u,s,m,h);break e}else if(x===T){u.tag=14,u=t5(null,u,s,m,h);break e}}throw u=I(s)||s,Error(i(306,u,""))}}return u;case 0:return sS(s,u,u.type,u.pendingProps,h);case 1:return m=u.type,x=iu(m,u.pendingProps),s5(s,u,m,x,h);case 3:e:{if(Nt(u,u.stateNode.containerInfo),s===null)throw Error(i(387));m=u.pendingProps;var E=u.memoizedState;x=E.element,R2(s,u),Ah(u,m,null,h);var C=u.memoizedState;if(m=C.cache,_s(u,rn,m),m!==E.cache&&T2(u,[rn],h,!0),wh(),m=C.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:C.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=l5(s,u,m,h);break e}else if(m!==x){x=vr(Error(i(424)),u),vh(x),u=l5(s,u,m,h);break e}else{switch(s=u.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Mt=_r(s.firstChild),kn=u,tt=!0,Ss=null,Sr=!0,h=iD(u,null,m,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Wl(),m===x){u=wo(s,u,h);break e}Dn(s,u,m,h)}u=u.child}return u;case 26:return gm(s,u),s===null?(h=_N(u.type,null,u.pendingProps,null))?u.memoizedState=h:tt||(h=u.type,s=u.pendingProps,m=Om(De.current).createElement(h),m[Mn]=u,m[Ei]=s,Nn(m,h,s),vn(m),u.stateNode=m):u.memoizedState=_N(u.type,s.memoizedProps,u.pendingProps,s.memoizedState),null;case 27:return Fe(u),s===null&&tt&&(m=u.stateNode=xN(u.type,u.pendingProps,De.current),kn=u,Sr=!0,x=Mt,Fs(u.type)?(XS=x,Mt=_r(m.firstChild)):Mt=x),Dn(s,u,u.pendingProps.children,h),gm(s,u),s===null&&(u.flags|=4194304),u.child;case 5:return s===null&&tt&&((x=m=Mt)&&(m=NV(m,u.type,u.pendingProps,Sr),m!==null?(u.stateNode=m,kn=u,Mt=_r(m.firstChild),Sr=!1,x=!0):x=!1),x||Es(u)),Fe(u),x=u.type,E=u.pendingProps,C=s!==null?s.memoizedProps:null,m=E.children,IS(x,E)?m=null:C!==null&&IS(x,C)&&(u.flags|=32),u.memoizedState!==null&&(x=j2(s,u,VX,null,null,h),Gh._currentValue=x),gm(s,u),Dn(s,u,m,h),u.child;case 6:return s===null&&tt&&((s=h=Mt)&&(h=RV(h,u.pendingProps,Sr),h!==null?(u.stateNode=h,kn=u,Mt=null,s=!0):s=!1),s||Es(u)),null;case 13:return u5(s,u,h);case 4:return Nt(u,u.stateNode.containerInfo),m=u.pendingProps,s===null?u.child=tu(u,null,m,h):Dn(s,u,m,h),u.child;case 11:return e5(s,u,u.type,u.pendingProps,h);case 7:return Dn(s,u,u.pendingProps,h),u.child;case 8:return Dn(s,u,u.pendingProps.children,h),u.child;case 12:return Dn(s,u,u.pendingProps.children,h),u.child;case 10:return m=u.pendingProps,_s(u,u.type,m.value),Dn(s,u,m.children,h),u.child;case 9:return x=u.type._context,m=u.pendingProps.children,Zl(u),x=On(x),m=m(x),u.flags|=1,Dn(s,u,m,h),u.child;case 14:return t5(s,u,u.type,u.pendingProps,h);case 15:return n5(s,u,u.type,u.pendingProps,h);case 19:return f5(s,u,h);case 31:return nV(s,u,h);case 22:return i5(s,u,h,u.pendingProps);case 24:return Zl(u),m=On(rn),s===null?(x=O2(),x===null&&(x=At,E=M2(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=h),x=E),u.memoizedState={parent:m,cache:x},N2(u),_s(u,rn,x)):((s.lanes&h)!==0&&(R2(s,u),Ah(u,null,null,h),wh()),x=s.memoizedState,E=u.memoizedState,x.parent!==m?(x={parent:m,cache:m},u.memoizedState=x,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=x),_s(u,rn,m)):(m=E.cache,_s(u,rn,m),m!==x.cache&&T2(u,[rn],h,!0))),Dn(s,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function Ao(s){s.flags|=4}function pS(s,u,h,m,x){if((u=(s.mode&32)!==0)&&(u=!1),u){if(s.flags|=16777216,(x&335544128)===x)if(s.stateNode.complete)s.flags|=8192;else if(B5())s.flags|=8192;else throw eu=J0,D2}else s.flags&=-16777217}function h5(s,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!TN(u))if(B5())s.flags|=8192;else throw eu=J0,D2}function mm(s,u){u!==null&&(s.flags|=4),s.flags&16384&&(u=s.tag!==22?Yk():536870912,s.lanes|=u,rf|=u)}function Oh(s,u){if(!tt)switch(s.tailMode){case"hidden":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function kt(s){var u=s.alternate!==null&&s.alternate.child===s.child,h=0,m=0;if(u)for(var x=s.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=m,s.childLanes=h,u}function rV(s,u,h){var m=u.pendingProps;switch(_2(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(u),null;case 1:return kt(u),null;case 3:return h=u.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),So(rn),me(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Hc(u)?Ao(u):s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,A2())),kt(u),null;case 26:var x=u.type,E=u.memoizedState;return s===null?(Ao(u),E!==null?(kt(u),h5(u,E)):(kt(u),pS(u,x,null,m,h))):E?E!==s.memoizedState?(Ao(u),kt(u),h5(u,E)):(kt(u),u.flags&=-16777217):(s=s.memoizedProps,s!==m&&Ao(u),kt(u),pS(u,x,s,m,h)),null;case 27:if(qe(u),h=De.current,x=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==m&&Ao(u);else{if(!m){if(u.stateNode===null)throw Error(i(166));return kt(u),null}s=pe.current,Hc(u)?YO(u):(s=xN(x,m,h),u.stateNode=s,Ao(u))}return kt(u),null;case 5:if(qe(u),x=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==m&&Ao(u);else{if(!m){if(u.stateNode===null)throw Error(i(166));return kt(u),null}if(E=pe.current,Hc(u))YO(u);else{var C=Om(De.current);switch(E){case 1:E=C.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:E=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":E=C.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":E=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":E=C.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof m.is=="string"?C.createElement("select",{is:m.is}):C.createElement("select"),m.multiple?E.multiple=!0:m.size&&(E.size=m.size);break;default:E=typeof m.is=="string"?C.createElement(x,{is:m.is}):C.createElement(x)}}E[Mn]=u,E[Ei]=m;e:for(C=u.child;C!==null;){if(C.tag===5||C.tag===6)E.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===u)break e;for(;C.sibling===null;){if(C.return===null||C.return===u)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}u.stateNode=E;e:switch(Nn(E,x,m),x){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Ao(u)}}return kt(u),pS(u,u.type,s===null?null:s.memoizedProps,u.pendingProps,h),null;case 6:if(s&&u.stateNode!=null)s.memoizedProps!==m&&Ao(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(i(166));if(s=De.current,Hc(u)){if(s=u.stateNode,h=u.memoizedProps,m=null,x=kn,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}s[Mn]=u,s=!!(s.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||uN(s.nodeValue,h)),s||Es(u,!0)}else s=Om(s).createTextNode(m),s[Mn]=u,u.stateNode=s}return kt(u),null;case 31:if(h=u.memoizedState,s===null||s.memoizedState!==null){if(m=Hc(u),h!==null){if(s===null){if(!m)throw Error(i(318));if(s=u.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Mn]=u}else Wl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;kt(u),s=!1}else h=A2(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=h),s=!0;if(!s)return u.flags&256?(Wi(u),u):(Wi(u),null);if((u.flags&128)!==0)throw Error(i(558))}return kt(u),null;case 13:if(m=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(x=Hc(u),m!==null&&m.dehydrated!==null){if(s===null){if(!x)throw Error(i(318));if(x=u.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Mn]=u}else Wl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;kt(u),x=!1}else x=A2(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),x=!0;if(!x)return u.flags&256?(Wi(u),u):(Wi(u),null)}return Wi(u),(u.flags&128)!==0?(u.lanes=h,u):(h=m!==null,s=s!==null&&s.memoizedState!==null,h&&(m=u.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)),h!==s&&h&&(u.child.flags|=8192),mm(u,u.updateQueue),kt(u),null);case 4:return me(),s===null&&LS(u.stateNode.containerInfo),kt(u),null;case 10:return So(u.type),kt(u),null;case 19:if(H(Wt),m=u.memoizedState,m===null)return kt(u),null;if(x=(u.flags&128)!==0,E=m.rendering,E===null)if(x)Oh(m,!1);else{if(Pt!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(E=im(s),E!==null){for(u.flags|=128,Oh(m,!1),s=E.updateQueue,u.updateQueue=s,mm(u,s),u.subtreeFlags=0,s=h,h=u.child;h!==null;)jO(h,s),h=h.sibling;return ae(Wt,Wt.current&1|2),tt&&bo(u,m.treeForkCount),u.child}s=s.sibling}m.tail!==null&&Pi()>Sm&&(u.flags|=128,x=!0,Oh(m,!1),u.lanes=4194304)}else{if(!x)if(s=im(E),s!==null){if(u.flags|=128,x=!0,s=s.updateQueue,u.updateQueue=s,mm(u,s),Oh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!E.alternate&&!tt)return kt(u),null}else 2*Pi()-m.renderingStartTime>Sm&&h!==536870912&&(u.flags|=128,x=!0,Oh(m,!1),u.lanes=4194304);m.isBackwards?(E.sibling=u.child,u.child=E):(s=m.last,s!==null?s.sibling=E:u.child=E,m.last=E)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Pi(),s.sibling=null,h=Wt.current,ae(Wt,x?h&1|2:h&1),tt&&bo(u,m.treeForkCount),s):(kt(u),null);case 22:case 23:return Wi(u),U2(),m=u.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(h&536870912)!==0&&(u.flags&128)===0&&(kt(u),u.subtreeFlags&6&&(u.flags|=8192)):kt(u),h=u.updateQueue,h!==null&&mm(u,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048),s!==null&&H(Kl),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),So(rn),kt(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function aV(s,u){switch(_2(u),u.tag){case 1:return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return So(rn),me(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 26:case 27:case 5:return qe(u),null;case 31:if(u.memoizedState!==null){if(Wi(u),u.alternate===null)throw Error(i(340));Wl()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 13:if(Wi(u),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Wl()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return H(Wt),null;case 4:return me(),null;case 10:return So(u.type),null;case 22:case 23:return Wi(u),U2(),s!==null&&H(Kl),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 24:return So(rn),null;case 25:return null;default:return null}}function g5(s,u){switch(_2(u),u.tag){case 3:So(rn),me();break;case 26:case 27:case 5:qe(u);break;case 4:me();break;case 31:u.memoizedState!==null&&Wi(u);break;case 13:Wi(u);break;case 19:H(Wt);break;case 10:So(u.type);break;case 22:case 23:Wi(u),U2(),s!==null&&H(Kl);break;case 24:So(rn)}}function Dh(s,u){try{var h=u.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var x=m.next;h=x;do{if((h.tag&s)===s){m=void 0;var E=h.create,C=h.inst;m=E(),C.destroy=m}h=h.next}while(h!==x)}}catch(O){mt(u,u.return,O)}}function Ms(s,u,h){try{var m=u.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&s)===s){var C=m.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,x=u;var L=h,V=O;try{V()}catch(te){mt(x,L,te)}}}m=m.next}while(m!==E)}}catch(te){mt(u,u.return,te)}}function p5(s){var u=s.updateQueue;if(u!==null){var h=s.stateNode;try{aD(u,h)}catch(m){mt(s,s.return,m)}}}function m5(s,u,h){h.props=iu(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(m){mt(s,u,m)}}function Nh(s,u){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof h=="function"?s.refCleanup=h(m):h.current=m}}catch(x){mt(s,u,x)}}function $a(s,u){var h=s.ref,m=s.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(x){mt(s,u,x)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){mt(s,u,x)}else h.current=null}function y5(s){var u=s.type,h=s.memoizedProps,m=s.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(x){mt(s,s.return,x)}}function mS(s,u,h){try{var m=s.stateNode;$V(m,s.type,h,u),m[Ei]=u}catch(x){mt(s,s.return,x)}}function v5(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Fs(s.type)||s.tag===4}function yS(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||v5(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Fs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vS(s,u,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(s),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=mo));else if(m!==4&&(m===27&&Fs(s.type)&&(h=s.stateNode,u=null),s=s.child,s!==null))for(vS(s,u,h),s=s.sibling;s!==null;)vS(s,u,h),s=s.sibling}function ym(s,u,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,u?h.insertBefore(s,u):h.appendChild(s);else if(m!==4&&(m===27&&Fs(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(ym(s,u,h),s=s.sibling;s!==null;)ym(s,u,h),s=s.sibling}function b5(s){var u=s.stateNode,h=s.memoizedProps;try{for(var m=s.type,x=u.attributes;x.length;)u.removeAttributeNode(x[0]);Nn(u,m,h),u[Mn]=s,u[Ei]=h}catch(E){mt(s,s.return,E)}}var Co=!1,sn=!1,bS=!1,x5=typeof WeakSet=="function"?WeakSet:Set,bn=null;function oV(s,u){if(s=s.containerInfo,qS=Um,s=DO(s),d2(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var C=0,O=-1,L=-1,V=0,te=0,oe=s,W=null;t:for(;;){for(var K;oe!==h||x!==0&&oe.nodeType!==3||(O=C+x),oe!==E||m!==0&&oe.nodeType!==3||(L=C+m),oe.nodeType===3&&(C+=oe.nodeValue.length),(K=oe.firstChild)!==null;)W=oe,oe=K;for(;;){if(oe===s)break t;if(W===h&&++V===x&&(O=C),W===E&&++te===m&&(L=C),(K=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=K}h=O===-1||L===-1?null:{start:O,end:L}}else h=null}h=h||{start:0,end:0}}else h=null;for(jS={focusedElem:s,selectionRange:h},Um=!1,bn=u;bn!==null;)if(u=bn,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,bn=s;else for(;bn!==null;){switch(u=bn,E=u.alternate,s=u.flags,u.tag){case 0:if((s&4)!==0&&(s=u.updateQueue,s=s!==null?s.events:null,s!==null))for(h=0;h<s.length;h++)x=s[h],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,h=u,x=E.memoizedProps,E=E.memoizedState,m=h.stateNode;try{var we=iu(h.type,x);s=m.getSnapshotBeforeUpdate(we,E),m.__reactInternalSnapshotBeforeUpdate=s}catch(ze){mt(h,h.return,ze)}}break;case 3:if((s&1024)!==0){if(s=u.stateNode.containerInfo,h=s.nodeType,h===9)HS(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":HS(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=u.sibling,s!==null){s.return=u.return,bn=s;break}bn=u.return}}function S5(s,u,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:To(s,h),m&4&&Dh(5,h);break;case 1:if(To(s,h),m&4)if(s=h.stateNode,u===null)try{s.componentDidMount()}catch(C){mt(h,h.return,C)}else{var x=iu(h.type,u.memoizedProps);u=u.memoizedState;try{s.componentDidUpdate(x,u,s.__reactInternalSnapshotBeforeUpdate)}catch(C){mt(h,h.return,C)}}m&64&&p5(h),m&512&&Nh(h,h.return);break;case 3:if(To(s,h),m&64&&(s=h.updateQueue,s!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{aD(s,u)}catch(C){mt(h,h.return,C)}}break;case 27:u===null&&m&4&&b5(h);case 26:case 5:To(s,h),u===null&&m&4&&y5(h),m&512&&Nh(h,h.return);break;case 12:To(s,h);break;case 31:To(s,h),m&4&&w5(s,h);break;case 13:To(s,h),m&4&&A5(s,h),m&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=pV.bind(null,h),zV(s,h))));break;case 22:if(m=h.memoizedState!==null||Co,!m){u=u!==null&&u.memoizedState!==null||sn,x=Co;var E=sn;Co=m,(sn=u)&&!E?Mo(s,h,(h.subtreeFlags&8772)!==0):To(s,h),Co=x,sn=E}break;case 30:break;default:To(s,h)}}function E5(s){var u=s.alternate;u!==null&&(s.alternate=null,E5(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&Wx(u)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Rt=null,wi=!1;function $o(s,u,h){for(h=h.child;h!==null;)_5(s,u,h),h=h.sibling}function _5(s,u,h){if(Hi&&typeof Hi.onCommitFiberUnmount=="function")try{Hi.onCommitFiberUnmount(ih,h)}catch{}switch(h.tag){case 26:sn||$a(h,u),$o(s,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:sn||$a(h,u);var m=Rt,x=wi;Fs(h.type)&&(Rt=h.stateNode,wi=!1),$o(s,u,h),Ih(h.stateNode),Rt=m,wi=x;break;case 5:sn||$a(h,u);case 6:if(m=Rt,x=wi,Rt=null,$o(s,u,h),Rt=m,wi=x,Rt!==null)if(wi)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(h.stateNode)}catch(E){mt(h,u,E)}else try{Rt.removeChild(h.stateNode)}catch(E){mt(h,u,E)}break;case 18:Rt!==null&&(wi?(s=Rt,pN(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),df(s)):pN(Rt,h.stateNode));break;case 4:m=Rt,x=wi,Rt=h.stateNode.containerInfo,wi=!0,$o(s,u,h),Rt=m,wi=x;break;case 0:case 11:case 14:case 15:Ms(2,h,u),sn||Ms(4,h,u),$o(s,u,h);break;case 1:sn||($a(h,u),m=h.stateNode,typeof m.componentWillUnmount=="function"&&m5(h,u,m)),$o(s,u,h);break;case 21:$o(s,u,h);break;case 22:sn=(m=sn)||h.memoizedState!==null,$o(s,u,h),sn=m;break;default:$o(s,u,h)}}function w5(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{df(s)}catch(h){mt(u,u.return,h)}}}function A5(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{df(s)}catch(h){mt(u,u.return,h)}}function sV(s){switch(s.tag){case 31:case 13:case 19:var u=s.stateNode;return u===null&&(u=s.stateNode=new x5),u;case 22:return s=s.stateNode,u=s._retryCache,u===null&&(u=s._retryCache=new x5),u;default:throw Error(i(435,s.tag))}}function vm(s,u){var h=sV(s);u.forEach(function(m){if(!h.has(m)){h.add(m);var x=mV.bind(null,s,m);m.then(x,x)}})}function Ai(s,u){var h=u.deletions;if(h!==null)for(var m=0;m<h.length;m++){var x=h[m],E=s,C=u,O=C;e:for(;O!==null;){switch(O.tag){case 27:if(Fs(O.type)){Rt=O.stateNode,wi=!1;break e}break;case 5:Rt=O.stateNode,wi=!1;break e;case 3:case 4:Rt=O.stateNode.containerInfo,wi=!0;break e}O=O.return}if(Rt===null)throw Error(i(160));_5(E,C,x),Rt=null,wi=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)C5(u,s),u=u.sibling}var Xr=null;function C5(s,u){var h=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ai(u,s),Ci(s),m&4&&(Ms(3,s,s.return),Dh(3,s),Ms(5,s,s.return));break;case 1:Ai(u,s),Ci(s),m&512&&(sn||h===null||$a(h,h.return)),m&64&&Co&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var x=Xr;if(Ai(u,s),Ci(s),m&512&&(sn||h===null||$a(h,h.return)),m&4){var E=h!==null?h.memoizedState:null;if(m=s.memoizedState,h===null)if(m===null)if(s.stateNode===null){e:{m=s.type,h=s.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[oh]||E[Mn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),Nn(E,m,h),E[Mn]=s,vn(E),m=E;break e;case"link":var C=CN("link","href",x).get(m+(h.href||""));if(C){for(var O=0;O<C.length;O++)if(E=C[O],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){C.splice(O,1);break t}}E=x.createElement(m),Nn(E,m,h),x.head.appendChild(E);break;case"meta":if(C=CN("meta","content",x).get(m+(h.content||""))){for(O=0;O<C.length;O++)if(E=C[O],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){C.splice(O,1);break t}}E=x.createElement(m),Nn(E,m,h),x.head.appendChild(E);break;default:throw Error(i(468,m))}E[Mn]=s,vn(E),m=E}s.stateNode=m}else $N(x,s.type,s.stateNode);else s.stateNode=AN(x,m,s.memoizedProps);else E!==m?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,m===null?$N(x,s.type,s.stateNode):AN(x,m,s.memoizedProps)):m===null&&s.stateNode!==null&&mS(s,s.memoizedProps,h.memoizedProps)}break;case 27:Ai(u,s),Ci(s),m&512&&(sn||h===null||$a(h,h.return)),h!==null&&m&4&&mS(s,s.memoizedProps,h.memoizedProps);break;case 5:if(Ai(u,s),Ci(s),m&512&&(sn||h===null||$a(h,h.return)),s.flags&32){x=s.stateNode;try{Rc(x,"")}catch(we){mt(s,s.return,we)}}m&4&&s.stateNode!=null&&(x=s.memoizedProps,mS(s,x,h!==null?h.memoizedProps:x)),m&1024&&(bS=!0);break;case 6:if(Ai(u,s),Ci(s),m&4){if(s.stateNode===null)throw Error(i(162));m=s.memoizedProps,h=s.stateNode;try{h.nodeValue=m}catch(we){mt(s,s.return,we)}}break;case 3:if(Rm=null,x=Xr,Xr=Dm(u.containerInfo),Ai(u,s),Xr=x,Ci(s),m&4&&h!==null&&h.memoizedState.isDehydrated)try{df(u.containerInfo)}catch(we){mt(s,s.return,we)}bS&&(bS=!1,$5(s));break;case 4:m=Xr,Xr=Dm(s.stateNode.containerInfo),Ai(u,s),Ci(s),Xr=m;break;case 12:Ai(u,s),Ci(s);break;case 31:Ai(u,s),Ci(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,vm(s,m)));break;case 13:Ai(u,s),Ci(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(xm=Pi()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,vm(s,m)));break;case 22:x=s.memoizedState!==null;var L=h!==null&&h.memoizedState!==null,V=Co,te=sn;if(Co=V||x,sn=te||L,Ai(u,s),sn=te,Co=V,Ci(s),m&8192)e:for(u=s.stateNode,u._visibility=x?u._visibility&-2:u._visibility|1,x&&(h===null||L||Co||sn||ru(s)),h=null,u=s;;){if(u.tag===5||u.tag===26){if(h===null){L=h=u;try{if(E=L.stateNode,x)C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=L.stateNode;var oe=L.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;O.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(we){mt(L,L.return,we)}}}else if(u.tag===6){if(h===null){L=u;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(we){mt(L,L.return,we)}}}else if(u.tag===18){if(h===null){L=u;try{var K=L.stateNode;x?mN(K,!0):mN(L.stateNode,!1)}catch(we){mt(L,L.return,we)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break e;for(;u.sibling===null;){if(u.return===null||u.return===s)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=s.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,vm(s,h))));break;case 19:Ai(u,s),Ci(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,vm(s,m)));break;case 30:break;case 21:break;default:Ai(u,s),Ci(s)}}function Ci(s){var u=s.flags;if(u&2){try{for(var h,m=s.return;m!==null;){if(v5(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var x=h.stateNode,E=yS(s);ym(s,E,x);break;case 5:var C=h.stateNode;h.flags&32&&(Rc(C,""),h.flags&=-33);var O=yS(s);ym(s,O,C);break;case 3:case 4:var L=h.stateNode.containerInfo,V=yS(s);vS(s,V,L);break;default:throw Error(i(161))}}catch(te){mt(s,s.return,te)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function $5(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var u=s;$5(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),s=s.sibling}}function To(s,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)S5(s,u.alternate,u),u=u.sibling}function ru(s){for(s=s.child;s!==null;){var u=s;switch(u.tag){case 0:case 11:case 14:case 15:Ms(4,u,u.return),ru(u);break;case 1:$a(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&m5(u,u.return,h),ru(u);break;case 27:Ih(u.stateNode);case 26:case 5:$a(u,u.return),ru(u);break;case 22:u.memoizedState===null&&ru(u);break;case 30:ru(u);break;default:ru(u)}s=s.sibling}}function Mo(s,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,x=s,E=u,C=E.flags;switch(E.tag){case 0:case 11:case 15:Mo(x,E,h),Dh(4,E);break;case 1:if(Mo(x,E,h),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(V){mt(m,m.return,V)}if(m=E,x=m.updateQueue,x!==null){var O=m.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)rD(L[x],O)}catch(V){mt(m,m.return,V)}}h&&C&64&&p5(E),Nh(E,E.return);break;case 27:b5(E);case 26:case 5:Mo(x,E,h),h&&m===null&&C&4&&y5(E),Nh(E,E.return);break;case 12:Mo(x,E,h);break;case 31:Mo(x,E,h),h&&C&4&&w5(x,E);break;case 13:Mo(x,E,h),h&&C&4&&A5(x,E);break;case 22:E.memoizedState===null&&Mo(x,E,h),Nh(E,E.return);break;case 30:break;default:Mo(x,E,h)}u=u.sibling}}function xS(s,u){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(s=u.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&bh(h))}function SS(s,u){s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&bh(s))}function Vr(s,u,h,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)T5(s,u,h,m),u=u.sibling}function T5(s,u,h,m){var x=u.flags;switch(u.tag){case 0:case 11:case 15:Vr(s,u,h,m),x&2048&&Dh(9,u);break;case 1:Vr(s,u,h,m);break;case 3:Vr(s,u,h,m),x&2048&&(s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&bh(s)));break;case 12:if(x&2048){Vr(s,u,h,m),s=u.stateNode;try{var E=u.memoizedProps,C=E.id,O=E.onPostCommit;typeof O=="function"&&O(C,u.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(L){mt(u,u.return,L)}}else Vr(s,u,h,m);break;case 31:Vr(s,u,h,m);break;case 13:Vr(s,u,h,m);break;case 23:break;case 22:E=u.stateNode,C=u.alternate,u.memoizedState!==null?E._visibility&2?Vr(s,u,h,m):Rh(s,u):E._visibility&2?Vr(s,u,h,m):(E._visibility|=2,ef(s,u,h,m,(u.subtreeFlags&10256)!==0||!1)),x&2048&&xS(C,u);break;case 24:Vr(s,u,h,m),x&2048&&SS(u.alternate,u);break;default:Vr(s,u,h,m)}}function ef(s,u,h,m,x){for(x=x&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var E=s,C=u,O=h,L=m,V=C.flags;switch(C.tag){case 0:case 11:case 15:ef(E,C,O,L,x),Dh(8,C);break;case 23:break;case 22:var te=C.stateNode;C.memoizedState!==null?te._visibility&2?ef(E,C,O,L,x):Rh(E,C):(te._visibility|=2,ef(E,C,O,L,x)),x&&V&2048&&xS(C.alternate,C);break;case 24:ef(E,C,O,L,x),x&&V&2048&&SS(C.alternate,C);break;default:ef(E,C,O,L,x)}u=u.sibling}}function Rh(s,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=s,m=u,x=m.flags;switch(m.tag){case 22:Rh(h,m),x&2048&&xS(m.alternate,m);break;case 24:Rh(h,m),x&2048&&SS(m.alternate,m);break;default:Rh(h,m)}u=u.sibling}}var zh=8192;function tf(s,u,h){if(s.subtreeFlags&zh)for(s=s.child;s!==null;)M5(s,u,h),s=s.sibling}function M5(s,u,h){switch(s.tag){case 26:tf(s,u,h),s.flags&zh&&s.memoizedState!==null&&XV(h,Xr,s.memoizedState,s.memoizedProps);break;case 5:tf(s,u,h);break;case 3:case 4:var m=Xr;Xr=Dm(s.stateNode.containerInfo),tf(s,u,h),Xr=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=zh,zh=16777216,tf(s,u,h),zh=m):tf(s,u,h));break;default:tf(s,u,h)}}function k5(s){var u=s.alternate;if(u!==null&&(s=u.child,s!==null)){u.child=null;do u=s.sibling,s.sibling=null,s=u;while(s!==null)}}function Fh(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];bn=m,D5(m,s)}k5(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)O5(s),s=s.sibling}function O5(s){switch(s.tag){case 0:case 11:case 15:Fh(s),s.flags&2048&&Ms(9,s,s.return);break;case 3:Fh(s);break;case 12:Fh(s);break;case 22:var u=s.stateNode;s.memoizedState!==null&&u._visibility&2&&(s.return===null||s.return.tag!==13)?(u._visibility&=-3,bm(s)):Fh(s);break;default:Fh(s)}}function bm(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];bn=m,D5(m,s)}k5(s)}for(s=s.child;s!==null;){switch(u=s,u.tag){case 0:case 11:case 15:Ms(8,u,u.return),bm(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,bm(u));break;default:bm(u)}s=s.sibling}}function D5(s,u){for(;bn!==null;){var h=bn;switch(h.tag){case 0:case 11:case 15:Ms(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:bh(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,bn=m;else e:for(h=s;bn!==null;){m=bn;var x=m.sibling,E=m.return;if(E5(m),m===h){bn=null;break e}if(x!==null){x.return=E,bn=x;break e}bn=E}}}var lV={getCacheForType:function(s){var u=On(rn),h=u.data.get(s);return h===void 0&&(h=s(),u.data.set(s,h)),h},cacheSignal:function(){return On(rn).controller.signal}},uV=typeof WeakMap=="function"?WeakMap:Map,ft=0,At=null,Ze=null,Je=0,pt=0,Qi=null,ks=!1,nf=!1,ES=!1,ko=0,Pt=0,Os=0,au=0,_S=0,Zi=0,rf=0,Lh=null,$i=null,wS=!1,xm=0,N5=0,Sm=1/0,Em=null,Ds=null,cn=0,Ns=null,af=null,Oo=0,AS=0,CS=null,R5=null,Uh=0,$S=null;function Ki(){return(ft&2)!==0&&Je!==0?Je&-Je:D.T!==null?NS():Qk()}function z5(){if(Zi===0)if((Je&536870912)===0||tt){var s=k0;k0<<=1,(k0&3932160)===0&&(k0=262144),Zi=s}else Zi=536870912;return s=Vi.current,s!==null&&(s.flags|=32),Zi}function Ti(s,u,h){(s===At&&(pt===2||pt===9)||s.cancelPendingCommit!==null)&&(of(s,0),Rs(s,Je,Zi,!1)),ah(s,h),((ft&2)===0||s!==At)&&(s===At&&((ft&2)===0&&(au|=h),Pt===4&&Rs(s,Je,Zi,!1)),Ta(s))}function F5(s,u,h){if((ft&6)!==0)throw Error(i(327));var m=!h&&(u&127)===0&&(u&s.expiredLanes)===0||rh(s,u),x=m?dV(s,u):MS(s,u,!0),E=m;do{if(x===0){nf&&!m&&Rs(s,u,0,!1);break}else{if(h=s.current.alternate,E&&!cV(h)){x=MS(s,u,!1),E=!1;continue}if(x===2){if(E=u,s.errorRecoveryDisabledLanes&E)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){u=C;e:{var O=s;x=Lh;var L=O.current.memoizedState.isDehydrated;if(L&&(of(O,C).flags|=256),C=MS(O,C,!1),C!==2){if(ES&&!L){O.errorRecoveryDisabledLanes|=E,au|=E,x=4;break e}E=$i,$i=x,E!==null&&($i===null?$i=E:$i.push.apply($i,E))}x=C}if(E=!1,x!==2)continue}}if(x===1){of(s,0),Rs(s,u,0,!0);break}e:{switch(m=s,E=x,E){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:Rs(m,u,Zi,!ks);break e;case 2:$i=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(x=xm+300-Pi(),10<x)){if(Rs(m,u,Zi,!ks),D0(m,0,!0)!==0)break e;Oo=u,m.timeoutHandle=hN(L5.bind(null,m,h,$i,Em,wS,u,Zi,au,rf,ks,E,"Throttled",-0,0),x);break e}L5(m,h,$i,Em,wS,u,Zi,au,rf,ks,E,null,-0,0)}}break}while(!0);Ta(s)}function L5(s,u,h,m,x,E,C,O,L,V,te,oe,W,K){if(s.timeoutHandle=-1,oe=u.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mo},M5(u,E,oe);var we=(E&62914560)===E?xm-Pi():(E&4194048)===E?N5-Pi():0;if(we=VV(oe,we),we!==null){Oo=E,s.cancelPendingCommit=we(G5.bind(null,s,u,E,h,m,x,C,O,L,te,oe,null,W,K)),Rs(s,E,C,!V);return}}G5(s,u,E,h,m,x,C,O,L)}function cV(s){for(var u=s;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var x=h[m],E=x.getSnapshot;x=x.value;try{if(!Yi(E(),x))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Rs(s,u,h,m){u&=~_S,u&=~au,s.suspendedLanes|=u,s.pingedLanes&=~u,m&&(s.warmLanes|=u),m=s.expirationTimes;for(var x=u;0<x;){var E=31-Gi(x),C=1<<E;m[E]=-1,x&=~C}h!==0&&Xk(s,h,u)}function _m(){return(ft&6)===0?(Bh(0),!1):!0}function TS(){if(Ze!==null){if(pt===0)var s=Ze.return;else s=Ze,xo=Ql=null,H2(s),Wc=null,Sh=0,s=Ze;for(;s!==null;)g5(s.alternate,s),s=s.return;Ze=null}}function of(s,u){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,kV(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),Oo=0,TS(),At=s,Ze=h=vo(s.current,null),Je=u,pt=0,Qi=null,ks=!1,nf=rh(s,u),ES=!1,rf=Zi=_S=au=Os=Pt=0,$i=Lh=null,wS=!1,(u&8)!==0&&(u|=u&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=u;0<m;){var x=31-Gi(m),E=1<<x;u|=s[x],m&=~E}return ko=u,H0(),h}function U5(s,u){Ie=null,D.H=Mh,u===Vc||u===K0?(u=eD(),pt=3):u===D2?(u=eD(),pt=4):pt=u===oS?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Qi=u,Ze===null&&(Pt=1,dm(s,vr(u,s.current)))}function B5(){var s=Vi.current;return s===null?!0:(Je&4194048)===Je?Er===null:(Je&62914560)===Je||(Je&536870912)!==0?s===Er:!1}function q5(){var s=D.H;return D.H=Mh,s===null?Mh:s}function j5(){var s=D.A;return D.A=lV,s}function wm(){Pt=4,ks||(Je&4194048)!==Je&&Vi.current!==null||(nf=!0),(Os&134217727)===0&&(au&134217727)===0||At===null||Rs(At,Je,Zi,!1)}function MS(s,u,h){var m=ft;ft|=2;var x=q5(),E=j5();(At!==s||Je!==u)&&(Em=null,of(s,u)),u=!1;var C=Pt;e:do try{if(pt!==0&&Ze!==null){var O=Ze,L=Qi;switch(pt){case 8:TS(),C=6;break e;case 3:case 2:case 9:case 6:Vi.current===null&&(u=!0);var V=pt;if(pt=0,Qi=null,sf(s,O,L,V),h&&nf){C=0;break e}break;default:V=pt,pt=0,Qi=null,sf(s,O,L,V)}}fV(),C=Pt;break}catch(te){U5(s,te)}while(!0);return u&&s.shellSuspendCounter++,xo=Ql=null,ft=m,D.H=x,D.A=E,Ze===null&&(At=null,Je=0,H0()),C}function fV(){for(;Ze!==null;)I5(Ze)}function dV(s,u){var h=ft;ft|=2;var m=q5(),x=j5();At!==s||Je!==u?(Em=null,Sm=Pi()+500,of(s,u)):nf=rh(s,u);e:do try{if(pt!==0&&Ze!==null){u=Ze;var E=Qi;t:switch(pt){case 1:pt=0,Qi=null,sf(s,u,E,1);break;case 2:case 9:if(KO(E)){pt=0,Qi=null,P5(u);break}u=function(){pt!==2&&pt!==9||At!==s||(pt=7),Ta(s)},E.then(u,u);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:KO(E)?(pt=0,Qi=null,P5(u)):(pt=0,Qi=null,sf(s,u,E,7));break;case 5:var C=null;switch(Ze.tag){case 26:C=Ze.memoizedState;case 5:case 27:var O=Ze;if(C?TN(C):O.stateNode.complete){pt=0,Qi=null;var L=O.sibling;if(L!==null)Ze=L;else{var V=O.return;V!==null?(Ze=V,Am(V)):Ze=null}break t}}pt=0,Qi=null,sf(s,u,E,5);break;case 6:pt=0,Qi=null,sf(s,u,E,6);break;case 8:TS(),Pt=6;break e;default:throw Error(i(462))}}hV();break}catch(te){U5(s,te)}while(!0);return xo=Ql=null,D.H=m,D.A=x,ft=h,Ze!==null?0:(At=null,Je=0,H0(),Pt)}function hV(){for(;Ze!==null&&!FY();)I5(Ze)}function I5(s){var u=d5(s.alternate,s,ko);s.memoizedProps=s.pendingProps,u===null?Am(s):Ze=u}function P5(s){var u=s,h=u.alternate;switch(u.tag){case 15:case 0:u=o5(h,u,u.pendingProps,u.type,void 0,Je);break;case 11:u=o5(h,u,u.pendingProps,u.type.render,u.ref,Je);break;case 5:H2(u);default:g5(h,u),u=Ze=jO(u,ko),u=d5(h,u,ko)}s.memoizedProps=s.pendingProps,u===null?Am(s):Ze=u}function sf(s,u,h,m){xo=Ql=null,H2(u),Wc=null,Sh=0;var x=u.return;try{if(tV(s,x,u,h,Je)){Pt=1,dm(s,vr(h,s.current)),Ze=null;return}}catch(E){if(x!==null)throw Ze=x,E;Pt=1,dm(s,vr(h,s.current)),Ze=null;return}u.flags&32768?(tt||m===1?s=!0:nf||(Je&536870912)!==0?s=!1:(ks=s=!0,(m===2||m===9||m===3||m===6)&&(m=Vi.current,m!==null&&m.tag===13&&(m.flags|=16384))),H5(u,s)):Am(u)}function Am(s){var u=s;do{if((u.flags&32768)!==0){H5(u,ks);return}s=u.return;var h=rV(u.alternate,u,ko);if(h!==null){Ze=h;return}if(u=u.sibling,u!==null){Ze=u;return}Ze=u=s}while(u!==null);Pt===0&&(Pt=5)}function H5(s,u){do{var h=aV(s.alternate,s);if(h!==null){h.flags&=32767,Ze=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(s=s.sibling,s!==null)){Ze=s;return}Ze=s=h}while(s!==null);Pt=6,Ze=null}function G5(s,u,h,m,x,E,C,O,L){s.cancelPendingCommit=null;do Cm();while(cn!==0);if((ft&6)!==0)throw Error(i(327));if(u!==null){if(u===s.current)throw Error(i(177));if(E=u.lanes|u.childLanes,E|=y2,YY(s,h,E,C,O,L),s===At&&(Ze=At=null,Je=0),af=u,Ns=s,Oo=h,AS=E,CS=x,R5=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,yV(T0,function(){return Q5(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=D.T,D.T=null,x=q.p,q.p=2,C=ft,ft|=4;try{oV(s,u,h)}finally{ft=C,q.p=x,D.T=m}}cn=1,Y5(),X5(),V5()}}function Y5(){if(cn===1){cn=0;var s=Ns,u=af,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=D.T,D.T=null;var m=q.p;q.p=2;var x=ft;ft|=4;try{C5(u,s);var E=jS,C=DO(s.containerInfo),O=E.focusedElem,L=E.selectionRange;if(C!==O&&O&&O.ownerDocument&&OO(O.ownerDocument.documentElement,O)){if(L!==null&&d2(O)){var V=L.start,te=L.end;if(te===void 0&&(te=V),"selectionStart"in O)O.selectionStart=V,O.selectionEnd=Math.min(te,O.value.length);else{var oe=O.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var K=W.getSelection(),we=O.textContent.length,ze=Math.min(L.start,we),_t=L.end===void 0?ze:Math.min(L.end,we);!K.extend&&ze>_t&&(C=_t,_t=ze,ze=C);var P=kO(O,ze),j=kO(O,_t);if(P&&j&&(K.rangeCount!==1||K.anchorNode!==P.node||K.anchorOffset!==P.offset||K.focusNode!==j.node||K.focusOffset!==j.offset)){var X=oe.createRange();X.setStart(P.node,P.offset),K.removeAllRanges(),ze>_t?(K.addRange(X),K.extend(j.node,j.offset)):(X.setEnd(j.node,j.offset),K.addRange(X))}}}}for(oe=[],K=O;K=K.parentNode;)K.nodeType===1&&oe.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<oe.length;O++){var re=oe[O];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Um=!!qS,jS=qS=null}finally{ft=x,q.p=m,D.T=h}}s.current=u,cn=2}}function X5(){if(cn===2){cn=0;var s=Ns,u=af,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=D.T,D.T=null;var m=q.p;q.p=2;var x=ft;ft|=4;try{S5(s,u.alternate,u)}finally{ft=x,q.p=m,D.T=h}}cn=3}}function V5(){if(cn===4||cn===3){cn=0,LY();var s=Ns,u=af,h=Oo,m=R5;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?cn=5:(cn=0,af=Ns=null,W5(s,s.pendingLanes));var x=s.pendingLanes;if(x===0&&(Ds=null),Xx(h),u=u.stateNode,Hi&&typeof Hi.onCommitFiberRoot=="function")try{Hi.onCommitFiberRoot(ih,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=D.T,x=q.p,q.p=2,D.T=null;try{for(var E=s.onRecoverableError,C=0;C<m.length;C++){var O=m[C];E(O.value,{componentStack:O.stack})}}finally{D.T=u,q.p=x}}(Oo&3)!==0&&Cm(),Ta(s),x=s.pendingLanes,(h&261930)!==0&&(x&42)!==0?s===$S?Uh++:(Uh=0,$S=s):Uh=0,Bh(0)}}function W5(s,u){(s.pooledCacheLanes&=u)===0&&(u=s.pooledCache,u!=null&&(s.pooledCache=null,bh(u)))}function Cm(){return Y5(),X5(),V5(),Q5()}function Q5(){if(cn!==5)return!1;var s=Ns,u=AS;AS=0;var h=Xx(Oo),m=D.T,x=q.p;try{q.p=32>h?32:h,D.T=null,h=CS,CS=null;var E=Ns,C=Oo;if(cn=0,af=Ns=null,Oo=0,(ft&6)!==0)throw Error(i(331));var O=ft;if(ft|=4,O5(E.current),T5(E,E.current,C,h),ft=O,Bh(0,!1),Hi&&typeof Hi.onPostCommitFiberRoot=="function")try{Hi.onPostCommitFiberRoot(ih,E)}catch{}return!0}finally{q.p=x,D.T=m,W5(s,u)}}function Z5(s,u,h){u=vr(h,u),u=aS(s.stateNode,u,2),s=Cs(s,u,2),s!==null&&(ah(s,2),Ta(s))}function mt(s,u,h){if(s.tag===3)Z5(s,s,h);else for(;u!==null;){if(u.tag===3){Z5(u,s,h);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ds===null||!Ds.has(m))){s=vr(h,s),h=KD(2),m=Cs(u,h,2),m!==null&&(JD(h,m,u,s),ah(m,2),Ta(m));break}}u=u.return}}function kS(s,u,h){var m=s.pingCache;if(m===null){m=s.pingCache=new uV;var x=new Set;m.set(u,x)}else x=m.get(u),x===void 0&&(x=new Set,m.set(u,x));x.has(h)||(ES=!0,x.add(h),s=gV.bind(null,s,u,h),u.then(s,s))}function gV(s,u,h){var m=s.pingCache;m!==null&&m.delete(u),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,At===s&&(Je&h)===h&&(Pt===4||Pt===3&&(Je&62914560)===Je&&300>Pi()-xm?(ft&2)===0&&of(s,0):_S|=h,rf===Je&&(rf=0)),Ta(s)}function K5(s,u){u===0&&(u=Yk()),s=Xl(s,u),s!==null&&(ah(s,u),Ta(s))}function pV(s){var u=s.memoizedState,h=0;u!==null&&(h=u.retryLane),K5(s,h)}function mV(s,u){var h=0;switch(s.tag){case 31:case 13:var m=s.stateNode,x=s.memoizedState;x!==null&&(h=x.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(u),K5(s,h)}function yV(s,u){return Px(s,u)}var $m=null,lf=null,OS=!1,Tm=!1,DS=!1,zs=0;function Ta(s){s!==lf&&s.next===null&&(lf===null?$m=lf=s:lf=lf.next=s),Tm=!0,OS||(OS=!0,bV())}function Bh(s,u){if(!DS&&Tm){DS=!0;do for(var h=!1,m=$m;m!==null;){if(s!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var C=m.suspendedLanes,O=m.pingedLanes;E=(1<<31-Gi(42|s)+1)-1,E&=x&~(C&~O),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,nN(m,E))}else E=Je,E=D0(m,m===At?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||rh(m,E)||(h=!0,nN(m,E));m=m.next}while(h);DS=!1}}function vV(){J5()}function J5(){Tm=OS=!1;var s=0;zs!==0&&MV()&&(s=zs);for(var u=Pi(),h=null,m=$m;m!==null;){var x=m.next,E=eN(m,u);E===0?(m.next=null,h===null?$m=x:h.next=x,x===null&&(lf=h)):(h=m,(s!==0||(E&3)!==0)&&(Tm=!0)),m=x}cn!==0&&cn!==5||Bh(s),zs!==0&&(zs=0)}function eN(s,u){for(var h=s.suspendedLanes,m=s.pingedLanes,x=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var C=31-Gi(E),O=1<<C,L=x[C];L===-1?((O&h)===0||(O&m)!==0)&&(x[C]=GY(O,u)):L<=u&&(s.expiredLanes|=O),E&=~O}if(u=At,h=Je,h=D0(s,s===u?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,h===0||s===u&&(pt===2||pt===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Hx(m),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||rh(s,h)){if(u=h&-h,u===s.callbackPriority)return u;switch(m!==null&&Hx(m),Xx(h)){case 2:case 8:h=Hk;break;case 32:h=T0;break;case 268435456:h=Gk;break;default:h=T0}return m=tN.bind(null,s),h=Px(h,m),s.callbackPriority=u,s.callbackNode=h,u}return m!==null&&m!==null&&Hx(m),s.callbackPriority=2,s.callbackNode=null,2}function tN(s,u){if(cn!==0&&cn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(Cm()&&s.callbackNode!==h)return null;var m=Je;return m=D0(s,s===At?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(F5(s,m,u),eN(s,Pi()),s.callbackNode!=null&&s.callbackNode===h?tN.bind(null,s):null)}function nN(s,u){if(Cm())return null;F5(s,u,!0)}function bV(){OV(function(){(ft&6)!==0?Px(Pk,vV):J5()})}function NS(){if(zs===0){var s=Yc;s===0&&(s=M0,M0<<=1,(M0&261888)===0&&(M0=256)),zs=s}return zs}function iN(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:F0(""+s)}function rN(s,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,s.id&&h.setAttribute("form",s.id),u.parentNode.insertBefore(h,u),s=new FormData(s),h.parentNode.removeChild(h),s}function xV(s,u,h,m,x){if(u==="submit"&&h&&h.stateNode===x){var E=iN((x[Ei]||null).action),C=m.submitter;C&&(u=(u=C[Ei]||null)?iN(u.formAction):C.getAttribute("formAction"),u!==null&&(E=u,C=null));var O=new q0("action","action",null,m,x);s.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(zs!==0){var L=C?rN(x,C):new FormData(x);J2(h,{pending:!0,data:L,method:x.method,action:E},null,L)}}else typeof E=="function"&&(O.preventDefault(),L=C?rN(x,C):new FormData(x),J2(h,{pending:!0,data:L,method:x.method,action:E},E,L))},currentTarget:x}]})}}for(var RS=0;RS<m2.length;RS++){var zS=m2[RS],SV=zS.toLowerCase(),EV=zS[0].toUpperCase()+zS.slice(1);Yr(SV,"on"+EV)}Yr(zO,"onAnimationEnd"),Yr(FO,"onAnimationIteration"),Yr(LO,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(UX,"onTransitionRun"),Yr(BX,"onTransitionStart"),Yr(qX,"onTransitionCancel"),Yr(UO,"onTransitionEnd"),Dc("onMouseEnter",["mouseout","mouseover"]),Dc("onMouseLeave",["mouseout","mouseover"]),Dc("onPointerEnter",["pointerout","pointerover"]),Dc("onPointerLeave",["pointerout","pointerover"]),Pl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_V=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qh));function aN(s,u){u=(u&4)!==0;for(var h=0;h<s.length;h++){var m=s[h],x=m.event;m=m.listeners;e:{var E=void 0;if(u)for(var C=m.length-1;0<=C;C--){var O=m[C],L=O.instance,V=O.currentTarget;if(O=O.listener,L!==E&&x.isPropagationStopped())break e;E=O,x.currentTarget=V;try{E(x)}catch(te){P0(te)}x.currentTarget=null,E=L}else for(C=0;C<m.length;C++){if(O=m[C],L=O.instance,V=O.currentTarget,O=O.listener,L!==E&&x.isPropagationStopped())break e;E=O,x.currentTarget=V;try{E(x)}catch(te){P0(te)}x.currentTarget=null,E=L}}}}function Ke(s,u){var h=u[Vx];h===void 0&&(h=u[Vx]=new Set);var m=s+"__bubble";h.has(m)||(oN(u,s,2,!1),h.add(m))}function FS(s,u,h){var m=0;u&&(m|=4),oN(h,s,m,u)}var Mm="_reactListening"+Math.random().toString(36).slice(2);function LS(s){if(!s[Mm]){s[Mm]=!0,Jk.forEach(function(h){h!=="selectionchange"&&(_V.has(h)||FS(h,!1,s),FS(h,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[Mm]||(u[Mm]=!0,FS("selectionchange",!1,u))}}function oN(s,u,h,m){switch(zN(u)){case 2:var x=ZV;break;case 8:x=KV;break;default:x=KS}h=x.bind(null,u,h,s),x=void 0,!i2||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(x=!0),m?x!==void 0?s.addEventListener(u,h,{capture:!0,passive:x}):s.addEventListener(u,h,!0):x!==void 0?s.addEventListener(u,h,{passive:x}):s.addEventListener(u,h,!1)}function US(s,u,h,m,x){var E=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var O=m.stateNode.containerInfo;if(O===x)break;if(C===4)for(C=m.return;C!==null;){var L=C.tag;if((L===3||L===4)&&C.stateNode.containerInfo===x)return;C=C.return}for(;O!==null;){if(C=Mc(O),C===null)return;if(L=C.tag,L===5||L===6||L===26||L===27){m=E=C;continue e}O=O.parentNode}}m=m.return}fO(function(){var V=E,te=t2(h),oe=[];e:{var W=BO.get(s);if(W!==void 0){var K=q0,we=s;switch(s){case"keypress":if(U0(h)===0)break e;case"keydown":case"keyup":K=mX;break;case"focusin":we="focus",K=s2;break;case"focusout":we="blur",K=s2;break;case"beforeblur":case"afterblur":K=s2;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=gO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=rX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=bX;break;case zO:case FO:case LO:K=sX;break;case UO:K=SX;break;case"scroll":case"scrollend":K=nX;break;case"wheel":K=_X;break;case"copy":case"cut":case"paste":K=uX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=mO;break;case"toggle":case"beforetoggle":K=AX}var ze=(u&4)!==0,_t=!ze&&(s==="scroll"||s==="scrollend"),P=ze?W!==null?W+"Capture":null:W;ze=[];for(var j=V,X;j!==null;){var re=j;if(X=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||X===null||P===null||(re=lh(j,P),re!=null&&ze.push(jh(j,re,X))),_t)break;j=j.return}0<ze.length&&(W=new K(W,we,null,h,te),oe.push({event:W,listeners:ze}))}}if((u&7)===0){e:{if(W=s==="mouseover"||s==="pointerover",K=s==="mouseout"||s==="pointerout",W&&h!==e2&&(we=h.relatedTarget||h.fromElement)&&(Mc(we)||we[Tc]))break e;if((K||W)&&(W=te.window===te?te:(W=te.ownerDocument)?W.defaultView||W.parentWindow:window,K?(we=h.relatedTarget||h.toElement,K=V,we=we?Mc(we):null,we!==null&&(_t=a(we),ze=we.tag,we!==_t||ze!==5&&ze!==27&&ze!==6)&&(we=null)):(K=null,we=V),K!==we)){if(ze=gO,re="onMouseLeave",P="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(ze=mO,re="onPointerLeave",P="onPointerEnter",j="pointer"),_t=K==null?W:sh(K),X=we==null?W:sh(we),W=new ze(re,j+"leave",K,h,te),W.target=_t,W.relatedTarget=X,re=null,Mc(te)===V&&(ze=new ze(P,j+"enter",we,h,te),ze.target=X,ze.relatedTarget=_t,re=ze),_t=re,K&&we)t:{for(ze=wV,P=K,j=we,X=0,re=P;re;re=ze(re))X++;re=0;for(var Oe=j;Oe;Oe=ze(Oe))re++;for(;0<X-re;)P=ze(P),X--;for(;0<re-X;)j=ze(j),re--;for(;X--;){if(P===j||j!==null&&P===j.alternate){ze=P;break t}P=ze(P),j=ze(j)}ze=null}else ze=null;K!==null&&sN(oe,W,K,ze,!1),we!==null&&_t!==null&&sN(oe,_t,we,ze,!0)}}e:{if(W=V?sh(V):window,K=W.nodeName&&W.nodeName.toLowerCase(),K==="select"||K==="input"&&W.type==="file")var at=wO;else if(EO(W))if(AO)at=zX;else{at=NX;var Ce=DX}else K=W.nodeName,!K||K.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?V&&Jx(V.elementType)&&(at=wO):at=RX;if(at&&(at=at(s,V))){_O(oe,at,h,te);break e}Ce&&Ce(s,W,V),s==="focusout"&&V&&W.type==="number"&&V.memoizedProps.value!=null&&Kx(W,"number",W.value)}switch(Ce=V?sh(V):window,s){case"focusin":(EO(Ce)||Ce.contentEditable==="true")&&(Uc=Ce,h2=V,mh=null);break;case"focusout":mh=h2=Uc=null;break;case"mousedown":g2=!0;break;case"contextmenu":case"mouseup":case"dragend":g2=!1,NO(oe,h,te);break;case"selectionchange":if(LX)break;case"keydown":case"keyup":NO(oe,h,te)}var He;if(u2)e:{switch(s){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Lc?xO(s,h)&&(et="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(et="onCompositionStart");et&&(yO&&h.locale!=="ko"&&(Lc||et!=="onCompositionStart"?et==="onCompositionEnd"&&Lc&&(He=dO()):(bs=te,r2="value"in bs?bs.value:bs.textContent,Lc=!0)),Ce=km(V,et),0<Ce.length&&(et=new pO(et,s,null,h,te),oe.push({event:et,listeners:Ce}),He?et.data=He:(He=SO(h),He!==null&&(et.data=He)))),(He=$X?TX(s,h):MX(s,h))&&(et=km(V,"onBeforeInput"),0<et.length&&(Ce=new pO("onBeforeInput","beforeinput",null,h,te),oe.push({event:Ce,listeners:et}),Ce.data=He)),xV(oe,s,V,h,te)}aN(oe,u)})}function jh(s,u,h){return{instance:s,listener:u,currentTarget:h}}function km(s,u){for(var h=u+"Capture",m=[];s!==null;){var x=s,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=lh(s,h),x!=null&&m.unshift(jh(s,x,E)),x=lh(s,u),x!=null&&m.push(jh(s,x,E))),s.tag===3)return m;s=s.return}return[]}function wV(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function sN(s,u,h,m,x){for(var E=u._reactName,C=[];h!==null&&h!==m;){var O=h,L=O.alternate,V=O.stateNode;if(O=O.tag,L!==null&&L===m)break;O!==5&&O!==26&&O!==27||V===null||(L=V,x?(V=lh(h,E),V!=null&&C.unshift(jh(h,V,L))):x||(V=lh(h,E),V!=null&&C.push(jh(h,V,L)))),h=h.return}C.length!==0&&s.push({event:u,listeners:C})}var AV=/\r\n?/g,CV=/\u0000|\uFFFD/g;function lN(s){return(typeof s=="string"?s:""+s).replace(AV,`
`).replace(CV,"")}function uN(s,u){return u=lN(u),lN(s)===u}function Et(s,u,h,m,x,E){switch(h){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||Rc(s,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&Rc(s,""+m);break;case"className":R0(s,"class",m);break;case"tabIndex":R0(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":R0(s,h,m);break;case"style":uO(s,m,E);break;case"data":if(u!=="object"){R0(s,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||h!=="href")){s.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=F0(""+m),s.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(u!=="input"&&Et(s,u,"name",x.name,x,null),Et(s,u,"formEncType",x.formEncType,x,null),Et(s,u,"formMethod",x.formMethod,x,null),Et(s,u,"formTarget",x.formTarget,x,null)):(Et(s,u,"encType",x.encType,x,null),Et(s,u,"method",x.method,x,null),Et(s,u,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=F0(""+m),s.setAttribute(h,m);break;case"onClick":m!=null&&(s.onclick=mo);break;case"onScroll":m!=null&&Ke("scroll",s);break;case"onScrollEnd":m!=null&&Ke("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}h=F0(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""+m):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":m===!0?s.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,m):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(h,m):s.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(h):s.setAttribute(h,m);break;case"popover":Ke("beforetoggle",s),Ke("toggle",s),N0(s,"popover",m);break;case"xlinkActuate":po(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":po(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":po(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":po(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":po(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":po(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":po(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":po(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":po(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":N0(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=eX.get(h)||h,N0(s,h,m))}}function BS(s,u,h,m,x,E){switch(h){case"style":uO(s,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"children":typeof m=="string"?Rc(s,m):(typeof m=="number"||typeof m=="bigint")&&Rc(s,""+m);break;case"onScroll":m!=null&&Ke("scroll",s);break;case"onScrollEnd":m!=null&&Ke("scrollend",s);break;case"onClick":m!=null&&(s.onclick=mo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eO.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),u=h.slice(2,x?h.length-7:void 0),E=s[Ei]||null,E=E!=null?E[h]:null,typeof E=="function"&&s.removeEventListener(u,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(u,m,x);break e}h in s?s[h]=m:m===!0?s.setAttribute(h,""):N0(s,h,m)}}}function Nn(s,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",s),Ke("load",s);var m=!1,x=!1,E;for(E in h)if(h.hasOwnProperty(E)){var C=h[E];if(C!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Et(s,u,E,C,h,null)}}x&&Et(s,u,"srcSet",h.srcSet,h,null),m&&Et(s,u,"src",h.src,h,null);return;case"input":Ke("invalid",s);var O=E=C=x=null,L=null,V=null;for(m in h)if(h.hasOwnProperty(m)){var te=h[m];if(te!=null)switch(m){case"name":x=te;break;case"type":C=te;break;case"checked":L=te;break;case"defaultChecked":V=te;break;case"value":E=te;break;case"defaultValue":O=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,u));break;default:Et(s,u,m,te,h,null)}}aO(s,E,O,L,V,C,x,!1);return;case"select":Ke("invalid",s),m=C=E=null;for(x in h)if(h.hasOwnProperty(x)&&(O=h[x],O!=null))switch(x){case"value":E=O;break;case"defaultValue":C=O;break;case"multiple":m=O;default:Et(s,u,x,O,h,null)}u=E,h=C,s.multiple=!!m,u!=null?Nc(s,!!m,u,!1):h!=null&&Nc(s,!!m,h,!0);return;case"textarea":Ke("invalid",s),E=x=m=null;for(C in h)if(h.hasOwnProperty(C)&&(O=h[C],O!=null))switch(C){case"value":m=O;break;case"defaultValue":x=O;break;case"children":E=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:Et(s,u,C,O,h,null)}sO(s,m,x,E);return;case"option":for(L in h)if(h.hasOwnProperty(L)&&(m=h[L],m!=null))switch(L){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Et(s,u,L,m,h,null)}return;case"dialog":Ke("beforetoggle",s),Ke("toggle",s),Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":Ke("load",s);break;case"video":case"audio":for(m=0;m<qh.length;m++)Ke(qh[m],s);break;case"image":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"embed":case"source":case"link":Ke("error",s),Ke("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in h)if(h.hasOwnProperty(V)&&(m=h[V],m!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Et(s,u,V,m,h,null)}return;default:if(Jx(u)){for(te in h)h.hasOwnProperty(te)&&(m=h[te],m!==void 0&&BS(s,u,te,m,h,void 0));return}}for(O in h)h.hasOwnProperty(O)&&(m=h[O],m!=null&&Et(s,u,O,m,h,null))}function $V(s,u,h,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,C=null,O=null,L=null,V=null,te=null;for(K in h){var oe=h[K];if(h.hasOwnProperty(K)&&oe!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":L=oe;default:m.hasOwnProperty(K)||Et(s,u,K,null,m,oe)}}for(var W in m){var K=m[W];if(oe=h[W],m.hasOwnProperty(W)&&(K!=null||oe!=null))switch(W){case"type":E=K;break;case"name":x=K;break;case"checked":V=K;break;case"defaultChecked":te=K;break;case"value":C=K;break;case"defaultValue":O=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,u));break;default:K!==oe&&Et(s,u,W,K,m,oe)}}Zx(s,C,O,L,V,te,E,x);return;case"select":K=C=O=W=null;for(E in h)if(L=h[E],h.hasOwnProperty(E)&&L!=null)switch(E){case"value":break;case"multiple":K=L;default:m.hasOwnProperty(E)||Et(s,u,E,null,m,L)}for(x in m)if(E=m[x],L=h[x],m.hasOwnProperty(x)&&(E!=null||L!=null))switch(x){case"value":W=E;break;case"defaultValue":O=E;break;case"multiple":C=E;default:E!==L&&Et(s,u,x,E,m,L)}u=O,h=C,m=K,W!=null?Nc(s,!!h,W,!1):!!m!=!!h&&(u!=null?Nc(s,!!h,u,!0):Nc(s,!!h,h?[]:"",!1));return;case"textarea":K=W=null;for(O in h)if(x=h[O],h.hasOwnProperty(O)&&x!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Et(s,u,O,null,m,x)}for(C in m)if(x=m[C],E=h[C],m.hasOwnProperty(C)&&(x!=null||E!=null))switch(C){case"value":W=x;break;case"defaultValue":K=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==E&&Et(s,u,C,x,m,E)}oO(s,W,K);return;case"option":for(var we in h)if(W=h[we],h.hasOwnProperty(we)&&W!=null&&!m.hasOwnProperty(we))switch(we){case"selected":s.selected=!1;break;default:Et(s,u,we,null,m,W)}for(L in m)if(W=m[L],K=h[L],m.hasOwnProperty(L)&&W!==K&&(W!=null||K!=null))switch(L){case"selected":s.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Et(s,u,L,W,m,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in h)W=h[ze],h.hasOwnProperty(ze)&&W!=null&&!m.hasOwnProperty(ze)&&Et(s,u,ze,null,m,W);for(V in m)if(W=m[V],K=h[V],m.hasOwnProperty(V)&&W!==K&&(W!=null||K!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,u));break;default:Et(s,u,V,W,m,K)}return;default:if(Jx(u)){for(var _t in h)W=h[_t],h.hasOwnProperty(_t)&&W!==void 0&&!m.hasOwnProperty(_t)&&BS(s,u,_t,void 0,m,W);for(te in m)W=m[te],K=h[te],!m.hasOwnProperty(te)||W===K||W===void 0&&K===void 0||BS(s,u,te,W,m,K);return}}for(var P in h)W=h[P],h.hasOwnProperty(P)&&W!=null&&!m.hasOwnProperty(P)&&Et(s,u,P,null,m,W);for(oe in m)W=m[oe],K=h[oe],!m.hasOwnProperty(oe)||W===K||W==null&&K==null||Et(s,u,oe,W,m,K)}function cN(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TV(){if(typeof performance.getEntriesByType=="function"){for(var s=0,u=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var x=h[m],E=x.transferSize,C=x.initiatorType,O=x.duration;if(E&&O&&cN(C)){for(C=0,O=x.responseEnd,m+=1;m<h.length;m++){var L=h[m],V=L.startTime;if(V>O)break;var te=L.transferSize,oe=L.initiatorType;te&&cN(oe)&&(L=L.responseEnd,C+=te*(L<O?1:(O-V)/(L-V)))}if(--m,u+=8*(E+C)/(x.duration/1e3),s++,10<s)break}}if(0<s)return u/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var qS=null,jS=null;function Om(s){return s.nodeType===9?s:s.ownerDocument}function fN(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dN(s,u){if(s===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&u==="foreignObject"?0:s}function IS(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var PS=null;function MV(){var s=window.event;return s&&s.type==="popstate"?s===PS?!1:(PS=s,!0):(PS=null,!1)}var hN=typeof setTimeout=="function"?setTimeout:void 0,kV=typeof clearTimeout=="function"?clearTimeout:void 0,gN=typeof Promise=="function"?Promise:void 0,OV=typeof queueMicrotask=="function"?queueMicrotask:typeof gN<"u"?function(s){return gN.resolve(null).then(s).catch(DV)}:hN;function DV(s){setTimeout(function(){throw s})}function Fs(s){return s==="head"}function pN(s,u){var h=u,m=0;do{var x=h.nextSibling;if(s.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"||h==="/&"){if(m===0){s.removeChild(x),df(u);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")Ih(s.ownerDocument.documentElement);else if(h==="head"){h=s.ownerDocument.head,Ih(h);for(var E=h.firstChild;E;){var C=E.nextSibling,O=E.nodeName;E[oh]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||h.removeChild(E),E=C}}else h==="body"&&Ih(s.ownerDocument.body);h=x}while(h);df(u)}function mN(s,u){var h=s;s=0;do{var m=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(s===0)break;s--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||s++;h=m}while(h)}function HS(s){var u=s.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":HS(h),Wx(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function NV(s,u,h,m){for(;s.nodeType===1;){var x=h;if(s.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[oh])switch(u){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==x.rel||s.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||s.getAttribute("title")!==(x.title==null?null:x.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(x.src==null?null:x.src)||s.getAttribute("type")!==(x.type==null?null:x.type)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(u==="input"&&s.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=_r(s.nextSibling),s===null)break}return null}function RV(s,u,h){if(u==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=_r(s.nextSibling),s===null))return null;return s}function yN(s,u){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=_r(s.nextSibling),s===null))return null;return s}function GS(s){return s.data==="$?"||s.data==="$~"}function YS(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function zV(s,u){var h=s.ownerDocument;if(s.data==="$~")s._reactRetry=u;else if(s.data!=="$?"||h.readyState!=="loading")u();else{var m=function(){u(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function _r(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return s}var XS=null;function vN(s){s=s.nextSibling;for(var u=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"||h==="/&"){if(u===0)return _r(s.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}s=s.nextSibling}return null}function bN(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return s;u--}else h!=="/$"&&h!=="/&"||u++}s=s.previousSibling}return null}function xN(s,u,h){switch(u=Om(h),s){case"html":if(s=u.documentElement,!s)throw Error(i(452));return s;case"head":if(s=u.head,!s)throw Error(i(453));return s;case"body":if(s=u.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Ih(s){for(var u=s.attributes;u.length;)s.removeAttributeNode(u[0]);Wx(s)}var wr=new Map,SN=new Set;function Dm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Do=q.d;q.d={f:FV,r:LV,D:UV,C:BV,L:qV,m:jV,X:PV,S:IV,M:HV};function FV(){var s=Do.f(),u=_m();return s||u}function LV(s){var u=kc(s);u!==null&&u.tag===5&&u.type==="form"?UD(u):Do.r(s)}var uf=typeof document>"u"?null:document;function EN(s,u,h){var m=uf;if(m&&typeof u=="string"&&u){var x=mr(u);x='link[rel="'+s+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),SN.has(x)||(SN.add(x),s={rel:s,crossOrigin:h,href:u},m.querySelector(x)===null&&(u=m.createElement("link"),Nn(u,"link",s),vn(u),m.head.appendChild(u)))}}function UV(s){Do.D(s),EN("dns-prefetch",s,null)}function BV(s,u){Do.C(s,u),EN("preconnect",s,u)}function qV(s,u,h){Do.L(s,u,h);var m=uf;if(m&&s&&u){var x='link[rel="preload"][as="'+mr(u)+'"]';u==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+mr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+mr(h.imageSizes)+'"]')):x+='[href="'+mr(s)+'"]';var E=x;switch(u){case"style":E=cf(s);break;case"script":E=ff(s)}wr.has(E)||(s=g({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:s,as:u},h),wr.set(E,s),m.querySelector(x)!==null||u==="style"&&m.querySelector(Ph(E))||u==="script"&&m.querySelector(Hh(E))||(u=m.createElement("link"),Nn(u,"link",s),vn(u),m.head.appendChild(u)))}}function jV(s,u){Do.m(s,u);var h=uf;if(h&&s){var m=u&&typeof u.as=="string"?u.as:"script",x='link[rel="modulepreload"][as="'+mr(m)+'"][href="'+mr(s)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=ff(s)}if(!wr.has(E)&&(s=g({rel:"modulepreload",href:s},u),wr.set(E,s),h.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Hh(E)))return}m=h.createElement("link"),Nn(m,"link",s),vn(m),h.head.appendChild(m)}}}function IV(s,u,h){Do.S(s,u,h);var m=uf;if(m&&s){var x=Oc(m).hoistableStyles,E=cf(s);u=u||"default";var C=x.get(E);if(!C){var O={loading:0,preload:null};if(C=m.querySelector(Ph(E)))O.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":u},h),(h=wr.get(E))&&VS(s,h);var L=C=m.createElement("link");vn(L),Nn(L,"link",s),L._p=new Promise(function(V,te){L.onload=V,L.onerror=te}),L.addEventListener("load",function(){O.loading|=1}),L.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Nm(C,u,m)}C={type:"stylesheet",instance:C,count:1,state:O},x.set(E,C)}}}function PV(s,u){Do.X(s,u);var h=uf;if(h&&s){var m=Oc(h).hoistableScripts,x=ff(s),E=m.get(x);E||(E=h.querySelector(Hh(x)),E||(s=g({src:s,async:!0},u),(u=wr.get(x))&&WS(s,u),E=h.createElement("script"),vn(E),Nn(E,"link",s),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function HV(s,u){Do.M(s,u);var h=uf;if(h&&s){var m=Oc(h).hoistableScripts,x=ff(s),E=m.get(x);E||(E=h.querySelector(Hh(x)),E||(s=g({src:s,async:!0,type:"module"},u),(u=wr.get(x))&&WS(s,u),E=h.createElement("script"),vn(E),Nn(E,"link",s),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function _N(s,u,h,m){var x=(x=De.current)?Dm(x):null;if(!x)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=cf(h.href),h=Oc(x).hoistableStyles,m=h.get(u),m||(m={type:"style",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=cf(h.href);var E=Oc(x).hoistableStyles,C=E.get(s);if(C||(x=x.ownerDocument||x,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,C),(E=x.querySelector(Ph(s)))&&!E._p&&(C.instance=E,C.state.loading=5),wr.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},wr.set(s,h),E||GV(x,s,h,C.state))),u&&m===null)throw Error(i(528,""));return C}if(u&&m!==null)throw Error(i(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=ff(h),h=Oc(x).hoistableScripts,m=h.get(u),m||(m={type:"script",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function cf(s){return'href="'+mr(s)+'"'}function Ph(s){return'link[rel="stylesheet"]['+s+"]"}function wN(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function GV(s,u,h,m){s.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=s.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),Nn(u,"link",h),vn(u),s.head.appendChild(u))}function ff(s){return'[src="'+mr(s)+'"]'}function Hh(s){return"script[async]"+s}function AN(s,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var m=s.querySelector('style[data-href~="'+mr(h.href)+'"]');if(m)return u.instance=m,vn(m),m;var x=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),vn(m),Nn(m,"style",x),Nm(m,h.precedence,s),u.instance=m;case"stylesheet":x=cf(h.href);var E=s.querySelector(Ph(x));if(E)return u.state.loading|=4,u.instance=E,vn(E),E;m=wN(h),(x=wr.get(x))&&VS(m,x),E=(s.ownerDocument||s).createElement("link"),vn(E);var C=E;return C._p=new Promise(function(O,L){C.onload=O,C.onerror=L}),Nn(E,"link",m),u.state.loading|=4,Nm(E,h.precedence,s),u.instance=E;case"script":return E=ff(h.src),(x=s.querySelector(Hh(E)))?(u.instance=x,vn(x),x):(m=h,(x=wr.get(E))&&(m=g({},h),WS(m,x)),s=s.ownerDocument||s,x=s.createElement("script"),vn(x),Nn(x,"link",m),s.head.appendChild(x),u.instance=x);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,Nm(m,h.precedence,s));return u.instance}function Nm(s,u,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,C=0;C<m.length;C++){var O=m[C];if(O.dataset.precedence===u)E=O;else if(E!==x)break}E?E.parentNode.insertBefore(s,E.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(s,u.firstChild))}function VS(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.title==null&&(s.title=u.title)}function WS(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.integrity==null&&(s.integrity=u.integrity)}var Rm=null;function CN(s,u,h){if(Rm===null){var m=new Map,x=Rm=new Map;x.set(h,m)}else x=Rm,m=x.get(h),m||(m=new Map,x.set(h,m));if(m.has(s))return m;for(m.set(s,null),h=h.getElementsByTagName(s),x=0;x<h.length;x++){var E=h[x];if(!(E[oh]||E[Mn]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var C=E.getAttribute(u)||"";C=s+C;var O=m.get(C);O?O.push(E):m.set(C,[E])}}return m}function $N(s,u,h){s=s.ownerDocument||s,s.head.insertBefore(h,u==="title"?s.querySelector("head > title"):null)}function YV(s,u,h){if(h===1||u.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return s=u.disabled,typeof u.precedence=="string"&&s==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function TN(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function XV(s,u,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=cf(m.href),E=u.querySelector(Ph(x));if(E){u=E._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(s.count++,s=zm.bind(s),u.then(s,s)),h.state.loading|=4,h.instance=E,vn(E);return}E=u.ownerDocument||u,m=wN(m),(x=wr.get(x))&&VS(m,x),E=E.createElement("link"),vn(E);var C=E;C._p=new Promise(function(O,L){C.onload=O,C.onerror=L}),Nn(E,"link",m),h.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(s.count++,h=zm.bind(s),u.addEventListener("load",h),u.addEventListener("error",h))}}var QS=0;function VV(s,u){return s.stylesheets&&s.count===0&&Lm(s,s.stylesheets),0<s.count||0<s.imgCount?function(h){var m=setTimeout(function(){if(s.stylesheets&&Lm(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+u);0<s.imgBytes&&QS===0&&(QS=62500*TV());var x=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Lm(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>QS?50:800)+u);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(x)}}:null}function zm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Fm=null;function Lm(s,u){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Fm=new Map,u.forEach(WV,s),Fm=null,zm.call(s))}function WV(s,u){if(!(u.state.loading&4)){var h=Fm.get(s);if(h)var m=h.get(null);else{h=new Map,Fm.set(s,h);for(var x=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var C=x[E];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(h.set(C.dataset.precedence,C),m=C)}m&&h.set(null,m)}x=u.instance,C=x.getAttribute("data-precedence"),E=h.get(C)||m,E===m&&h.set(null,x),h.set(C,x),this.count++,m=zm.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(x,s.firstChild)),u.state.loading|=4}}var Gh={$$typeof:A,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function QV(s,u,h,m,x,E,C,O,L){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gx(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gx(0),this.hiddenUpdates=Gx(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function MN(s,u,h,m,x,E,C,O,L,V,te,oe){return s=new QV(s,u,h,C,L,V,te,oe,O),u=1,E===!0&&(u|=24),E=Xi(3,null,null,u),s.current=E,E.stateNode=s,u=M2(),u.refCount++,s.pooledCache=u,u.refCount++,E.memoizedState={element:m,isDehydrated:h,cache:u},N2(E),s}function kN(s){return s?(s=jc,s):jc}function ON(s,u,h,m,x,E){x=kN(x),m.context===null?m.context=x:m.pendingContext=x,m=As(u),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=Cs(s,m,u),h!==null&&(Ti(h,s,u),_h(h,s,u))}function DN(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<u?h:u}}function ZS(s,u){DN(s,u),(s=s.alternate)&&DN(s,u)}function NN(s){if(s.tag===13||s.tag===31){var u=Xl(s,67108864);u!==null&&Ti(u,s,67108864),ZS(s,67108864)}}function RN(s){if(s.tag===13||s.tag===31){var u=Ki();u=Yx(u);var h=Xl(s,u);h!==null&&Ti(h,s,u),ZS(s,u)}}var Um=!0;function ZV(s,u,h,m){var x=D.T;D.T=null;var E=q.p;try{q.p=2,KS(s,u,h,m)}finally{q.p=E,D.T=x}}function KV(s,u,h,m){var x=D.T;D.T=null;var E=q.p;try{q.p=8,KS(s,u,h,m)}finally{q.p=E,D.T=x}}function KS(s,u,h,m){if(Um){var x=JS(m);if(x===null)US(s,u,m,Bm,h),FN(s,m);else if(eW(x,s,u,h,m))m.stopPropagation();else if(FN(s,m),u&4&&-1<JV.indexOf(s)){for(;x!==null;){var E=kc(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var C=Il(E.pendingLanes);if(C!==0){var O=E;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var L=1<<31-Gi(C);O.entanglements[1]|=L,C&=~L}Ta(E),(ft&6)===0&&(Sm=Pi()+500,Bh(0))}}break;case 31:case 13:O=Xl(E,2),O!==null&&Ti(O,E,2),_m(),ZS(E,2)}if(E=JS(m),E===null&&US(s,u,m,Bm,h),E===x)break;x=E}x!==null&&m.stopPropagation()}else US(s,u,m,null,h)}}function JS(s){return s=t2(s),eE(s)}var Bm=null;function eE(s){if(Bm=null,s=Mc(s),s!==null){var u=a(s);if(u===null)s=null;else{var h=u.tag;if(h===13){if(s=o(u),s!==null)return s;s=null}else if(h===31){if(s=l(u),s!==null)return s;s=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return Bm=s,null}function zN(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(UY()){case Pk:return 2;case Hk:return 8;case T0:case BY:return 32;case Gk:return 268435456;default:return 32}default:return 32}}var tE=!1,Ls=null,Us=null,Bs=null,Yh=new Map,Xh=new Map,qs=[],JV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FN(s,u){switch(s){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":Yh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xh.delete(u.pointerId)}}function Vh(s,u,h,m,x,E){return s===null||s.nativeEvent!==E?(s={blockedOn:u,domEventName:h,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},u!==null&&(u=kc(u),u!==null&&NN(u)),s):(s.eventSystemFlags|=m,u=s.targetContainers,x!==null&&u.indexOf(x)===-1&&u.push(x),s)}function eW(s,u,h,m,x){switch(u){case"focusin":return Ls=Vh(Ls,s,u,h,m,x),!0;case"dragenter":return Us=Vh(Us,s,u,h,m,x),!0;case"mouseover":return Bs=Vh(Bs,s,u,h,m,x),!0;case"pointerover":var E=x.pointerId;return Yh.set(E,Vh(Yh.get(E)||null,s,u,h,m,x)),!0;case"gotpointercapture":return E=x.pointerId,Xh.set(E,Vh(Xh.get(E)||null,s,u,h,m,x)),!0}return!1}function LN(s){var u=Mc(s.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=o(h),u!==null){s.blockedOn=u,Zk(s.priority,function(){RN(h)});return}}else if(u===31){if(u=l(h),u!==null){s.blockedOn=u,Zk(s.priority,function(){RN(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function qm(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var h=JS(s.nativeEvent);if(h===null){h=s.nativeEvent;var m=new h.constructor(h.type,h);e2=m,h.target.dispatchEvent(m),e2=null}else return u=kc(h),u!==null&&NN(u),s.blockedOn=h,!1;u.shift()}return!0}function UN(s,u,h){qm(s)&&h.delete(u)}function tW(){tE=!1,Ls!==null&&qm(Ls)&&(Ls=null),Us!==null&&qm(Us)&&(Us=null),Bs!==null&&qm(Bs)&&(Bs=null),Yh.forEach(UN),Xh.forEach(UN)}function jm(s,u){s.blockedOn===u&&(s.blockedOn=null,tE||(tE=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tW)))}var Im=null;function BN(s){Im!==s&&(Im=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Im===s&&(Im=null);for(var u=0;u<s.length;u+=3){var h=s[u],m=s[u+1],x=s[u+2];if(typeof m!="function"){if(eE(m||h)===null)continue;break}var E=kc(h);E!==null&&(s.splice(u,3),u-=3,J2(E,{pending:!0,data:x,method:h.method,action:m},m,x))}}))}function df(s){function u(L){return jm(L,s)}Ls!==null&&jm(Ls,s),Us!==null&&jm(Us,s),Bs!==null&&jm(Bs,s),Yh.forEach(u),Xh.forEach(u);for(var h=0;h<qs.length;h++){var m=qs[h];m.blockedOn===s&&(m.blockedOn=null)}for(;0<qs.length&&(h=qs[0],h.blockedOn===null);)LN(h),h.blockedOn===null&&qs.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var x=h[m],E=h[m+1],C=x[Ei]||null;if(typeof E=="function")C||BN(h);else if(C){var O=null;if(E&&E.hasAttribute("formAction")){if(x=E,C=E[Ei]||null)O=C.formAction;else if(eE(x)!==null)continue}else O=C.action;typeof O=="function"?h[m+1]=O:(h.splice(m,3),m-=3),BN(h)}}}function qN(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(C){return x=C})},focusReset:"manual",scroll:"manual"})}function u(){x!==null&&(x(),x=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,x=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),x!==null&&(x(),x=null)}}}function nE(s){this._internalRoot=s}Pm.prototype.render=nE.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(i(409));var h=u.current,m=Ki();ON(h,m,s,u,null,null)},Pm.prototype.unmount=nE.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;ON(s.current,2,null,s,null,null),_m(),u[Tc]=null}};function Pm(s){this._internalRoot=s}Pm.prototype.unstable_scheduleHydration=function(s){if(s){var u=Qk();s={blockedOn:null,target:s,priority:u};for(var h=0;h<qs.length&&u!==0&&u<qs[h].priority;h++);qs.splice(h,0,s),h===0&&LN(s)}};var jN=t.version;if(jN!=="19.2.4")throw Error(i(527,jN,"19.2.4"));q.findDOMNode=function(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(u),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var nW={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hm.isDisabled&&Hm.supportsFiber)try{ih=Hm.inject(nW),Hi=Hm}catch{}}return Qh.createRoot=function(s,u){if(!r(s))throw Error(i(299));var h=!1,m="",x=VD,E=WD,C=QD;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),u=MN(s,1,!1,null,null,h,m,null,x,E,C,qN),s[Tc]=u.current,LS(s),new nE(u)},Qh.hydrateRoot=function(s,u,h){if(!r(s))throw Error(i(299));var m=!1,x="",E=VD,C=WD,O=QD,L=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(C=h.onCaughtError),h.onRecoverableError!==void 0&&(O=h.onRecoverableError),h.formState!==void 0&&(L=h.formState)),u=MN(s,1,!0,u,h??null,m,x,L,E,C,O,qN),u.context=kN(null),h=u.current,m=Ki(),m=Yx(m),x=As(m),x.callback=null,Cs(h,x,m),h=m,u.current.lanes=h,ah(u,h),Ta(u),s[Tc]=u.current,LS(s),new Pm(u)},Qh.version="19.2.4",Qh}var tR;function pW(){if(tR)return oE.exports;tR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),oE.exports=gW(),oE.exports}var mW=pW();const yW=/("(?:[^\\"]|\\.)*")|[:,]/g;function cE(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return(function a(o,l,c){o&&typeof o.toJSON=="function"&&(o=o.toJSON());const f=JSON.stringify(o,r);if(f===void 0)return f;const d=i-l.length-c;if(f.length<=d){const g=f.replace(yW,(p,y)=>y||`${p} `);if(g.length<=d)return g}if(r!=null&&(o=JSON.parse(f),r=void 0),typeof o=="object"&&o!==null){const g=l+n,p=[];let y=0,v,b;if(Array.isArray(o)){v="[",b="]";const{length:S}=o;for(;y<S;y++)p.push(a(o[y],g,y===S-1?0:1)||"null")}else{v="{",b="}";const S=Object.keys(o),{length:_}=S;for(;y<_;y++){const w=S[y],A=`${JSON.stringify(w)}: `,$=a(o[w],g,A.length+(y===_-1?0:1));$!==void 0&&p.push(A+$)}}if(p.length>0)return[v,n+p.join(`,
${g}`),b].join(`
${l}`)}return f})(e,"",0)}function ji(e,t,n){return e.fields=t||[],e.fname=n,e}function Xt(e){return e==null?null:e.fname}function Kn(e){return e==null?null:e.fields}function qF(e){return e.length===1?vW(e[0]):bW(e)}const vW=e=>function(t){return t[e]},bW=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ee(e){throw Error(e)}function to(e){const t=[],n=e.length;let i=null,r=0,a="",o,l,c;e=e+"";function f(){t.push(a+e.substring(o,l)),a="",o=l+1}for(o=l=0;l<n;++l)if(c=e[l],c==="\\")a+=e.substring(o,l++),o=l;else if(c===i)f(),i=null,r=-1;else{if(i)continue;o===r&&c==='"'||o===r&&c==="'"?(o=l+1,i=c):c==="."&&!r?l>o?f():o=l+1:c==="["?(l>o&&f(),r=o=l+1):c==="]"&&(r||ee("Access path missing open bracket: "+e),r>0&&f(),r=0,o=l+1)}return r&&ee("Access path missing closing bracket: "+e),i&&ee("Access path missing closing quote: "+e),l>o&&(l++,f()),t}function zr(e,t,n){const i=to(e);return e=i.length===1?i[0]:e,ji((n&&n.get||qF)(i),[e],t||e)}const Fp=zr("id"),ni=ji(e=>e,[],"identity"),Zs=ji(()=>0,[],"zero"),Md=ji(()=>1,[],"one"),Fr=ji(()=>!0,[],"true"),Ps=ji(()=>!1,[],"false"),vC=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(e=>typeof Object.prototype[e]=="function"),"__proto__"]);function xW(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const jF=0,bC=1,xC=2,IF=3,PF=4;function Lv(e,t,n=xW){let i=e||jF;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=bC&&n(t||"error","ERROR",arguments),this},warn(){return i>=xC&&n(t||"warn","WARN",arguments),this},info(){return i>=IF&&n(t||"log","INFO",arguments),this},debug(){return i>=PF&&n(t||"log","DEBUG",arguments),this}}}var ie=Array.isArray;function xe(e){return e===Object(e)}const nR=e=>e!=="__proto__";function kd(...e){return e.reduce((t,n)=>{for(const i in n)if(i==="signals")t.signals=SW(t.signals,n.signals);else{const r=i==="legend"?{layout:1}:i==="style"?!0:null;Od(t,i,n[i],r)}return t},{})}function Od(e,t,n,i){if(!nR(t))return;let r,a;if(xe(n)&&!ie(n)){a=xe(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Od(a,r,n[r]):nR(r)&&(a[r]=n[r])}else e[t]=n}function SW(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function it(e){return e[e.length-1]}function Qn(e){return e==null||e===""?null:+e}const HF=e=>t=>e*Math.exp(t),GF=e=>t=>Math.log(e*t),YF=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),XF=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,ry=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Uv(e,t,n,i){const r=n(e[0]),a=n(it(e)),o=(a-r)*t;return[i(r-o),i(a-o)]}function VF(e,t){return Uv(e,t,Qn,ni)}function WF(e,t){var n=Math.sign(e[0]);return Uv(e,t,GF(n),HF(n))}function QF(e,t,n){return Uv(e,t,ry(n),ry(1/n))}function ZF(e,t,n){return Uv(e,t,YF(n),XF(n))}function Bv(e,t,n,i,r){const a=i(e[0]),o=i(it(e)),l=t!=null?i(t):(a+o)/2;return[r(l+(a-l)*n),r(l+(o-l)*n)]}function SC(e,t,n){return Bv(e,t,n,Qn,ni)}function EC(e,t,n){const i=Math.sign(e[0]);return Bv(e,t,n,GF(i),HF(i))}function ay(e,t,n,i){return Bv(e,t,n,ry(i),ry(1/i))}function _C(e,t,n,i){return Bv(e,t,n,YF(i),XF(i))}function KF(e){return 1+~~(new Date(e).getMonth()/3)}function JF(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ee(e){return e!=null?ie(e)?e:[e]:[]}function e9(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function je(e){return typeof e=="function"}const EW="descending";function wC(e,t,n){n=n||{},t=Ee(t)||[];const i=[],r=[],a={},o=n.comparator||_W;return Ee(e).forEach((l,c)=>{l!=null&&(i.push(t[c]===EW?-1:1),r.push(l=je(l)?l:zr(l,null,n)),(Kn(l)||[]).forEach(f=>a[f]=1))}),r.length===0?null:ji(o(r,i),Object.keys(a))}const Dd=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),_W=(e,t)=>e.length===1?wW(e[0],t[0]):AW(e,t,e.length),wW=(e,t)=>function(n,i){return Dd(e(n),e(i))*t},AW=(e,t,n)=>(t.push(0),function(i,r){let a,o=0,l=-1;for(;o===0&&++l<n;)a=e[l],o=Dd(a(i),a(r));return o*t[l]});function ii(e){return je(e)?e:()=>e}function AC(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Pe(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Ya(e,t){let n=0,i,r,a,o;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=o=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>o&&(o=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=o=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>o&&(o=r))}return[a,o]}function t9(e,t){const n=e.length;let i=-1,r,a,o,l,c;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=o=a;break}if(i===n)return[-1,-1];for(l=c=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,l=i),o<a&&(o=a,c=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=o=a;break}if(i===n)return[-1,-1];for(l=c=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,l=i),o<a&&(o=a,c=i))}return[l,c]}function _e(e,t){return Object.hasOwn(e,t)}const Gm={};function Nd(e){let t={},n;function i(a){return _e(t,a)&&t[a]!==Gm}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,o){return i(a)||(++r.size,t[a]===Gm&&--r.empty),t[a]=o,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=Gm),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let o=0;for(const l in t){const c=t[l];c!==Gm&&(!n||!n(c))&&(a[l]=c,++o)}r.size=o,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function n9(e,t,n,i,r,a){if(!n&&n!==0)return a;const o=+n;let l=e[0],c=it(e),f;c<l&&(f=l,l=c,c=f),f=Math.abs(t-l);const d=Math.abs(c-t);return f<d&&f<=o?i:d<=o?r:a}function ye(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Pe(i,n)}function Tf(e,t,n,i){let r=t[0],a=t[t.length-1],o;return r>a&&(o=r,r=a,a=o),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function uc(e){return typeof e=="boolean"}function sl(e){return Object.prototype.toString.call(e)==="[object Date]"}function i9(e){return e&&je(e[Symbol.iterator])}function lt(e){return typeof e=="number"}function CC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Se(e){return typeof e=="string"}function $C(e,t,n){e&&(e=t?Ee(e).map(l=>l.replace(/\\(.)/g,"$1")):Ee(e));const i=e&&e.length,r=n&&n.get||qF,a=l=>r(t?[l]:to(l));let o;if(!i)o=function(){return""};else if(i===1){const l=a(e[0]);o=function(c){return""+l(c)}}else{const l=e.map(a);o=function(c){let f=""+l[0](c),d=0;for(;++d<i;)f+="|"+l[d](c);return f}}return ji(o,e,"key")}function r9(e,t){const n=e[0],i=it(e),r=+t;return r?r===1?i:n+r*(i-n):n}const CW=1e4;function a9(e){e=+e||CW;let t,n,i;const r=()=>{t={},n={},i=0},a=(o,l)=>(++i>e&&(n=t,t={},i=1),t[o]=l);return r(),{clear:r,has:o=>_e(t,o)||_e(n,o),get:o=>_e(t,o)?t[o]:_e(n,o)?a(o,n[o]):void 0,set:(o,l)=>_e(t,o)?t[o]=l:a(o,l)}}function o9(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const o=i||new t.constructor(r+a);let l=0,c=0,f=0;for(;l<r&&c<a;++f)o[f]=e(t[l],n[c])>0?n[c++]:t[l++];for(;l<r;++l,++f)o[f]=t[l];for(;c<a;++c,++f)o[f]=n[c];return o}function Eg(e,t){let n="";for(;--t>=0;)n+=e;return n}function s9(e,t,n,i){const r=n||" ",a=e+"",o=t-a.length;return o<=0?a:i==="left"?Eg(r,o)+a:i==="center"?Eg(r,~~(o/2))+a+Eg(r,Math.ceil(o/2)):a+Eg(r,o)}function Lp(e){return e&&it(e)-e[0]||0}function ge(e){return ie(e)?`[${e.map(t=>t===null?"null":ge(t))}]`:xe(e)||Se(e)?JSON.stringify(e).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):e}function TC(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const $W=e=>lt(e)||sl(e)?e:Date.parse(e);function MC(e,t){return t=t||$W,e==null||e===""?null:t(e)}function kC(e){return e==null||e===""?null:e+""}function ca(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function l9(e,t,n,i){const r=i??"",a=e+"",o=a.length,l=Math.max(0,t-r.length);return o<=t?a:n==="left"?r+a.slice(o-l):n==="center"?a.slice(0,Math.ceil(l/2))+r+a.slice(o-~~(l/2)):a.slice(0,l)+r}function Ys(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var iR={},fE={},dE=34,Zh=10,hE=13;function u9(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function TW(e,t){var n=u9(e);return function(i,r){return t(n(i),r,e)}}function rR(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Mi(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function MW(e){return e<0?"-"+Mi(-e,6):e>9999?"+"+Mi(e,6):Mi(e,4)}function kW(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":MW(e.getUTCFullYear())+"-"+Mi(e.getUTCMonth()+1,2)+"-"+Mi(e.getUTCDate(),2)+(r?"T"+Mi(t,2)+":"+Mi(n,2)+":"+Mi(i,2)+"."+Mi(r,3)+"Z":i?"T"+Mi(t,2)+":"+Mi(n,2)+":"+Mi(i,2)+"Z":n||t?"T"+Mi(t,2)+":"+Mi(n,2)+"Z":"")}function OW(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(g,p){var y,v,b=r(g,function(S,_){if(y)return y(S,_-1);v=S,y=p?TW(S,p):u9(S)});return b.columns=v||[],b}function r(g,p){var y=[],v=g.length,b=0,S=0,_,w=v<=0,A=!1;g.charCodeAt(v-1)===Zh&&--v,g.charCodeAt(v-1)===hE&&--v;function $(){if(w)return fE;if(A)return A=!1,iR;var k,T=b,N;if(g.charCodeAt(T)===dE){for(;b++<v&&g.charCodeAt(b)!==dE||g.charCodeAt(++b)===dE;);return(k=b)>=v?w=!0:(N=g.charCodeAt(b++))===Zh?A=!0:N===hE&&(A=!0,g.charCodeAt(b)===Zh&&++b),g.slice(T+1,k-1).replace(/""/g,'"')}for(;b<v;){if((N=g.charCodeAt(k=b++))===Zh)A=!0;else if(N===hE)A=!0,g.charCodeAt(b)===Zh&&++b;else if(N!==n)continue;return g.slice(T,k)}return w=!0,g.slice(T,v)}for(;(_=$())!==fE;){for(var M=[];_!==iR&&_!==fE;)M.push(_),_=$();p&&(M=p(M,S++))==null||y.push(M)}return y}function a(g,p){return g.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function o(g,p){return p==null&&(p=rR(g)),[p.map(d).join(e)].concat(a(g,p)).join(`
`)}function l(g,p){return p==null&&(p=rR(g)),a(g,p).join(`
`)}function c(g){return g.map(f).join(`
`)}function f(g){return g.map(d).join(e)}function d(g){return g==null?"":g instanceof Date?kW(g):t.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:i,parseRows:r,format:o,formatBody:l,formatRows:c,formatRow:f,formatValue:d}}function DW(e){return e}function NW(e){if(e==null)return DW;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],o=e.translate[1];return function(l,c){c||(t=n=0);var f=2,d=l.length,g=new Array(d);for(g[0]=(t+=l[0])*i+a,g[1]=(n+=l[1])*r+o;f<d;)g[f]=l[f],++f;return g}}function RW(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function zW(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return aR(e,n)})}:aR(e,t)}function aR(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=c9(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function c9(e,t){var n=NW(e.transform),i=e.arcs;function r(d,g){g.length&&g.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)g.push(n(p[y],y));d<0&&RW(g,v)}function a(d){return n(d)}function o(d){for(var g=[],p=0,y=d.length;p<y;++p)r(d[p],g);return g.length<2&&g.push(g[0]),g}function l(d){for(var g=o(d);g.length<4;)g.push(g[0]);return g}function c(d){return d.map(l)}function f(d){var g=d.type,p;switch(g){case"GeometryCollection":return{type:g,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=o(d.arcs);break;case"MultiLineString":p=d.arcs.map(o);break;case"Polygon":p=c(d.arcs);break;case"MultiPolygon":p=d.arcs.map(c);break;default:return null}return{type:g,coordinates:p}}return f(t)}function FW(e,t){var n={},i={},r={},a=[],o=-1;t.forEach(function(f,d){var g=e.arcs[f<0?~f:f],p;g.length<3&&!g[1][0]&&!g[1][1]&&(p=t[++o],t[o]=f,t[d]=p)}),t.forEach(function(f){var d=l(f),g=d[0],p=d[1],y,v;if(y=r[g])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=g,v=r[g]){delete r[v.end];var S=v===y?y:v.concat(y);i[S.start=v.start]=r[S.end=y.end]=S}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=g]=r[y.end=p]=y});function l(f){var d=e.arcs[f<0?~f:f],g=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,g]:[g,p]}function c(f,d){for(var g in f){var p=f[g];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return c(r,i),c(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function LW(e){return c9(e,UW.apply(this,arguments))}function UW(e,t,n){var i,r,a;if(arguments.length>1)i=BW(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:FW(e,i)}}function BW(e,t,n){var i=[],r=[],a;function o(g){var p=g<0?~g:g;(r[p]||(r[p]=[])).push({i:g,g:a})}function l(g){g.forEach(o)}function c(g){g.forEach(l)}function f(g){g.forEach(c)}function d(g){switch(a=g,g.type){case"GeometryCollection":g.geometries.forEach(d);break;case"LineString":l(g.arcs);break;case"MultiLineString":case"Polygon":c(g.arcs);break;case"MultiPolygon":f(g.arcs);break}}return d(t),r.forEach(n==null?function(g){i.push(g[0].i)}:function(g){n(g[0].g,g[g.length-1].g)&&i.push(g[0].i)}),i}function Vo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Rd(e){let t,n,i;e.length!==2?(t=Vo,n=(l,c)=>Vo(e(l),c),i=(l,c)=>e(l)-c):(t=e===Vo||e===qW?e:jW,n=e,i=e);function r(l,c,f=0,d=l.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;n(l[g],c)<0?f=g+1:d=g}while(f<d)}return f}function a(l,c,f=0,d=l.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;n(l[g],c)<=0?f=g+1:d=g}while(f<d)}return f}function o(l,c,f=0,d=l.length){const g=r(l,c,f,d-1);return g>f&&i(l[g-1],c)>-i(l[g],c)?g-1:g}return{left:r,center:o,right:a}}function jW(){return 0}function f9(e){return e===null?NaN:+e}function*IW(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const d9=Rd(Vo),hl=d9.right,PW=d9.left;Rd(f9).center;function HW(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r));else{let o=-1;for(let l of e)(l=t(l,++o,e))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,a+=i*(l-r))}if(n>1)return a/(n-1)}function GW(e,t){const n=HW(e,t);return n&&Math.sqrt(n)}class pi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],o=t+a,l=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);l&&(n[i++]=l),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,r=t[--n],o=i+r,a=r-(o-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=o+r,r==i-o&&(o=i))}return o}}class oR extends Map{constructor(t,n=p9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(tw(this,t))}has(t){return super.has(tw(this,t))}set(t,n){return super.set(h9(this,t),n)}delete(t){return super.delete(g9(this,t))}}class oy extends Set{constructor(t,n=p9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(tw(this,t))}add(t){return super.add(h9(this,t))}delete(t){return super.delete(g9(this,t))}}function tw({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function h9({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function g9({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function p9(e){return e!==null&&typeof e=="object"?e.valueOf():e}function YW(e,t){return Array.from(t,n=>e[n])}function XW(e=Vo){if(e===Vo)return m9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function m9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const VW=Math.sqrt(50),WW=Math.sqrt(10),QW=Math.sqrt(2);function sy(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),o=a>=VW?10:a>=WW?5:a>=QW?2:1;let l,c,f;return r<0?(f=Math.pow(10,-r)/o,l=Math.round(e*f),c=Math.round(t*f),l/f<e&&++l,c/f>t&&--c,f=-f):(f=Math.pow(10,r)*o,l=Math.round(e/f),c=Math.round(t/f),l*f<e&&++l,c*f>t&&--c),c<l&&.5<=n&&n<2?sy(e,t,n*2):[l,c,f]}function nw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,o]=i?sy(t,e,n):sy(e,t,n);if(!(a>=r))return[];const l=a-r+1,c=new Array(l);if(i)if(o<0)for(let f=0;f<l;++f)c[f]=(a-f)/-o;else for(let f=0;f<l;++f)c[f]=(a-f)*o;else if(o<0)for(let f=0;f<l;++f)c[f]=(r+f)/-o;else for(let f=0;f<l;++f)c[f]=(r+f)*o;return c}function iw(e,t,n){return t=+t,e=+e,n=+n,sy(e,t,n)[2]}function gl(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?iw(t,e,n):iw(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function ku(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function rw(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function y9(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?m9:XW(r);i>n;){if(i-n>600){const c=i-n+1,f=t-n+1,d=Math.log(c),g=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*g*(c-g)/c)*(f-c/2<0?-1:1),y=Math.max(n,Math.floor(t-f*g/c+p)),v=Math.min(i,Math.floor(t+(c-f)*g/c+p));y9(e,t,y,v,r)}const a=e[t];let o=n,l=i;for(Kh(e,n,t),r(e[i],a)>0&&Kh(e,n,i);o<l;){for(Kh(e,o,l),++o,--l;r(e[o],a)<0;)++o;for(;r(e[l],a)>0;)--l}r(e[n],a)===0?Kh(e,n,l):(++l,Kh(e,l,i)),l<=t&&(n=l+1),t<=l&&(i=l-1)}return e}function Kh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function aw(e,t,n){if(e=Float64Array.from(IW(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return rw(e);if(t>=1)return ku(e);var i,r=(i-1)*t,a=Math.floor(r),o=ku(y9(e,a).subarray(0,a+1)),l=rw(e.subarray(a+1));return o+(l-o)*(r-a)}}function v9(e,t,n=f9){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(r-a)}}function ZW(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function b9(e,t){return aw(e,.5,t)}function*KW(e){for(const t of e)yield*t}function x9(e){return Array.from(KW(e))}function ir(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function S9(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function JW(e,...t){e=new oy(e),t=t.map(eQ);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function eQ(e){return e instanceof oy?e:new oy(e)}function tQ(...e){const t=new oy;for(const n of e)for(const i of n)t.add(i);return t}function nQ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ly(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Yf(e){return e=ly(Math.abs(e)),e?e[1]:NaN}function iQ(e,t){return function(n,i){for(var r=n.length,a=[],o=0,l=e[0],c=0;r>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),a.push(n.substring(r-=l,r+l)),!((c+=l+1)>i));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function rQ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var aQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qu(e){if(!(t=aQ.exec(e)))throw new Error("invalid format: "+e);var t;return new OC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}qu.prototype=OC.prototype;function OC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}OC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oQ(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var E9;function sQ(e,t){var n=ly(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(E9=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+ly(e,Math.max(0,t+a-1))[0]}function sR(e,t){var n=ly(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const lR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nQ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>sR(e*100,t),r:sR,s:sQ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function uR(e){return e}var cR=Array.prototype.map,fR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _9(e){var t=e.grouping===void 0||e.thousands===void 0?uR:iQ(cR.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?uR:rQ(cR.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(g){g=qu(g);var p=g.fill,y=g.align,v=g.sign,b=g.symbol,S=g.zero,_=g.width,w=g.comma,A=g.precision,$=g.trim,M=g.type;M==="n"?(w=!0,M="g"):lR[M]||(A===void 0&&(A=12),$=!0,M="g"),(S||p==="0"&&y==="=")&&(S=!0,p="0",y="=");var k=b==="$"?n:b==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",T=b==="$"?i:/[%p]/.test(M)?o:"",N=lR[M],R=/[defgprs%]/.test(M);A=A===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function B(U){var Q=k,G=T,I,z,D;if(M==="c")G=N(U)+G,U="";else{U=+U;var q=U<0||1/U<0;if(U=isNaN(U)?c:N(Math.abs(U),A),$&&(U=oQ(U)),q&&+U==0&&v!=="+"&&(q=!1),Q=(q?v==="("?v:l:v==="-"||v==="("?"":v)+Q,G=(M==="s"?fR[8+E9/3]:"")+G+(q&&v==="("?")":""),R){for(I=-1,z=U.length;++I<z;)if(D=U.charCodeAt(I),48>D||D>57){G=(D===46?r+U.slice(I+1):U.slice(I))+G,U=U.slice(0,I);break}}}w&&!S&&(U=t(U,1/0));var Y=Q.length+U.length+G.length,Z=Y<_?new Array(_-Y+1).join(p):"";switch(w&&S&&(U=t(Z+U,Z.length?_-G.length:1/0),Z=""),y){case"<":U=Q+U+G+Z;break;case"=":U=Q+Z+U+G;break;case"^":U=Z.slice(0,Y=Z.length>>1)+Q+U+G+Z.slice(Y);break;default:U=Z+Q+U+G;break}return a(U)}return B.toString=function(){return g+""},B}function d(g,p){var y=f((g=qu(g),g.type="f",g)),v=Math.max(-8,Math.min(8,Math.floor(Yf(p)/3)))*3,b=Math.pow(10,-v),S=fR[8+v/3];return function(_){return y(b*_)+S}}return{format:f,formatPrefix:d}}var Ym,qv,DC;lQ({thousands:",",grouping:[3],currency:["$",""]});function lQ(e){return Ym=_9(e),qv=Ym.format,DC=Ym.formatPrefix,Ym}function w9(e){return Math.max(0,-Yf(Math.abs(e)))}function A9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yf(t)/3)))*3-Yf(Math.abs(e)))}function C9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Yf(t)-Yf(e))+1}const gE=new Date,pE=new Date;function mn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const o=r(a),l=r.ceil(a);return a-o<l-a?o:l},r.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),r.range=(a,o,l)=>{const c=[];if(a=r.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let f;do c.push(f=new Date(+a)),t(a,l),e(a);while(f<a&&a<o);return c},r.filter=a=>mn(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(r.count=(a,o)=>(gE.setTime(+a),pE.setTime(+o),e(gE),e(pE),Math.floor(n(gE,pE))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?o=>i(o)%a===0:o=>r.count(0,o)%a===0):r)),r}const Xf=mn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Xf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?mn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Xf);Xf.range;const Io=1e3,Mr=Io*60,Po=Mr*60,ns=Po*24,NC=ns*7,dR=ns*30,mE=ns*365,Ho=mn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Io)},(e,t)=>(t-e)/Io,e=>e.getUTCSeconds());Ho.range;const jv=mn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Io)},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getMinutes());jv.range;const Iv=mn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getUTCMinutes());Iv.range;const Pv=mn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Io-e.getMinutes()*Mr)},(e,t)=>{e.setTime(+e+t*Po)},(e,t)=>(t-e)/Po,e=>e.getHours());Pv.range;const Hv=mn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Po)},(e,t)=>(t-e)/Po,e=>e.getUTCHours());Hv.range;const Wo=mn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mr)/ns,e=>e.getDate()-1);Wo.range;const ll=mn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ns,e=>e.getUTCDate()-1);ll.range;const $9=mn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ns,e=>Math.floor(e/ns));$9.range;function cc(e){return mn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Mr)/NC)}const zd=cc(0),uy=cc(1),uQ=cc(2),cQ=cc(3),Vf=cc(4),fQ=cc(5),dQ=cc(6);zd.range;uy.range;uQ.range;cQ.range;Vf.range;fQ.range;dQ.range;function fc(e){return mn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/NC)}const Fd=fc(0),cy=fc(1),hQ=fc(2),gQ=fc(3),Wf=fc(4),pQ=fc(5),mQ=fc(6);Fd.range;cy.range;hQ.range;gQ.range;Wf.range;pQ.range;mQ.range;const op=mn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());op.range;const sp=mn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());sp.range;const Xa=mn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Xa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:mn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Xa.range;const Va=mn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Va.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:mn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Va.range;function T9(e,t,n,i,r,a){const o=[[Ho,1,Io],[Ho,5,5*Io],[Ho,15,15*Io],[Ho,30,30*Io],[a,1,Mr],[a,5,5*Mr],[a,15,15*Mr],[a,30,30*Mr],[r,1,Po],[r,3,3*Po],[r,6,6*Po],[r,12,12*Po],[i,1,ns],[i,2,2*ns],[n,1,NC],[t,1,dR],[t,3,3*dR],[e,1,mE]];function l(f,d,g){const p=d<f;p&&([f,d]=[d,f]);const y=g&&typeof g.range=="function"?g:c(f,d,g),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function c(f,d,g){const p=Math.abs(d-f)/g,y=Rd(([,,S])=>S).right(o,p);if(y===o.length)return e.every(gl(f/mE,d/mE,g));if(y===0)return Xf.every(Math.max(gl(f,d,g),1));const[v,b]=o[p/o[y-1][2]<o[y][2]/p?y-1:y];return v.every(b)}return[l,c]}const[yQ,vQ]=T9(Va,sp,Fd,$9,Hv,Iv),[bQ,xQ]=T9(Xa,op,zd,Wo,Pv,jv),qn="year",zi="quarter",Jn="month",hn="week",Fi="date",Wn="day",Wa="dayofyear",fr="hours",dr="minutes",Lr="seconds",fa="milliseconds",RC=[qn,zi,Jn,hn,Fi,Wn,Wa,fr,dr,Lr,fa],yE=RC.reduce((e,t,n)=>(e[t]=1+n,e),{});function zC(e){const t=Ee(e).slice(),n={};return t.length||ee("Missing time unit."),t.forEach(r=>{_e(yE,r)?n[r]=1:ee(`Invalid time unit: ${r}.`)}),(n[hn]||n[Wn]?1:0)+(n[zi]||n[Jn]||n[Fi]?1:0)+(n[Wa]?1:0)>1&&ee(`Incompatible time units: ${e}`),t.sort((r,a)=>yE[r]-yE[a]),t}const SQ={[qn]:"%Y ",[zi]:"Q%q ",[Jn]:"%b ",[Fi]:"%d ",[hn]:"W%U ",[Wn]:"%a ",[Wa]:"%j ",[fr]:"%H:00",[dr]:"00:%M",[Lr]:":%S",[fa]:".%L",[`${qn}-${Jn}`]:"%Y-%m ",[`${qn}-${Jn}-${Fi}`]:"%Y-%m-%d ",[`${fr}-${dr}`]:"%H:%M"};function M9(e,t){const n=Pe({},SQ,t),i=zC(e),r=i.length;let a="",o=0,l,c;for(o=0;o<r;)for(l=i.length;l>o;--l)if(c=i.slice(o,l).join("-"),n[c]!=null){a+=n[c],o=l;break}return a.trim()}const xu=new Date;function FC(e){return xu.setFullYear(e),xu.setMonth(0),xu.setDate(1),xu.setHours(0,0,0,0),xu}function k9(e){return D9(new Date(e))}function O9(e){return ow(new Date(e))}function D9(e){return Wo.count(FC(e.getFullYear())-1,e)}function ow(e){return zd.count(FC(e.getFullYear())-1,e)}function sw(e){return FC(e).getDay()}function EQ(e,t,n,i,r,a,o){if(0<=e&&e<100){const l=new Date(-1,t,n,i,r,a,o);return l.setFullYear(e),l}return new Date(e,t,n,i,r,a,o)}function N9(e){return z9(new Date(e))}function R9(e){return lw(new Date(e))}function z9(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ll.count(t-1,e)}function lw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Fd.count(t-1,e)}function uw(e){return xu.setTime(Date.UTC(e,0,1)),xu.getUTCDay()}function _Q(e,t,n,i,r,a,o){if(0<=e&&e<100){const l=new Date(Date.UTC(-1,t,n,i,r,a,o));return l.setUTCFullYear(n.y),l}return new Date(Date.UTC(e,t,n,i,r,a,o))}function F9(e,t,n,i,r){const a=t||1,o=it(e),l=(_,w,A)=>(A=A||_,wQ(n[A],i[A],_===o&&a,w)),c=new Date,f=ca(e),d=f[qn]?l(qn):ii(2012),g=f[Jn]?l(Jn):f[zi]?l(zi):Zs,p=f[hn]&&f[Wn]?l(Wn,1,hn+Wn):f[hn]?l(hn,1):f[Wn]?l(Wn,1):f[Fi]?l(Fi,1):f[Wa]?l(Wa,1):Md,y=f[fr]?l(fr):Zs,v=f[dr]?l(dr):Zs,b=f[Lr]?l(Lr):Zs,S=f[fa]?l(fa):Zs;return function(_){c.setTime(+_);const w=d(c);return r(w,g(c),p(c,w),y(c),v(c),b(c),S(c))}}function wQ(e,t,n,i){const r=n<=1?e:i?(a,o)=>i+n*Math.floor((e(a,o)-i)/n):(a,o)=>n*Math.floor(e(a,o)/n);return t?(a,o)=>t(r(a,o),o):r}function Qf(e,t,n){return t+e*7-(n+6)%7}const AQ={[qn]:e=>e.getFullYear(),[zi]:e=>Math.floor(e.getMonth()/3),[Jn]:e=>e.getMonth(),[Fi]:e=>e.getDate(),[fr]:e=>e.getHours(),[dr]:e=>e.getMinutes(),[Lr]:e=>e.getSeconds(),[fa]:e=>e.getMilliseconds(),[Wa]:e=>D9(e),[hn]:e=>ow(e),[hn+Wn]:(e,t)=>Qf(ow(e),e.getDay(),sw(t)),[Wn]:(e,t)=>Qf(1,e.getDay(),sw(t))},CQ={[zi]:e=>3*e,[hn]:(e,t)=>Qf(e,0,sw(t))};function L9(e,t){return F9(e,t||1,AQ,CQ,EQ)}const $Q={[qn]:e=>e.getUTCFullYear(),[zi]:e=>Math.floor(e.getUTCMonth()/3),[Jn]:e=>e.getUTCMonth(),[Fi]:e=>e.getUTCDate(),[fr]:e=>e.getUTCHours(),[dr]:e=>e.getUTCMinutes(),[Lr]:e=>e.getUTCSeconds(),[fa]:e=>e.getUTCMilliseconds(),[Wa]:e=>z9(e),[hn]:e=>lw(e),[Wn]:(e,t)=>Qf(1,e.getUTCDay(),uw(t)),[hn+Wn]:(e,t)=>Qf(lw(e),e.getUTCDay(),uw(t))},TQ={[zi]:e=>3*e,[hn]:(e,t)=>Qf(e,0,uw(t))};function U9(e,t){return F9(e,t||1,$Q,TQ,_Q)}const MQ={[qn]:Xa,[zi]:op.every(3),[Jn]:op,[hn]:zd,[Fi]:Wo,[Wn]:Wo,[Wa]:Wo,[fr]:Pv,[dr]:jv,[Lr]:Ho,[fa]:Xf},kQ={[qn]:Va,[zi]:sp.every(3),[Jn]:sp,[hn]:Fd,[Fi]:ll,[Wn]:ll,[Wa]:ll,[fr]:Hv,[dr]:Iv,[Lr]:Ho,[fa]:Xf};function Ld(e){return MQ[e]}function Ud(e){return kQ[e]}function B9(e,t,n){return e?e.offset(t,n):void 0}function q9(e,t,n){return B9(Ld(e),t,n)}function j9(e,t,n){return B9(Ud(e),t,n)}function I9(e,t,n,i){return e?e.range(t,n,i):void 0}function P9(e,t,n,i){return I9(Ld(e),t,n,i)}function H9(e,t,n,i){return I9(Ud(e),t,n,i)}const _g=1e3,wg=_g*60,Ag=wg*60,Gv=Ag*24,OQ=Gv*7,hR=Gv*30,cw=Gv*365,G9=[qn,Jn,Fi,fr,dr,Lr,fa],Cg=G9.slice(0,-1),$g=Cg.slice(0,-1),Tg=$g.slice(0,-1),DQ=Tg.slice(0,-1),NQ=[qn,hn],gR=[qn,Jn],Y9=[qn],Jh=[[Cg,1,_g],[Cg,5,5*_g],[Cg,15,15*_g],[Cg,30,30*_g],[$g,1,wg],[$g,5,5*wg],[$g,15,15*wg],[$g,30,30*wg],[Tg,1,Ag],[Tg,3,3*Ag],[Tg,6,6*Ag],[Tg,12,12*Ag],[DQ,1,Gv],[NQ,1,OQ],[gR,1,hR],[gR,3,3*hR],[Y9,1,cw]];function X9(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Lp(t))/n;let r=Rd(l=>l[2]).right(Jh,i),a,o;return r===Jh.length?(a=Y9,o=gl(t[0]/cw,t[1]/cw,n)):r?(r=Jh[i/Jh[r-1][2]<Jh[r][2]/i?r-1:r],a=r[0],o=r[1]):(a=G9,o=Math.max(gl(t[0],t[1],n),1)),{units:a,step:o}}function vE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function bE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function eg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function V9(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,f=tg(r),d=ng(r),g=tg(a),p=ng(a),y=tg(o),v=ng(o),b=tg(l),S=ng(l),_=tg(c),w=ng(c),A={a:q,A:Y,b:Z,B:ue,c:null,d:xR,e:xR,f:nZ,g:dZ,G:gZ,H:JQ,I:eZ,j:tZ,L:W9,m:iZ,M:rZ,p:F,q:H,Q:_R,s:wR,S:aZ,u:oZ,U:sZ,V:lZ,w:uZ,W:cZ,x:null,X:null,y:fZ,Y:hZ,Z:pZ,"%":ER},$={a:ae,A:pe,b:ve,B:De,c:null,d:SR,e:SR,f:bZ,g:MZ,G:OZ,H:mZ,I:yZ,j:vZ,L:Z9,m:xZ,M:SZ,p:Xe,q:Nt,Q:_R,s:wR,S:EZ,u:_Z,U:wZ,V:AZ,w:CZ,W:$Z,x:null,X:null,y:TZ,Y:kZ,Z:DZ,"%":ER},M={a:B,A:U,b:Q,B:G,c:I,d:vR,e:vR,f:WQ,g:yR,G:mR,H:bR,I:bR,j:GQ,L:VQ,m:HQ,M:YQ,p:R,q:PQ,Q:ZQ,s:KQ,S:XQ,u:UQ,U:BQ,V:qQ,w:LQ,W:jQ,x:z,X:D,y:yR,Y:mR,Z:IQ,"%":QQ};A.x=k(n,A),A.X=k(i,A),A.c=k(t,A),$.x=k(n,$),$.X=k(i,$),$.c=k(t,$);function k(me,Fe){return function(qe){var fe=[],tn=-1,Qe=0,jt=me.length,nn,Gr,nh;for(qe instanceof Date||(qe=new Date(+qe));++tn<jt;)me.charCodeAt(tn)===37&&(fe.push(me.slice(Qe,tn)),(Gr=pR[nn=me.charAt(++tn)])!=null?nn=me.charAt(++tn):Gr=nn==="e"?" ":"0",(nh=Fe[nn])&&(nn=nh(qe,Gr)),fe.push(nn),Qe=tn+1);return fe.push(me.slice(Qe,tn)),fe.join("")}}function T(me,Fe){return function(qe){var fe=eg(1900,void 0,1),tn=N(fe,me,qe+="",0),Qe,jt;if(tn!=qe.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(Fe&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Qe=bE(eg(fe.y,0,1)),jt=Qe.getUTCDay(),Qe=jt>4||jt===0?cy.ceil(Qe):cy(Qe),Qe=ll.offset(Qe,(fe.V-1)*7),fe.y=Qe.getUTCFullYear(),fe.m=Qe.getUTCMonth(),fe.d=Qe.getUTCDate()+(fe.w+6)%7):(Qe=vE(eg(fe.y,0,1)),jt=Qe.getDay(),Qe=jt>4||jt===0?uy.ceil(Qe):uy(Qe),Qe=Wo.offset(Qe,(fe.V-1)*7),fe.y=Qe.getFullYear(),fe.m=Qe.getMonth(),fe.d=Qe.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),jt="Z"in fe?bE(eg(fe.y,0,1)).getUTCDay():vE(eg(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(jt+5)%7:fe.w+fe.U*7-(jt+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,bE(fe)):vE(fe)}}function N(me,Fe,qe,fe){for(var tn=0,Qe=Fe.length,jt=qe.length,nn,Gr;tn<Qe;){if(fe>=jt)return-1;if(nn=Fe.charCodeAt(tn++),nn===37){if(nn=Fe.charAt(tn++),Gr=M[nn in pR?Fe.charAt(tn++):nn],!Gr||(fe=Gr(me,qe,fe))<0)return-1}else if(nn!=qe.charCodeAt(fe++))return-1}return fe}function R(me,Fe,qe){var fe=f.exec(Fe.slice(qe));return fe?(me.p=d.get(fe[0].toLowerCase()),qe+fe[0].length):-1}function B(me,Fe,qe){var fe=y.exec(Fe.slice(qe));return fe?(me.w=v.get(fe[0].toLowerCase()),qe+fe[0].length):-1}function U(me,Fe,qe){var fe=g.exec(Fe.slice(qe));return fe?(me.w=p.get(fe[0].toLowerCase()),qe+fe[0].length):-1}function Q(me,Fe,qe){var fe=_.exec(Fe.slice(qe));return fe?(me.m=w.get(fe[0].toLowerCase()),qe+fe[0].length):-1}function G(me,Fe,qe){var fe=b.exec(Fe.slice(qe));return fe?(me.m=S.get(fe[0].toLowerCase()),qe+fe[0].length):-1}function I(me,Fe,qe){return N(me,t,Fe,qe)}function z(me,Fe,qe){return N(me,n,Fe,qe)}function D(me,Fe,qe){return N(me,i,Fe,qe)}function q(me){return o[me.getDay()]}function Y(me){return a[me.getDay()]}function Z(me){return c[me.getMonth()]}function ue(me){return l[me.getMonth()]}function F(me){return r[+(me.getHours()>=12)]}function H(me){return 1+~~(me.getMonth()/3)}function ae(me){return o[me.getUTCDay()]}function pe(me){return a[me.getUTCDay()]}function ve(me){return c[me.getUTCMonth()]}function De(me){return l[me.getUTCMonth()]}function Xe(me){return r[+(me.getUTCHours()>=12)]}function Nt(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Fe=k(me+="",A);return Fe.toString=function(){return me},Fe},parse:function(me){var Fe=T(me+="",!1);return Fe.toString=function(){return me},Fe},utcFormat:function(me){var Fe=k(me+="",$);return Fe.toString=function(){return me},Fe},utcParse:function(me){var Fe=T(me+="",!0);return Fe.toString=function(){return me},Fe}}}var pR={"-":"",_:" ",0:"0"},$n=/^\s*\d+/,RQ=/^%/,zQ=/[\\^$*+?|[\]().{}]/g;function ut(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function FQ(e){return e.replace(zQ,"\\$&")}function tg(e){return new RegExp("^(?:"+e.map(FQ).join("|")+")","i")}function ng(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function LQ(e,t,n){var i=$n.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function UQ(e,t,n){var i=$n.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function BQ(e,t,n){var i=$n.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function qQ(e,t,n){var i=$n.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function jQ(e,t,n){var i=$n.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function mR(e,t,n){var i=$n.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function yR(e,t,n){var i=$n.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function IQ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function PQ(e,t,n){var i=$n.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function HQ(e,t,n){var i=$n.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function vR(e,t,n){var i=$n.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function GQ(e,t,n){var i=$n.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function bR(e,t,n){var i=$n.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function YQ(e,t,n){var i=$n.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function XQ(e,t,n){var i=$n.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function VQ(e,t,n){var i=$n.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function WQ(e,t,n){var i=$n.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function QQ(e,t,n){var i=RQ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function ZQ(e,t,n){var i=$n.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function KQ(e,t,n){var i=$n.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function xR(e,t){return ut(e.getDate(),t,2)}function JQ(e,t){return ut(e.getHours(),t,2)}function eZ(e,t){return ut(e.getHours()%12||12,t,2)}function tZ(e,t){return ut(1+Wo.count(Xa(e),e),t,3)}function W9(e,t){return ut(e.getMilliseconds(),t,3)}function nZ(e,t){return W9(e,t)+"000"}function iZ(e,t){return ut(e.getMonth()+1,t,2)}function rZ(e,t){return ut(e.getMinutes(),t,2)}function aZ(e,t){return ut(e.getSeconds(),t,2)}function oZ(e){var t=e.getDay();return t===0?7:t}function sZ(e,t){return ut(zd.count(Xa(e)-1,e),t,2)}function Q9(e){var t=e.getDay();return t>=4||t===0?Vf(e):Vf.ceil(e)}function lZ(e,t){return e=Q9(e),ut(Vf.count(Xa(e),e)+(Xa(e).getDay()===4),t,2)}function uZ(e){return e.getDay()}function cZ(e,t){return ut(uy.count(Xa(e)-1,e),t,2)}function fZ(e,t){return ut(e.getFullYear()%100,t,2)}function dZ(e,t){return e=Q9(e),ut(e.getFullYear()%100,t,2)}function hZ(e,t){return ut(e.getFullYear()%1e4,t,4)}function gZ(e,t){var n=e.getDay();return e=n>=4||n===0?Vf(e):Vf.ceil(e),ut(e.getFullYear()%1e4,t,4)}function pZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ut(t/60|0,"0",2)+ut(t%60,"0",2)}function SR(e,t){return ut(e.getUTCDate(),t,2)}function mZ(e,t){return ut(e.getUTCHours(),t,2)}function yZ(e,t){return ut(e.getUTCHours()%12||12,t,2)}function vZ(e,t){return ut(1+ll.count(Va(e),e),t,3)}function Z9(e,t){return ut(e.getUTCMilliseconds(),t,3)}function bZ(e,t){return Z9(e,t)+"000"}function xZ(e,t){return ut(e.getUTCMonth()+1,t,2)}function SZ(e,t){return ut(e.getUTCMinutes(),t,2)}function EZ(e,t){return ut(e.getUTCSeconds(),t,2)}function _Z(e){var t=e.getUTCDay();return t===0?7:t}function wZ(e,t){return ut(Fd.count(Va(e)-1,e),t,2)}function K9(e){var t=e.getUTCDay();return t>=4||t===0?Wf(e):Wf.ceil(e)}function AZ(e,t){return e=K9(e),ut(Wf.count(Va(e),e)+(Va(e).getUTCDay()===4),t,2)}function CZ(e){return e.getUTCDay()}function $Z(e,t){return ut(cy.count(Va(e)-1,e),t,2)}function TZ(e,t){return ut(e.getUTCFullYear()%100,t,2)}function MZ(e,t){return e=K9(e),ut(e.getUTCFullYear()%100,t,2)}function kZ(e,t){return ut(e.getUTCFullYear()%1e4,t,4)}function OZ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Wf(e):Wf.ceil(e),ut(e.getUTCFullYear()%1e4,t,4)}function DZ(){return"+0000"}function ER(){return"%"}function _R(e){return+e}function wR(e){return Math.floor(+e/1e3)}var hf,LC,J9,UC,e7;NZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function NZ(e){return hf=V9(e),LC=hf.format,J9=hf.parse,UC=hf.utcFormat,e7=hf.utcParse,hf}function Mg(e){const t={};return n=>t[n]||(t[n]=e(n))}function RZ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=zZ(i,r);const o=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+o}}function zZ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function t7(e){const t=Mg(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=qu(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return RZ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,o){o=qu(o??",f");const l=gl(i,r,a),c=Math.max(Math.abs(i),Math.abs(r));let f;if(o.precision==null)switch(o.type){case"s":return isNaN(f=A9(l,c))||(o.precision=f),n(o,c);case"":case"e":case"g":case"p":case"r":{isNaN(f=C9(l,c))||(o.precision=f-(o.type==="e"));break}case"f":case"%":{isNaN(f=w9(l))||(o.precision=f-(o.type==="%")*2);break}}return t(o)}}}let fw;n7();function n7(){return fw=t7({format:qv,formatPrefix:DC})}function i7(e){return t7(_9(e))}function fy(e){return arguments.length?fw=i7(e):fw}function AR(e,t,n){n=n||{},xe(n)||ee(`Invalid time multi-format specifier: ${n}`);const i=t(Lr),r=t(dr),a=t(fr),o=t(Fi),l=t(hn),c=t(Jn),f=t(zi),d=t(qn),g=e(n[fa]||".%L"),p=e(n[Lr]||":%S"),y=e(n[dr]||"%I:%M"),v=e(n[fr]||"%I %p"),b=e(n[Fi]||n[Wn]||"%a %d"),S=e(n[hn]||"%b %d"),_=e(n[Jn]||"%B"),w=e(n[zi]||"%B"),A=e(n[qn]||"%Y");return $=>(i($)<$?g:r($)<$?p:a($)<$?y:o($)<$?v:c($)<$?l($)<$?b:S:d($)<$?f($)<$?_:w:A)($)}function r7(e){const t=Mg(e.format),n=Mg(e.utcFormat);return{timeFormat:i=>Se(i)?t(i):AR(t,Ld,i),utcFormat:i=>Se(i)?n(i):AR(n,Ud,i),timeParse:Mg(e.parse),utcParse:Mg(e.utcParse)}}let dw;a7();function a7(){return dw=r7({format:LC,parse:J9,utcFormat:UC,utcParse:e7})}function o7(e){return r7(V9(e))}function lp(e){return arguments.length?dw=o7(e):dw}const hw=(e,t)=>Pe({},e,t);function s7(e,t){const n=e?i7(e):fy(),i=t?o7(t):lp();return hw(n,i)}function BC(e,t){const n=arguments.length;return n&&n!==2&&ee("defaultLocale expects either zero or two arguments."),n?hw(fy(e),lp(t)):hw(fy(),lp())}function FZ(){return n7(),a7(),BC()}const LZ=/^(data:|([A-Za-z]+:)?\/\/)/,UZ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,BZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,CR="file://";function qZ(e){return t=>({options:t||{},sanitize:IZ,load:jZ,fileAccess:!1,file:PZ(),http:GZ})}async function jZ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t==null?void 0:t.http)}async function IZ(e,t){t=Pe({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,o;const l=UZ.test(e.replace(BZ,""));(e==null||typeof e!="string"||!l)&&ee("Sanitize failure, invalid URI: "+ge(e));const c=LZ.test(e);return(o=t.baseURL)&&!c&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),a=(r=e.startsWith(CR))||t.mode==="file"||t.mode!=="http"&&!c&&n,r?e=e.slice(CR.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function PZ(e){return HZ}async function HZ(){ee("No file system access.")}async function GZ(e,t){const n=Pe({},this.options.http,t),i=t&&t.response,r=await fetch(e,n);return r.ok?je(r[i])?r[i]():r.text():ee(r.status+""+r.statusText)}const YZ=e=>e!=null&&e===e,XZ=e=>e==="true"||e==="false"||e===!0||e===!1,VZ=e=>!Number.isNaN(Date.parse(e)),l7=e=>!Number.isNaN(+e)&&!(e instanceof Date),WZ=e=>l7(e)&&Number.isInteger(+e),gw={boolean:TC,integer:Qn,number:Qn,date:MC,string:kC,unknown:ni},Xm=[XZ,WZ,l7,VZ],QZ=["boolean","integer","number","date"];function u7(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=Xm.length,r=Xm.map((a,o)=>o+1);for(let a=0,o=0,l,c;a<n;++a)for(c=t?e[a][t]:e[a],l=0;l<i;++l)if(r[l]&&YZ(c)&&!Xm[l](c)&&(r[l]=0,++o,o===Xm.length))return"string";return QZ[r.reduce((a,o)=>a===0?o:a,0)-1]}function c7(e,t){return t.reduce((n,i)=>(n[i]=u7(e,i),n),{})}function $R(e){const t=function(n,i){const r={delimiter:e};return qC(n,i?Pe(i,r):r)};return t.responseType="text",t}function qC(e,t){return t.header&&(e=t.header.map(ge).join(t.delimiter)+`
`+e),OW(t.delimiter).parse(e+"")}qC.responseType="text";function ZZ(e){return typeof Buffer=="function"&&je(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function jC(e,t){const n=t&&t.property?zr(t.property):ni;return xe(e)&&!ZZ(e)?KZ(n(e),t):n(JSON.parse(e))}jC.responseType="json";function KZ(e,t){return!ie(e)&&i9(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const JZ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function f7(e,t){let n,i,r,a;return e=jC(e,t),t&&t.feature?(n=zW,r=t.feature):t&&t.mesh?(n=LW,r=t.mesh,a=JZ[t.filter]):ee("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):ee("Invalid TopoJSON object: "+r),i&&i.features||[i]}f7.responseType="json";const D1={dsv:qC,csv:$R(","),tsv:$R("	"),json:jC,topojson:f7};function IC(e,t){return arguments.length>1?(D1[e]=t,this):_e(D1,e)?D1[e]:null}function d7(e){const t=IC(e);return t&&t.responseType||"text"}function h7(e,t,n,i){t=t||{};const r=IC(t.type||"json");return r||ee("Unknown data format type: "+t.type),e=r(e,t),t.parse&&eK(e,t.parse,n,i),_e(e,"columns")&&delete e.columns,e}function eK(e,t,n,i){if(!e.length)return;const r=lp();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),o,l,c,f,d,g;t==="auto"&&(t=c7(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,S;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),S=b[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(b[0]==="utc"?i:n)(S);if(!gw[v])throw Error("Illegal format pattern: "+y+":"+v);return gw[v]});for(c=0,d=e.length,g=a.length;c<d;++c)for(o=e[c],f=0;f<g;++f)l=a[f],o[l]=p[f](o[l])}const Yv=qZ();function Xv(e){const t=e||ni,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const o=n.indexOf(r);o>=0&&n.splice(o,1)}return n},n}async function N1(e,t){try{await t(e)}catch(n){e.error(n)}}const g7=Symbol("vega_id");let tK=1;function Vv(e){return!!(e&&Me(e))}function Me(e){return e[g7]}function p7(e,t){return e[g7]=t,e}function dt(e){const t=e===Object(e)?e:{data:e};return Me(t)?t:p7(t,tK++)}function PC(e){return Wv(e,dt({}))}function Wv(e,t){for(const n in e)t[n]=e[n];return t}function m7(e,t){return p7(t,Me(e))}function dc(e,t){return e?t?(n,i)=>e(n,i)||Me(t(n))-Me(t(i)):(n,i)=>e(n,i)||Me(n)-Me(i):null}function y7(e){return e&&e.constructor===hc}function hc(){const e=[],t=[],n=[],i=[],r=[];let a=null,o=!1;return{constructor:hc,insert(l){const c=Ee(l),f=c.length;for(let d=0;d<f;++d)e.push(c[d]);return this},remove(l){const c=je(l)?i:t,f=Ee(l),d=f.length;for(let g=0;g<d;++g)c.push(f[g]);return this},modify(l,c,f){const d={field:c,value:ii(f)};return je(l)?(d.filter=l,r.push(d)):(d.tuple=l,n.push(d)),this},encode(l,c){return je(l)?r.push({filter:l,field:c}):n.push({tuple:l,field:c}),this},clean(l){return a=l,this},reflow(){return o=!0,this},pulse(l,c){const f={},d={};let g,p,y,v,b,S;for(g=0,p=c.length;g<p;++g)f[Me(c[g])]=1;for(g=0,p=t.length;g<p;++g)b=t[g],f[Me(b)]=-1;for(g=0,p=i.length;g<p;++g)v=i[g],c.forEach(w=>{v(w)&&(f[Me(w)]=-1)});for(g=0,p=e.length;g<p;++g)b=e[g],S=Me(b),f[S]?f[S]=1:l.add.push(dt(e[g]));for(g=0,p=c.length;g<p;++g)b=c[g],f[Me(b)]<0&&l.rem.push(b);function _(w,A,$){$?w[A]=$(w):l.encode=A,o||(d[Me(w)]=w)}for(g=0,p=n.length;g<p;++g)y=n[g],b=y.tuple,v=y.field,S=f[Me(b)],S>0&&(_(b,v,y.value),l.modifies(v));for(g=0,p=r.length;g<p;++g)y=r[g],v=y.filter,c.forEach(w=>{v(w)&&f[Me(w)]>0&&_(w,y.field,y.value)}),l.modifies(y.field);if(o)l.mod=t.length||i.length?c.filter(w=>f[Me(w)]>0):c.slice();else for(S in d)l.mod.push(d[S]);return(a||a==null&&(t.length||i.length))&&l.clean(!0),l}}}const R1="_:mod:_";function Qv(){Object.defineProperty(this,R1,{writable:!0,value:{}})}Qv.prototype={set(e,t,n,i){const r=this,a=r[e],o=r[R1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||i)&&(r[e]=n,o[e]=ie(n)?1+n.length:-1),r},modified(e,t){const n=this[R1];if(arguments.length){if(ie(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[R1]={},this}};let nK=0;const iK="pulse",rK=new Qv,aK=1,oK=2;function Ct(e,t,n,i){this.id=++nK,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function TR(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ct.prototype={targets(){return this._targets||(this._targets=Xv(Fp))},set(e){return this.value!==e?(this.value=e,1):0},skip:TR(aK),modified:TR(oK),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new Qv,r=this._argops=this._argops||[],a=[];let o,l,c,f;const d=(g,p,y)=>{y instanceof Ct?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:g,index:p})):i.set(g,p,y)};for(o in e)if(l=e[o],o===iK)Ee(l).forEach(g=>{g instanceof Ct?g!==this&&(g.targets().add(this),a.push(g)):ee("Pulse parameters must be operator instances.")}),this.source=l;else if(ie(l))for(i.set(o,-1,Array(c=l.length)),f=0;f<c;++f)d(o,f,l[f]);else d(o,-1,l);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||rK,n=this._argops;let i,r,a,o;if(n){const l=n.length;for(r=0;r<l;++r)i=n[r],a=i.op,o=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,o);if(n.initonly){for(r=0;r<l;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function sK(e,t,n,i){let r=1,a;return e instanceof Ct?a=e:e&&e.prototype instanceof Ct?a=new e:je(e)?a=new Ct(null,e):(r=0,a=new Ct(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function lK(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let uK=0;function Zv(e,t,n){this.id=++uK,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Hs(e,t,n){return new Zv(e,t,n)}Zv.prototype={_filter:Fr,_apply:ni,targets(){return this._targets||(this._targets=Xv(Fp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Hs(e);return this.targets().add(t),t},apply(e){const t=Hs(null,e);return this.targets().add(t),t},merge(){const e=Hs();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Hs();return this.targets().add(Hs(null,null,AC(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Hs(null,null,()=>n=!0)),t.targets().add(Hs(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Fr,this._targets=null}};function cK(e,t,n,i){const r=this,a=Hs(n,i),o=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let l;typeof e=="string"&&typeof document<"u"?l=document.querySelectorAll(e):l=Ee(e);const c=l.length;for(let f=0;f<c;++f)l[f].addEventListener(t,o);return a}function fK(e,t){const n=this.locale();return h7(e,t,n.timeParse,n.utcParse)}function dK(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function hK(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:d7(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function gK(e,t,n){const i=this,r=i._pending||pK(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Fr).insert(a.data||[])),r.done(),a}function pK(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const mK={skip:!0};function yK(e,t,n,i,r){return(e instanceof Ct?bK:vK)(this,e,t,n,i,r),this}function vK(e,t,n,i,r,a){const o=Pe({},a,mK);let l,c;je(n)||(n=ii(n)),i===void 0?l=f=>e.touch(n(f)):je(i)?(c=new Ct(null,i,r,!1),l=f=>{c.evaluate(f);const d=n(f),g=c.value;y7(g)?e.pulse(d,g,a):e.update(d,g,o)}):l=f=>e.update(n(f),i,o),t.apply(l)}function bK(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const o=a||{},l=new Ct(null,xK(n,i),r,!1);l.modified(o.force),l.rank=t.rank,t.targets().add(l),n&&(l.skip(!0),l.value=n.value,l.targets().add(n),e.connect(n,[l]))}}function xK(e,t){return t=je(t)?t:ii(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function SK(e){e.rank=++this._rank}function EK(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&ee("Cycle detected in dataflow graph.")}const dy={},Na=1,Xs=2,Lo=4,_K=Na|Xs,MR=Na|Lo,gf=Na|Xs|Lo,kR=8,ig=16,OR=32,DR=64;function ul(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function xE(e,t){const n=[];return Ys(e,t,i=>n.push(i)),n}function NR(e,t){const n={};return e.visit(t,i=>{n[Me(i)]=1}),i=>n[Me(i)]?null:i}function Vm(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}ul.prototype={StopPropagation:dy,ADD:Na,REM:Xs,MOD:Lo,ADD_REM:_K,ADD_MOD:MR,ALL:gf,REFLOW:kR,SOURCE:ig,NO_SOURCE:OR,NO_FIELDS:DR,fork(e){return new ul(this.dataflow).init(this,e)},clone(){const e=this.fork(gf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(gf|ig)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new ul(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&DR)&&(n.fields=e.fields),t&Na?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Xs?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Lo?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&OR?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||gf;return t&Na&&this.add.length||t&Xs&&this.rem.length||t&Lo&&this.mod.length},reflow(e){if(e)return this.fork(gf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Lo,NR(this,Na))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ie(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ie(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Na&&(n.addF=Vm(n.addF,t)),e&Xs&&(n.remF=Vm(n.remF,t)),e&Lo&&(n.modF=Vm(n.modF,t)),e&ig&&(n.srcF=Vm(n.srcF,t)),n},materialize(e){e=e||gf;const t=this;return e&Na&&t.addF&&(t.add=xE(t.add,t.addF),t.addF=null),e&Xs&&t.remF&&(t.rem=xE(t.rem,t.remF),t.remF=null),e&Lo&&t.modF&&(t.mod=xE(t.mod,t.modF),t.modF=null),e&ig&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&ig)return Ys(n.source,n.srcF,i),n;e&Na&&Ys(n.add,n.addF,i),e&Xs&&Ys(n.rem,n.remF,i),e&Lo&&Ys(n.mod,n.modF,i);const r=n.source;if(e&kR&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Ys(r,NR(n,MR),i):Ys(r,n.srcF,i))}return n}};function HC(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const l=r.fields||(r.fields={});for(const c in o.fields)l[c]=1}o.changed(r.ADD)&&(a|=r.ADD),o.changed(r.REM)&&(a|=r.REM),o.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}ye(HC,ul,{fork(e){const t=new ul(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ie(e)?e.some(i=>n[i]):n[e]:0},filter(){ee("MultiPulse does not support filtering.")},materialize(){ee("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function wK(e,t,n){const i=this,r=[];if(i._pulse)return v7(i);if(i._pending&&await i._pending,t&&await N1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new ul(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Xv(Fp);let o=0,l,c,f;try{for(;i._heap.size()>0;){if(l=i._heap.pop(),l.rank!==l.qrank){i._enqueue(l,!0);continue}c=l.run(i._getPulse(l,e)),c.then?c=await c:c.async&&(r.push(c.async),c=dy),c!==dy&&l._targets&&l._targets.forEach(d=>i._enqueue(d)),++o}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${o} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((g,p)=>p.priority-g.priority);i._postrun=[];for(let g=0;g<d.length;++g)await N1(i,d[g].callback)}return n&&await N1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(g=>{try{g(i)}catch(p){i.error(p)}})})),i}async function AK(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function CK(e,t,n){return this._pulse?v7(this):(this.evaluate(e,t,n),this)}function $K(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function v7(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function TK(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function MK(e,t){const n=e.source,i=this._clock;return n&&ie(n)?new HC(this,i,n.map(r=>r.pulse),t):this._input[e.id]||kK(this._pulse,n&&n.pulse)}function kK(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==dy&&(e.source=t.source),e)}const GC={skip:!1,force:!1};function OK(e,t){const n=t||GC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function DK(e,t,n){const i=n||GC;return(e.set(t)||i.force)&&this.touch(e,i),this}function NK(e,t,n){this.touch(e,n||GC);const i=new ul(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function RK(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),b7(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,zK(t,0,e)):i=n,i}}}function b7(e,t,n,i){let r,a;const o=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(o,r)<0){e[n]=r,n=a;continue}break}return e[n]=o}function zK(e,t,n){const i=t,r=e.length,a=e[t];let o=(t<<1)+1,l;for(;o<r;)l=o+1,l<r&&n(e[o],e[l])>=0&&(o=l),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=a,b7(e,i,t,n)}function zf(){this.logger(Lv()),this.logLevel(bC),this._clock=0,this._rank=0,this._locale=BC();try{this._loader=Yv()}catch{}this._touched=Xv(Fp),this._input={},this._pulse=null,this._heap=RK((e,t)=>e.qrank-t.qrank),this._postrun=[]}function rg(e){return function(){return this._log[e].apply(this,arguments)}}zf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:rg("error"),warn:rg("warn"),info:rg("info"),debug:rg("debug"),logLevel:rg("level"),cleanThreshold:1e4,add:sK,connect:lK,rank:SK,rerank:EK,pulse:NK,touch:OK,update:DK,changeset:hc,ingest:dK,parse:fK,preload:gK,request:hK,events:cK,on:yK,evaluate:wK,run:CK,runAsync:AK,runAfter:$K,_enqueue:TK,_getPulse:MK};function J(e,t){Ct.call(this,e,null,t)}ye(J,Ct,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Zf={};function x7(e){const t=S7(e);return t&&t.Definition||null}function S7(e){return e=e&&e.toLowerCase(),_e(Zf,e)?Zf[e]:null}function*E7(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function YC(e,t,n){const i=Float64Array.from(E7(e,n));return i.sort(Vo),t.map(r=>v9(i,r))}function XC(e,t){return YC(e,[.25,.5,.75],t)}function VC(e,t){const n=e.length,i=GW(e,t),r=XC(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function _7(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],o=e.extent[1],l,c,f,d,g,p;const y=e.span||o-a||Math.abs(a)||1;if(e.step)l=e.step;else if(e.steps){for(d=y/t,g=0,p=e.steps.length;g<p&&e.steps[g]<d;++g);l=e.steps[Math.max(0,g-1)]}else{for(c=Math.ceil(Math.log(t)/i),f=e.minstep||0,l=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-c));Math.ceil(y/l)>t;)l*=n;for(g=0,p=r.length;g<p;++g)d=l/r[g],d>=f&&y/d<=t&&(l=d)}d=Math.log(l);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/l+b)*l,a=a<d?d-l:d,o=Math.ceil(o/l)*l),{start:a,stop:o===a?a+l:o,step:l}}var Ur=Math.random;function FK(e){Ur=e}function w7(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(E7(e,i)),a=r.length,o=t;let l,c,f,d;for(f=0,d=Array(o);f<o;++f){for(l=0,c=0;c<a;++c)l+=r[~~(Ur()*a)];d[f]=l/a}return d.sort(Vo),[aw(d,n/2),aw(d,1-n/2)]}function A7(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let o=0,l=1,c=i(e[0]),f=c,d=c+t,g;for(;l<r;++l){if(g=i(e[l]),g>=d){for(f=(c+f)/2;o<l;++o)a[o]=f;d=g+t,c=g}f=g}for(f=(c+f)/2;o<l;++o)a[o]=f;return n?LK(a,t+t/4):a}function LK(e,t){const n=e.length;let i=0,r=1,a,o;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(o=r+(i+a-r-r>>1);o<r;)e[o++]=e[r];for(;o>r;)e[o--]=e[i]}i=r,r=a}return e}function UK(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function BK(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(o){return arguments.length?(n=o||0,r=i-n,a):n},max(o){return arguments.length?(i=o||0,r=i-n,a):i},sample(){return n+Math.floor(r*Ur())},pdf(o){return o===Math.floor(o)&&o>=n&&o<i?1/r:0},cdf(o){const l=Math.floor(o);return l<n?0:l>=i?1:(l-n+1)/r},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*r):NaN}};return a.min(e).max(t)}const C7=Math.sqrt(2*Math.PI),qK=Math.SQRT2;let ag=NaN;function Kv(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(ag===ag)n=ag,ag=NaN;else{do n=Ur()*2-1,i=Ur()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,ag=i*a}return e+n*t}function WC(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*C7)}function Jv(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const o=Math.exp(-r*r/2);let l;r<7.07106781186547?(l=.0352624965998911*r+.700383064443688,l=l*r+6.37396220353165,l=l*r+33.912866078383,l=l*r+112.079291497871,l=l*r+221.213596169931,l=l*r+220.206867912376,a=o*l,l=.0883883476483184*r+1.75566716318264,l=l*r+16.064177579207,l=l*r+86.7807322029461,l=l*r+296.564248779674,l=l*r+637.333633378831,l=l*r+793.826512519948,l=l*r+440.413735824752,a=a/l):(l=r+.65,l=r+4/l,l=r+3/l,l=r+2/l,l=r+1/l,a=o/l/2.506628274631)}return i>0?1-a:a}function eb(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*qK*jK(2*e-1)}function jK(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function QC(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>Kv(n,i),pdf:a=>WC(a,n,i),cdf:a=>Jv(a,n,i),icdf:a=>eb(a,n,i)};return r.mean(e).stdev(t)}function ZC(e,t){const n=QC();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=VC(e)),r):t},sample(){return e[~~(Ur()*i)]+t*n.sample()},pdf(a){let o=0,l=0;for(;l<i;++l)o+=n.pdf((a-e[l])/t);return o/t/i},cdf(a){let o=0,l=0;for(;l<i;++l)o+=n.cdf((a-e[l])/t);return o/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function KC(e,t){return e=e||0,t=t??1,Math.exp(e+Kv()*t)}function JC(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*C7*e)}function e3(e,t,n){return Jv(Math.log(e),t,n)}function t3(e,t,n){return Math.exp(eb(e,t,n))}function $7(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>KC(n,i),pdf:a=>JC(a,n,i),cdf:a=>e3(a,n,i),icdf:a=>t3(a,n,i)};return r.mean(e).stdev(t)}function T7(e,t){let n=0,i;function r(o){const l=[];let c=0,f;for(f=0;f<n;++f)c+=l[f]=o[f]==null?1:+o[f];for(f=0;f<n;++f)l[f]/=c;return l}const a={weights(o){return arguments.length?(i=r(t=o||[]),a):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),a.weights(t)):e},sample(){const o=Ur();let l=e[n-1],c=i[0],f=0;for(;f<n-1;c+=i[++f])if(o<c){l=e[f];break}return l.sample()},pdf(o){let l=0,c=0;for(;c<n;++c)l+=i[c]*e[c].pdf(o);return l},cdf(o){let l=0,c=0;for(;c<n;++c)l+=i[c]*e[c].cdf(o);return l},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function n3(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ur()}function i3(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function r3(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function a3(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function M7(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>n3(n,i),pdf:a=>i3(a,n,i),cdf:a=>r3(a,n,i),icdf:a=>a3(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function o3(e,t,n){let i=0,r=0;for(const a of e){const o=n(a);t(a)==null||o==null||isNaN(o)||(i+=(o-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Up(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function tb(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),o=new Float64Array(r);let l=0,c=0,f=0,d,g,p;for(p of e)a[l]=d=+t(p),o[l]=g=+n(p),++l,c+=(d-c)/l,f+=(g-f)/l;for(l=0;l<r;++l)a[l]-=c,o[l]-=f;return[a,o,c,f]}function Bp(e,t,n,i){let r=-1,a,o;for(const l of e)a=t(l),o=n(l),a!=null&&(a=+a)>=a&&o!=null&&(o=+o)>=o&&i(a,o,++r)}function Bd(e,t,n,i,r){let a=0,o=0;return Bp(e,t,n,(l,c)=>{const f=c-r(l),d=c-i;a+=f*f,o+=d*d}),1-a/o}function s3(e,t,n){let i=0,r=0,a=0,o=0,l=0;Bp(e,t,n,(d,g)=>{++l,i+=(d-i)/l,r+=(g-r)/l,a+=(d*g-a)/l,o+=(d*d-o)/l});const c=Up(i,r,a,o),f=d=>c[0]+c[1]*d;return{coef:c,predict:f,rSquared:Bd(e,t,n,r,f)}}function k7(e,t,n){let i=0,r=0,a=0,o=0,l=0;Bp(e,t,n,(d,g)=>{++l,d=Math.log(d),i+=(d-i)/l,r+=(g-r)/l,a+=(d*g-a)/l,o+=(d*d-o)/l});const c=Up(i,r,a,o),f=d=>c[0]+c[1]*Math.log(d);return{coef:c,predict:f,rSquared:Bd(e,t,n,r,f)}}function O7(e,t,n){const[i,r,a,o]=tb(e,t,n);let l=0,c=0,f=0,d=0,g=0,p,y,v;Bp(e,t,n,(w,A)=>{p=i[g++],y=Math.log(A),v=p*A,l+=(A*y-l)/g,c+=(v-c)/g,f+=(v*y-f)/g,d+=(p*v-d)/g});const[b,S]=Up(c/o,l/o,f/o,d/o),_=w=>Math.exp(b+S*(w-a));return{coef:[Math.exp(b-S*a),S],predict:_,rSquared:Bd(e,t,n,o,_)}}function D7(e,t,n){let i=0,r=0,a=0,o=0,l=0,c=0;Bp(e,t,n,(g,p)=>{const y=Math.log(g),v=Math.log(p);++c,i+=(y-i)/c,r+=(v-r)/c,a+=(y*v-a)/c,o+=(y*y-o)/c,l+=(p-l)/c});const f=Up(i,r,a,o),d=g=>f[0]*Math.pow(g,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:Bd(e,t,n,l,d)}}function l3(e,t,n){const[i,r,a,o]=tb(e,t,n),l=i.length;let c=0,f=0,d=0,g=0,p=0,y,v,b,S;for(y=0;y<l;)v=i[y],b=r[y++],S=v*v,c+=(S-c)/y,f+=(S*v-f)/y,d+=(S*S-d)/y,g+=(v*b-g)/y,p+=(S*b-p)/y;const _=d-c*c,w=c*_-f*f,A=(p*c-g*f)/w,$=(g*_-p*f)/w,M=-A*c,k=T=>(T=T-a,A*T*T+$*T+M+o);return{coef:[M-$*a+A*a*a+o,$-2*A*a,A],predict:k,rSquared:Bd(e,t,n,o,k)}}function N7(e,t,n,i){if(i===0)return o3(e,t,n);if(i===1)return s3(e,t,n);if(i===2)return l3(e,t,n);const[r,a,o,l]=tb(e,t,n),c=r.length,f=[],d=[],g=i+1;let p,y,v,b,S;for(p=0;p<g;++p){for(v=0,b=0;v<c;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),S=new Float64Array(g),y=0;y<g;++y){for(v=0,b=0;v<c;++v)b+=Math.pow(r[v],p+y);S[y]=b}d.push(S)}d.push(f);const _=PK(d),w=A=>{A-=o;let $=l+_[0]+_[1]*A+_[2]*A*A;for(p=3;p<g;++p)$+=_[p]*Math.pow(A,p);return $};return{coef:IK(g,_,-o,l),predict:w,rSquared:Bd(e,t,n,l,w)}}function IK(e,t,n,i){const r=Array(e);let a,o,l,c;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(l=t[a],c=1,r[a]+=l,o=1;o<=a;++o)c*=(a+1-o)/o,r[a-o]+=l*Math.pow(n,o)*c;return r[0]+=i,r}function PK(e){const t=e.length-1,n=[];let i,r,a,o,l;for(i=0;i<t;++i){for(o=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][o])&&(o=r);for(a=i;a<t+1;++a)l=e[a][i],e[a][i]=e[a][o],e[a][o]=l;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(l=0,a=r+1;a<t;++a)l+=e[a][r]*n[a];n[r]=(e[t][r]-l)/e[r][r]}return n}const RR=2,zR=1e-12;function R7(e,t,n,i){const[r,a,o,l]=tb(e,t,n,!0),c=r.length,f=Math.max(2,~~(i*c)),d=new Float64Array(c),g=new Float64Array(c),p=new Float64Array(c).fill(1);for(let y=-1;++y<=RR;){const v=[0,f-1];for(let S=0;S<c;++S){const _=r[S],w=v[0],A=v[1],$=_-r[w]>r[A]-_?w:A;let M=0,k=0,T=0,N=0,R=0;const B=1/Math.abs(r[$]-_||1);for(let G=w;G<=A;++G){const I=r[G],z=a[G],D=HK(Math.abs(_-I)*B)*p[G],q=I*D;M+=D,k+=q,T+=z*D,N+=z*q,R+=I*q}const[U,Q]=Up(k/M,T/M,N/M,R/M);d[S]=U+Q*_,g[S]=Math.abs(a[S]-d[S]),GK(r,S+1,v)}if(y===RR)break;const b=b9(g);if(Math.abs(b)<zR)break;for(let S=0,_,w;S<c;++S)_=g[S]/(6*b),p[S]=_>=1?zR:(w=1-_*_)*w}return YK(r,d,o,l)}function HK(e){return(e=1-e*e*e)*e*e}function GK(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function YK(e,t,n,i){const r=e.length,a=[];let o=0,l=0,c=[],f;for(;o<r;++o)f=e[o]+n,c[0]===f?c[1]+=(t[o]-c[1])/++l:(l=0,c[1]+=i,c=[f,t[o]],a.push(c));return c[1]+=i,a}const XK=.5*Math.PI/180;function nb(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],o=t[1],l=o-a,c=l/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*l));return f.push(r(o)),f}else{d.push(r(o));for(let b=n;--b>0;)d.push(r(a+b/n*l))}let g=f[0],p=d[d.length-1];const y=1/l,v=VK(g[1],d);for(;p;){const b=r((g[0]+p[0])/2);b[0]-g[0]>=c&&WK(g,b,p,y,v)>XK?d.push(b):(g=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function VK(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const o=t[a][1];o<n&&(n=o),o>i&&(i=o)}return 1/(i-n)}function WK(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),o=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-o)}function QK(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function pw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:QK(e)}function z7(e,t,n){return n||e+(t?"_"+t:"")}const SE=()=>{},ZK={init:SE,add:SE,rem:SE,idx:0},up={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},qp=Object.keys(up).filter(e=>e!=="__count__");function KK(e,t){return(n,i)=>Pe({name:e,aggregate_param:i,out:n||e},ZK,t)}[...qp,"__count__"].forEach(e=>{up[e]=KK(e,up[e])});function F7(e,t,n){return up[e](n,t)}function L7(e,t){return e.idx-t.idx}function JK(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=up[r]())})};return e.forEach(n),Object.values(t).sort(L7)}function eJ(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function tJ(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function nJ(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function iJ(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function U7(e,t){const n=t||ni,i=JK(e),r=e.slice().sort(L7);function a(o){this._ops=i,this._out=r,this.cell=o,this.init()}return a.prototype.init=eJ,a.prototype.add=tJ,a.prototype.rem=nJ,a.prototype.set=iJ,a.prototype.get=n,a.fields=e.map(o=>o.out),a}function u3(e){this._key=e?zr(e):Me,this.reset()}const In=u3.prototype;In.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};In.add=function(e){this._add.push(e)};In.rem=function(e){this._rem.push(e)};In.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),o={};let l,c,f;for(l=0;l<r;++l)o[n(t[l])]=1;for(l=0,c=0;l<i;++l)o[n(f=e[l])]?o[n(f)]=0:a[c++]=f;return this._rem=[],this._add=a};In.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",_e(n,a)||(n[a]=1,++r);return r};In.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=t9(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};In.argmin=function(e){return this.extent(e)[0]||{}};In.argmax=function(e){return this.extent(e)[1]||{}};In.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};In.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};In.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=XC(this.values(),e),this._get=e),this._q};In.q1=function(e){return this.quartile(e)[0]};In.q2=function(e){return this.quartile(e)[1]};In.q3=function(e){return this.quartile(e)[2]};In.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=w7(this.values(),1e3,.05,e),this._get=e),this._ci};In.ci0=function(e){return this.ci(e)[0]};In.ci1=function(e){return this.ci(e)[1]};function pl(e){J.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}pl.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:qp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ye(pl,J,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(l){let c,f,d,g;for(c in l)for(d=l[c].tuple,f=0;f<r;++f)i[f][g=d[n[f]]]=g}a(e._prev),a(t);function o(l,c,f){const d=n[f],g=i[f++];for(const p in g){const y=l?l+"|"+p:p;c[d]=g[p],f<r?o(y,c,f):t[y]||e.cell(y,c)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const A=Ee(Kn(w)),$=A.length;let M=0,k;for(;M<$;++M)i[k=A[M]]||(i[k]=1,t.push(k))}this._dims=Ee(e.groupby),this._dnames=this._dims.map(w=>{const A=Xt(w);return r(w),n.push(A),A}),this.cellkey=e.key?e.key:pw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],o=e.ops||["count"],l=e.aggregate_params||[null],c=e.as||[],f=a.length,d={};let g,p,y,v,b,S,_;for(f!==o.length&&ee("Unmatched number of fields and aggregate ops."),_=0;_<f;++_){if(g=a[_],p=o[_],y=l[_]||null,g==null&&p!=="count"&&ee("Null aggregate field specified."),b=Xt(g),S=z7(p,b,c[_]),n.push(S),p==="count"){this._counts.push(S);continue}v=d[b],v||(r(g),v=d[b]=[],v.field=g,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(F7(p,y,S))}return this._measures=this._measures.map(w=>U7(w,w.field)),Object.create(null)},cellkey:pw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new u3),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let o=0;o<r;++o)a[n[o]]=i[o](e);return t?m7(t.tuple,a):dt(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,o=e.rem,l=e.mod;let c,f,d,g;if(i)for(f in i)c=i[f],(!r||c.num)&&o.push(c.tuple);for(d=0,g=this._alen;d<g;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,g=this._mlen;d<g;++d)c=n[d],(c.num===0&&r?o:l).push(this.celltuple(c)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const rJ=1e-14;function c3(e){J.call(this,null,e)}c3.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ye(c3,J,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,o=e.as||["bin0","bin1"],l=o[0],c=o[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(Kn(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const g=i(d);d[l]=g,d[c]=g==null?null:r+a*(1+(g-r)/a)}:d=>d[l]=i(d)),t.modifies(n?o:l)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=_7(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,o,l;(o=e.anchor)!=null&&(l=o-(r+i*Math.floor((o-r)/i)),r+=l,a+=l);const c=function(f){let d=Qn(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(rJ+(d-r)/i))};return c.start=r,c.stop=n.stop,c.step=i,this.value=ji(c,Kn(t),e.name||"bin_"+Xt(t))}});function B7(e,t,n){const i=e;let r=t||[],a=n||[],o={},l=0;return{add:c=>a.push(c),remove:c=>o[i(c)]=++l,size:()=>r.length,data:(c,f)=>(l&&(r=r.filter(d=>!o[i(d)]),o={},l=0),f&&c&&r.sort(c),a.length&&(r=c?o9(c,r,a.sort(c)):r.concat(a),a=[]),r)}}function f3(e){J.call(this,[],e)}f3.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ye(f3,J,{transform(e,t){const n=t.fork(t.ALL),i=B7(Me,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(dc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function q7(e){Ct.call(this,null,aJ,e)}ye(q7,Ct);function aJ(e){return this.value&&!e.modified()?this.value:wC(e.fields,e.orders)}function d3(e){J.call(this,null,e)}d3.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function oJ(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ye(d3,J,{transform(e,t){const n=g=>p=>{for(var y=oJ(l(p),e.case,a)||[],v,b=0,S=y.length;b<S;++b)o.test(v=y[b])||g(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,o=this._stop,l=e.field,c=e.as||["text","count"],f=n(g=>r[g]=1+(r[g]||0)),d=n(g=>r[g]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let l,c,f;for(l in n)c=i[l],f=n[l]||0,!c&&f?(i[l]=c=dt({}),c[r]=l,c[a]=f,o.add.push(c)):f===0?(c&&o.rem.push(c),n[l]=null,i[l]=null):c[a]!==f&&(c[a]=f,o.mod.push(c));return o.modifies(t)}});function h3(e){J.call(this,null,e)}h3.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ye(h3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let l=this.value;return o?(l&&(n.rem=l),l=t.materialize(t.SOURCE).source,n.add=this.value=sJ(l,r,a,e.filter||Fr)):n.mod=l,n.source=this.value,n.modifies(i)}});function sJ(e,t,n,i){for(var r=[],a={},o=e.length,l=0,c,f;l<o;++l)for(a[t]=f=e[l],c=0;c<o;++c)a[n]=e[c],i(a)&&(r.push(dt(a)),a={},a[t]=f);return r}const FR={kde:ZC,mixture:T7,normal:QC,lognormal:$7,uniform:M7},lJ="distributions",LR="function",uJ="field";function j7(e,t){const n=e[LR];_e(FR,n)||ee("Unknown distribution function: "+n);const i=FR[n]();for(const r in e)r===uJ?i.data((e.from||t()).map(e[r])):r===lJ?i[r](e[r].map(a=>j7(a,t))):typeof i[r]===LR&&i[r](e[r]);return i}function g3(e){J.call(this,null,e)}const I7=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],cJ={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:I7},{name:"weights",type:"number",array:!0}]};g3.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:I7.concat(cJ)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ye(g3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=j7(e.distribution,fJ(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&ee("Invalid density method: "+o),!e.extent&&!i.data&&ee("Missing density extent parameter."),o=i[o];const l=e.as||["value","density"],c=e.extent||Ya(i.data()),f=nb(o,c,r,a).map(d=>{const g={};return g[l[0]]=d[0],g[l[1]]=d[1],dt(g)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function fJ(e){return()=>e.materialize(e.SOURCE).source}function P7(e,t){return e?e.map((n,i)=>t[i]||Xt(n)):null}function p3(e,t,n){const i=[],r=g=>g(c);let a,o,l,c,f,d;if(t==null)i.push(e.map(n));else for(a={},o=0,l=e.length;o<l;++o)c=e[o],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(c));return i}const H7="bin";function m3(e){J.call(this,null,e)}m3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:H7}]};const dJ=(e,t)=>Lp(Ya(e,t))/30;ye(m3,J,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=p3(t.source,e.groupby,ni),r=e.smooth||!1,a=e.field,o=e.step||dJ(n,a),l=dc((v,b)=>a(v)-a(b)),c=e.as||H7,f=i.length;let d=1/0,g=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(l);y=-1;for(const b of A7(v,o,r,a))b<d&&(d=b),b>g&&(g=b),v[++y][c]=b}return this.value={start:d,stop:g,step:o},t.reflow(!0).modifies(c)}});function G7(e){Ct.call(this,null,hJ,e),this.modified(!0)}ye(G7,Ct);function hJ(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ji(n=>t(n,e),Kn(t),Xt(t))}function y3(e){J.call(this,[void 0,void 0],e)}y3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ye(y3,J,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],o=n[1];if((r||a==null)&&(a=1/0,o=-1/0),t.visit(r?t.SOURCE:t.ADD,l=>{const c=Qn(i(l));c!=null&&(c<a&&(a=c),c>o&&(o=c))}),!Number.isFinite(a)||!Number.isFinite(o)){let l=Xt(i);l&&(l=` for field "${l}"`),t.dataflow.warn(`Infinite extent${l}: [${a}, ${o}]`),a=o=void 0}this.value=[a,o]}});function v3(e,t){Ct.call(this,e),this.parent=t,this.count=0}ye(v3,Ct,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function ib(e){J.call(this,{},e),this._keys=Nd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}ye(ib,J,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=_e(r,e)&&r[e],o,l;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(l=i||(l=this._group[e])&&l.tuple,o=n.dataflow,a=new v3(n.fork(n.NO_SOURCE),this),o.add(a).connect(t(o,e,l)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,o=e.modified("key"),l=c=>this.subflow(c,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{const f=Me(c),d=a.get(f);d!==void 0&&(a.delete(f),l(d).rem(c))}),t.visit(t.ADD,c=>{const f=i(c);a.set(Me(c),f),l(f).add(c)}),o||t.modified(i.fields)?t.visit(t.MOD,c=>{const f=Me(c),d=a.get(f),g=i(c);d===g?l(g).mod(c):(a.set(f,g),l(d).rem(c),l(g).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{l(a.get(Me(c))).mod(c)}),o&&t.visit(t.REFLOW,c=>{const f=Me(c),d=a.get(f),g=i(c);d!==g&&(a.set(f,g),l(d).rem(c),l(g).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function Y7(e){Ct.call(this,null,gJ,e)}ye(Y7,Ct);function gJ(e){return this.value&&!e.modified()?this.value:ie(e.name)?Ee(e.name).map(t=>zr(t)):zr(e.name,e.as)}function b3(e){J.call(this,Nd(),e)}b3.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ye(b3,J,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,o=r.rem,l=r.mod,c=e.expr;let f=!0;t.visit(t.REM,g=>{const p=Me(g);i.has(p)?i.delete(p):o.push(g)}),t.visit(t.ADD,g=>{c(g,e)?a.push(g):i.set(Me(g),1)});function d(g){const p=Me(g),y=c(g,e),v=i.get(p);y&&v?(i.delete(p),a.push(g)):!y&&!v?(i.set(p,1),o.push(g)):f&&y&&!v&&l.push(g)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function x3(e){J.call(this,[],e)}x3.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ye(x3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=P7(i,e.as||[]),a=e.index||null,o=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{const c=i.map(v=>v(l)),f=c.reduce((v,b)=>Math.max(v,b.length),0);let d=0,g,p,y;for(;d<f;++d){for(p=PC(l),g=0;g<o;++g)p[r[g]]=(y=c[g][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function S3(e){J.call(this,[],e)}S3.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ye(S3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Xt),a=e.as||["key","value"],o=a[0],l=a[1],c=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,g;d<c;++d)g=PC(f),g[o]=r[d],g[l]=i[d](f),n.add.push(g)}),this.value=n.source=n.add,n.modifies(a)}});function E3(e){J.call(this,null,e)}E3.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ye(E3,J,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,o=>o[i]=n(o,e))}});function X7(e){J.call(this,[],e)}ye(X7,J,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,o,l,c;if(a>0){for(o=[];--a>=0;)o.push(c=dt(i(e))),r.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else l=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(l):l,r=r.slice(-a);return n.source=this.value=r,n}});const Wm={value:"value",median:b9,mean:ZW,min:rw,max:ku},pJ=[];function _3(e){J.call(this,[],e)}_3.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function mJ(e){var t=e.method||Wm.value,n;if(Wm[t]==null)ee("Unrecognized imputation method: "+t);else return t===Wm.value?(n=e.value!==void 0?e.value:0,()=>n):Wm[t]}function yJ(e){const t=e.field;return n=>n?t(n):NaN}ye(_3,J,{transform(e,t){var n=t.fork(t.ALL),i=mJ(e),r=yJ(e),a=Xt(e.field),o=Xt(e.key),l=(e.groupby||[]).map(Xt),c=vJ(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,g=c.domain.length,p,y,v,b,S,_,w,A,$,M;for(S=0,A=c.length;S<A;++S)for(p=c[S],v=p.values,y=NaN,w=0;w<g;++w)if(p[w]==null){for(b=c.domain[w],M={_impute:!0},_=0,$=v.length;_<$;++_)M[l[_]]=v[_];M[o]=b,M[a]=Number.isNaN(y)?y=i(p,r):y,f.push(dt(M))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function vJ(e,t,n,i){var r=_=>_(S),a=[],o=i?i.slice():[],l={},c={},f,d,g,p,y,v,b,S;for(o.forEach((_,w)=>l[_]=w+1),p=0,b=e.length;p<b;++p)S=e[p],v=n(S),y=l[v]||(l[v]=o.push(v)),d=(f=t?t.map(r):pJ)+"",(g=c[d])||(g=c[d]=[],a.push(g),g.values=f),g[y-1]=S;return a.domain=o,a}function w3(e){pl.call(this,e)}w3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:qp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ye(w3,pl,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{Pe(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function A3(e){J.call(this,null,e)}A3.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ye(A3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=p3(i,e.groupby,e.field),a=(e.groupby||[]).map(Xt),o=e.bandwidth,l=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],f=[];let d=e.extent,g=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;l!=="pdf"&&l!=="cdf"&&ee("Invalid density method: "+l),e.resolve==="shared"&&(d||(d=Ya(i,e.field)),g=p=e.steps||p),r.forEach(y=>{const v=ZC(y,o)[l],b=e.counts?y.length:1,S=d||Ya(y);nb(v,S,g,p).forEach(_=>{const w={};for(let A=0;A<a.length;++A)w[a[A]]=y.dims[A];w[c[0]]=_[0],w[c[1]]=_[1]*b,f.push(dt(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function V7(e){Ct.call(this,null,bJ,e)}ye(V7,Ct);function bJ(e){return this.value&&!e.modified()?this.value:$C(e.fields,e.flat)}function W7(e){J.call(this,[],e),this._pending=null}ye(W7,J,{transform(e,t){const n=t.dataflow;return this._pending?EE(this,t,this._pending):xJ(e)?t.StopPropagation:e.values?EE(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Ee(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>EE(this,t,Ee(i.data)))}});function xJ(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function EE(e,t,n){n.forEach(dt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function C3(e){J.call(this,{},e)}C3.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ye(C3,J,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,o=e.modified(),l=n.length;let c=o?t.SOURCE:t.ADD,f=t,d=e.as,g,p,y;return r?(p=r.length,l>1&&!d&&ee('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==l*p&&ee('The "as" parameter has too few output field names.'),d=d||r.map(Xt),g=function(v){for(var b=0,S=0,_,w;b<l;++b)if(w=i.get(n[b](v)),w==null)for(_=0;_<p;++_,++S)v[d[S]]=a;else for(_=0;_<p;++_,++S)v[d[S]]=r[_](w)}):(d||ee("Missing output field names."),g=function(v){for(var b=0,S;b<l;++b)S=i.get(n[b](v)),v[d[b]]=S??a}),o?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),c|=y?t.MOD:0),t.visit(c,g),f.modifies(d)}});function Q7(e){Ct.call(this,null,SJ,e)}ye(Q7,Ct);function SJ(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,o;for(a=0;a<n;++a)o=t[a],o[0]<i&&(i=o[0]),o[1]>r&&(r=o[1]);return[i,r]}function Z7(e){Ct.call(this,null,EJ,e)}ye(Z7,Ct);function EJ(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function K7(e){J.call(this,null,e)}ye(K7,J,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function $3(e){pl.call(this,e)}$3.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:qp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ye($3,pl,{_transform:pl.prototype.transform,transform(e,t){return this._transform(_J(e,t),t)}});function _J(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=Kn(n).concat(Kn(i)),o=AJ(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>r),fields:o.map(l=>wJ(l,n,i,a)),as:o.map(l=>l+""),modified:e.modified.bind(e)}}function wJ(e,t,n,i){return ji(r=>t(r)===e?n(r):NaN,i,e+"")}function AJ(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const o=e(a);i[o]||(i[o]=1,r.push(o))}),r.sort(Dd),t?r.slice(0,t):r}function J7(e){ib.call(this,e)}ye(J7,ib,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(Me(a),n,t,a);return(e.modified("field")||i&&t.modified(Kn(i)))&&ee("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const o=r(a);i(a).forEach(l=>o.mod(l))}),t.visit(t.ADD,a=>{const o=r(a);i(a).forEach(l=>o.add(dt(l)))}),t.visit(t.REM,a=>{const o=r(a);i(a).forEach(l=>o.rem(l))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function T3(e){J.call(this,null,e)}T3.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ye(T3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=P7(e.fields,e.as||[]),a=i?(l,c)=>CJ(l,c,i,r):Wv;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,l=>{const c=Me(l);n.rem.push(o[c]),o[c]=null}),t.visit(t.ADD,l=>{const c=a(l,dt({}));o[Me(l)]=c,n.add.push(c)}),t.visit(t.MOD,l=>{n.mod.push(a(l,o[Me(l)]))}),n}});function CJ(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function eL(e){J.call(this,null,e)}ye(eL,J,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function M3(e){J.call(this,null,e)}M3.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const $J=1e-14;ye(M3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=p3(r,e.groupby,e.field),o=(e.groupby||[]).map(Xt),l=[],c=e.step||.01,f=e.probs||ir(c/2,1-$J,c),d=f.length;return a.forEach(g=>{const p=YC(g,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<o.length;++b)v[o[b]]=g.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],l.push(dt(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l,n}});function tL(e){J.call(this,null,e)}ye(tL,J,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=Me(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=PC(r);i[Me(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[Me(r)];for(const o in r)a[o]=r[o],n.modifies(o);n.mod.push(a)})),n}});function k3(e){J.call(this,[],e),this.count=0}k3.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ye(k3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,g)=>(d[Me(g)]=1,d),{});let o=this.value,l=this.count,c=0;function f(d){let g,p;o.length<r?o.push(d):(p=~~((l+1)*Ur()),p<o.length&&p>=c&&(g=o[p],a[Me(g)]&&n.rem.push(g),o[p]=d)),++l}if(t.rem.length&&(t.visit(t.REM,d=>{const g=Me(d);a[g]&&(a[g]=-1,n.rem.push(d)),--l}),o=o.filter(d=>a[Me(d)]!==-1)),(t.rem.length||i)&&o.length<r&&t.source&&(c=l=o.length,t.visit(t.SOURCE,d=>{a[Me(d)]||f(d)}),c=-1),i&&o.length>r){const d=o.length-r;for(let g=0;g<d;++g)a[Me(o[g])]=-1,n.rem.push(o[g]);o=o.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[Me(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||c<0)&&(n.add=o.filter(d=>!a[Me(d)])),this.count=l,this.value=n.source=o,n}});function O3(e){J.call(this,null,e)}O3.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ye(O3,J,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ir(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,dt(a)}),n.add=t.add.concat(this.value),n}});function nL(e){J.call(this,null,e),this.modified(!0)}ye(nL,J,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function D3(e){J.call(this,null,e)}const iL=["unit0","unit1"];D3.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:RC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:iL}]};ye(D3,J,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),o=(r?Ud:Ld)(a.unit).offset,l=e.as||iL,c=l[0],f=l[1],d=a.step;let g=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Kn(n)))&&(t=t.reflow(!0),y=t.SOURCE,g=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let S,_;b==null?(v[c]=null,i&&(v[f]=null)):(v[c]=S=_=a(b),i&&(v[f]=_=o(S,d)),S<g&&(g=S),_>p&&(p=_))}),a.start=g,a.stop=p,t.modifies(i?l:c)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:X9({extent:e.extent||Ya(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=zC(i),o=this.value||{},l=(n?U9:L9)(a,r);return l.unit=it(a),l.units=a,l.step=r,l.start=o.start,l.stop=o.stop,this.value=l}});function rL(e){J.call(this,Nd(),e)}ye(rL,J,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=l=>r.set(i(l),l);let o=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,l=>r.delete(i(l))),t.visit(t.ADD,a)):o=!1,this.modified(o),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function aL(e){J.call(this,null,e)}ye(aL,J,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(dc(e.sort)):t.source).map(e.field))}});function TJ(e,t,n,i){const r=cp[e](t,n);return{init:r.init||Zs,update:function(a,o){o[i]=r.next(a)}}}const cp={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=cp.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ee("ntile num must be greater than zero.");const n=cp.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ee("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=MJ(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function MJ(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const kJ=Object.keys(cp);function oL(e){const t=Ee(e.ops),n=Ee(e.fields),i=Ee(e.params),r=Ee(e.aggregate_params),a=Ee(e.as),o=this.outputs=[],l=this.windows=[],c={},f={},d=[],g=[];let p=!0;function y(v){Ee(Kn(v)).forEach(b=>c[b]=1)}y(e.sort),t.forEach((v,b)=>{const S=n[b],_=i[b],w=r[b]||null,A=Xt(S),$=z7(v,A,a[b]);if(y(S),o.push($),_e(cp,v))l.push(TJ(v,S,_,$));else{if(S==null&&v!=="count"&&ee("Null aggregate field specified."),v==="count"){d.push($);return}p=!1;let M=f[A];M||(M=f[A]=[],M.field=S,g.push(M)),M.push(F7(v,w,$))}}),(d.length||g.length)&&(this.cell=OJ(g,d,p)),this.inputs=Object.keys(c)}const sL=oL.prototype;sL.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};sL.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(r[o]);for(o=e.p1;o<e.i1;++o)n.add(r[o]);n.set(t)}for(o=0;o<a;++o)i[o].update(e,t)};function OJ(e,t,n){e=e.map(c=>U7(c,c.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),o=0;o<r;++o)a[o]=new e[o](i);if(i.store)var l=i.data=new u3;return i.add=function(c){if(i.num+=1,!n){l&&l.add(c);for(let f=0;f<r;++f)a[f].add(a[f].get(c),c)}},i.rem=function(c){if(i.num-=1,!n){l&&l.rem(c);for(let f=0;f<r;++f)a[f].rem(a[f].get(c),c)}},i.set=function(c){let f,d;for(l&&l.values(),f=0,d=t.length;f<d;++f)c[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(c)},i.init=function(){i.num=0,l&&l.reset();for(let c=0;c<r;++c)a[c].init()},i}function N3(e){J.call(this,{},e),this._mlen=0,this._mods=[]}N3.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:kJ.concat(qp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ye(N3,J,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=dc(e.sort),r=pw(e.groupby),a=l=>this.group(r(l));let o=this.state;(!o||n)&&(o=this.state=new oL(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,l=>a(l).add(l))):(t.visit(t.REM,l=>a(l).remove(l)),t.visit(t.ADD,l=>a(l).add(l)));for(let l=0,c=this._mlen;l<c;++l)DJ(this._mods[l],o,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=B7(Me),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function DJ(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,o=i.frame||[null,0],l=e.data(n),c=l.length,f=a?Rd(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:r||ii(-1)};t.init();for(let g=0;g<c;++g)NJ(d,o,g,c),a&&RJ(d,f),t.update(d,l[g])}function NJ(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function RJ(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,o=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<o&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const zJ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:pl,bin:c3,collect:f3,compare:q7,countpattern:d3,cross:h3,density:g3,dotbin:m3,expression:G7,extent:y3,facet:ib,field:Y7,filter:b3,flatten:x3,fold:S3,formula:E3,generate:X7,impute:_3,joinaggregate:w3,kde:A3,key:V7,load:W7,lookup:C3,multiextent:Q7,multivalues:Z7,params:K7,pivot:$3,prefacet:J7,project:T3,proxy:eL,quantile:M3,relay:tL,sample:k3,sequence:O3,sieve:nL,subflow:v3,timeunit:D3,tupleindex:rL,values:aL,window:N3},Symbol.toStringTag,{value:"Module"}));function ht(e){return function(){return e}}const UR=Math.abs,Hn=Math.atan2,ou=Math.cos,FJ=Math.max,_E=Math.min,Ma=Math.sin,Au=Math.sqrt,Yn=1e-12,Kf=Math.PI,hy=Kf/2,lL=2*Kf;function LJ(e){return e>1?0:e<-1?Kf:Math.acos(e)}function BR(e){return e>=1?hy:e<=-1?-hy:Math.asin(e)}const mw=Math.PI,yw=2*mw,yu=1e-6,UJ=yw-yu;function uL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function BJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return uL;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let R3=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?uL:BJ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=i-t,f=r-n,d=o-t,g=l-n,p=d*d+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>yu)if(!(Math.abs(g*c-f*d)>yu)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-o,v=r-l,b=c*c+f*f,S=y*y+v*v,_=Math.sqrt(b),w=Math.sqrt(p),A=a*Math.tan((mw-Math.acos((b+p-S)/(2*_*w)))/2),$=A/w,M=A/_;Math.abs($-1)>yu&&this._append`L${t+$*d},${n+$*g}`,this._append`A${a},${a},0,0,${+(g*y>d*v)},${this._x1=t+M*c},${this._y1=n+M*f}`}}arc(t,n,i,r,a,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),f=t+l,d=n+c,g=1^o,p=o?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>yu||Math.abs(this._y1-d)>yu)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%yw+yw),p>UJ?this._append`A${i},${i},0,1,${g},${t-l},${n-c}A${i},${i},0,1,${g},${this._x1=f},${this._y1=d}`:p>yu&&this._append`A${i},${i},0,${+(p>=mw)},${g},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function rb(){return new R3}rb.prototype=R3.prototype;function ab(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new R3(t)}function qJ(e){return e.innerRadius}function jJ(e){return e.outerRadius}function IJ(e){return e.startAngle}function PJ(e){return e.endAngle}function HJ(e){return e&&e.padAngle}function GJ(e,t,n,i,r,a,o,l){var c=n-e,f=i-t,d=o-r,g=l-a,p=g*c-d*f;if(!(p*p<Yn))return p=(d*(t-a)-g*(e-r))/p,[e+p*c,t+p*f]}function Qm(e,t,n,i,r,a,o){var l=e-n,c=t-i,f=(o?a:-a)/Au(l*l+c*c),d=f*c,g=-f*l,p=e+d,y=t+g,v=n+d,b=i+g,S=(p+v)/2,_=(y+b)/2,w=v-p,A=b-y,$=w*w+A*A,M=r-a,k=p*b-v*y,T=(A<0?-1:1)*Au(FJ(0,M*M*$-k*k)),N=(k*A-w*T)/$,R=(-k*w-A*T)/$,B=(k*A+w*T)/$,U=(-k*w+A*T)/$,Q=N-S,G=R-_,I=B-S,z=U-_;return Q*Q+G*G>I*I+z*z&&(N=B,R=U),{cx:N,cy:R,x01:-d,y01:-g,x11:N*(r/M-1),y11:R*(r/M-1)}}function YJ(){var e=qJ,t=jJ,n=ht(0),i=null,r=IJ,a=PJ,o=HJ,l=null,c=ab(f);function f(){var d,g,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-hy,b=a.apply(this,arguments)-hy,S=UR(b-v),_=b>v;if(l||(l=d=c()),y<p&&(g=y,y=p,p=g),!(y>Yn))l.moveTo(0,0);else if(S>lL-Yn)l.moveTo(y*ou(v),y*Ma(v)),l.arc(0,0,y,v,b,!_),p>Yn&&(l.moveTo(p*ou(b),p*Ma(b)),l.arc(0,0,p,b,v,_));else{var w=v,A=b,$=v,M=b,k=S,T=S,N=o.apply(this,arguments)/2,R=N>Yn&&(i?+i.apply(this,arguments):Au(p*p+y*y)),B=_E(UR(y-p)/2,+n.apply(this,arguments)),U=B,Q=B,G,I;if(R>Yn){var z=BR(R/p*Ma(N)),D=BR(R/y*Ma(N));(k-=z*2)>Yn?(z*=_?1:-1,$+=z,M-=z):(k=0,$=M=(v+b)/2),(T-=D*2)>Yn?(D*=_?1:-1,w+=D,A-=D):(T=0,w=A=(v+b)/2)}var q=y*ou(w),Y=y*Ma(w),Z=p*ou(M),ue=p*Ma(M);if(B>Yn){var F=y*ou(A),H=y*Ma(A),ae=p*ou($),pe=p*Ma($),ve;if(S<Kf)if(ve=GJ(q,Y,ae,pe,F,H,Z,ue)){var De=q-ve[0],Xe=Y-ve[1],Nt=F-ve[0],me=H-ve[1],Fe=1/Ma(LJ((De*Nt+Xe*me)/(Au(De*De+Xe*Xe)*Au(Nt*Nt+me*me)))/2),qe=Au(ve[0]*ve[0]+ve[1]*ve[1]);U=_E(B,(p-qe)/(Fe-1)),Q=_E(B,(y-qe)/(Fe+1))}else U=Q=0}T>Yn?Q>Yn?(G=Qm(ae,pe,q,Y,y,Q,_),I=Qm(F,H,Z,ue,y,Q,_),l.moveTo(G.cx+G.x01,G.cy+G.y01),Q<B?l.arc(G.cx,G.cy,Q,Hn(G.y01,G.x01),Hn(I.y01,I.x01),!_):(l.arc(G.cx,G.cy,Q,Hn(G.y01,G.x01),Hn(G.y11,G.x11),!_),l.arc(0,0,y,Hn(G.cy+G.y11,G.cx+G.x11),Hn(I.cy+I.y11,I.cx+I.x11),!_),l.arc(I.cx,I.cy,Q,Hn(I.y11,I.x11),Hn(I.y01,I.x01),!_))):(l.moveTo(q,Y),l.arc(0,0,y,w,A,!_)):l.moveTo(q,Y),!(p>Yn)||!(k>Yn)?l.lineTo(Z,ue):U>Yn?(G=Qm(Z,ue,F,H,p,-U,_),I=Qm(q,Y,ae,pe,p,-U,_),l.lineTo(G.cx+G.x01,G.cy+G.y01),U<B?l.arc(G.cx,G.cy,U,Hn(G.y01,G.x01),Hn(I.y01,I.x01),!_):(l.arc(G.cx,G.cy,U,Hn(G.y01,G.x01),Hn(G.y11,G.x11),!_),l.arc(0,0,p,Hn(G.cy+G.y11,G.cx+G.x11),Hn(I.cy+I.y11,I.cx+I.x11),_),l.arc(I.cx,I.cy,U,Hn(I.y11,I.x11),Hn(I.y01,I.x01),!_))):l.arc(0,0,p,M,$,_)}if(l.closePath(),d)return l=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Kf/2;return[ou(g)*d,Ma(g)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:ht(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:ht(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:ht(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:ht(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:ht(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:ht(+d),f):a},f.padAngle=function(d){return arguments.length?(o=typeof d=="function"?d:ht(+d),f):o},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function cL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fL(e){this._context=e}fL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function z3(e){return new fL(e)}function dL(e){return e[0]}function hL(e){return e[1]}function gL(e,t){var n=ht(!0),i=null,r=z3,a=null,o=ab(l);e=typeof e=="function"?e:e===void 0?dL:ht(e),t=typeof t=="function"?t:t===void 0?hL:ht(t);function l(c){var f,d=(c=cL(c)).length,g,p=!1,y;for(i==null&&(a=r(y=o())),f=0;f<=d;++f)!(f<d&&n(g=c[f],f,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(g,f,c),+t(g,f,c));if(y)return a=null,y+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ht(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ht(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:ht(!!c),l):n},l.curve=function(c){return arguments.length?(r=c,i!=null&&(a=r(i)),l):r},l.context=function(c){return arguments.length?(c==null?i=a=null:a=r(i=c),l):i},l}function pL(e,t,n){var i=null,r=ht(!0),a=null,o=z3,l=null,c=ab(f);e=typeof e=="function"?e:e===void 0?dL:ht(+e),t=typeof t=="function"?t:ht(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?hL:ht(+n);function f(g){var p,y,v,b=(g=cL(g)).length,S,_=!1,w,A=new Array(b),$=new Array(b);for(a==null&&(l=o(w=c())),p=0;p<=b;++p){if(!(p<b&&r(S=g[p],p,g))===_)if(_=!_)y=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=y;--v)l.point(A[v],$[v]);l.lineEnd(),l.areaEnd()}_&&(A[p]=+e(S,p,g),$[p]=+t(S,p,g),l.point(i?+i(S,p,g):A[p],n?+n(S,p,g):$[p]))}if(w)return l=null,w+""||null}function d(){return gL().defined(r).curve(o).context(a)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:ht(+g),i=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:ht(+g),f):e},f.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:ht(+g),f):i},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:ht(+g),n=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:ht(+g),f):t},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:ht(+g),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(g){return arguments.length?(r=typeof g=="function"?g:ht(!!g),f):r},f.curve=function(g){return arguments.length?(o=g,a!=null&&(l=o(a)),f):o},f.context=function(g){return arguments.length?(g==null?a=l=null:l=o(a=g),f):a},f}const XJ={draw(e,t){const n=Au(t/Kf);e.moveTo(n,0),e.arc(0,0,n,0,lL)}};function VJ(e,t){let n=null,i=ab(r);e=typeof e=="function"?e:ht(e||XJ),t=typeof t=="function"?t:ht(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:ht(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:ht(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function ml(){}function gy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ob(e){this._context=e}ob.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function WJ(e){return new ob(e)}function mL(e){this._context=e}mL.prototype={areaStart:ml,areaEnd:ml,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function QJ(e){return new mL(e)}function yL(e){this._context=e}yL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:gy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ZJ(e){return new yL(e)}function vL(e,t){this._basis=new ob(e),this._beta=t}vL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,o=t[n]-r,l=-1,c;++l<=n;)c=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+c*a),this._beta*t[l]+(1-this._beta)*(r+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const KJ=(function e(t){function n(i){return t===1?new ob(i):new vL(i,t)}return n.beta=function(i){return e(+i)},n})(.85);function py(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function F3(e,t){this._context=e,this._k=(1-t)/6}F3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:py(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:py(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const JJ=(function e(t){function n(i){return new F3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function L3(e,t){this._context=e,this._k=(1-t)/6}L3.prototype={areaStart:ml,areaEnd:ml,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:py(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const eee=(function e(t){function n(i){return new L3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function U3(e,t){this._context=e,this._k=(1-t)/6}U3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:py(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tee=(function e(t){function n(i){return new U3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function B3(e,t,n){var i=e._x1,r=e._y1,a=e._x2,o=e._y2;if(e._l01_a>Yn){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>Yn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,o,e._x2,e._y2)}function bL(e,t){this._context=e,this._alpha=t}bL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:B3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nee=(function e(t){function n(i){return t?new bL(i,t):new F3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function xL(e,t){this._context=e,this._alpha=t}xL.prototype={areaStart:ml,areaEnd:ml,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:B3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const iee=(function e(t){function n(i){return t?new xL(i,t):new L3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function SL(e,t){this._context=e,this._alpha=t}SL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:B3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ree=(function e(t){function n(i){return t?new SL(i,t):new U3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function EL(e){this._context=e}EL.prototype={areaStart:ml,areaEnd:ml,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function aee(e){return new EL(e)}function qR(e){return e<0?-1:1}function jR(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),o=(n-e._y1)/(r||i<0&&-0),l=(a*r+o*i)/(i+r);return(qR(a)+qR(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function IR(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function wE(e,t,n){var i=e._x0,r=e._y0,a=e._x1,o=e._y1,l=(a-i)/3;e._context.bezierCurveTo(i+l,r+l*t,a-l,o-l*n,a,o)}function my(e){this._context=e}my.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wE(this,this._t0,IR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wE(this,IR(this,n=jR(this,e,t)),n);break;default:wE(this,this._t0,n=jR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function _L(e){this._context=new wL(e)}(_L.prototype=Object.create(my.prototype)).point=function(e,t){my.prototype.point.call(this,t,e)};function wL(e){this._context=e}wL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function oee(e){return new my(e)}function see(e){return new _L(e)}function AL(e){this._context=e}AL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=PR(e),r=PR(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function PR(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),o=new Array(n);for(r[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,o[t]-=i*o[t-1];for(r[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(o[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function lee(e){return new AL(e)}function sb(e,t){this._context=e,this._t=t}sb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function uee(e){return new sb(e,.5)}function cee(e){return new sb(e,0)}function fee(e){return new sb(e,1)}function cl(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const dee=()=>typeof Image<"u"?Image:null;function no(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Tl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vw=Symbol("implicit");function q3(){var e=new oR,t=[],n=[],i=vw;function r(a){let o=e.get(a);if(o===void 0){if(i!==vw)return i;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new oR;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return q3(t,n).unknown(i)},no.apply(r,arguments),r}function qd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jp(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Ml(){}var ju=.7,Jf=1/ju,Ff="\\s*([+-]?\\d+)\\s*",fp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hee=/^#([0-9a-f]{3,8})$/,gee=new RegExp(`^rgb\\(${Ff},${Ff},${Ff}\\)$`),pee=new RegExp(`^rgb\\(${qa},${qa},${qa}\\)$`),mee=new RegExp(`^rgba\\(${Ff},${Ff},${Ff},${fp}\\)$`),yee=new RegExp(`^rgba\\(${qa},${qa},${qa},${fp}\\)$`),vee=new RegExp(`^hsl\\(${fp},${qa},${qa}\\)$`),bee=new RegExp(`^hsla\\(${fp},${qa},${qa},${fp}\\)$`),HR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qd(Ml,dp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:GR,formatHex:GR,formatHex8:xee,formatHsl:See,formatRgb:YR,toString:YR});function GR(){return this.rgb().formatHex()}function xee(){return this.rgb().formatHex8()}function See(){return CL(this).formatHsl()}function YR(){return this.rgb().formatRgb()}function dp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hee.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?XR(t):n===3?new Sn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Zm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Zm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gee.exec(e))?new Sn(t[1],t[2],t[3],1):(t=pee.exec(e))?new Sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mee.exec(e))?Zm(t[1],t[2],t[3],t[4]):(t=yee.exec(e))?Zm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vee.exec(e))?QR(t[1],t[2]/100,t[3]/100,1):(t=bee.exec(e))?QR(t[1],t[2]/100,t[3]/100,t[4]):HR.hasOwnProperty(e)?XR(HR[e]):e==="transparent"?new Sn(NaN,NaN,NaN,0):null}function XR(e){return new Sn(e>>16&255,e>>8&255,e&255,1)}function Zm(e,t,n,i){return i<=0&&(e=t=n=NaN),new Sn(e,t,n,i)}function j3(e){return e instanceof Ml||(e=dp(e)),e?(e=e.rgb(),new Sn(e.r,e.g,e.b,e.opacity)):new Sn}function yl(e,t,n,i){return arguments.length===1?j3(e):new Sn(e,t,n,i??1)}function Sn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}qd(Sn,yl,jp(Ml,{brighter(e){return e=e==null?Jf:Math.pow(Jf,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Sn(Ou(this.r),Ou(this.g),Ou(this.b),yy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VR,formatHex:VR,formatHex8:Eee,formatRgb:WR,toString:WR}));function VR(){return`#${Cu(this.r)}${Cu(this.g)}${Cu(this.b)}`}function Eee(){return`#${Cu(this.r)}${Cu(this.g)}${Cu(this.b)}${Cu((isNaN(this.opacity)?1:this.opacity)*255)}`}function WR(){const e=yy(this.opacity);return`${e===1?"rgb(":"rgba("}${Ou(this.r)}, ${Ou(this.g)}, ${Ou(this.b)}${e===1?")":`, ${e})`}`}function yy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ou(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Cu(e){return e=Ou(e),(e<16?"0":"")+e.toString(16)}function QR(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new na(e,t,n,i)}function CL(e){if(e instanceof na)return new na(e.h,e.s,e.l,e.opacity);if(e instanceof Ml||(e=dp(e)),!e)return new na;if(e instanceof na)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),o=NaN,l=a-r,c=(a+r)/2;return l?(t===a?o=(n-i)/l+(n<i)*6:n===a?o=(i-t)/l+2:o=(t-n)/l+4,l/=c<.5?a+r:2-a-r,o*=60):l=c>0&&c<1?0:o,new na(o,l,c,e.opacity)}function vy(e,t,n,i){return arguments.length===1?CL(e):new na(e,t,n,i??1)}function na(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}qd(na,vy,jp(Ml,{brighter(e){return e=e==null?Jf:Math.pow(Jf,e),new na(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new na(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Sn(AE(e>=240?e-240:e+120,r,i),AE(e,r,i),AE(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new na(ZR(this.h),Km(this.s),Km(this.l),yy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=yy(this.opacity);return`${e===1?"hsl(":"hsla("}${ZR(this.h)}, ${Km(this.s)*100}%, ${Km(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ZR(e){return e=(e||0)%360,e<0?e+360:e}function Km(e){return Math.max(0,Math.min(1,e||0))}function AE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $L=Math.PI/180,TL=180/Math.PI,by=18,ML=.96422,kL=1,OL=.82521,DL=4/29,Lf=6/29,NL=3*Lf*Lf,_ee=Lf*Lf*Lf;function RL(e){if(e instanceof ja)return new ja(e.l,e.a,e.b,e.opacity);if(e instanceof Go)return zL(e);e instanceof Sn||(e=j3(e));var t=ME(e.r),n=ME(e.g),i=ME(e.b),r=CE((.2225045*t+.7168786*n+.0606169*i)/kL),a,o;return t===n&&n===i?a=o=r:(a=CE((.4360747*t+.3850649*n+.1430804*i)/ML),o=CE((.0139322*t+.0971045*n+.7141733*i)/OL)),new ja(116*r-16,500*(a-r),200*(r-o),e.opacity)}function xy(e,t,n,i){return arguments.length===1?RL(e):new ja(e,t,n,i??1)}function ja(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}qd(ja,xy,jp(Ml,{brighter(e){return new ja(this.l+by*(e??1),this.a,this.b,this.opacity)},darker(e){return new ja(this.l-by*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=ML*$E(t),e=kL*$E(e),n=OL*$E(n),new Sn(TE(3.1338561*t-1.6168667*e-.4906146*n),TE(-.9787684*t+1.9161415*e+.033454*n),TE(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function CE(e){return e>_ee?Math.pow(e,1/3):e/NL+DL}function $E(e){return e>Lf?e*e*e:NL*(e-DL)}function TE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ME(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function wee(e){if(e instanceof Go)return new Go(e.h,e.c,e.l,e.opacity);if(e instanceof ja||(e=RL(e)),e.a===0&&e.b===0)return new Go(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*TL;return new Go(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Sy(e,t,n,i){return arguments.length===1?wee(e):new Go(e,t,n,i??1)}function Go(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function zL(e){if(isNaN(e.h))return new ja(e.l,0,0,e.opacity);var t=e.h*$L;return new ja(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}qd(Go,Sy,jp(Ml,{brighter(e){return new Go(this.h,this.c,this.l+by*(e??1),this.opacity)},darker(e){return new Go(this.h,this.c,this.l-by*(e??1),this.opacity)},rgb(){return zL(this).rgb()}}));var FL=-.14861,I3=1.78277,P3=-.29227,lb=-.90649,hp=1.97294,KR=hp*lb,JR=hp*I3,e6=I3*P3-lb*FL;function Aee(e){if(e instanceof Du)return new Du(e.h,e.s,e.l,e.opacity);e instanceof Sn||(e=j3(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(e6*i+KR*t-JR*n)/(e6+KR-JR),a=i-r,o=(hp*(n-r)-P3*a)/lb,l=Math.sqrt(o*o+a*a)/(hp*r*(1-r)),c=l?Math.atan2(o,a)*TL-120:NaN;return new Du(c<0?c+360:c,l,r,e.opacity)}function bw(e,t,n,i){return arguments.length===1?Aee(e):new Du(e,t,n,i??1)}function Du(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}qd(Du,bw,jp(Ml,{brighter(e){return e=e==null?Jf:Math.pow(Jf,e),new Du(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new Du(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*$L,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Sn(255*(t+n*(FL*i+I3*r)),255*(t+n*(P3*i+lb*r)),255*(t+n*(hp*i)),this.opacity)}}));function LL(e,t,n,i,r){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*i+o*r)/6}function UL(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],o=i>0?e[i-1]:2*r-a,l=i<t-1?e[i+2]:2*a-r;return LL((n-i/t)*t,o,r,a,l)}}function BL(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],o=e[(i+1)%t],l=e[(i+2)%t];return LL((n-i/t)*t,r,a,o,l)}}const ub=e=>()=>e;function qL(e,t){return function(n){return e+n*t}}function Cee(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function cb(e,t){var n=t-e;return n?qL(e,n>180||n<-180?n-360*Math.round(n/360):n):ub(isNaN(e)?t:e)}function $ee(e){return(e=+e)==1?En:function(t,n){return n-t?Cee(t,n,e):ub(isNaN(t)?n:t)}}function En(e,t){var n=t-e;return n?qL(e,n):ub(isNaN(e)?t:e)}const xw=(function e(t){var n=$ee(t);function i(r,a){var o=n((r=yl(r)).r,(a=yl(a)).r),l=n(r.g,a.g),c=n(r.b,a.b),f=En(r.opacity,a.opacity);return function(d){return r.r=o(d),r.g=l(d),r.b=c(d),r.opacity=f(d),r+""}}return i.gamma=e,i})(1);function jL(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),o,l;for(o=0;o<n;++o)l=yl(t[o]),i[o]=l.r||0,r[o]=l.g||0,a[o]=l.b||0;return i=e(i),r=e(r),a=e(a),l.opacity=1,function(c){return l.r=i(c),l.g=r(c),l.b=a(c),l+""}}}var Tee=jL(UL),Mee=jL(BL);function H3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function IL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kee(e,t){return(IL(t)?H3:PL)(e,t)}function PL(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=kl(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<i;++o)a[o]=r[o](l);return a}}function HL(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ea(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function GL(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=kl(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var Sw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kE=new RegExp(Sw.source,"g");function Oee(e){return function(){return e}}function Dee(e){return function(t){return e(t)+""}}function YL(e,t){var n=Sw.lastIndex=kE.lastIndex=0,i,r,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(i=Sw.exec(e))&&(r=kE.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(i=i[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:ea(i,r)})),n=kE.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?Dee(c[0].x):Oee(t):(t=c.length,function(f){for(var d=0,g;d<t;++d)l[(g=c[d]).i]=g.x(f);return l.join("")})}function kl(e,t){var n=typeof t,i;return t==null||n==="boolean"?ub(t):(n==="number"?ea:n==="string"?(i=dp(t))?(t=i,xw):YL:t instanceof dp?xw:t instanceof Date?HL:IL(t)?H3:Array.isArray(t)?PL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?GL:ea)(e,t)}function Nee(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Ree(e,t){var n=cb(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Ip(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var t6=180/Math.PI,Ew={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function XL(e,t,n,i,r,a){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,c/=l),e*i<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*t6,skewX:Math.atan(c)*t6,scaleX:o,scaleY:l}}var Jm;function zee(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ew:XL(t.a,t.b,t.c,t.d,t.e,t.f)}function Fee(e){return e==null||(Jm||(Jm=document.createElementNS("http://www.w3.org/2000/svg","g")),Jm.setAttribute("transform",e),!(e=Jm.transform.baseVal.consolidate()))?Ew:(e=e.matrix,XL(e.a,e.b,e.c,e.d,e.e,e.f))}function VL(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:ea(f,g)},{i:b-2,x:ea(d,p)})}else(g||p)&&y.push("translate("+g+t+p+n)}function o(f,d,g,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:g.push(r(g)+"rotate(",null,i)-2,x:ea(f,d)})):d&&g.push(r(g)+"rotate("+d+i)}function l(f,d,g,p){f!==d?p.push({i:g.push(r(g)+"skewX(",null,i)-2,x:ea(f,d)}):d&&g.push(r(g)+"skewX("+d+i)}function c(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:ea(f,g)},{i:b-2,x:ea(d,p)})}else(g!==1||p!==1)&&y.push(r(y)+"scale("+g+","+p+")")}return function(f,d){var g=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,g,p),o(f.rotate,d.rotate,g,p),l(f.skewX,d.skewX,g,p),c(f.scaleX,f.scaleY,d.scaleX,d.scaleY,g,p),f=d=null,function(y){for(var v=-1,b=p.length,S;++v<b;)g[(S=p[v]).i]=S.x(y);return g.join("")}}}var Lee=VL(zee,"px, ","px)","deg)"),Uee=VL(Fee,", ",")",")"),Bee=1e-12;function n6(e){return((e=Math.exp(e))+1/e)/2}function qee(e){return((e=Math.exp(e))-1/e)/2}function jee(e){return((e=Math.exp(2*e))-1)/(e+1)}const Iee=(function e(t,n,i){function r(a,o){var l=a[0],c=a[1],f=a[2],d=o[0],g=o[1],p=o[2],y=d-l,v=g-c,b=y*y+v*v,S,_;if(b<Bee)_=Math.log(p/f)/t,S=function(T){return[l+T*y,c+T*v,f*Math.exp(t*T*_)]};else{var w=Math.sqrt(b),A=(p*p-f*f+i*b)/(2*f*n*w),$=(p*p-f*f-i*b)/(2*p*n*w),M=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt($*$+1)-$);_=(k-M)/t,S=function(T){var N=T*_,R=n6(M),B=f/(n*w)*(R*jee(t*N+M)-qee(M));return[l+B*y,c+B*v,f*R/n6(t*N+M)]}}return S.duration=_*1e3*t/Math.SQRT2,S}return r.rho=function(a){var o=Math.max(.001,+a),l=o*o,c=l*l;return e(o,l,c)},r})(Math.SQRT2,2,4);function WL(e){return function(t,n){var i=e((t=vy(t)).h,(n=vy(n)).h),r=En(t.s,n.s),a=En(t.l,n.l),o=En(t.opacity,n.opacity);return function(l){return t.h=i(l),t.s=r(l),t.l=a(l),t.opacity=o(l),t+""}}}const Pee=WL(cb);var Hee=WL(En);function Gee(e,t){var n=En((e=xy(e)).l,(t=xy(t)).l),i=En(e.a,t.a),r=En(e.b,t.b),a=En(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=r(o),e.opacity=a(o),e+""}}function QL(e){return function(t,n){var i=e((t=Sy(t)).h,(n=Sy(n)).h),r=En(t.c,n.c),a=En(t.l,n.l),o=En(t.opacity,n.opacity);return function(l){return t.h=i(l),t.c=r(l),t.l=a(l),t.opacity=o(l),t+""}}}const Yee=QL(cb);var Xee=QL(En);function ZL(e){return(function t(n){n=+n;function i(r,a){var o=e((r=bw(r)).h,(a=bw(a)).h),l=En(r.s,a.s),c=En(r.l,a.l),f=En(r.opacity,a.opacity);return function(d){return r.h=o(d),r.s=l(d),r.l=c(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i})(1)}const Vee=ZL(cb);var Wee=ZL(En);function G3(e,t){t===void 0&&(t=e,e=kl);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(o){var l=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return a[l](o-l)}}function Qee(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Zee=Object.freeze(Object.defineProperty({__proto__:null,interpolate:kl,interpolateArray:kee,interpolateBasis:UL,interpolateBasisClosed:BL,interpolateCubehelix:Vee,interpolateCubehelixLong:Wee,interpolateDate:HL,interpolateDiscrete:Nee,interpolateHcl:Yee,interpolateHclLong:Xee,interpolateHsl:Pee,interpolateHslLong:Hee,interpolateHue:Ree,interpolateLab:Gee,interpolateNumber:ea,interpolateNumberArray:H3,interpolateObject:GL,interpolateRgb:xw,interpolateRgbBasis:Tee,interpolateRgbBasisClosed:Mee,interpolateRound:Ip,interpolateString:YL,interpolateTransformCss:Lee,interpolateTransformSvg:Uee,interpolateZoom:Iee,piecewise:G3,quantize:Qee},Symbol.toStringTag,{value:"Module"}));function Kee(e){return function(){return e}}function _w(e){return+e}var i6=[0,1];function Ni(e){return e}function ww(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Kee(isNaN(t)?NaN:.5)}function Jee(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function ete(e,t,n){var i=e[0],r=e[1],a=t[0],o=t[1];return r<i?(i=ww(r,i),a=n(o,a)):(i=ww(i,r),a=n(a,o)),function(l){return a(i(l))}}function tte(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=ww(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var c=hl(e,l,1,i)-1;return a[c](r[c](l))}}function Pp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function fb(){var e=i6,t=i6,n=kl,i,r,a,o=Ni,l,c,f;function d(){var p=Math.min(e.length,t.length);return o!==Ni&&(o=Jee(e[0],e[p-1])),l=p>2?tte:ete,c=f=null,g}function g(p){return p==null||isNaN(p=+p)?a:(c||(c=l(e.map(i),t,n)))(i(o(p)))}return g.invert=function(p){return o(r((f||(f=l(t,e.map(i),ea)))(p)))},g.domain=function(p){return arguments.length?(e=Array.from(p,_w),d()):e.slice()},g.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},g.rangeRound=function(p){return t=Array.from(p),n=Ip,d()},g.clamp=function(p){return arguments.length?(o=p?!0:Ni,d()):o!==Ni},g.interpolate=function(p){return arguments.length?(n=p,d()):n},g.unknown=function(p){return arguments.length?(a=p,g):a},function(p,y){return i=p,r=y,d()}}function KL(){return fb()(Ni,Ni)}function JL(e,t,n,i){var r=gl(e,t,n),a;switch(i=qu(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=A9(r,o))&&(i.precision=a),DC(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=C9(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=w9(r))&&(i.precision=a-(i.type==="%")*2);break}}return qv(i)}function gc(e){var t=e.domain;return e.ticks=function(n){var i=t();return nw(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return JL(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,o=i[r],l=i[a],c,f,d=10;for(l<o&&(f=o,o=l,l=f,f=r,r=a,a=f);d-- >0;){if(f=iw(o,l,n),f===c)return i[r]=o,i[a]=l,t(i);if(f>0)o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f;else if(f<0)o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f;else break;c=f}return e},e}function eU(){var e=KL();return e.copy=function(){return Pp(e,eU())},no.apply(e,arguments),gc(e)}function tU(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,_w),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return tU(e).unknown(t)},e=arguments.length?Array.from(e,_w):[0,1],gc(n)}function nU(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],o;return a<r&&(o=n,n=i,i=o,o=r,r=a,a=o),e[n]=t.floor(r),e[i]=t.ceil(a),e}function r6(e){return Math.log(e)}function a6(e){return Math.exp(e)}function nte(e){return-Math.log(-e)}function ite(e){return-Math.exp(-e)}function rte(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ate(e){return e===10?rte:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ote(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function o6(e){return(t,n)=>-e(-t,n)}function Y3(e){const t=e(r6,a6),n=t.domain;let i=10,r,a;function o(){return r=ote(i),a=ate(i),n()[0]<0?(r=o6(r),a=o6(a),e(nte,ite)):e(r6,a6),t}return t.base=function(l){return arguments.length?(i=+l,o()):i},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let f=c[0],d=c[c.length-1];const g=d<f;g&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const S=l==null?10:+l;let _=[];if(!(i%1)&&y-p<S){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}_.length*2<S&&(_=nw(f,d,S))}else _=nw(p,y,Math.min(y-p,S)).map(a);return g?_.reverse():_},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=qu(c)).precision==null&&(c.trim=!0),c=qv(c)),l===1/0)return c;const f=Math.max(1,i*l/t.ticks().length);return d=>{let g=d/a(Math.round(r(d)));return g*i<i-.5&&(g*=i),g<=f?c(d):""}},t.nice=()=>n(nU(n(),{floor:l=>a(Math.floor(r(l))),ceil:l=>a(Math.ceil(r(l)))})),t}function iU(){const e=Y3(fb()).domain([1,10]);return e.copy=()=>Pp(e,iU()).base(e.base()),no.apply(e,arguments),e}function s6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function l6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function X3(e){var t=1,n=e(s6(t),l6(t));return n.constant=function(i){return arguments.length?e(s6(t=+i),l6(t)):t},gc(n)}function rU(){var e=X3(fb());return e.copy=function(){return Pp(e,rU()).constant(e.constant())},no.apply(e,arguments)}function u6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ste(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function lte(e){return e<0?-e*e:e*e}function V3(e){var t=e(Ni,Ni),n=1;function i(){return n===1?e(Ni,Ni):n===.5?e(ste,lte):e(u6(n),u6(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},gc(t)}function W3(){var e=V3(fb());return e.copy=function(){return Pp(e,W3()).exponent(e.exponent())},no.apply(e,arguments),e}function ute(){return W3.apply(null,arguments).exponent(.5)}function aU(){var e=[],t=[],n=[],i;function r(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=v9(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?i:t[hl(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Vo),r()},a.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return aU().domain(e).range(t).unknown(i)},no.apply(a,arguments)}function oU(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function o(c){return c!=null&&c<=c?r[hl(i,c,0,n)]:a}function l(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(r=Array.from(c)).length-1,l()):r.slice()},o.invertExtent=function(c){var f=r.indexOf(c);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return i.slice()},o.copy=function(){return oU().domain([e,t]).range(r).unknown(a)},no.apply(gc(o),arguments)}function sU(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[hl(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return sU().domain(e).range(t).unknown(n)},no.apply(r,arguments)}function cte(e){return new Date(e)}function fte(e){return e instanceof Date?+e:+new Date(+e)}function Q3(e,t,n,i,r,a,o,l,c,f){var d=KL(),g=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),S=f("%I %p"),_=f("%a %d"),w=f("%b %d"),A=f("%B"),$=f("%Y");function M(k){return(c(k)<k?y:l(k)<k?v:o(k)<k?b:a(k)<k?S:i(k)<k?r(k)<k?_:w:n(k)<k?A:$)(k)}return d.invert=function(k){return new Date(g(k))},d.domain=function(k){return arguments.length?p(Array.from(k,fte)):p().map(cte)},d.ticks=function(k){var T=p();return e(T[0],T[T.length-1],k??10)},d.tickFormat=function(k,T){return T==null?M:f(T)},d.nice=function(k){var T=p();return(!k||typeof k.range!="function")&&(k=t(T[0],T[T.length-1],k??10)),k?p(nU(T,k)):d},d.copy=function(){return Pp(d,Q3(e,t,n,i,r,a,o,l,c,f))},d}function dte(){return no.apply(Q3(bQ,xQ,Xa,op,zd,Wo,Pv,jv,Ho,LC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hte(){return no.apply(Q3(yQ,vQ,Va,sp,Fd,ll,Hv,Iv,Ho,UC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function db(){var e=0,t=1,n,i,r,a,o=Ni,l=!1,c;function f(g){return g==null||isNaN(g=+g)?c:o(r===0?.5:(g=(a(g)-n)*r,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(o=g,f):o};function d(g){return function(p){var y,v;return arguments.length?([y,v]=p,o=g(y,v),f):[o(0),o(1)]}}return f.range=d(kl),f.rangeRound=d(Ip),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return a=g,n=g(e),i=g(t),r=n===i?0:1/(i-n),f}}function Ol(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Z3(){var e=gc(db()(Ni));return e.copy=function(){return Ol(e,Z3())},Tl.apply(e,arguments)}function lU(){var e=Y3(db()).domain([1,10]);return e.copy=function(){return Ol(e,lU()).base(e.base())},Tl.apply(e,arguments)}function uU(){var e=X3(db());return e.copy=function(){return Ol(e,uU()).constant(e.constant())},Tl.apply(e,arguments)}function K3(){var e=V3(db());return e.copy=function(){return Ol(e,K3()).exponent(e.exponent())},Tl.apply(e,arguments)}function gte(){return K3.apply(null,arguments).exponent(.5)}function hb(){var e=0,t=.5,n=1,i=1,r,a,o,l,c,f=Ni,d,g=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?l:c),f(g?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),o=d(n=+n),l=r===a?0:.5/(a-r),c=a===o?0:.5/(o-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(g=!!b,y):g},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(S){var _,w,A;return arguments.length?([_,w,A]=S,f=G3(b,[_,w,A]),y):[f(0),f(.5),f(1)]}}return y.range=v(kl),y.rangeRound=v(Ip),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),o=b(n),l=r===a?0:.5/(a-r),c=a===o?0:.5/(o-a),i=a<r?-1:1,y}}function cU(){var e=gc(hb()(Ni));return e.copy=function(){return Ol(e,cU())},Tl.apply(e,arguments)}function fU(){var e=Y3(hb()).domain([.1,1,10]);return e.copy=function(){return Ol(e,fU()).base(e.base())},Tl.apply(e,arguments)}function dU(){var e=X3(hb());return e.copy=function(){return Ol(e,dU()).constant(e.constant())},Tl.apply(e,arguments)}function J3(){var e=V3(hb());return e.copy=function(){return Ol(e,J3()).exponent(e.exponent())},Tl.apply(e,arguments)}function pte(){return J3.apply(null,arguments).exponent(.5)}function io(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const mte=io("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),yte=io("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),vte=io("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),bte=io("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),xte=io("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ste=io("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ete=io("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),_te=io("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),wte=io("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ate=io("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function e$(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const Cte="identity",ed="linear",is="log",Hp="pow",Gp="sqrt",gb="symlog",Iu="time",Pu="utc",Ia="sequential",jd="diverging",td="quantile",pb="quantize",mb="threshold",t$="ordinal",Aw="point",hU="band",n$="bin-ordinal",yn="continuous",Yp="discrete",Xp="discretizing",Ir="interpolating",i$="temporal";function $te(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function Tte(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,o,l,c,f;for(r<i&&(l=i,i=r,r=l),c=0,f=n.length;c<f;++c)n[c]>=i&&n[c]<=r&&(a<0&&(a=c),o=c);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[o]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function r$(){const e=q3().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,o=!1,l=0,c=0,f=.5;delete e.unknown;function d(){const g=t().length,p=i[1]<i[0],y=i[1-p],v=e$(g,l,c);let b=i[p-0];r=(y-b)/(v||1),o&&(r=Math.floor(r)),b+=(y-b-r*(g-l))*f,a=r*(1-l),o&&(b=Math.round(b),a=Math.round(a));const S=ir(g).map(_=>b+r*_);return n(p?S.reverse():S)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?(i=[+g[0],+g[1]],d()):i.slice()},e.rangeRound=function(g){return i=[+g[0],+g[1]],o=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(g){return arguments.length?(o=!!g,d()):o},e.padding=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),l=c,d()):l},e.paddingInner=function(g){return arguments.length?(l=Math.max(0,Math.min(1,g)),d()):l},e.paddingOuter=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),d()):c},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),d()):f},e.invertRange=function(g){if(g[0]==null||g[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+g[0],S=+g[1],_,w,A;if(!(b!==b||S!==S)&&(S<b&&(A=b,b=S,S=A),!(S<y[0]||b>i[1-p])))return _=Math.max(0,hl(y,b)-1),w=b===S?_:hl(y,S)-1,b-y[_]>a+1e-10&&++_,p&&(A=_,_=v-w,w=v-A),_>w?void 0:t().slice(_,w+1)},e.invert=function(g){const p=e.invertRange([g,g]);return p&&p[0]},e.copy=function(){return r$().domain(t()).range(i).round(o).paddingInner(l).paddingOuter(c).align(f)},d()}function gU(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return gU(t())},e}function Mte(){return gU(r$().paddingInner(1))}var kte=Array.prototype.map;function Ote(e){return kte.call(e,Qn)}const Dte=Array.prototype.slice;function pU(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(hl(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=Ote(i),n):e.slice()},n.range=function(i){return arguments.length?(t=Dte.call(i),n):t.slice()},n.tickFormat=function(i,r){return JL(e[0],it(e),i??10,r)},n.copy=function(){return pU().domain(n.domain()).range(n.range())},n}const Ey=new Map,mU=Symbol("vega_scale");function yU(e){return e[mU]=!0,e}function c6(e){return e&&e[mU]===!0}function Nte(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?$te(a):a.invertExtent?Tte(a):void 0),a.type=e,yU(a)};return i.metadata=ca(Ee(n)),i}function ct(e,t,n){return arguments.length>1?(Ey.set(e,Nte(e,t,n)),this):vU(e)?Ey.get(e):void 0}ct(Cte,tU);ct(ed,eU,yn);ct(is,iU,[yn,is]);ct(Hp,W3,yn);ct(Gp,ute,yn);ct(gb,rU,yn);ct(Iu,dte,[yn,i$]);ct(Pu,hte,[yn,i$]);ct(Ia,Z3,[yn,Ir]);ct(`${Ia}-${ed}`,Z3,[yn,Ir]);ct(`${Ia}-${is}`,lU,[yn,Ir,is]);ct(`${Ia}-${Hp}`,K3,[yn,Ir]);ct(`${Ia}-${Gp}`,gte,[yn,Ir]);ct(`${Ia}-${gb}`,uU,[yn,Ir]);ct(`${jd}-${ed}`,cU,[yn,Ir]);ct(`${jd}-${is}`,fU,[yn,Ir,is]);ct(`${jd}-${Hp}`,J3,[yn,Ir]);ct(`${jd}-${Gp}`,pte,[yn,Ir]);ct(`${jd}-${gb}`,dU,[yn,Ir]);ct(td,aU,[Xp,td]);ct(pb,oU,Xp);ct(mb,sU,Xp);ct(n$,pU,[Yp,Xp]);ct(t$,q3,Yp);ct(hU,r$,Yp);ct(Aw,Mte,Yp);function vU(e){return Ey.has(e)}function pc(e,t){const n=Ey.get(e);return n&&n.metadata[t]}function a$(e){return pc(e,yn)}function nd(e){return pc(e,Yp)}function Cw(e){return pc(e,Xp)}function bU(e){return pc(e,is)}function Rte(e){return pc(e,i$)}function xU(e){return pc(e,Ir)}function SU(e){return pc(e,td)}const zte=["clamp","base","constant","exponent"];function EU(e,t){const n=t[0],i=it(t)-n;return function(r){return e(n+r*i)}}function yb(e,t,n){return G3(o$(t||"rgb",n),e)}function _U(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function wU(e,t,n){const i=n-t;let r,a,o;return!i||!Number.isFinite(i)?ii(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),o=ct(a)().domain([t,n]).range([0,1]),zte.forEach(l=>e[l]?o[l](e[l]()):0),o)}function o$(e,t){const n=Zee[Fte(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Fte(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Lte={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Ute={accent:yte,category10:mte,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:vte,observable10:bte,paired:xte,pastel1:Ste,pastel2:Ete,set1:_te,set2:wte,set3:Ate,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function AU(e){if(ie(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function CU(e,t){for(const n in e)s$(n,t(e[n]))}const f6={};CU(Ute,AU);CU(Lte,e=>yb(AU(e)));function s$(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(f6[e]=t,this):f6[e]}const z1="symbol",Bte="discrete",qte="gradient",jte=e=>ie(e)?e.map(t=>String(t)):String(e),Ite=(e,t)=>e[1]-t[1],Pte=(e,t)=>t[1]-e[1];function l$(e,t,n){let i;return lt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Lp(e.domain())/n||1)+1))),xe(t)&&(i=t.step,t=t.interval),Se(t)&&(t=e.type===Iu?Ld(t):e.type==Pu?Ud(t):ee("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function $U(e,t,n){let i=e.range(),r=i[0],a=it(i),o=Ite;if(r>a&&(i=a,a=r,r=i,o=Pte),r=Math.floor(r),a=Math.ceil(a),t=t.map(l=>[l,e(l)]).filter(l=>r<=l[1]&&l[1]<=a).sort(o).map(l=>l[0]),n>0&&t.length>1){const l=[t[0],it(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,f)=>!(f%2));t.length<3&&(t=l)}return t}function u$(e,t){return e.bins?$U(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function TU(e,t,n,i,r,a){const o=t.type;let l=jte;if(o===Iu||r===Iu)l=e.timeFormat(i);else if(o===Pu||r===Pu)l=e.utcFormat(i);else if(bU(o)){const c=e.formatFloat(i);if(a||t.bins)l=c;else{const f=MU(t,n,!1);l=d=>f(d)?c(d):""}}else if(t.tickFormat){const c=t.domain();l=e.formatSpan(c[0],c[c.length-1],n,i)}else i&&(l=e.format(i));return l}function MU(e,t,n){const i=u$(e,t),r=e.base(),a=Math.log(r),o=Math.max(1,r*t/i.length),l=c=>{let f=c/Math.pow(r,Math.round(Math.log(c)/a));return f*r<r-.5&&(f*=r),f<=o};return n?i.filter(l):l}const $w={[td]:"quantiles",[pb]:"thresholds",[mb]:"domain"},kU={[td]:"quantiles",[pb]:"domain"};function OU(e,t){return e.bins?Yte(e.bins):e.type===is?MU(e,t,!0):$w[e.type]?Gte(e[$w[e.type]]()):u$(e,t)}function Hte(e,t,n){const i=t[kU[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],o;for(o=1;o<r;++o)a=Math.min(a,i[o]-i[o-1]);return e.formatSpan(0,a,30,n)}function Gte(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Yte(e){const t=e.slice(0,-1);return t.max=it(e),t}const Xte=e=>$w[e.type]||e.bins;function DU(e,t,n,i,r,a,o){const l=kU[t.type]&&a!==Iu&&a!==Pu?Hte(e,t,r):TU(e,t,n,r,a,o);return i===z1&&Xte(t)?Vte(l):i===Bte?Wte(l):Qte(l)}const Vte=e=>(t,n,i)=>{const r=d6(i[n+1],d6(i.max,1/0)),a=h6(t,e),o=h6(r,e);return a&&o?a+"  "+o:o?"< "+o:" "+a},d6=(e,t)=>e??t,Wte=e=>(t,n)=>n?e(t):null,Qte=e=>t=>e(t),h6=(e,t)=>Number.isFinite(e)?t(e):null;function Zte(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+it(t),a=r-i;if(e.type===mb){const o=n?a/n:.1;i-=o,r+=o,a=r-i}return o=>(o-i)/a}function Kte(e,t,n,i){const r=i||t.type;return Se(n)&&Rte(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===Iu?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===Pu?e.utcFormat("%A, %d %B %Y, %X UTC"):DU(e,t,5,null,n,i,!0)}function NU(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=Kte(e,t,n.format,n.formatType);if(Cw(t.type)){const a=OU(t).slice(1).map(r),o=a.length;return`${o} boundar${o===1?"y":"ies"}: ${a.join(", ")}`}else if(nd(t.type)){const a=t.domain(),o=a.length,l=o>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${o} value${o===1?"":"s"}: ${l}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(it(a))}`}}let RU=0;function Jte(){RU=0}const _y="p_";function c$(e){return e&&e.gradient}function zU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?_y:"";return r||(r=e.id="gradient_"+RU++,i==="radial"?(e.x1=ka(e.x1,.5),e.y1=ka(e.y1,.5),e.r1=ka(e.r1,0),e.x2=ka(e.x2,.5),e.y2=ka(e.y2,.5),e.r2=ka(e.r2,.5),a=_y):(e.x1=ka(e.x1,0),e.y1=ka(e.y1,0),e.x2=ka(e.x2,1),e.y2=ka(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function ka(e,t){return e??t}function FU(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const g6={basis:{curve:WJ},"basis-closed":{curve:QJ},"basis-open":{curve:ZJ},bundle:{curve:KJ,tension:"beta",value:.85},cardinal:{curve:JJ,tension:"tension",value:0},"cardinal-open":{curve:tee,tension:"tension",value:0},"cardinal-closed":{curve:eee,tension:"tension",value:0},"catmull-rom":{curve:nee,tension:"alpha",value:.5},"catmull-rom-closed":{curve:iee,tension:"alpha",value:.5},"catmull-rom-open":{curve:ree,tension:"alpha",value:.5},linear:{curve:z3},"linear-closed":{curve:aee},monotone:{horizontal:see,vertical:oee},natural:{curve:lee},step:{curve:uee},"step-after":{curve:fee},"step-before":{curve:cee}};function f$(e,t,n){var i=_e(g6,e)&&g6[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const ene={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},tne=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,nne=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,ine=/^((\s+,?\s*)|(,\s*))/,rne=/^[01]/;function id(e){const t=[];return(e.match(tne)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),o=ene[a],l=ane(a,o,i.slice(1).trim()),c=l.length;if(c<o||c&&c%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...l.slice(0,o)]),c!==o){a==="m"&&(r=r==="M"?"L":"l");for(let f=o;f<c;f+=o)t.push([r,...l.slice(f,f+o)])}}),t}function ane(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const o=e==="a"&&(a===3||a===4)?rne:nne,l=n.slice(r).match(o);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");r+=l[0].length,i.push(+l[0]);const c=n.slice(r).match(ine);c!==null&&(r+=c[0].length)}return i}const vl=Math.PI/180,one=1e-14,Su=Math.PI/2,Fa=Math.PI*2,pf=Math.sqrt(3)/2;var OE={},DE={},LU=[].join;function sne(e,t,n,i,r,a,o,l,c){const f=LU.call(arguments);if(OE[f])return OE[f];const d=o*vl,g=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(l-e)*.5+g*(c-t)*.5,v=p*(c-t)*.5-g*(l-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const S=p/n,_=g/n,w=-g/i,A=p/i,$=S*l+_*c,M=w*l+A*c,k=S*e+_*t,T=w*e+A*t;let R=1/((k-$)*(k-$)+(T-M)*(T-M))-.25;R<0&&(R=0);let B=Math.sqrt(R);a==r&&(B=-B);const U=.5*($+k)-B*(T-M),Q=.5*(M+T)+B*(k-$),G=Math.atan2(M-Q,$-U);let z=Math.atan2(T-Q,k-U)-G;z<0&&a===1?z+=Fa:z>0&&a===0&&(z-=Fa);const D=Math.ceil(Math.abs(z/(Su+.001))),q=[];for(let Y=0;Y<D;++Y){const Z=G+Y*z/D,ue=G+(Y+1)*z/D;q[Y]=[U,Q,Z,ue,n,i,g,p]}return OE[f]=q}function lne(e){const t=LU.call(e);if(DE[t])return DE[t];var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],l=e[5],c=e[6],f=e[7];const d=f*o,g=-c*l,p=c*o,y=f*l,v=Math.cos(r),b=Math.sin(r),S=Math.cos(a),_=Math.sin(a),w=.5*(a-r),A=Math.sin(w*.5),$=8/3*A*A/Math.sin(w),M=n+v-$*b,k=i+b+$*v,T=n+S,N=i+_,R=T+$*_,B=N-$*S;return DE[t]=[d*M+g*k,p*M+y*k,d*R+g*B,p*R+y*B,d*T+g*N,p*T+y*N]}const Ar=["l",0,0,0,0,0,0,0];function une(e,t,n){const i=Ar[0]=e[0];if(i==="a"||i==="A")Ar[1]=t*e[1],Ar[2]=n*e[2],Ar[3]=e[3],Ar[4]=e[4],Ar[5]=e[5],Ar[6]=t*e[6],Ar[7]=n*e[7];else if(i==="h"||i==="H")Ar[1]=t*e[1];else if(i==="v"||i==="V")Ar[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)Ar[r]=(r%2==1?t:n)*e[r];return Ar}function gp(e,t,n,i,r,a){var o,l=null,c=0,f=0,d=0,g=0,p,y,v,b,S=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var w=0,A=t.length;w<A;++w){switch(o=t[w],(r!==1||a!==1)&&(o=une(o,r,a)),o[0]){case"l":c+=o[1],f+=o[2],e.lineTo(c+n,f+i);break;case"L":c=o[1],f=o[2],e.lineTo(c+n,f+i);break;case"h":c+=o[1],e.lineTo(c+n,f+i);break;case"H":c=o[1],e.lineTo(c+n,f+i);break;case"v":f+=o[1],e.lineTo(c+n,f+i);break;case"V":f=o[1],e.lineTo(c+n,f+i);break;case"m":c+=o[1],f+=o[2],S=c,_=f,e.moveTo(c+n,f+i);break;case"M":c=o[1],f=o[2],S=c,_=f,e.moveTo(c+n,f+i);break;case"c":p=c+o[5],y=f+o[6],d=c+o[3],g=f+o[4],e.bezierCurveTo(c+o[1]+n,f+o[2]+i,d+n,g+i,p+n,y+i),c=p,f=y;break;case"C":c=o[5],f=o[6],d=o[3],g=o[4],e.bezierCurveTo(o[1]+n,o[2]+i,d+n,g+i,c+n,f+i);break;case"s":p=c+o[3],y=f+o[4],d=2*c-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,c+o[1]+n,f+o[2]+i,p+n,y+i),d=c+o[1],g=f+o[2],c=p,f=y;break;case"S":p=o[3],y=o[4],d=2*c-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,o[1]+n,o[2]+i,p+n,y+i),c=p,f=y,d=o[1],g=o[2];break;case"q":p=c+o[3],y=f+o[4],d=c+o[1],g=f+o[2],e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y;break;case"Q":p=o[3],y=o[4],e.quadraticCurveTo(o[1]+n,o[2]+i,p+n,y+i),c=p,f=y,d=o[1],g=o[2];break;case"t":p=c+o[1],y=f+o[2],l[0].match(/[QqTt]/)===null?(d=c,g=f):l[0]==="t"?(d=2*c-v,g=2*f-b):l[0]==="q"&&(d=2*c-d,g=2*f-g),v=d,b=g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y,d=c+o[1],g=f+o[2];break;case"T":p=o[1],y=o[2],d=2*c-d,g=2*f-g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y;break;case"a":p6(e,c+n,f+i,[o[1],o[2],o[3],o[4],o[5],o[6]+c+n,o[7]+f+i]),c+=o[6],f+=o[7];break;case"A":p6(e,c+n,f+i,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+i]),c=o[6],f=o[7];break;case"z":case"Z":c=S,f=_,e.closePath();break}l=o}}function p6(e,t,n,i){const r=sne(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const o=lne(r[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const m6=.5773502691896257,y6={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Fa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n,r=i-n*m6,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n,r=i-n*m6;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function UU(e){return _e(y6,e)?y6[e]:cne(e)}var NE={};function cne(e){if(!_e(NE,e)){const t=id(e);NE[e]={draw:function(n,i){gp(n,t,0,0,Math.sqrt(i)/2)}}}return NE[e]}const Is=.448084975506;function fne(e){return e.x}function dne(e){return e.y}function hne(e){return e.width}function gne(e){return e.height}function No(e){return typeof e=="function"?e:()=>+e}function e1(e,t,n){return Math.max(t,Math.min(e,n))}function BU(){var e=fne,t=dne,n=hne,i=gne,r=No(0),a=r,o=r,l=r,c=null;function f(d,g,p){var y,v=g??+e.call(this,d),b=p??+t.call(this,d),S=+n.call(this,d),_=+i.call(this,d),w=Math.min(S,_)/2,A=e1(+r.call(this,d),0,w),$=e1(+a.call(this,d),0,w),M=e1(+o.call(this,d),0,w),k=e1(+l.call(this,d),0,w);if(c||(c=y=rb()),A<=0&&$<=0&&M<=0&&k<=0)c.rect(v,b,S,_);else{var T=v+S,N=b+_;c.moveTo(v+A,b),c.lineTo(T-$,b),c.bezierCurveTo(T-Is*$,b,T,b+Is*$,T,b+$),c.lineTo(T,N-k),c.bezierCurveTo(T,N-Is*k,T-Is*k,N,T-k,N),c.lineTo(v+M,N),c.bezierCurveTo(v+Is*M,N,v,N-Is*M,v,N-M),c.lineTo(v,b+A),c.bezierCurveTo(v,b+Is*A,v+Is*A,b,v+A,b),c.closePath()}if(y)return c=null,y+""||null}return f.x=function(d){return arguments.length?(e=No(d),f):e},f.y=function(d){return arguments.length?(t=No(d),f):t},f.width=function(d){return arguments.length?(n=No(d),f):n},f.height=function(d){return arguments.length?(i=No(d),f):i},f.cornerRadius=function(d,g,p,y){return arguments.length?(r=No(d),a=g!=null?No(g):r,l=p!=null?No(p):r,o=y!=null?No(y):a,f):r},f.context=function(d){return arguments.length?(c=d??null,f):c},f}function qU(){var e,t,n,i,r=null,a,o,l,c;function f(g,p,y){const v=y/2;if(a){var b=l-p,S=g-o;if(b||S){var _=Math.hypot(b,S),w=(b/=_)*c,A=(S/=_)*c,$=Math.atan2(S,b);r.moveTo(o-w,l-A),r.lineTo(g-b*v,p-S*v),r.arc(g,p,v,$-Math.PI,$),r.lineTo(o+w,l+A),r.arc(o,l,c,$,$+Math.PI)}else r.arc(g,p,v,0,Fa);r.closePath()}else a=1;o=g,l=p,c=v}function d(g){var p,y=g.length,v,b=!1,S;for(r==null&&(r=S=rb()),p=0;p<=y;++p)!(p<y&&i(v=g[p],p,g))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,g),+t(v,p,g),+n(v,p,g));if(S)return r=null,S+""||null}return d.x=function(g){return arguments.length?(e=g,d):e},d.y=function(g){return arguments.length?(t=g,d):t},d.size=function(g){return arguments.length?(n=g,d):n},d.defined=function(g){return arguments.length?(i=g,d):i},d.context=function(g){return arguments.length?(g==null?r=null:r=g,d):r},d}function Vp(e,t){return e??t}const Wp=e=>e.x||0,Qp=e=>e.y||0,pne=e=>e.width||0,mne=e=>e.height||0,yne=e=>(e.x||0)+(e.width||0),vne=e=>(e.y||0)+(e.height||0),bne=e=>e.startAngle||0,xne=e=>e.endAngle||0,Sne=e=>e.padAngle||0,Ene=e=>e.innerRadius||0,_ne=e=>e.outerRadius||0,wne=e=>e.cornerRadius||0,Ane=e=>Vp(e.cornerRadiusTopLeft,e.cornerRadius)||0,Cne=e=>Vp(e.cornerRadiusTopRight,e.cornerRadius)||0,$ne=e=>Vp(e.cornerRadiusBottomRight,e.cornerRadius)||0,Tne=e=>Vp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Mne=e=>Vp(e.size,64),kne=e=>e.size||1,vb=e=>e.defined!==!1,One=e=>UU(e.shape||"circle"),Dne=YJ().startAngle(bne).endAngle(xne).padAngle(Sne).innerRadius(Ene).outerRadius(_ne).cornerRadius(wne),Nne=pL().x(Wp).y1(Qp).y0(vne).defined(vb),Rne=pL().y(Qp).x1(Wp).x0(yne).defined(vb),zne=gL().x(Wp).y(Qp).defined(vb),Fne=BU().x(Wp).y(Qp).width(pne).height(mne).cornerRadius(Ane,Cne,$ne,Tne),Lne=VJ().type(One).size(Mne),Une=qU().x(Wp).y(Qp).defined(vb).size(kne);function d$(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Bne(e,t){return Dne.context(e)(t)}function qne(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Rne:Nne).curve(f$(i,n.orient,n.tension)).context(e)(t)}function jne(e,t){const n=t[0],i=n.interpolate||"linear";return zne.curve(f$(i,n.orient,n.tension)).context(e)(t)}function Id(e,t,n,i){return Fne.context(e)(t,n,i)}function Ine(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Pne(e,t){return Lne.context(e)(t)}function Hne(e,t){return Une.context(e)(t)}var jU=1;function Gne(){jU=1}function h$(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+jU++),o=r.clipping[a]||(r.clipping[a]={id:a});return je(i)?o.path=i(null):d$(n)?o.path=Id(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function un(e){this.clear(),e&&this.union(e)}un.prototype={clone(){return new un(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:o}=this,l=Math.cos(e),c=Math.sin(e),f=t-t*l+n*c,d=n-t*c-n*l;return[l*i-c*r+f,c*i+l*r+d,l*i-c*o+f,c*i+l*o+d,l*a-c*r+f,c*a+l*r+d,l*a-c*o+f,c*a+l*o+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function bb(e){this.mark=e,this.bounds=this.bounds||new un}function xb(e){bb.call(this,e),this.items=this.items||[]}ye(xb,bb);class IU{constructor(t){this._pending=0,this._loader=t||Yv()}pending(){return this._pending}sanitizeURL(t){const n=this;return v6(n),n._loader.sanitize(t,{context:"href"}).then(i=>(og(n),i)).catch(()=>(og(n),null))}loadImage(t){const n=this,i=dee();return v6(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const o=new i,l=_e(r,"crossOrigin")?r.crossOrigin:"anonymous";return l!=null&&(o.crossOrigin=l),o.onload=()=>og(n),o.onerror=()=>og(n),o.src=a,o}).catch(r=>(og(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function v6(e){e._pending+=1}function og(e){e._pending-=1}function ls(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Yne(t,i):0))}return e}function Yne(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Xne=Fa-1e-8;let Sb,F1,L1,$u,Tw,U1,Mw,kw;const Ks=(e,t)=>Sb.add(e,t),B1=(e,t)=>Ks(F1=e,L1=t),b6=e=>Ks(e,Sb.y1),x6=e=>Ks(Sb.x1,e),Eu=(e,t)=>Tw*e+Mw*t,_u=(e,t)=>U1*e+kw*t,RE=(e,t)=>Ks(Eu(e,t),_u(e,t)),zE=(e,t)=>B1(Eu(e,t),_u(e,t));function Zp(e,t){return Sb=e,t?($u=t*vl,Tw=kw=Math.cos($u),U1=Math.sin($u),Mw=-U1):(Tw=kw=1,$u=U1=Mw=0),Vne}const Vne={beginPath(){},closePath(){},moveTo:zE,lineTo:zE,rect(e,t,n,i){$u?(RE(e+n,t),RE(e+n,t+i),RE(e,t+i),zE(e,t)):(Ks(e+n,t+i),B1(e,t))},quadraticCurveTo(e,t,n,i){const r=Eu(e,t),a=_u(e,t),o=Eu(n,i),l=_u(n,i);S6(F1,r,o,b6),S6(L1,a,l,x6),B1(o,l)},bezierCurveTo(e,t,n,i,r,a){const o=Eu(e,t),l=_u(e,t),c=Eu(n,i),f=_u(n,i),d=Eu(r,a),g=_u(r,a);E6(F1,o,c,d,b6),E6(L1,l,f,g,x6),B1(d,g)},arc(e,t,n,i,r,a){if(i+=$u,r+=$u,F1=n*Math.cos(r)+e,L1=n*Math.sin(r)+t,Math.abs(r-i)>Xne)Ks(e-n,t-n),Ks(e+n,t+n);else{const o=f=>Ks(n*Math.cos(f)+e,n*Math.sin(f)+t);let l,c;if(o(i),o(r),r!==i)if(i=i%Fa,i<0&&(i+=Fa),r=r%Fa,r<0&&(r+=Fa),r<i&&(a=!a,l=i,i=r,r=l),a)for(r-=Fa,l=i-i%Su,c=0;c<4&&l>r;++c,l-=Su)o(l);else for(l=i-i%Su+Su,c=0;c<4&&l<r;++c,l=l+Su)o(l)}}};function S6(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function E6(e,t,n,i,r){const a=i-e+3*t-3*n,o=e+n-2*t,l=e-t;let c=0,f=0,d;Math.abs(a)>one?(d=o*o+l*a,d>=0&&(d=Math.sqrt(d),c=(-o+d)/a,f=(-o-d)/a)):c=.5*l/o,0<c&&c<1&&r(_6(c,e,t,n,i)),0<f&&f<1&&r(_6(f,e,t,n,i))}function _6(e,t,n,i,r){const a=1-e,o=a*a,l=e*e;return o*a*t+3*o*e*n+3*a*l*i+l*e*r}var fl=(fl=cl(1,1))?fl.getContext("2d"):null;const Ow=new un;function g$(e){return function(t,n){if(!fl)return!0;e(fl,t),Ow.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:o}=Ow;for(let l=r;l<=o;++l)for(let c=i;c<=a;++c)if(fl.isPointInPath(c,l))return!0;return!1}}function p$(e,t){return t.contains(e.x||0,e.y||0)}function PU(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(Ow.set(n,i,n+r,i+a))}function HU(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Mf(t,n,i,r,a)}function Mf(e,t,n,i,r){const{x1:a,y1:o,x2:l,y2:c}=e,f=i-t,d=r-n;let g=0,p=1,y,v,b,S;for(S=0;S<4;++S){if(S===0&&(y=-f,v=-(a-t)),S===1&&(y=f,v=l-t),S===2&&(y=-d,v=-(o-n)),S===3&&(y=d,v=c-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>g&&(g=b)}else if(y>0){if(b<g)return!1;b<p&&(p=b)}}return!0}function rd(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Qr(e,t){return e??t}function w6(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Wne(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Qr(t.x1,.5)*i,n.y1+Qr(t.y1,.5)*r,Math.max(i,r)*Qr(t.r1,0),n.x1+Qr(t.x2,.5)*i,n.y1+Qr(t.y2,.5)*r,Math.max(i,r)*Qr(t.r2,.5));else{const o=Qr(t.x1,0),l=Qr(t.y1,0),c=Qr(t.x2,1),f=Qr(t.y2,0);if(o===c||l===f||i===r)a=e.createLinearGradient(n.x1+o*i,n.y1+l*r,n.x1+c*i,n.y1+f*r);else{const d=cl(Math.ceil(i),Math.ceil(r)),g=d.getContext("2d");return g.scale(i,r),g.fillStyle=w6(g.createLinearGradient(o,l,c,f),t.stops),g.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return w6(a,t.stops)}function GU(e,t,n){return c$(n)?Wne(e,n,t.bounds):n}function wy(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=GU(e,t,t.fill),!0):!1}var Qne=[];function ad(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=GU(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Qne),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Zne(e,t){return e.zindex-t.zindex||e.index-t.index}function m$(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Zne)}function da(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=m$(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function Ay(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=m$(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function y$(e){return function(t,n,i){da(n,r=>{(!i||i.intersects(r.bounds))&&YU(e,t,r,r)})}}function Kne(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&YU(e,t,n.items[0],n.items)}}function YU(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(rd(t,n),n.fill&&wy(t,n,r)&&t.fill(),n.stroke&&ad(t,n,r)&&t.stroke()))}function Eb(e){return e=e||Fr,function(t,n,i,r,a,o){return i*=t.pixelRatio,r*=t.pixelRatio,Ay(n,l=>{const c=l.bounds;if(!(c&&!c.contains(a,o)||!c)&&e(t,l,i,r,a,o))return l})}}function Kp(e,t){return function(n,i,r,a){var o=Array.isArray(i)?i[0]:i,l=t??o.fill,c=o.stroke&&n.isPointInStroke,f,d;return c&&(f=o.strokeWidth,d=o.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:l&&n.isPointInPath(r,a)||c&&n.isPointInStroke(r,a)}}function v$(e){return Eb(Kp(e))}function Nu(e,t){return"translate("+e+","+t+")"}function b$(e){return"rotate("+e+")"}function Jne(e,t){return"scale("+e+","+t+")"}function XU(e){return Nu(e.x||0,e.y||0)}function eie(e){return Nu(e.x||0,e.y||0)+(e.angle?" "+b$(e.angle):"")}function tie(e){return Nu(e.x||0,e.y||0)+(e.angle?" "+b$(e.angle):"")+(e.scaleX||e.scaleY?" "+Jne(e.scaleX||1,e.scaleY||1):"")}function x$(e,t,n){function i(o,l){o("transform",eie(l)),o("d",t(null,l))}function r(o,l){return t(Zp(o,l.angle),l),ls(o,l).translate(l.x||0,l.y||0)}function a(o,l){var c=l.x||0,f=l.y||0,d=l.angle||0;o.translate(c,f),d&&o.rotate(d*=vl),o.beginPath(),t(o,l),d&&o.rotate(-d),o.translate(-c,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:y$(a),pick:v$(a),isect:n||g$(a)}}var nie=x$("arc",Bne);function iie(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,o,l;--r>=0;)e[r].defined!==!1&&(l=Math.abs(e[r][i]-n),l<a&&(a=l,o=e[r]));return o}function rie(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,o;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],o=r*r+a*a,o<n))return e[i];return null}function aie(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function S$(e,t,n){function i(c,f){var d=f.mark.items;d.length&&c("d",t(null,d))}function r(c,f){var d=f.items;return d.length===0?c:(t(Zp(c),d),ls(c,d[0]))}function a(c,f){c.beginPath(),t(c,f)}const o=Kp(a);function l(c,f,d,g,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=c.pixelRatio,g*=c.pixelRatio,o(c,v,d,g)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:Kne(a),pick:l,isect:p$,tip:n}}var oie=S$("area",qne,iie);function sie(e,t){var n=t.clip;e.save(),je(n)?(e.beginPath(),n(e),e.clip()):VU(e,t.group)}function VU(e,t){e.beginPath(),d$(t)?Id(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function WU(e){const t=Qr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function lie(e,t){e("transform",XU(t))}function QU(e,t){const n=WU(t);e("d",Id(null,t,n,n))}function uie(e,t){e("class","background"),e("aria-hidden",!0),QU(e,t)}function cie(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?QU(e,t):e("d","")}function fie(e,t,n){const i=t.clip?h$(n,t,t):null;e("clip-path",i)}function die(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ls(e,t),e.translate(t.x||0,t.y||0)}function pp(e,t,n,i){const r=WU(t);e.beginPath(),Id(e,t,(n||0)+r,(i||0)+r)}const hie=Kp(pp),gie=Kp(pp,!1),pie=Kp(pp,!0);function mie(e,t,n,i){da(t,r=>{const a=r.x||0,o=r.y||0,l=r.strokeForeground,c=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&c&&(pp(e,r,a,o),rd(e,r),r.fill&&wy(e,r,c)&&e.fill(),r.stroke&&!l&&ad(e,r,c)&&e.stroke()),e.save(),e.translate(a,o),r.clip&&VU(e,r),n&&n.translate(-a,-o),da(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,o),e.restore(),l&&r.stroke&&c&&(pp(e,r,a,o),rd(e,r),ad(e,r,c)&&e.stroke())})}function yie(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const o=n*e.pixelRatio,l=i*e.pixelRatio;return Ay(t,c=>{let f,d,g;const p=c.bounds;if(p&&!p.contains(r,a))return;d=c.x||0,g=c.y||0;const y=d+(c.width||0),v=g+(c.height||0),b=c.clip;if(b&&(r<d||r>y||a<g||a>v))return;if(e.save(),e.translate(d,g),d=r-d,g=a-g,b&&d$(c)&&!pie(e,c,o,l))return e.restore(),null;const S=c.strokeForeground,_=t.interactive!==!1;return _&&S&&c.stroke&&gie(e,c,o,l)?(e.restore(),c):(f=Ay(c,w=>vie(w,d,g)?this.pick(w,n,i,d,g):null),!f&&_&&(c.fill||!S&&c.stroke)&&hie(e,c,o,l)&&(f=c),e.restore(),f||null)})}function vie(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var bie={type:"group",tag:"g",nested:!1,attr:lie,bound:die,draw:mie,pick:yie,isect:PU,content:fie,background:uie,foreground:cie},mp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function E$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function _$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function w$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function _b(e,t){return e==="center"?t/2:e==="right"?t:0}function wb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function xie(e,t,n){const i=E$(t,n),r=_$(t,i),a=w$(t,i),o=(t.x||0)-_b(t.align,r),l=(t.y||0)-wb(t.baseline,a),c=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",c,mp["xmlns:xlink"],"xlink:href"),e("transform",Nu(o,l)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Sie(e,t){const n=t.image,i=_$(t,n),r=w$(t,n),a=(t.x||0)-_b(t.align,i),o=(t.y||0)-wb(t.baseline,r);return e.set(a,o,a+i,o+r)}function Eie(e,t,n){da(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=E$(i,this);let a=_$(i,r),o=w$(i,r);if(a===0||o===0)return;let l=(i.x||0)-_b(i.align,a),c=(i.y||0)-wb(i.baseline,o),f,d,g,p;i.aspect!==!1&&(d=r.width/r.height,g=i.width/i.height,d===d&&g===g&&d!==g&&(g<d?(p=a/d,c+=(o-p)/2,o=p):(p=o*d,l+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(rd(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,l,c,a,o))})}var _ie={type:"image",tag:"image",nested:!1,attr:xie,bound:Sie,draw:Eie,pick:Eb(),isect:Fr,get:E$,xOffset:_b,yOffset:wb},wie=S$("line",jne,rie);function Aie(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",tie(t)),e("d",t.path)}function q1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,o=t.scaleY||1,l=(t.angle||0)*vl,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=id(n)).path=n),l&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(l),gp(e,c,0,0,a,o),e.rotate(-l),e.translate(-i,-r)):gp(e,c,i,r,a,o)}function Cie(e,t){return q1(Zp(e,t.angle),t)?e.set(0,0,0,0):ls(e,t,!0)}var $ie={type:"path",tag:"path",nested:!1,attr:Aie,bound:Cie,draw:y$(q1),pick:v$(q1),isect:g$(q1)};function Tie(e,t){e("d",Id(null,t))}function Mie(e,t){var n,i;return ls(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function A6(e,t){e.beginPath(),Id(e,t)}var kie={type:"rect",tag:"path",nested:!1,attr:Tie,bound:Mie,draw:y$(A6),pick:v$(A6),isect:PU};function Oie(e,t){e("transform",XU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Die(e,t){var n,i;return ls(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function ZU(e,t,n){var i,r,a,o;return t.stroke&&ad(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,o=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,o),!0):!1}function Nie(e,t,n){da(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&ZU(e,i,r)&&(rd(e,i),e.stroke())}})}function Rie(e,t,n,i){return e.isPointInStroke?ZU(e,t,1)&&e.isPointInStroke(n,i):!1}var zie={type:"rule",tag:"line",nested:!1,attr:Oie,bound:Die,draw:Nie,pick:Eb(Rie),isect:HU},Fie=x$("shape",Ine),Lie=x$("symbol",Pne,p$);const C6=a9();var sr={height:ro,measureWidth:A$,estimateWidth:Cy,width:Cy,canvas:KU};KU(!0);function KU(e){sr.width=e&&fl?A$:Cy}function Cy(e,t){return JU(xl(e,t),ro(e))}function JU(e,t){return~~(.8*e.length*t)}function A$(e,t){return ro(e)<=0||!(t=xl(e,t))?0:eB(t,Ab(e))}function eB(e,t){const n=`(${t}) ${e}`;let i=C6.get(n);return i===void 0&&(fl.font=t,i=fl.measureText(e).width,C6.set(n,i)),i}function ro(e){return e.fontSize!=null?+e.fontSize||0:11}function bl(e){return e.lineHeight!=null?e.lineHeight:ro(e)+2}function Uie(e){return ie(e)?e.length>1?e:e[0]:e}function Jp(e){return Uie(e.lineBreak&&e.text&&!ie(e.text)?e.text.split(e.lineBreak):e.text)}function C$(e){const t=Jp(e);return(ie(t)?t.length-1:0)*bl(e)}function xl(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?qie(e,n):n}function Bie(e){if(sr.width===A$){const t=Ab(e);return n=>eB(n,t)}else if(sr.width===Cy){const t=ro(e);return n=>JU(n,t)}else return t=>sr.width(e,t)}function qie(e,t){var n=+e.limit,i=Bie(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",o=0,l=t.length,c;if(n-=i(r),a){for(;o<l;)c=o+l>>>1,i(t.slice(c))>n?o=c+1:l=c;return r+t.slice(o)}else{for(;o<l;)c=1+(o+l>>>1),i(t.slice(0,c))<n?o=c:l=c-1;return t.slice(0,o)+r}}function e0(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Ab(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ro(e)+"px "+e0(e,t)}function $$(e){var t=e.baseline,n=ro(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*bl(e):t==="line-bottom"?.29*n-.5*bl(e):0)}const jie={left:"start",center:"middle",right:"end"},Gg=new un;function Cb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-Su,t+=i*Math.cos(r),n+=i*Math.sin(r)),Gg.x1=t,Gg.y1=n,Gg}function Iie(e,t){var n=t.dx||0,i=(t.dy||0)+$$(t),r=Cb(t),a=r.x1,o=r.y1,l=t.angle||0,c;e("text-anchor",jie[t.align]||"start"),l?(c=Nu(a,o)+" "+b$(l),(n||i)&&(c+=" "+Nu(n,i))):c=Nu(a+n,o+i),e("transform",c)}function T$(e,t,n){var i=sr.height(t),r=t.align,a=Cb(t),o=a.x1,l=a.y1,c=t.dx||0,f=(t.dy||0)+$$(t)-Math.round(.8*i),d=Jp(t),g;if(ie(d)?(i+=bl(t)*(d.length-1),g=d.reduce((p,y)=>Math.max(p,sr.width(t,y)),0)):g=sr.width(t,d),r==="center"?c-=g/2:r==="right"&&(c-=g),e.set(c+=o,f+=l,c+g,f+i),t.angle&&!n)e.rotate(t.angle*vl,o,l);else if(n===2)return e.rotatedPoints(t.angle*vl,o,l);return e}function Pie(e,t,n){da(t,i=>{var r=i.opacity==null?1:i.opacity,a,o,l,c,f,d,g;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=Ab(i),e.textAlign=i.align||"left",a=Cb(i),o=a.x1,l=a.y1,i.angle&&(e.save(),e.translate(o,l),e.rotate(i.angle*vl),o=l=0),o+=i.dx||0,l+=(i.dy||0)+$$(i),d=Jp(i),rd(e,i),ie(d))for(f=bl(i),c=0;c<d.length;++c)g=xl(i,d[c]),i.fill&&wy(e,i,r)&&e.fillText(g,o,l),i.stroke&&ad(e,i,r)&&e.strokeText(g,o,l),l+=f;else g=xl(i,d),i.fill&&wy(e,i,r)&&e.fillText(g,o,l),i.stroke&&ad(e,i,r)&&e.strokeText(g,o,l);i.angle&&e.restore()}})}function Hie(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Cb(t),l=o.x1,c=o.y1,f=T$(Gg,t,1),d=-t.angle*vl,g=Math.cos(d),p=Math.sin(d),y=g*r-p*a+(l-g*l+p*c),v=p*r+g*a+(c-p*l-g*c);return f.contains(y,v)}function Gie(e,t){const n=T$(Gg,e,2);return Mf(t,n[0],n[1],n[2],n[3])||Mf(t,n[0],n[1],n[4],n[5])||Mf(t,n[4],n[5],n[6],n[7])||Mf(t,n[2],n[3],n[6],n[7])}var Yie={type:"text",tag:"text",nested:!1,attr:Iie,bound:T$,draw:Pie,pick:Eb(Hie),isect:Gie},Xie=S$("trail",Hne,aie),hr={arc:nie,area:oie,group:bie,image:_ie,line:wie,path:$ie,rect:kie,rule:zie,shape:Fie,symbol:Lie,text:Yie,trail:Xie};function Dw(e,t,n){var i=hr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new un),e,n)}var $6={mark:null};function tB(e,t,n){var i=hr[e.marktype],r=i.bound,a=e.items,o=a&&a.length,l,c,f,d;if(i.nested)return o?f=a[0]:($6.mark=e,f=$6),d=Dw(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new un,o)for(l=0,c=a.length;l<c;++l)t.union(Dw(a[l],r,n));return e.bounds=t}const Vie=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function nB(e,t){return JSON.stringify(e,Vie,t)}function iB(e){const t=typeof e=="string"?JSON.parse(e):e;return rB(t)}function rB(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&rB(n[r]);return t&&tB(e),e}class aB{constructor(t){arguments.length?this.root=iB(t):(this.root=T6({marktype:"group",name:"root",role:"frame"}),this.root.items=[new xb(this.root)])}toJSON(t){return nB(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=T6(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function T6(e,t){const n={bounds:new un,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Js(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function M$(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function dn(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=Js(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function $r(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function oB(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function $b(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Wie(e,t,n,i){var r=e&&e.mark,a,o;if(r&&(a=hr[r.marktype]).tip){for(o=$b(t,n),o[0]-=i[0],o[1]-=i[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=a.tip(r.items,o)}return e}let k$=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Yv(),this._tooltip=n||Qie}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),o=Js(null,"a");for(const l in r)o.setAttribute(l,r[l]);o.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=Wie(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,o=a.width(),l=a.height();let c=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)c+=t.x||0,f+=t.y||0;return{x:c,y:f,width:o,height:l,left:c,top:f,right:c+o,bottom:f+l}}};function Qie(e,t,n,i){e.element().setAttribute("title",i||"")}class t0{constructor(t){this._el=null,this._bgcolor=null,this._loader=new IU(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(o=>{o&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Zie="keydown",Kie="keypress",Jie="keyup",sB="dragenter",j1="dragleave",lB="dragover",Nw="pointerdown",ere="pointerup",$y="pointermove",I1="pointerout",uB="pointerover",Rw="mousedown",tre="mouseup",cB="mousemove",Ty="mouseout",fB="mouseover",My="click",nre="dblclick",ire="wheel",dB="mousewheel",ky="touchstart",Oy="touchmove",Dy="touchend",rre=[Zie,Kie,Jie,sB,j1,lB,Nw,ere,$y,I1,uB,Rw,tre,cB,Ty,fB,My,nre,ire,dB,ky,Oy,Dy],zw=$y,Yg=Ty,Fw=My;class n0 extends k${constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=rre,this.pointermove=k6([$y,cB],[uB,fB],[I1,Ty]),this.dragover=k6([lB],[sB],[j1]),this.pointerout=O6([I1,Ty]),this.dragleave=O6([j1])}initialize(t,n,i){return this._canvas=t&&M$(t,"canvas"),[My,Rw,Nw,$y,I1,j1].forEach(r=>M6(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(dB,t)}pointerdown(t){this._down=this._active,this.fire(Nw,t)}mousedown(t){this._down=this._active,this.fire(Rw,t)}click(t){this._down===this._active&&(this.fire(My,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(ky,t,!0)}touchmove(t){this.fire(Oy,t,!0)}touchend(t){this.fire(Dy,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===Fw&&r&&r.href?this.handleHref(n,r,r.href):(t===zw||t===Yg)&&this.handleTooltip(n,r,t!==Yg),a)for(let o=0,l=a.length;o<l;++o)a[o].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(M6(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=$b(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const o=this.context();return hr[t.marktype].pick.call(this,o,t,n,i,r,a)}}const are=e=>e===ky||e===Oy||e===Dy?[ky,Oy,Dy]:[e];function M6(e,t){are(t).forEach(n=>ore(e,n))}function ore(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function kg(e,t,n){t.forEach(i=>e.fire(i,n))}function k6(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?kg(this,e,i):((!r||!r.exit)&&kg(this,n,i),this._active=a,kg(this,t,i),kg(this,e,i))}}function O6(e){return function(t){kg(this,e,t),this._active=null}}function sre(){return typeof window<"u"&&window.devicePixelRatio||1}function lre(e,t,n,i,r,a){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,l=e.getContext("2d"),c=o?sre():r;e.width=t*c,e.height=n*c;for(const f in a)l[f]=a[f];return o&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),l.pixelRatio=c,l.setTransform(c,0,0,c,c*i[0],c*i[1]),e}class Ny extends t0{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new un,this._tempb=new un}initialize(t,n,i,r,a,o){return this._options=o||{},this._canvas=this._options.externalContext?null:cl(1,1,this._options.type),t&&this._canvas&&($r(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)lre(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||ee("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,o=this._height,l=this._dirty,c=ure(r,a,o);i.save();const f=this._redraw||l.empty()?(this._redraw=!1,c.expand(1)):cre(i,c.intersect(l),r);return this.clear(-r[0],-r[1],a,o),this.draw(i,t,f,n),i.restore(),l.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=hr[n.marktype];n.clip&&sie(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,o=this.context();a.type!=="pdf"&&!a.externalContext&&o.clearRect(t,n,i,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,i,r))}}const ure=(e,t,n)=>new un().set(0,0,t,n).translate(-e[0],-e[1]);function cre(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class hB extends k${constructor(t,n){super(t,n);const i=this;i._hrefHandler=FE(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=FE(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Yg)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(Fw,this._hrefHandler),r.removeEventListener(zw,this._tooltipHandler),r.removeEventListener(Yg,this._tooltipHandler)),this._svg=r=t&&M$(t,"svg"),r&&(r.addEventListener(Fw,this._hrefHandler),r.addEventListener(zw,this._tooltipHandler),r.addEventListener(Yg,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const o={type:t,handler:n,listener:FE(this,n)};(r[i]||(r[i]=[])).push(o),this._svg&&this._svg.addEventListener(i,o.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const FE=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},gB="aria-hidden",O$="aria-label",D$="role",N$="aria-roledescription",pB="graphics-object",R$="graphics-symbol",mB=(e,t,n)=>({[D$]:e,[N$]:t,[O$]:n||void 0}),fre=ca(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),D6={axis:{desc:"axis",caption:gre},legend:{desc:"legend",caption:pre},"title-text":{desc:"title",caption:e=>`Title text '${R6(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${R6(e)}'`}},N6={ariaRole:D$,ariaRoleDescription:N$,description:O$};function yB(e,t){const n=t.aria===!1;if(e(gB,n||void 0),n||t.description==null)for(const i in N6)e(N6[i],void 0);else{const i=t.mark.marktype;e(O$,t.description),e(D$,t.ariaRole||(i==="group"?pB:R$)),e(N$,t.ariaRoleDescription||`${i} mark`)}}function vB(e){return e.aria===!1?{[gB]:!0}:fre[e.role]?null:D6[e.role]?hre(e,D6[e.role]):dre(e)}function dre(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return mB(n?pB:R$,`${t} mark container`,e.description)}function hre(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return mB(t.role||R$,t.desc,n.description||i(n))}catch{return null}}function R6(e){return Ee(e.text).join(" ")}function gre(e){const t=e.datum,n=e.orient,i=t.title?bB(e):null,r=e.context,a=r.scales[t.scale].value,o=r.dataflow.locale(),l=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${nd(l)?"discrete":l} scale with ${NU(o,a,e)}`}function pre(e){const t=e.datum,n=t.title?bB(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),o=e.context,l=o.scales[r[a[0]]].value,c=o.dataflow.locale();return yre(i)+(n?` titled '${n}'`:"")+` for ${mre(a)} with ${NU(c,l,e)}`}function bB(e){try{return Ee(it(e.items).items[0].text).join(" ")}catch{return null}}function mre(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+it(e)}function yre(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const xB=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),vre=e=>xB(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function z$(){let e="",t="",n="";const i=[],r=()=>t=n="",a=c=>{t&&(e+=`${t}>${n}`,r()),i.push(c)},o=(c,f)=>(f!=null&&(t+=` ${c}="${vre(f)}"`),l),l={open(c,...f){a(c),t="<"+c;for(const d of f)for(const g in d)o(g,d[g]);return l},close(){const c=i.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,r(),l},attr:o,text:c=>(n+=xB(c),l),toString:()=>e};return l}const SB=e=>EB(z$(),e)+"";function EB(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):EB(e,i)}return e.close()}const Ry={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},zy={blend:"mix-blend-mode"},_B={fill:"none","stroke-miterlimit":10},sg=0,z6="http://www.w3.org/2000/xmlns/",fn=mp.xmlns;class F$ extends t0{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=dn(t,0,"svg",fn),this._svg.setAttributeNS(z6,"xmlns",fn),this._svg.setAttributeNS(z6,"xmlns:xlink",mp["xmlns:xlink"]),this._svg.setAttribute("version",mp.version),this._svg.setAttribute("class","marks"),$r(t,1),this._root=dn(this._svg,sg,"g",fn),el(this._root,_B),$r(this._svg,sg+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(el(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=dn(t,sg,"rect",fn),el(i,{width:this._width,height:this._height,fill:n}));const r=SB(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),$r(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,o,l,c,f;for(l=0,c=t.length;l<c;++l)if(i=t[l],r=i.mark,r.marktype!==a&&(a=r.marktype,o=hr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,F6(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){o.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(o,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=o.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,F6(i,n)):this._update(o,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,o=n.marktype,l=hr[o],c=n.interactive===!1?"none":null,f=l.tag==="g",d=L6(n,t,i,"g",a);if(o!=="group"&&r!=null&&!r.includes(o))return $r(d,0),n._svg;d.setAttribute("class",oB(n));const g=vB(n);for(const b in g)si(d,b,g[b]);f||si(d,"pointer-events",c),si(d,"clip-path",n.clip?h$(this,n,n.group):null);let p=null,y=0;const v=b=>{const S=this.isDirty(b),_=L6(b,d,p,l.tag,a);S&&(this._update(l,_,b),f&&Sre(this,_,b,r)),p=_,++y};return l.nested?n.items.length&&v(n.items[0]):da(n,v),$r(d,y),d}_update(t,n,i){Yo=n,Vn=n.__values__,yB(Xg,i),t.attr(Xg,i,this);const r=_re[t.type];r&&r.call(this,t,n,i),Yo&&this.style(Yo,i)}style(t,n){if(n!=null){for(const i in Ry){let r=i==="font"?e0(n):n[i];if(r===Vn[i])continue;const a=Ry[i];r==null?t.removeAttribute(a):(c$(r)&&(r=zU(r,this._defs.gradient,wB())),t.setAttribute(a,r+"")),Vn[i]=r}for(const i in zy)P1(t,zy[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=dn(t,sg+1,"defs",fn)),r=bre(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=dn(t,sg+1,"defs",fn)),r=xre(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):$r(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function F6(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function bre(e,t,n){let i,r,a;if(t.gradient==="radial"){let o=dn(e,n++,"pattern",fn);el(o,{id:_y+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=dn(o,0,"rect",fn),el(o,{width:1,height:1,fill:`url(${wB()}#${t.id})`}),e=dn(e,n++,"radialGradient",fn),el(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=dn(e,n++,"linearGradient",fn),el(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=dn(e,i,"stop",fn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return $r(e,i),n}function xre(e,t,n){let i;return e=dn(e,n,"clipPath",fn),e.setAttribute("id",t.id),t.path?(i=dn(e,0,"path",fn),i.setAttribute("d",t.path)):(i=dn(e,0,"rect",fn),el(i,{x:0,y:0,width:t.width,height:t.height})),$r(e,1),n+1}function Sre(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;da(n,o=>{r=e.mark(t,o,r,i),++a}),$r(t,1+a)}function L6(e,t,n,i,r){let a=e._svg,o;if(!a&&(o=t.ownerDocument,a=Js(o,i,fn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const l=Js(o,"path",fn);a.appendChild(l),l.__data__=e;const c=Js(o,"g",fn);a.appendChild(c),c.__data__=e;const f=Js(o,"path",fn);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||Ere(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function Ere(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Yo=null,Vn=null;const _re={group(e,t,n){const i=Yo=t.childNodes[2];Vn=i.__values__,e.foreground(Xg,n,this),Vn=t.__values__,Yo=t.childNodes[1],e.content(Xg,n,this);const r=Yo=t.childNodes[0];e.background(Xg,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Vn.events&&(si(i,"pointer-events",a),si(r,"pointer-events",a),Vn.events=a),n.strokeForeground&&n.stroke){const o=n.fill;si(i,"display",null),this.style(r,n),si(r,"stroke",null),o&&(n.fill=null),Vn=i.__values__,this.style(i,n),o&&(n.fill=o),Yo=null}else si(i,"display","none")},image(e,t,n){n.smooth===!1?(P1(t,"image-rendering","optimizeSpeed"),P1(t,"image-rendering","pixelated")):P1(t,"image-rendering",null)},text(e,t,n){const i=Jp(n);let r,a,o,l;ie(i)?(a=i.map(c=>xl(n,c)),r=a.join(`
`),r!==Vn.text&&($r(t,0),o=t.ownerDocument,l=bl(n),a.forEach((c,f)=>{const d=Js(o,"tspan",fn);d.__data__=n,d.textContent=c,f&&(d.setAttribute("x",0),d.setAttribute("dy",l)),t.appendChild(d)}),Vn.text=r)):(a=xl(n,i),a!==Vn.text&&(t.textContent=a,Vn.text=a)),si(t,"font-family",e0(n)),si(t,"font-size",ro(n)+"px"),si(t,"font-style",n.fontStyle),si(t,"font-variant",n.fontVariant),si(t,"font-weight",n.fontWeight)}};function Xg(e,t,n){t!==Vn[e]&&(n?wre(Yo,e,t,n):si(Yo,e,t),Vn[e]=t)}function P1(e,t,n){n!==Vn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Vn[t]=n)}function el(e,t){for(const n in t)si(e,n,t[n])}function si(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function wre(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function wB(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class AB extends t0{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=z$();n.open("svg",Pe({},mp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",_B,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=hr[n.marktype],r=i.tag,a=[yB,i.attr];t.open("g",{class:oB(n),"clip-path":n.clip?h$(this,n,n.group):null},vB(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const o=l=>{const c=this.href(l);if(c&&t.open("a",c),t.open(r,this.attr(n,l,a,r!=="g"?r:null)),r==="text"){const f=Jp(l);if(ie(f)){const d={x:0,dy:bl(l)};for(let g=0;g<f.length;++g)t.open("tspan",g?d:null).text(xl(l,f[g])).close()}else t.text(xl(l,f))}else if(r==="g"){const f=l.strokeForeground,d=l.fill,g=l.stroke;f&&g&&(l.stroke=null),t.open("path",this.attr(n,l,i.background,"bgrect")).close(),t.open("g",this.attr(n,l,i.content)),da(l,p=>this.mark(t,p)),t.close(),f&&g?(d&&(l.fill=null),l.stroke=g,t.open("path",this.attr(n,l,i.foreground,"bgrect")).close(),d&&(l.fill=d)):t.open("path",this.attr(n,l,i.foreground,"bgfore")).close()}t.close(),c&&t.close()};return i.nested?n.items&&n.items.length&&o(n.items[0]):da(n,o),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},o=(l,c,f,d)=>{a[d||l]=c};return Array.isArray(i)?i.forEach(l=>l(o,n,this)):i(o,n,this),r&&Are(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const o=n[a],l=o.stops;o.gradient==="radial"?(t.open("pattern",{id:_y+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:a,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let c=0;c<l.length;++c)t.open("stop",{offset:l[c].offset,"stop-color":l[c].color}).close();t.close()}for(const a in i){const o=i[a];t.open("clipPath",{id:a}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function Are(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=e0(t),e["font-size"]=ro(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Ry){let l=t[o];const c=Ry[o];l==="transparent"&&(c==="fill"||c==="stroke")||l!=null&&(c$(l)&&(l=zU(l,r.gradient,"")),e[c]=l)}for(const o in zy){const l=t[o];l!=null&&(a=a||[],a.push(`${zy[o]}: ${l};`))}return a&&(e.style=a.join(" ")),e}const Kr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Cre(e){Kr.svgMarkTypes=e.svgMarkTypes??["text"],Kr.svgOnTop=e.svgOnTop??!0,Kr.debug=e.debug??!1}class Lw extends t0{constructor(t){super(t),this._svgRenderer=new F$(t),this._canvasRenderer=new Ny(t)}initialize(t,n,i,r,a){this._root_el=dn(t,0,"div");const o=dn(this._root_el,0,"div"),l=dn(this._root_el,1,"div");return this._root_el.style.position="relative",Kr.debug||(o.style.height="100%",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%"),this._svgEl=Kr.svgOnTop?l:o,this._canvasEl=Kr.svgOnTop?o:l,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return Kr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Kr.svgMarkTypes.includes(a));this._svgRenderer.render(t,Kr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Kr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class CB extends n0{constructor(t,n){super(t,n)}initialize(t,n,i){const r=dn(dn(t,0,"div"),Kr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const $B="canvas",TB="hybrid",MB="png",kB="svg",OB="none",tl={Canvas:$B,PNG:MB,SVG:kB,Hybrid:TB,None:OB},Hu={};Hu[$B]=Hu[MB]={renderer:Ny,headless:Ny,handler:n0};Hu[kB]={renderer:F$,headless:AB,handler:hB};Hu[TB]={renderer:Lw,headless:Lw,handler:CB};Hu[OB]={};function Tb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Hu[e]=t,this):Hu[e]}function DB(e,t,n){const i=[],r=new un().union(t),a=e.marktype;return a?NB(e,r,n,i):a==="group"?RB(e,r,n,i):ee("Intersect scene must be mark node or group item.")}function NB(e,t,n,i){if($re(e,t,n)){const r=e.items,a=e.marktype,o=r.length;let l=0;if(a==="group")for(;l<o;++l)RB(r[l],t,n,i);else for(const c=hr[a].isect;l<o;++l){const f=r[l];zB(f,t,c)&&i.push(f)}}return i}function $re(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function RB(e,t,n,i){n&&n(e.mark)&&zB(e,t,hr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const o=e.x||0,l=e.y||0;t.translate(-o,-l);for(let c=0;c<a;++c)NB(r[c],t,n,i);t.translate(o,l)}return i}function zB(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const LE=new un;function FB(e){const t=e.clip;if(je(t))t(Zp(LE.clear()));else if(t)LE.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(LE)}const Tre=1e-9;function L$(e,t,n){return e===t?!0:n==="path"?LB(e,t):e instanceof Date&&t instanceof Date?+e==+t:lt(e)&&lt(t)?Math.abs(e-t)<=Tre:!e||!t||!xe(e)&&!xe(t)?e==t:Mre(e,t)}function LB(e,t){return L$(id(e),id(t))}function Mre(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!L$(e[r],t[r],r))return!1;return typeof e==typeof t}function kre(){Gne(),Jte()}const od="top",ia="left",ra="right",Sl="bottom",Ore="top-left",Dre="top-right",Nre="bottom-left",Rre="bottom-right",U$="start",Uw="middle",li="end",zre="x",Fre="y",Mb="group",B$="axis",q$="title",Lre="frame",Ure="scope",j$="legend",UB="row-header",BB="row-footer",qB="row-title",jB="column-header",IB="column-footer",PB="column-title",Bre="padding",qre="symbol",HB="fit",GB="fit-x",YB="fit-y",jre="pad",I$="none",t1="all",Bw="each",P$="flush",nl="column",il="row";function XB(e){J.call(this,null,e)}ye(XB,J,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=hr[r],o=a.bound;let l=i.bounds,c;if(a.nested)i.items.length&&n.dirty(i.items[0]),l=n1(i,o),i.items.forEach(f=>{f.bounds.clear().union(l)});else if(r===Mb||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),l.clear(),i.items.forEach(f=>l.union(n1(f,o))),i.role){case B$:case j$:case q$:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,f=>{l.union(n1(f,o))}),t.visit(t.MOD,f=>{c=c||l.alignsWith(f.bounds),n.dirty(f),l.union(n1(f,o))}),c&&(l.clear(),i.items.forEach(f=>l.union(f.bounds)));return FB(i),t.modifies("bounds")}});function n1(e,t,n){return t(e.bounds.clear(),e,n)}const U6=":vega_identifier:";function H$(e){J.call(this,0,e)}H$.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ye(H$,J,{transform(e,t){const n=Ire(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function Ire(e){return e._signals[U6]||(e._signals[U6]=e.add(0))}function VB(e){J.call(this,null,e)}ye(VB,J,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Pre(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===Mb?xb:bb;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Pre(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function WB(e){J.call(this,null,e)}const B6={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!QB(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},QB=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),q6=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(QB(r,a=e[n].bounds,t))return!0},Hre=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Gre=(e,t,n)=>{var i=e.range(),r=new un;return t===od||t===Sl?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},j6=e=>(e.forEach(t=>t.opacity=1),e),I6=(e,t)=>e.reflow(t.modified()).modifies("opacity");ye(WB,J,{transform(e,t){const n=B6[e.method]||B6.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,o;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(j6(r),t=I6(t,e)),t;if(r=r.filter(Hre),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=j6(r),t=I6(t,e),a.length>=3&&q6(a,i)){do a=n(a,i);while(a.length>=3&&q6(a,i));a.length<3&&!it(r).opacity&&(a.length>1&&(it(a).opacity=0),it(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Gre(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(c=>{o(c)||(c.opacity=0)}));const l=a[0].mark.bounds.clear();return r.forEach(c=>{c.opacity&&l.union(c.bounds)}),t}});function ZB(e){J.call(this,null,e)}ye(ZB,J,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Xn=new un;function kf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Yre(e){var t=e.items[0].orient;return t===ia||t===ra}function Xre(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Vre(e,t,n,i){var r=t.items[0],a=r.datum,o=r.translate!=null?r.translate:.5,l=r.orient,c=Xre(a),f=r.range,d=r.offset,g=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[c[2]].items[0],b=r.titlePadding,S=r.bounds,_=v&&C$(v),w=0,A=0,$,M;switch(Xn.clear().union(S),S.clear(),($=c[0])>-1&&S.union(r.items[$].bounds),($=c[1])>-1&&S.union(r.items[$].bounds),l){case od:w=g||0,A=-d,M=Math.max(p,Math.min(y,-S.y1)),S.add(0,-M).add(f,0),v&&i1(e,v,M,b,_,0,-1,S);break;case ia:w=-d,A=g||0,M=Math.max(p,Math.min(y,-S.x1)),S.add(-M,0).add(0,f),v&&i1(e,v,M,b,_,1,-1,S);break;case ra:w=n+d,A=g||0,M=Math.max(p,Math.min(y,S.x2)),S.add(0,0).add(M,f),v&&i1(e,v,M,b,_,1,1,S);break;case Sl:w=g||0,A=i+d,M=Math.max(p,Math.min(y,S.y2)),S.add(0,0).add(f,M),v&&i1(e,v,M,b,0,0,1,S);break;default:w=r.x,A=r.y}return ls(S.translate(w,A),r),kf(r,"x",w+o)|kf(r,"y",A+o)&&(r.bounds=Xn,e.dirty(r),r.bounds=S,e.dirty(r)),r.mark.bounds.clear().union(S)}function i1(e,t,n,i,r,a,o,l){const c=t.bounds;if(t.auto){const f=o*(n+r+i);let d=0,g=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):g=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(c.translate(-d,-g)),e.dirty(t)}l.union(c)}const P6=(e,t)=>Math.floor(Math.min(e,t)),H6=(e,t)=>Math.ceil(Math.max(e,t));function Wre(e){var t=e.items,n=t.length,i=0,r,a;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===Mb)switch(r.role){case B$:case j$:case q$:break;case UB:o.rowheaders.push(...a);break;case BB:o.rowfooters.push(...a);break;case jB:o.colheaders.push(...a);break;case IB:o.colfooters.push(...a);break;case qB:o.rowtitle=a[0];break;case PB:o.coltitle=a[0];break;default:o.marks.push(...a)}return o}function Qre(e){return new un().set(0,0,e.width||0,e.height||0)}function Zre(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function zt(e,t,n){const i=xe(e)?e[t]:e;return i??(n!==void 0?n:0)}function G6(e){return e<0?Math.ceil(-e):0}function KB(e,t,n){var i=!n.nodirty,r=n.bounds===P$?Qre:Zre,a=Xn.set(0,0,0,0),o=zt(n.align,nl),l=zt(n.align,il),c=zt(n.padding,nl),f=zt(n.padding,il),d=n.columns||t.length,g=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,S=Array(p),_=Array(g),w=0,A=Array(p),$=Array(p),M=Array(p),k,T,N,R,B,U,Q,G,I,z,D;for(T=0;T<d;++T)v[T]=0;for(T=0;T<g;++T)_[T]=0;for(T=0;T<p;++T)U=t[T],B=M[T]=r(U),U.x=U.x||0,A[T]=0,U.y=U.y||0,$[T]=0,N=T%d,R=~~(T/d),b=Math.max(b,Q=Math.ceil(B.x2)),w=Math.max(w,G=Math.ceil(B.y2)),v[N]=Math.max(v[N],Q),_[R]=Math.max(_[R],G),y[T]=c+G6(B.x1),S[T]=f+G6(B.y1),i&&e.dirty(t[T]);for(T=0;T<p;++T)T%d===0&&(y[T]=0),T<d&&(S[T]=0);if(o===Bw)for(N=1;N<d;++N){for(D=0,T=N;T<p;T+=d)D<y[T]&&(D=y[T]);for(T=N;T<p;T+=d)y[T]=D+v[N-1]}else if(o===t1){for(D=0,T=0;T<p;++T)T%d&&D<y[T]&&(D=y[T]);for(T=0;T<p;++T)T%d&&(y[T]=D+b)}else for(o=!1,N=1;N<d;++N)for(T=N;T<p;T+=d)y[T]+=v[N-1];if(l===Bw)for(R=1;R<g;++R){for(D=0,T=R*d,k=T+d;T<k;++T)D<S[T]&&(D=S[T]);for(T=R*d;T<k;++T)S[T]=D+_[R-1]}else if(l===t1){for(D=0,T=d;T<p;++T)D<S[T]&&(D=S[T]);for(T=d;T<p;++T)S[T]=D+w}else for(l=!1,R=1;R<g;++R)for(T=R*d,k=T+d;T<k;++T)S[T]+=_[R-1];for(I=0,T=0;T<p;++T)I=y[T]+(T%d?I:0),A[T]+=I-t[T].x;for(N=0;N<d;++N)for(z=0,T=N;T<p;T+=d)z+=S[T],$[T]+=z-t[T].y;if(o&&zt(n.center,nl)&&g>1)for(T=0;T<p;++T)B=o===t1?b:v[T%d],I=B-M[T].x2-t[T].x-A[T],I>0&&(A[T]+=I/2);if(l&&zt(n.center,il)&&d!==1)for(T=0;T<p;++T)B=l===t1?w:_[~~(T/d)],z=B-M[T].y2-t[T].y-$[T],z>0&&($[T]+=z/2);for(T=0;T<p;++T)a.union(M[T].translate(A[T],$[T]));switch(I=zt(n.anchor,zre),z=zt(n.anchor,Fre),zt(n.anchor,nl)){case li:I-=a.width();break;case Uw:I-=a.width()/2}switch(zt(n.anchor,il)){case li:z-=a.height();break;case Uw:z-=a.height()/2}for(I=Math.round(I),z=Math.round(z),a.clear(),T=0;T<p;++T)t[T].mark.bounds.clear();for(T=0;T<p;++T)U=t[T],U.x+=A[T]+=I,U.y+=$[T]+=z,a.union(U.mark.bounds.union(U.bounds.translate(A[T],$[T]))),i&&e.dirty(U);return a}function Kre(e,t,n){var i=Wre(t),r=i.marks,a=n.bounds===P$?Jre:eae,o=n.offset,l=n.columns||r.length,c=l<=0?1:Math.ceil(r.length/l),f=c*l,d,g,p,y,v,b,S;const _=KB(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(b=zt(n.headerBand,il,null),d=r1(e,i.rowheaders,r,l,c,-zt(o,"rowHeader"),P6,0,a,"x1",0,l,1,b)),i.colheaders&&(b=zt(n.headerBand,nl,null),g=r1(e,i.colheaders,r,l,l,-zt(o,"columnHeader"),P6,1,a,"y1",0,1,l,b)),i.rowfooters&&(b=zt(n.footerBand,il,null),p=r1(e,i.rowfooters,r,l,c,zt(o,"rowFooter"),H6,0,a,"x2",l-1,l,1,b)),i.colfooters&&(b=zt(n.footerBand,nl,null),y=r1(e,i.colfooters,r,l,l,zt(o,"columnFooter"),H6,1,a,"y2",f-l,1,l,b)),i.rowtitle&&(v=zt(n.titleAnchor,il),S=zt(o,"rowTitle"),S=v===li?p+S:d-S,b=zt(n.titleBand,il,.5),Y6(e,i.rowtitle,S,0,_,b)),i.coltitle&&(v=zt(n.titleAnchor,nl),S=zt(o,"columnTitle"),S=v===li?y+S:g-S,b=zt(n.titleBand,nl,.5),Y6(e,i.coltitle,S,1,_,b))}function Jre(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function eae(e,t){return e.bounds[t]}function r1(e,t,n,i,r,a,o,l,c,f,d,g,p,y){var v=n.length,b=0,S=0,_,w,A,$,M,k,T,N,R;if(!v)return b;for(_=d;_<v;_+=g)n[_]&&(b=o(b,c(n[_],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,w=0,$=t.length;w<$;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(_=d,w=0,$=t.length;w<$;++w,_+=g){for(k=t[w],M=k.mark.bounds,A=_;A>=0&&(T=n[A])==null;A-=p);l?(N=y==null?T.x:Math.round(T.bounds.x1+y*T.bounds.width()),R=b):(N=b,R=y==null?T.y:Math.round(T.bounds.y1+y*T.bounds.height())),M.union(k.bounds.translate(N-(k.x||0),R-(k.y||0))),k.x=N,k.y=R,e.dirty(k),S=o(S,M[f])}return S}function Y6(e,t,n,i,r,a){if(t){e.dirty(t);var o=n,l=n;i?o=Math.round(r.x1+a*r.width()):l=Math.round(r.y1+a*r.height()),t.bounds.translate(o-(t.x||0),l-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=l,e.dirty(t)}}function tae(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function nae(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function iae(e,t,n,i,r,a,o){const l=tae(n,t),c=nae(e,l("offset",0)),f=l("anchor",U$),d=f===li?1:f===Uw?.5:0,g={align:Bw,bounds:l("bounds",P$),columns:l("direction")==="vertical"?1:e.length,padding:l("margin",8),center:l("center"),nodirty:!0};switch(t){case ia:g.anchor={x:Math.floor(i.x1)-c,column:li,y:d*(o||i.height()+2*i.y1),row:f};break;case ra:g.anchor={x:Math.ceil(i.x2)+c,y:d*(o||i.height()+2*i.y1),row:f};break;case od:g.anchor={y:Math.floor(r.y1)-c,row:li,x:d*(a||r.width()+2*r.x1),column:f};break;case Sl:g.anchor={y:Math.ceil(r.y2)+c,x:d*(a||r.width()+2*r.x1),column:f};break;case Ore:g.anchor={x:c,y:c};break;case Dre:g.anchor={x:a-c,y:c,column:li};break;case Nre:g.anchor={x:c,y:o-c,row:li};break;case Rre:g.anchor={x:a-c,y:o-c,column:li,row:li};break}return g}function rae(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,o=n.x,l=n.y,c,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),oae(e,n,n.items[0].items[0]),a=aae(n,a),c=2*n.padding,f=2*n.padding,a.empty()||(c=Math.ceil(a.width()+c),f=Math.ceil(a.height()+f)),i.type===qre&&sae(n.items[0].items[0].items[0].items),r!==I$&&(n.x=o=0,n.y=l=0),n.width=c,n.height=f,ls(a.set(o,l,o+c,l+f),n),n.mark.bounds.clear().union(a),n}function aae(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function oae(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&lg(e,n,r,a);else{var o=t.items[1].items[0],l=o.anchor,c=t.titlePadding||0,f=i-o.x,d=i-o.y;switch(o.orient){case ia:r+=Math.ceil(o.bounds.width())+c;break;case ra:case Sl:break;default:a+=o.bounds.height()+c}switch((r||a)&&lg(e,n,r,a),o.orient){case ia:d+=mf(t,n,o,l,1,1);break;case ra:f+=mf(t,n,o,li,0,0)+c,d+=mf(t,n,o,l,1,1);break;case Sl:f+=mf(t,n,o,l,0,0),d+=mf(t,n,o,li,-1,0,1)+c;break;default:f+=mf(t,n,o,l,0,0)}(f||d)&&lg(e,o,f,d),(f=Math.round(o.bounds.x1-i))<0&&(lg(e,n,-f,0),lg(e,o,-f,0))}}function mf(e,t,n,i,r,a,o){const l=e.datum.type!=="symbol",c=n.datum.vgrad,f=l&&(a||!c)&&!o?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,g=c&&a?d:0,p=c&&a?0:d,y=r<=0?0:C$(n);return Math.round(i===U$?g:i===li?p-y:.5*(d-y))}function lg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function sae(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function lae(e,t,n,i,r){var a=t.items[0],o=a.frame,l=a.orient,c=a.anchor,f=a.offset,d=a.padding,g=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=l===ia||l===ra?i:n,v=0,b=0,S=0,_=0,w=0,A;if(o!==Mb?l===ia?(v=r.y2,y=r.y1):l===ra?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):l===ia&&(v=i,y=0),A=c===U$?v:c===li?y:(v+y)/2,p&&p.text){switch(l){case od:case Sl:w=g.bounds.height()+d;break;case ia:_=g.bounds.width()+d;break;case ra:_=-g.bounds.width()-d;break}Xn.clear().union(p.bounds),Xn.translate(_-(p.x||0),w-(p.y||0)),kf(p,"x",_)|kf(p,"y",w)&&(e.dirty(p),p.bounds.clear().union(Xn),p.mark.bounds.clear().union(Xn),e.dirty(p)),Xn.clear().union(p.bounds)}else Xn.clear();switch(Xn.union(g.bounds),l){case od:b=A,S=r.y1-Xn.height()-f;break;case ia:b=r.x1-Xn.width()-f,S=A;break;case ra:b=r.x2+Xn.width()+f,S=A;break;case Sl:b=A,S=r.y2+f;break;default:b=a.x,S=a.y}return kf(a,"x",b)|kf(a,"y",S)&&(Xn.translate(b,S),e.dirty(a),a.bounds.clear().union(Xn),t.bounds.clear().union(Xn),e.dirty(a)),a.bounds}function JB(e){J.call(this,null,e)}ye(JB,J,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&Kre(n,i,e.layout),cae(n,i,e)}),uae(e.mark.group)?t.reflow():t}});function uae(e){return e&&e.mark.role!=="legend-entry"}function cae(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),o=new un().set(0,0,r,a),l=o.clone(),c=o.clone(),f=[],d,g,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(g=i[v],g.role){case B$:y=Yre(g)?l:c,y.union(Vre(e,g,r,a));break;case q$:d=g;break;case j$:f.push(rae(e,g));break;case Lre:case Ure:case UB:case BB:case qB:case jB:case IB:case PB:l.union(g.bounds),c.union(g.bounds);break;default:o.union(g.bounds)}if(f.length){const S={};f.forEach(_=>{p=_.orient||ra,p!==I$&&(S[p]||(S[p]=[])).push(_)});for(const _ in S){const w=S[_];KB(e,w,iae(w,_,n.legends,l,c,r,a))}f.forEach(_=>{const w=_.bounds;if(w.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=w,e.dirty(_)),n.autosize&&(n.autosize.type===HB||n.autosize.type===GB||n.autosize.type===YB))switch(_.orient){case ia:case ra:o.add(w.x1,0).add(w.x2,0);break;case od:case Sl:o.add(0,w.y1).add(0,w.y2)}else o.union(w)})}o.union(l).union(c),d&&o.union(lae(e,d,r,a,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),fae(e,t,o,n)}function fae(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let o=e._width,l=e._height,c=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),g=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-c)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===Bre){const v=e.padding();o-=v.left+v.right,l-=v.top+v.bottom}a===I$?(f=0,g=0,c=o,d=l):a===HB?(c=Math.max(0,o-f-p),d=Math.max(0,l-g-y)):a===GB?(c=Math.max(0,o-f-p),l=d+g+y):a===YB?(o=c+f+p,d=Math.max(0,l-g-y)):a===jre&&(o=c+f+p,l=d+g+y),e._resizeView(o,l,c,d,[f,g],r.resize)}const dae=Object.freeze(Object.defineProperty({__proto__:null,bound:XB,identifier:H$,mark:VB,overlap:WB,render:ZB,viewlayout:JB},Symbol.toStringTag,{value:"Module"}));function eq(e){J.call(this,null,e)}ye(eq,J,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,l=l$(a,o,e.minstep),c=e.format||TU(n,a,l,e.formatSpecifier,e.formatType,!!e.values),f=e.values?$U(a,e.values,l):u$(a,l);return r&&(i.rem=r),r=f.map((d,g)=>dt({index:g/(f.length-1||1),value:d,label:c(d)})),e.extra&&r.length&&r.push(dt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function tq(e){J.call(this,null,e)}function hae(){return dt({})}function gae(e){const t=Nd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ye(tq,J,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||hae,a=e.key||Me,o=this.value;return ie(i.encode)&&(i.encode=null),o&&(e.modified("key")||t.modified(a))&&ee("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=gae(a)),t.visit(t.ADD,l=>{const c=a(l);let f=o.get(c);f?f.exit?(o.empty--,i.add.push(f)):i.mod.push(f):(f=r(l),o.set(c,f),i.add.push(f)),f.datum=l,f.exit=!1}),t.visit(t.MOD,l=>{const c=a(l),f=o.get(c);f&&(f.datum=l,i.mod.push(f))}),t.visit(t.REM,l=>{const c=a(l),f=o.get(c);l===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),i}});function nq(e){J.call(this,null,e)}ye(nq,J,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(ie(a))if(n.changed()||a.every(g=>r[g]))a=a[0],n.encode=null;else return t.StopPropagation;var o=a==="enter",l=r.update||Ps,c=r.enter||Ps,f=r.exit||Ps,d=(a&&!o?r[a]:l)||Ps;if(t.changed(t.ADD)&&(t.visit(t.ADD,g=>{c(g,e),l(g,e)}),n.modifies(c.output),n.modifies(l.output),d!==Ps&&d!==l&&(t.visit(t.ADD,g=>{d(g,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==Ps&&(t.visit(t.REM,g=>{f(g,e)}),n.modifies(f.output)),o||d!==Ps){const g=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(g,p=>{const y=c(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(c.output)):t.visit(g,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function iq(e){J.call(this,[],e)}ye(iq,J,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||z1,o=e.scale,l=+e.limit,c=l$(o,e.count==null?5:e.count,e.minstep),f=!!e.values||a===z1,d=e.format||DU(n,o,c,a,e.formatSpecifier,e.formatType,f),g=e.values||OU(o,c),p,y,v,b,S;return r&&(i.rem=r),a===z1?(l&&g.length>l?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=g.slice(0,l-1),S=!0):r=g,je(v=e.size)?(!e.values&&o(r[0])===0&&(r=r.slice(1)),b=r.reduce((_,w)=>Math.max(_,v(w,e)),0)):v=ii(b=v||8),r=r.map((_,w)=>dt({index:w,label:d(_,w,r),value:_,offset:b,size:v(_,e)})),S&&(S=g[r.length],r.push(dt({index:r.length,label:`${g.length-r.length} entries`,value:S,offset:b,size:v(S,e)})))):a===qte?(p=o.domain(),y=wU(o,p[0],it(p)),g.length<3&&!e.values&&p[0]!==it(p)&&(g=[p[0],it(p)]),r=g.map((_,w)=>dt({index:w,label:d(_,w,g),value:_,perc:y(_)}))):(v=g.length-1,y=Zte(o),r=g.map((_,w)=>dt({index:w,label:d(_,w,g),value:_,perc:w?y(_):0,perc2:w===v?1:y(g[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const pae=e=>e.source.x,mae=e=>e.source.y,yae=e=>e.target.x,vae=e=>e.target.y;function G$(e){J.call(this,{},e)}G$.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ye(G$,J,{transform(e,t){var n=e.sourceX||pae,i=e.sourceY||mae,r=e.targetX||yae,a=e.targetY||vae,o=e.as||"path",l=e.orient||"vertical",c=e.shape||"line",f=X6.get(c+"-"+l)||X6.get(c);return f||ee("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[o]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(o)}});const rq=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,bae=(e,t,n,i)=>rq(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),aq=(e,t,n,i)=>{var r=n-e,a=i-t,o=Math.hypot(r,a)/2,l=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+l+" 0 1 "+n+","+i},xae=(e,t,n,i)=>aq(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),oq=(e,t,n,i)=>{const r=n-e,a=i-t,o=.2*(r+a),l=.2*(a-r);return"M"+e+","+t+"C"+(e+o)+","+(t+l)+" "+(n+l)+","+(i-o)+" "+n+","+i},Sae=(e,t,n,i)=>oq(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Eae=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,_ae=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,wae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),o=Math.cos(n),l=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*o+","+t*l+"L"+i*o+","+i*l},Aae=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},Cae=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},$ae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),o=Math.cos(n),l=Math.sin(n),c=(t+i)/2;return"M"+t*r+","+t*a+"C"+c*r+","+c*a+" "+c*o+","+c*l+" "+i*o+","+i*l},X6=Nd({line:rq,"line-radial":bae,arc:aq,"arc-radial":xae,curve:oq,"curve-radial":Sae,"orthogonal-horizontal":Eae,"orthogonal-vertical":_ae,"orthogonal-radial":wae,"diagonal-horizontal":Aae,"diagonal-vertical":Cae,"diagonal-radial":$ae});function Y$(e){J.call(this,null,e)}Y$.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ye(Y$,J,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||Md,o=e.startAngle||0,l=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,f=c.map(a),d=f.length,g=o,p=(l-o)/S9(f),y=ir(d),v,b,S;for(e.sort&&y.sort((_,w)=>f[_]-f[w]),v=0;v<d;++v)S=f[y[v]],b=c[y[v]],b[i]=g,b[r]=g+=S*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const Tae=5;function Mae(e){const t=e.type;return!e.bins&&(t===ed||t===Hp||t===Gp)}function sq(e){return a$(e)&&e!==Ia}const kae=ca(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function lq(e){J.call(this,null,e),this.modified(!0)}ye(lq,J,{transform(e,t){var n=t.dataflow,i=this.value,r=Oae(e);(!i||r!==i.type)&&(this.value=i=ct(r)());for(r in e)if(!kae[r]){if(r==="padding"&&sq(i.type))continue;je(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Lae(i,e,Fae(i,e,Nae(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Oae(e){var t=e.type,n="",i;return t===Ia?Ia+"-"+ed:(Dae(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ia+"-":i===3?jd+"-":""),(n+t||ed).toLowerCase())}function Dae(e){const t=e.type;return a$(t)&&t!==Iu&&t!==Pu&&(e.scheme||e.range&&e.range.length&&e.range.every(Se))}function Nae(e,t,n){const i=Rae(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,o=t.zero||t.zero===void 0&&Mae(e),l,c;if(!r)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(l=(r=r.slice()).length-1||1,o&&(r[0]>0&&(r[0]=0),r[l]<0&&(r[l]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[l]=t.domainMax),t.domainMid!=null)){c=t.domainMid;const f=c>r[l]?l+1:c<r[0]?0:l;f!==l&&n.warn("Scale domainMid exceeds domain min or max.",c),r.splice(f,0,c)}return sq(a)&&t.padding&&r[0]!==it(r)&&(r=zae(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(uq(a,r,n)),a===t$&&e.unknown(t.domainImplicit?vw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&l$(e,t.nice)||null),r.length}function Rae(e,t,n){return t?(e.domain(uq(e.type,t,n)),t.length):-1}function zae(e,t,n,i,r,a){var o=Math.abs(it(n)-n[0]),l=o/(o-2*i),c=e===is?EC(t,null,l):e===Gp?ay(t,null,l,.5):e===Hp?ay(t,null,l,r||1):e===gb?_C(t,null,l,a||1):SC(t,null,l);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function uq(e,t,n){if(bU(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+ge(t))}return t}function Fae(e,t,n){let i=t.bins;if(i&&!ie(i)){const r=e.domain(),a=r[0],o=it(r),l=i.step;let c=i.start==null?a:i.start,f=i.stop==null?o:i.stop;l||ee("Scale bins parameter missing step property."),c<a&&(c=l*Math.ceil(a/l)),f>o&&(f=l*Math.floor(o/l)),i=ir(c,f+l/2,l)}return i?e.bins=i:e.bins&&delete e.bins,e.type===n$&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Lae(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=Uae(i,t,n);else if(t.scheme&&(a=Bae(i,t,n),je(a))){if(e.interpolator)return e.interpolator(a);ee(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&xU(i))return e.interpolator(yb(qw(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(o$(t.interpolate,t.interpolateGamma)):je(e.round)?e.round(r):je(e.rangeRound)&&e.interpolate(r?Ip:kl),a&&e.range(qw(a,t.reverse))}function Uae(e,t,n){e!==hU&&e!==Aw&&ee("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===Aw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*e$(n,r,i)]}function Bae(e,t,n){var i=t.schemeExtent,r,a;return ie(t.scheme)?a=yb(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=s$(r),a||ee(`Unrecognized scheme name: ${t.scheme}`)),n=e===mb?n+1:e===n$?n-1:e===td||e===pb?+t.schemeCount||Tae:n,xU(e)?V6(a,i,t.reverse):je(a)?_U(V6(a,i),n):e===t$?a:a.slice(0,n)}function V6(e,t,n){return je(e)&&(t||n)?EU(e,qw(t||[0,1],n)):e}function qw(e,t){return t?e.slice().reverse():e}function cq(e){J.call(this,null,e)}ye(cq,J,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(dc(e.sort)),this.modified(n),t}});const W6="zero",fq="center",dq="normalize",hq=["y0","y1"];function X$(e){J.call(this,null,e)}X$.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:W6,values:[W6,fq,dq]},{name:"as",type:"string",array:!0,length:2,default:hq}]};ye(X$,J,{transform(e,t){var n=e.as||hq,i=n[0],r=n[1],a=dc(e.sort),o=e.field||Md,l=e.offset===fq?qae:e.offset===dq?jae:Iae,c,f,d,g;for(c=Pae(t.source,e.groupby,a,o),f=0,d=c.length,g=c.max;f<d;++f)l(c[f],g,o,i,r);return t.reflow(e.modified()).modifies(n)}});function qae(e,t,n,i,r){for(var a=(t-e.sum)/2,o=e.length,l=0,c;l<o;++l)c=e[l],c[i]=a,c[r]=a+=Math.abs(n(c))}function jae(e,t,n,i,r){for(var a=1/e.sum,o=0,l=e.length,c=0,f=0,d;c<l;++c)d=e[c],d[i]=o,d[r]=o=a*(f+=Math.abs(n(d)))}function Iae(e,t,n,i,r){for(var a=0,o=0,l=e.length,c=0,f,d;c<l;++c)d=e[c],f=+n(d),f<0?(d[i]=o,d[r]=o+=f):(d[i]=a,d[r]=a+=f)}function Pae(e,t,n,i){var r=[],a=b=>b(d),o,l,c,f,d,g,p,y,v;if(t==null)r.push(e.slice());else for(o={},l=0,c=e.length;l<c;++l)d=e[l],g=t.map(a),p=o[g],p||(o[g]=p=[],r.push(p)),p.push(d);for(g=0,v=0,f=r.length;g<f;++g){for(p=r[g],l=0,y=0,c=p.length;l<c;++l)y+=Math.abs(i(p[l]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const Hae=Object.freeze(Object.defineProperty({__proto__:null,axisticks:eq,datajoin:tq,encode:nq,legendentries:iq,linkpath:G$,pie:Y$,scale:lq,sortitems:cq,stack:X$},Symbol.toStringTag,{value:"Module"}));var Ne=1e-6,Fy=1e-12,Ve=Math.PI,Yt=Ve/2,Ly=Ve/4,yi=Ve*2,Zt=180/Ve,Ye=Ve/180,nt=Math.abs,Pd=Math.atan,Br=Math.atan2,Re=Math.cos,a1=Math.ceil,gq=Math.exp,jw=Math.hypot,Uy=Math.log,UE=Math.pow,ke=Math.sin,kr=Math.sign||function(e){return e>0?1:e<0?-1:0},vi=Math.sqrt,V$=Math.tan;function pq(e){return e>1?0:e<-1?Ve:Math.acos(e)}function Li(e){return e>1?Yt:e<-1?-Yt:Math.asin(e)}function Un(){}function By(e,t){e&&Z6.hasOwnProperty(e.type)&&Z6[e.type](e,t)}var Q6={Feature:function(e,t){By(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)By(n[i].geometry,t)}},Z6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){Iw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Iw(n[i],t,0)},Polygon:function(e,t){K6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)K6(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)By(n[i],t)}};function Iw(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function K6(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)Iw(e[n],t,1);t.polygonEnd()}function qo(e,t){e&&Q6.hasOwnProperty(e.type)?Q6[e.type](e,t):By(e,t)}var qy=new pi,jy=new pi,mq,yq,Pw,Hw,Gw,Qa={point:Un,lineStart:Un,lineEnd:Un,polygonStart:function(){qy=new pi,Qa.lineStart=Gae,Qa.lineEnd=Yae},polygonEnd:function(){var e=+qy;jy.add(e<0?yi+e:e),this.lineStart=this.lineEnd=this.point=Un},sphere:function(){jy.add(yi)}};function Gae(){Qa.point=Xae}function Yae(){vq(mq,yq)}function Xae(e,t){Qa.point=vq,mq=e,yq=t,e*=Ye,t*=Ye,Pw=e,Hw=Re(t=t/2+Ly),Gw=ke(t)}function vq(e,t){e*=Ye,t*=Ye,t=t/2+Ly;var n=e-Pw,i=n>=0?1:-1,r=i*n,a=Re(t),o=ke(t),l=Gw*o,c=Hw*a+l*Re(r),f=l*i*ke(r);qy.add(Br(f,c)),Pw=e,Hw=a,Gw=o}function Vae(e){return jy=new pi,qo(e,Qa),jy*2}function Iy(e){return[Br(e[1],e[0]),Li(e[2])]}function Gu(e){var t=e[0],n=e[1],i=Re(n);return[i*Re(t),i*ke(t),ke(n)]}function o1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function sd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function BE(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function s1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Py(e){var t=vi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Bt,Oi,Ht,tr,vu,bq,xq,Uf,Vg,Vs,rs,Uo={point:Yw,lineStart:J6,lineEnd:e4,polygonStart:function(){Uo.point=Eq,Uo.lineStart=Wae,Uo.lineEnd=Qae,Vg=new pi,Qa.polygonStart()},polygonEnd:function(){Qa.polygonEnd(),Uo.point=Yw,Uo.lineStart=J6,Uo.lineEnd=e4,qy<0?(Bt=-(Ht=180),Oi=-(tr=90)):Vg>Ne?tr=90:Vg<-Ne&&(Oi=-90),rs[0]=Bt,rs[1]=Ht},sphere:function(){Bt=-(Ht=180),Oi=-(tr=90)}};function Yw(e,t){Vs.push(rs=[Bt=e,Ht=e]),t<Oi&&(Oi=t),t>tr&&(tr=t)}function Sq(e,t){var n=Gu([e*Ye,t*Ye]);if(Uf){var i=sd(Uf,n),r=[i[1],-i[0],0],a=sd(r,i);Py(a),a=Iy(a);var o=e-vu,l=o>0?1:-1,c=a[0]*Zt*l,f,d=nt(o)>180;d^(l*vu<c&&c<l*e)?(f=a[1]*Zt,f>tr&&(tr=f)):(c=(c+360)%360-180,d^(l*vu<c&&c<l*e)?(f=-a[1]*Zt,f<Oi&&(Oi=f)):(t<Oi&&(Oi=t),t>tr&&(tr=t))),d?e<vu?er(Bt,e)>er(Bt,Ht)&&(Ht=e):er(e,Ht)>er(Bt,Ht)&&(Bt=e):Ht>=Bt?(e<Bt&&(Bt=e),e>Ht&&(Ht=e)):e>vu?er(Bt,e)>er(Bt,Ht)&&(Ht=e):er(e,Ht)>er(Bt,Ht)&&(Bt=e)}else Vs.push(rs=[Bt=e,Ht=e]);t<Oi&&(Oi=t),t>tr&&(tr=t),Uf=n,vu=e}function J6(){Uo.point=Sq}function e4(){rs[0]=Bt,rs[1]=Ht,Uo.point=Yw,Uf=null}function Eq(e,t){if(Uf){var n=e-vu;Vg.add(nt(n)>180?n+(n>0?360:-360):n)}else bq=e,xq=t;Qa.point(e,t),Sq(e,t)}function Wae(){Qa.lineStart()}function Qae(){Eq(bq,xq),Qa.lineEnd(),nt(Vg)>Ne&&(Bt=-(Ht=180)),rs[0]=Bt,rs[1]=Ht,Uf=null}function er(e,t){return(t-=e)<0?t+360:t}function Zae(e,t){return e[0]-t[0]}function t4(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Kae(e){var t,n,i,r,a,o,l;if(tr=Ht=-(Bt=Oi=1/0),Vs=[],qo(e,Uo),n=Vs.length){for(Vs.sort(Zae),t=1,i=Vs[0],a=[i];t<n;++t)r=Vs[t],t4(i,r[0])||t4(i,r[1])?(er(i[0],r[1])>er(i[0],i[1])&&(i[1]=r[1]),er(r[0],i[1])>er(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(l=er(i[1],r[0]))>o&&(o=l,Bt=r[0],Ht=i[1])}return Vs=rs=null,Bt===1/0||Oi===1/0?[[NaN,NaN],[NaN,NaN]]:[[Bt,Oi],[Ht,tr]]}var Og,Hy,Gy,Yy,Xy,Vy,Wy,Qy,Xw,Vw,Ww,_q,wq,ui,ci,fi,aa={sphere:Un,point:W$,lineStart:n4,lineEnd:i4,polygonStart:function(){aa.lineStart=toe,aa.lineEnd=noe},polygonEnd:function(){aa.lineStart=n4,aa.lineEnd=i4}};function W$(e,t){e*=Ye,t*=Ye;var n=Re(t);i0(n*Re(e),n*ke(e),ke(t))}function i0(e,t,n){++Og,Gy+=(e-Gy)/Og,Yy+=(t-Yy)/Og,Xy+=(n-Xy)/Og}function n4(){aa.point=Jae}function Jae(e,t){e*=Ye,t*=Ye;var n=Re(t);ui=n*Re(e),ci=n*ke(e),fi=ke(t),aa.point=eoe,i0(ui,ci,fi)}function eoe(e,t){e*=Ye,t*=Ye;var n=Re(t),i=n*Re(e),r=n*ke(e),a=ke(t),o=Br(vi((o=ci*a-fi*r)*o+(o=fi*i-ui*a)*o+(o=ui*r-ci*i)*o),ui*i+ci*r+fi*a);Hy+=o,Vy+=o*(ui+(ui=i)),Wy+=o*(ci+(ci=r)),Qy+=o*(fi+(fi=a)),i0(ui,ci,fi)}function i4(){aa.point=W$}function toe(){aa.point=ioe}function noe(){Aq(_q,wq),aa.point=W$}function ioe(e,t){_q=e,wq=t,e*=Ye,t*=Ye,aa.point=Aq;var n=Re(t);ui=n*Re(e),ci=n*ke(e),fi=ke(t),i0(ui,ci,fi)}function Aq(e,t){e*=Ye,t*=Ye;var n=Re(t),i=n*Re(e),r=n*ke(e),a=ke(t),o=ci*a-fi*r,l=fi*i-ui*a,c=ui*r-ci*i,f=jw(o,l,c),d=Li(f),g=f&&-d/f;Xw.add(g*o),Vw.add(g*l),Ww.add(g*c),Hy+=d,Vy+=d*(ui+(ui=i)),Wy+=d*(ci+(ci=r)),Qy+=d*(fi+(fi=a)),i0(ui,ci,fi)}function roe(e){Og=Hy=Gy=Yy=Xy=Vy=Wy=Qy=0,Xw=new pi,Vw=new pi,Ww=new pi,qo(e,aa);var t=+Xw,n=+Vw,i=+Ww,r=jw(t,n,i);return r<Fy&&(t=Vy,n=Wy,i=Qy,Hy<Ne&&(t=Gy,n=Yy,i=Xy),r=jw(t,n,i),r<Fy)?[NaN,NaN]:[Br(n,t)*Zt,Li(i/r)*Zt]}function Qw(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function Zw(e,t){return nt(e)>Ve&&(e-=Math.round(e/yi)*yi),[e,t]}Zw.invert=Zw;function Cq(e,t,n){return(e%=yi)?t||n?Qw(a4(e),o4(t,n)):a4(e):t||n?o4(t,n):Zw}function r4(e){return function(t,n){return t+=e,nt(t)>Ve&&(t-=Math.round(t/yi)*yi),[t,n]}}function a4(e){var t=r4(e);return t.invert=r4(-e),t}function o4(e,t){var n=Re(e),i=ke(e),r=Re(t),a=ke(t);function o(l,c){var f=Re(c),d=Re(l)*f,g=ke(l)*f,p=ke(c),y=p*n+d*i;return[Br(g*r-y*a,d*n-p*i),Li(y*r+g*a)]}return o.invert=function(l,c){var f=Re(c),d=Re(l)*f,g=ke(l)*f,p=ke(c),y=p*r-g*a;return[Br(g*r+p*a,d*n+y*i),Li(y*n-d*i)]},o}function aoe(e){e=Cq(e[0]*Ye,e[1]*Ye,e.length>2?e[2]*Ye:0);function t(n){return n=e(n[0]*Ye,n[1]*Ye),n[0]*=Zt,n[1]*=Zt,n}return t.invert=function(n){return n=e.invert(n[0]*Ye,n[1]*Ye),n[0]*=Zt,n[1]*=Zt,n},t}function ooe(e,t,n,i,r,a){if(n){var o=Re(t),l=ke(t),c=i*n;r==null?(r=t+i*yi,a=t-c/2):(r=s4(o,r),a=s4(o,a),(i>0?r<a:r>a)&&(r+=i*yi));for(var f,d=r;i>0?d>a:d<a;d-=c)f=Iy([o,-l*Re(d),-l*ke(d)]),e.point(f[0],f[1])}}function s4(e,t){t=Gu(t),t[0]-=e,Py(t);var n=pq(-t[1]);return((-t[2]<0?-n:n)+yi-Ne)%yi}function $q(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Un,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function H1(e,t){return nt(e[0]-t[0])<Ne&&nt(e[1]-t[1])<Ne}function l1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Tq(e,t,n,i,r){var a=[],o=[],l,c;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,S=v[0],_=v[b],w;if(H1(S,_)){if(!S[2]&&!_[2]){for(r.lineStart(),l=0;l<b;++l)r.point((S=v[l])[0],S[1]);r.lineEnd();return}_[0]+=2*Ne}a.push(w=new l1(S,v,null,!0)),o.push(w.o=new l1(S,null,w,!1)),a.push(w=new l1(_,v,null,!1)),o.push(w.o=new l1(_,null,w,!0))}}),!!a.length){for(o.sort(t),l4(a),l4(o),l=0,c=o.length;l<c;++l)o[l].e=n=!n;for(var f=a[0],d,g;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(l=0,c=d.length;l<c;++l)r.point((g=d[l])[0],g[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,l=d.length-1;l>=0;--l)r.point((g=d[l])[0],g[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function l4(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function qE(e){return nt(e[0])<=Ve?e[0]:kr(e[0])*((nt(e[0])+Ve)%yi-Ve)}function soe(e,t){var n=qE(t),i=t[1],r=ke(i),a=[ke(n),-Re(n),0],o=0,l=0,c=new pi;r===1?i=Yt+Ne:r===-1&&(i=-Yt-Ne);for(var f=0,d=e.length;f<d;++f)if(p=(g=e[f]).length)for(var g,p,y=g[p-1],v=qE(y),b=y[1]/2+Ly,S=ke(b),_=Re(b),w=0;w<p;++w,v=$,S=k,_=T,y=A){var A=g[w],$=qE(A),M=A[1]/2+Ly,k=ke(M),T=Re(M),N=$-v,R=N>=0?1:-1,B=R*N,U=B>Ve,Q=S*k;if(c.add(Br(Q*R*ke(B),_*T+Q*Re(B))),o+=U?N+R*yi:N,U^v>=n^$>=n){var G=sd(Gu(y),Gu(A));Py(G);var I=sd(a,G);Py(I);var z=(U^N>=0?-1:1)*Li(I[2]);(i>z||i===z&&(G[0]||G[1]))&&(l+=U^N>=0?1:-1)}}return(o<-Ne||o<Ne&&c<-Fy)^l&1}function Mq(e,t,n,i){return function(r){var a=t(r),o=$q(),l=t(o),c=!1,f,d,g,p={point:y,lineStart:b,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=w,p.lineEnd=A,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=S,d=x9(d);var $=soe(f,i);d.length?(c||(r.polygonStart(),c=!0),Tq(d,uoe,$,n,r)):$&&(c||(r.polygonStart(),c=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y($,M){e($,M)&&r.point($,M)}function v($,M){a.point($,M)}function b(){p.point=v,a.lineStart()}function S(){p.point=y,a.lineEnd()}function _($,M){g.push([$,M]),l.point($,M)}function w(){l.lineStart(),g=[]}function A(){_(g[0][0],g[0][1]),l.lineEnd();var $=l.clean(),M=o.result(),k,T=M.length,N,R,B;if(g.pop(),f.push(g),g=null,!!T){if($&1){if(R=M[0],(N=R.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),k=0;k<N;++k)r.point((B=R[k])[0],B[1]);r.lineEnd()}return}T>1&&$&2&&M.push(M.pop().concat(M.shift())),d.push(M.filter(loe))}}return p}}function loe(e){return e.length>1}function uoe(e,t){return((e=e.x)[0]<0?e[1]-Yt-Ne:Yt-e[1])-((t=t.x)[0]<0?t[1]-Yt-Ne:Yt-t[1])}const u4=Mq(function(){return!0},coe,doe,[-Ve,-Yt]);function coe(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,o){var l=a>0?Ve:-Ve,c=nt(a-t);nt(c-Ve)<Ne?(e.point(t,n=(n+o)/2>0?Yt:-Yt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(a,n),r=0):i!==l&&c>=Ve&&(nt(t-i)<Ne&&(t-=i*Ne),nt(a-l)<Ne&&(a-=l*Ne),n=foe(t,n,a,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),r=0),e.point(t=a,n=o),i=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function foe(e,t,n,i){var r,a,o=ke(e-n);return nt(o)>Ne?Pd((ke(t)*(a=Re(i))*ke(n)-ke(i)*(r=Re(t))*ke(e))/(r*a*o)):(t+i)/2}function doe(e,t,n,i){var r;if(e==null)r=n*Yt,i.point(-Ve,r),i.point(0,r),i.point(Ve,r),i.point(Ve,0),i.point(Ve,-r),i.point(0,-r),i.point(-Ve,-r),i.point(-Ve,0),i.point(-Ve,r);else if(nt(e[0]-t[0])>Ne){var a=e[0]<t[0]?Ve:-Ve;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function hoe(e){var t=Re(e),n=2*Ye,i=t>0,r=nt(t)>Ne;function a(d,g,p,y){ooe(y,e,n,p,d,g)}function o(d,g){return Re(d)*Re(g)>t}function l(d){var g,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(S,_){var w=[S,_],A,$=o(S,_),M=i?$?0:f(S,_):$?f(S+(S<0?Ve:-Ve),_):0;if(!g&&(v=y=$)&&d.lineStart(),$!==y&&(A=c(g,w),(!A||H1(g,A)||H1(w,A))&&(w[2]=1)),$!==y)b=0,$?(d.lineStart(),A=c(w,g),d.point(A[0],A[1])):(A=c(g,w),d.point(A[0],A[1],2),d.lineEnd()),g=A;else if(r&&g&&i^$){var k;!(M&p)&&(k=c(w,g,!0))&&(b=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}$&&(!g||!H1(g,w))&&d.point(w[0],w[1]),g=w,y=$,p=M},lineEnd:function(){y&&d.lineEnd(),g=null},clean:function(){return b|(v&&y)<<1}}}function c(d,g,p){var y=Gu(d),v=Gu(g),b=[1,0,0],S=sd(y,v),_=o1(S,S),w=S[0],A=_-w*w;if(!A)return!p&&d;var $=t*_/A,M=-t*w/A,k=sd(b,S),T=s1(b,$),N=s1(S,M);BE(T,N);var R=k,B=o1(T,R),U=o1(R,R),Q=B*B-U*(o1(T,T)-1);if(!(Q<0)){var G=vi(Q),I=s1(R,(-B-G)/U);if(BE(I,T),I=Iy(I),!p)return I;var z=d[0],D=g[0],q=d[1],Y=g[1],Z;D<z&&(Z=z,z=D,D=Z);var ue=D-z,F=nt(ue-Ve)<Ne,H=F||ue<Ne;if(!F&&Y<q&&(Z=q,q=Y,Y=Z),H?F?q+Y>0^I[1]<(nt(I[0]-z)<Ne?q:Y):q<=I[1]&&I[1]<=Y:ue>Ve^(z<=I[0]&&I[0]<=D)){var ae=s1(R,(-B+G)/U);return BE(ae,T),[I,Iy(ae)]}}}function f(d,g){var p=i?e:Ve-e,y=0;return d<-p?y|=1:d>p&&(y|=2),g<-p?y|=4:g>p&&(y|=8),y}return Mq(o,l,a,i?[0,-e]:[-Ve,e-Ve])}function goe(e,t,n,i,r,a){var o=e[0],l=e[1],c=t[0],f=t[1],d=0,g=1,p=c-o,y=f-l,v;if(v=n-o,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<g&&(g=v)}else if(p>0){if(v>g)return;v>d&&(d=v)}if(v=r-o,!(!p&&v<0)){if(v/=p,p<0){if(v>g)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<g&&(g=v)}if(v=i-l,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<g&&(g=v)}else if(y>0){if(v>g)return;v>d&&(d=v)}if(v=a-l,!(!y&&v<0)){if(v/=y,y<0){if(v>g)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<g&&(g=v)}return d>0&&(e[0]=o+d*p,e[1]=l+d*y),g<1&&(t[0]=o+g*p,t[1]=l+g*y),!0}}}}}var Dg=1e9,u1=-Dg;function kq(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,g,p){var y=0,v=0;if(f==null||(y=o(f,g))!==(v=o(d,g))||c(f,d)<0^g>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+g+4)%4)!==v);else p.point(d[0],d[1])}function o(f,d){return nt(f[0]-e)<Ne?d>0?0:3:nt(f[0]-n)<Ne?d>0?2:1:nt(f[1]-t)<Ne?d>0?1:0:d>0?3:2}function l(f,d){return c(f.x,d.x)}function c(f,d){var g=o(f,1),p=o(d,1);return g!==p?g-p:g===0?d[1]-f[1]:g===1?f[0]-d[0]:g===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,g=$q(),p,y,v,b,S,_,w,A,$,M,k,T={point:N,lineStart:Q,lineEnd:G,polygonStart:B,polygonEnd:U};function N(z,D){r(z,D)&&d.point(z,D)}function R(){for(var z=0,D=0,q=y.length;D<q;++D)for(var Y=y[D],Z=1,ue=Y.length,F=Y[0],H,ae,pe=F[0],ve=F[1];Z<ue;++Z)H=pe,ae=ve,F=Y[Z],pe=F[0],ve=F[1],ae<=i?ve>i&&(pe-H)*(i-ae)>(ve-ae)*(e-H)&&++z:ve<=i&&(pe-H)*(i-ae)<(ve-ae)*(e-H)&&--z;return z}function B(){d=g,p=[],y=[],k=!0}function U(){var z=R(),D=k&&z,q=(p=x9(p)).length;(D||q)&&(f.polygonStart(),D&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),q&&Tq(p,l,z,a,f),f.polygonEnd()),d=f,p=y=v=null}function Q(){T.point=I,y&&y.push(v=[]),M=!0,$=!1,w=A=NaN}function G(){p&&(I(b,S),_&&$&&g.rejoin(),p.push(g.result())),T.point=N,$&&d.lineEnd()}function I(z,D){var q=r(z,D);if(y&&v.push([z,D]),M)b=z,S=D,_=q,M=!1,q&&(d.lineStart(),d.point(z,D));else if(q&&$)d.point(z,D);else{var Y=[w=Math.max(u1,Math.min(Dg,w)),A=Math.max(u1,Math.min(Dg,A))],Z=[z=Math.max(u1,Math.min(Dg,z)),D=Math.max(u1,Math.min(Dg,D))];goe(Y,Z,e,t,n,i)?($||(d.lineStart(),d.point(Y[0],Y[1])),d.point(Z[0],Z[1]),q||d.lineEnd(),k=!1):q&&(d.lineStart(),d.point(z,D),k=!1)}w=z,A=D,$=q}return T}}function c4(e,t,n){var i=ir(e,t-Ne,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function f4(e,t,n){var i=ir(e,t-Ne,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function poe(){var e,t,n,i,r,a,o,l,c=10,f=c,d=90,g=360,p,y,v,b,S=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return ir(a1(i/d)*d,n,d).map(v).concat(ir(a1(l/g)*g,o,g).map(b)).concat(ir(a1(t/c)*c,e,c).filter(function(A){return nt(A%d)>Ne}).map(p)).concat(ir(a1(a/f)*f,r,f).filter(function(A){return nt(A%g)>Ne}).map(y))}return _.lines=function(){return w().map(function(A){return{type:"LineString",coordinates:A}})},_.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(o).slice(1),v(n).reverse().slice(1),b(l).reverse().slice(1))]}},_.extent=function(A){return arguments.length?_.extentMajor(A).extentMinor(A):_.extentMinor()},_.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],l=+A[0][1],o=+A[1][1],i>n&&(A=i,i=n,n=A),l>o&&(A=l,l=o,o=A),_.precision(S)):[[i,l],[n,o]]},_.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),_.precision(S)):[[t,a],[e,r]]},_.step=function(A){return arguments.length?_.stepMajor(A).stepMinor(A):_.stepMinor()},_.stepMajor=function(A){return arguments.length?(d=+A[0],g=+A[1],_):[d,g]},_.stepMinor=function(A){return arguments.length?(c=+A[0],f=+A[1],_):[c,f]},_.precision=function(A){return arguments.length?(S=+A,p=c4(a,r,90),y=f4(t,e,S),v=c4(l,o,90),b=f4(i,n,S),_):S},_.extentMajor([[-180,-90+Ne],[180,90-Ne]]).extentMinor([[-180,-80-Ne],[180,80+Ne]])}const yp=e=>e;var jE=new pi,Kw=new pi,Oq,Dq,Jw,eA,jo={point:Un,lineStart:Un,lineEnd:Un,polygonStart:function(){jo.lineStart=moe,jo.lineEnd=voe},polygonEnd:function(){jo.lineStart=jo.lineEnd=jo.point=Un,jE.add(nt(Kw)),Kw=new pi},result:function(){var e=jE/2;return jE=new pi,e}};function moe(){jo.point=yoe}function yoe(e,t){jo.point=Nq,Oq=Jw=e,Dq=eA=t}function Nq(e,t){Kw.add(eA*e-Jw*t),Jw=e,eA=t}function voe(){Nq(Oq,Dq)}var ld=1/0,Zy=ld,vp=-ld,Ky=vp,Jy={point:boe,lineStart:Un,lineEnd:Un,polygonStart:Un,polygonEnd:Un,result:function(){var e=[[ld,Zy],[vp,Ky]];return vp=Ky=-(Zy=ld=1/0),e}};function boe(e,t){e<ld&&(ld=e),e>vp&&(vp=e),t<Zy&&(Zy=t),t>Ky&&(Ky=t)}var tA=0,nA=0,Ng=0,ev=0,tv=0,Of=0,iA=0,rA=0,Rg=0,Rq,zq,La,Ua,Tr={point:Yu,lineStart:d4,lineEnd:h4,polygonStart:function(){Tr.lineStart=Eoe,Tr.lineEnd=_oe},polygonEnd:function(){Tr.point=Yu,Tr.lineStart=d4,Tr.lineEnd=h4},result:function(){var e=Rg?[iA/Rg,rA/Rg]:Of?[ev/Of,tv/Of]:Ng?[tA/Ng,nA/Ng]:[NaN,NaN];return tA=nA=Ng=ev=tv=Of=iA=rA=Rg=0,e}};function Yu(e,t){tA+=e,nA+=t,++Ng}function d4(){Tr.point=xoe}function xoe(e,t){Tr.point=Soe,Yu(La=e,Ua=t)}function Soe(e,t){var n=e-La,i=t-Ua,r=vi(n*n+i*i);ev+=r*(La+e)/2,tv+=r*(Ua+t)/2,Of+=r,Yu(La=e,Ua=t)}function h4(){Tr.point=Yu}function Eoe(){Tr.point=woe}function _oe(){Fq(Rq,zq)}function woe(e,t){Tr.point=Fq,Yu(Rq=La=e,zq=Ua=t)}function Fq(e,t){var n=e-La,i=t-Ua,r=vi(n*n+i*i);ev+=r*(La+e)/2,tv+=r*(Ua+t)/2,Of+=r,r=Ua*e-La*t,iA+=r*(La+e),rA+=r*(Ua+t),Rg+=r*3,Yu(La=e,Ua=t)}function Lq(e){this._context=e}Lq.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,yi);break}}},result:Un};var aA=new pi,IE,Uq,Bq,zg,Fg,bp={point:Un,lineStart:function(){bp.point=Aoe},lineEnd:function(){IE&&qq(Uq,Bq),bp.point=Un},polygonStart:function(){IE=!0},polygonEnd:function(){IE=null},result:function(){var e=+aA;return aA=new pi,e}};function Aoe(e,t){bp.point=qq,Uq=zg=e,Bq=Fg=t}function qq(e,t){zg-=e,Fg-=t,aA.add(vi(zg*zg+Fg*Fg)),zg=e,Fg=t}let g4,nv,p4,m4;class y4{constructor(t){this._append=t==null?jq:Coe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==p4||this._append!==nv){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,p4=i,nv=this._append,m4=this._,this._=r}this._+=m4;break}}}result(){const t=this._;return this._="",t.length?t:null}}function jq(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Coe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return jq;if(t!==g4){const n=10**t;g4=t,nv=function(r){let a=1;this._+=r[0];for(const o=r.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return nv}function Iq(e,t){let n=3,i=4.5,r,a;function o(l){return l&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),qo(l,r(a))),a.result()}return o.area=function(l){return qo(l,r(jo)),jo.result()},o.measure=function(l){return qo(l,r(bp)),bp.result()},o.bounds=function(l){return qo(l,r(Jy)),Jy.result()},o.centroid=function(l){return qo(l,r(Tr)),Tr.result()},o.projection=function(l){return arguments.length?(r=l==null?(e=null,yp):(e=l).stream,o):e},o.context=function(l){return arguments.length?(a=l==null?(t=null,new y4(n)):new Lq(t=l),typeof i!="function"&&a.pointRadius(i),o):t},o.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(a.pointRadius(+l),+l),o):i},o.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const c=Math.floor(l);if(!(c>=0))throw new RangeError(`invalid digits: ${l}`);n=c}return t===null&&(a=new y4(n)),o},o.projection(e).digits(n).context(t)}function kb(e){return function(t){var n=new oA;for(var i in e)n[i]=e[i];return n.stream=t,n}}function oA(){}oA.prototype={constructor:oA,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Q$(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),qo(n,e.stream(Jy)),t(Jy.result()),i!=null&&e.clipExtent(i),e}function Ob(e,t,n){return Q$(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),l=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,c=+t[0][1]+(a-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([l,c])},n)}function Z$(e,t,n){return Ob(e,[[0,0],t],n)}function K$(e,t,n){return Q$(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),o=(r-a*(i[1][0]+i[0][0]))/2,l=-a*i[0][1];e.scale(150*a).translate([o,l])},n)}function J$(e,t,n){return Q$(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),o=-a*i[0][0],l=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([o,l])},n)}var v4=16,$oe=Re(30*Ye);function b4(e,t){return+t?Moe(e,t):Toe(e)}function Toe(e){return kb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Moe(e,t){function n(i,r,a,o,l,c,f,d,g,p,y,v,b,S){var _=f-i,w=d-r,A=_*_+w*w;if(A>4*t&&b--){var $=o+p,M=l+y,k=c+v,T=vi($*$+M*M+k*k),N=Li(k/=T),R=nt(nt(k)-1)<Ne||nt(a-g)<Ne?(a+g)/2:Br(M,$),B=e(R,N),U=B[0],Q=B[1],G=U-i,I=Q-r,z=w*G-_*I;(z*z/A>t||nt((_*G+w*I)/A-.5)>.3||o*p+l*y+c*v<$oe)&&(n(i,r,a,o,l,c,U,Q,R,$/=T,M/=T,k,b,S),S.point(U,Q),n(U,Q,R,$,M,k,f,d,g,p,y,v,b,S))}}return function(i){var r,a,o,l,c,f,d,g,p,y,v,b,S={point:_,lineStart:w,lineEnd:$,polygonStart:function(){i.polygonStart(),S.lineStart=M},polygonEnd:function(){i.polygonEnd(),S.lineStart=w}};function _(N,R){N=e(N,R),i.point(N[0],N[1])}function w(){g=NaN,S.point=A,i.lineStart()}function A(N,R){var B=Gu([N,R]),U=e(N,R);n(g,p,d,y,v,b,g=U[0],p=U[1],d=N,y=B[0],v=B[1],b=B[2],v4,i),i.point(g,p)}function $(){S.point=_,i.lineEnd()}function M(){w(),S.point=k,S.lineEnd=T}function k(N,R){A(r=N,R),a=g,o=p,l=y,c=v,f=b,S.point=A}function T(){n(g,p,d,y,v,b,a,o,r,l,c,f,v4,i),S.lineEnd=$,$()}return S}}var koe=kb({point:function(e,t){this.stream.point(e*Ye,t*Ye)}});function Ooe(e){return kb({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function Doe(e,t,n,i,r){function a(o,l){return o*=i,l*=r,[t+e*o,n-e*l]}return a.invert=function(o,l){return[(o-t)/e*i,(n-l)/e*r]},a}function x4(e,t,n,i,r,a){if(!a)return Doe(e,t,n,i,r);var o=Re(a),l=ke(a),c=o*e,f=l*e,d=o/e,g=l/e,p=(l*n-o*t)/e,y=(l*t+o*n)/e;function v(b,S){return b*=i,S*=r,[c*b-f*S+t,n-f*b-c*S]}return v.invert=function(b,S){return[i*(d*b-g*S+p),r*(y-g*b-d*S)]},v}function ao(e){return Pq(function(){return e})()}function Pq(e){var t,n=150,i=480,r=250,a=0,o=0,l=0,c=0,f=0,d,g=0,p=1,y=1,v=null,b=u4,S=null,_,w,A,$=yp,M=.5,k,T,N,R,B;function U(z){return N(z[0]*Ye,z[1]*Ye)}function Q(z){return z=N.invert(z[0],z[1]),z&&[z[0]*Zt,z[1]*Zt]}U.stream=function(z){return R&&B===z?R:R=koe(Ooe(d)(b(k($(B=z)))))},U.preclip=function(z){return arguments.length?(b=z,v=void 0,I()):b},U.postclip=function(z){return arguments.length?($=z,S=_=w=A=null,I()):$},U.clipAngle=function(z){return arguments.length?(b=+z?hoe(v=z*Ye):(v=null,u4),I()):v*Zt},U.clipExtent=function(z){return arguments.length?($=z==null?(S=_=w=A=null,yp):kq(S=+z[0][0],_=+z[0][1],w=+z[1][0],A=+z[1][1]),I()):S==null?null:[[S,_],[w,A]]},U.scale=function(z){return arguments.length?(n=+z,G()):n},U.translate=function(z){return arguments.length?(i=+z[0],r=+z[1],G()):[i,r]},U.center=function(z){return arguments.length?(a=z[0]%360*Ye,o=z[1]%360*Ye,G()):[a*Zt,o*Zt]},U.rotate=function(z){return arguments.length?(l=z[0]%360*Ye,c=z[1]%360*Ye,f=z.length>2?z[2]%360*Ye:0,G()):[l*Zt,c*Zt,f*Zt]},U.angle=function(z){return arguments.length?(g=z%360*Ye,G()):g*Zt},U.reflectX=function(z){return arguments.length?(p=z?-1:1,G()):p<0},U.reflectY=function(z){return arguments.length?(y=z?-1:1,G()):y<0},U.precision=function(z){return arguments.length?(k=b4(T,M=z*z),I()):vi(M)},U.fitExtent=function(z,D){return Ob(U,z,D)},U.fitSize=function(z,D){return Z$(U,z,D)},U.fitWidth=function(z,D){return K$(U,z,D)},U.fitHeight=function(z,D){return J$(U,z,D)};function G(){var z=x4(n,0,0,p,y,g).apply(null,t(a,o)),D=x4(n,i-z[0],r-z[1],p,y,g);return d=Cq(l,c,f),T=Qw(t,D),N=Qw(d,T),k=b4(T,M),I()}function I(){return R=B=null,U}return function(){return t=e.apply(this,arguments),U.invert=t.invert&&Q,G()}}function eT(e){var t=0,n=Ve/3,i=Pq(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Ye,n=a[1]*Ye):[t*Zt,n*Zt]},r}function Noe(e){var t=Re(e);function n(i,r){return[i*t,ke(r)/t]}return n.invert=function(i,r){return[i/t,Li(r*t)]},n}function Roe(e,t){var n=ke(e),i=(n+ke(t))/2;if(nt(i)<Ne)return Noe(e);var r=1+n*(2*i-n),a=vi(r)/i;function o(l,c){var f=vi(r-2*i*ke(c))/i;return[f*ke(l*=i),a-f*Re(l)]}return o.invert=function(l,c){var f=a-c,d=Br(l,nt(f))*kr(f);return f*i<0&&(d-=Ve*kr(l)*kr(f)),[d/i,Li((r-(l*l+f*f)*i*i)/(2*i))]},o}function iv(){return eT(Roe).scale(155.424).center([0,33.6442])}function Hq(){return iv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function zoe(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Foe(){var e,t,n=Hq(),i,r=iv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=iv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,c,f={point:function(p,y){c=[p,y]}};function d(p){var y=p[0],v=p[1];return c=null,i.point(y,v),c||(a.point(y,v),c)||(l.point(y,v),c)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,S=(p[1]-v[1])/y;return(S>=.12&&S<.234&&b>=-.425&&b<-.214?r:S>=.166&&S<.234&&b>=-.214&&b<-.115?o:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=zoe([n.stream(t=p),r.stream(p),o.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),o.precision(p),g()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),o.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Ne,b+.12*y+Ne],[v-.214*y-Ne,b+.234*y-Ne]]).stream(f),l=o.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Ne,b+.166*y+Ne],[v-.115*y-Ne,b+.234*y-Ne]]).stream(f),g()},d.fitExtent=function(p,y){return Ob(d,p,y)},d.fitSize=function(p,y){return Z$(d,p,y)},d.fitWidth=function(p,y){return K$(d,p,y)},d.fitHeight=function(p,y){return J$(d,p,y)};function g(){return e=t=null,d}return d.scale(1070)}function Gq(e){return function(t,n){var i=Re(t),r=Re(n),a=e(i*r);return a===1/0?[2,0]:[a*r*ke(t),a*ke(n)]}}function r0(e){return function(t,n){var i=vi(t*t+n*n),r=e(i),a=ke(r),o=Re(r);return[Br(t*a,i*o),Li(i&&n*a/i)]}}var Yq=Gq(function(e){return vi(2/(1+e))});Yq.invert=r0(function(e){return 2*Li(e/2)});function Loe(){return ao(Yq).scale(124.75).clipAngle(180-.001)}var Xq=Gq(function(e){return(e=pq(e))&&e/ke(e)});Xq.invert=r0(function(e){return e});function Uoe(){return ao(Xq).scale(79.4188).clipAngle(180-.001)}function Db(e,t){return[e,Uy(V$((Yt+t)/2))]}Db.invert=function(e,t){return[e,2*Pd(gq(t))-Yt]};function Boe(){return Vq(Db).scale(961/yi)}function Vq(e){var t=ao(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,o=null,l,c,f;t.scale=function(g){return arguments.length?(i(g),d()):i()},t.translate=function(g){return arguments.length?(r(g),d()):r()},t.center=function(g){return arguments.length?(n(g),d()):n()},t.clipExtent=function(g){return arguments.length?(g==null?o=l=c=f=null:(o=+g[0][0],l=+g[0][1],c=+g[1][0],f=+g[1][1]),d()):o==null?null:[[o,l],[c,f]]};function d(){var g=Ve*i(),p=t(aoe(t.rotate()).invert([0,0]));return a(o==null?[[p[0]-g,p[1]-g],[p[0]+g,p[1]+g]]:e===Db?[[Math.max(p[0]-g,o),l],[Math.min(p[0]+g,c),f]]:[[o,Math.max(p[1]-g,l)],[c,Math.min(p[1]+g,f)]])}return d()}function c1(e){return V$((Yt+e)/2)}function qoe(e,t){var n=Re(e),i=e===t?ke(e):Uy(n/Re(t))/Uy(c1(t)/c1(e)),r=n*UE(c1(e),i)/i;if(!i)return Db;function a(o,l){r>0?l<-Yt+Ne&&(l=-Yt+Ne):l>Yt-Ne&&(l=Yt-Ne);var c=r/UE(c1(l),i);return[c*ke(i*o),r-c*Re(i*o)]}return a.invert=function(o,l){var c=r-l,f=kr(i)*vi(o*o+c*c),d=Br(o,nt(c))*kr(c);return c*i<0&&(d-=Ve*kr(o)*kr(c)),[d/i,2*Pd(UE(r/f,1/i))-Yt]},a}function joe(){return eT(qoe).scale(109.5).parallels([30,30])}function rv(e,t){return[e,t]}rv.invert=rv;function Ioe(){return ao(rv).scale(152.63)}function Poe(e,t){var n=Re(e),i=e===t?ke(e):(n-Re(t))/(t-e),r=n/i+e;if(nt(i)<Ne)return rv;function a(o,l){var c=r-l,f=i*o;return[c*ke(f),r-c*Re(f)]}return a.invert=function(o,l){var c=r-l,f=Br(o,nt(c))*kr(c);return c*i<0&&(f-=Ve*kr(o)*kr(c)),[f/i,r-kr(i)*vi(o*o+c*c)]},a}function Hoe(){return eT(Poe).scale(131.154).center([0,13.9389])}var Wg=1.340264,Qg=-.081106,Zg=893e-6,Kg=.003796,av=vi(3)/2,Goe=12;function Wq(e,t){var n=Li(av*ke(t)),i=n*n,r=i*i*i;return[e*Re(n)/(av*(Wg+3*Qg*i+r*(7*Zg+9*Kg*i))),n*(Wg+Qg*i+r*(Zg+Kg*i))]}Wq.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,o,l,c;a<Goe&&(l=n*(Wg+Qg*i+r*(Zg+Kg*i))-t,c=Wg+3*Qg*i+r*(7*Zg+9*Kg*i),n-=o=l/c,i=n*n,r=i*i*i,!(nt(o)<Fy));++a);return[av*e*(Wg+3*Qg*i+r*(7*Zg+9*Kg*i))/Re(n),Li(ke(n)/av)]};function Yoe(){return ao(Wq).scale(177.158)}function Qq(e,t){var n=Re(t),i=Re(e)*n;return[n*ke(e)/i,ke(t)/i]}Qq.invert=r0(Pd);function Xoe(){return ao(Qq).scale(144.049).clipAngle(60)}function Voe(){var e=1,t=0,n=0,i=1,r=1,a=0,o,l,c=null,f,d,g,p=1,y=1,v=kb({point:function($,M){var k=A([$,M]);this.stream.point(k[0],k[1])}}),b=yp,S,_;function w(){return p=e*i,y=e*r,S=_=null,A}function A($){var M=$[0]*p,k=$[1]*y;if(a){var T=k*o-M*l;M=M*o+k*l,k=T}return[M+t,k+n]}return A.invert=function($){var M=$[0]-t,k=$[1]-n;if(a){var T=k*o+M*l;M=M*o-k*l,k=T}return[M/p,k/y]},A.stream=function($){return S&&_===$?S:S=v(b(_=$))},A.postclip=function($){return arguments.length?(b=$,c=f=d=g=null,w()):b},A.clipExtent=function($){return arguments.length?(b=$==null?(c=f=d=g=null,yp):kq(c=+$[0][0],f=+$[0][1],d=+$[1][0],g=+$[1][1]),w()):c==null?null:[[c,f],[d,g]]},A.scale=function($){return arguments.length?(e=+$,w()):e},A.translate=function($){return arguments.length?(t=+$[0],n=+$[1],w()):[t,n]},A.angle=function($){return arguments.length?(a=$%360*Ye,l=ke(a),o=Re(a),w()):a*Zt},A.reflectX=function($){return arguments.length?(i=$?-1:1,w()):i<0},A.reflectY=function($){return arguments.length?(r=$?-1:1,w()):r<0},A.fitExtent=function($,M){return Ob(A,$,M)},A.fitSize=function($,M){return Z$(A,$,M)},A.fitWidth=function($,M){return K$(A,$,M)},A.fitHeight=function($,M){return J$(A,$,M)},A}function Zq(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}Zq.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,o=a*a;n-=r=(n*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-t)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(nt(r)>Ne&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function Woe(){return ao(Zq).scale(175.295)}function Kq(e,t){return[Re(t)*ke(e),ke(t)]}Kq.invert=r0(Li);function Qoe(){return ao(Kq).scale(249.5).clipAngle(90+Ne)}function Jq(e,t){var n=Re(t),i=1+Re(e)*n;return[n*ke(e)/i,ke(t)/i]}Jq.invert=r0(function(e){return 2*Pd(e)});function Zoe(){return ao(Jq).scale(250).clipAngle(142)}function ej(e,t){return[Uy(V$((Yt+t)/2)),-e]}ej.invert=function(e,t){return[-t,2*Pd(gq(e))-Yt]};function Koe(){var e=Vq(ej),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Joe=Math.abs,sA=Math.cos,ov=Math.sin,ese=1e-6,tj=Math.PI,lA=tj/2,S4=tse(2);function E4(e){return e>1?lA:e<-1?-lA:Math.asin(e)}function tse(e){return e>0?Math.sqrt(e):0}function nse(e,t){var n=e*ov(t),i=30,r;do t-=r=(t+ov(t)-n)/(1+sA(t));while(Joe(r)>ese&&--i>0);return t/2}function ise(e,t,n){function i(r,a){return[e*r*sA(a=nse(n,a)),t*ov(a)]}return i.invert=function(r,a){return a=E4(a/t),[r/(e*sA(a)),E4((2*a+ov(2*a))/n)]},i}var rse=ise(S4/lA,S4,tj);function ase(){return ao(rse).scale(169.529)}const ose=Iq(),uA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function sse(e,t){return function n(){const i=t();return i.type=e,i.path=Iq().projection(i),i.copy=i.copy||function(){const r=n();return uA.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},yU(i)}}function tT(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(sv[e]=sse(e,t),this):sv[e]||null}function nj(e){return e&&e.path||ose}const sv={albers:Hq,albersusa:Foe,azimuthalequalarea:Loe,azimuthalequidistant:Uoe,conicconformal:joe,conicequalarea:iv,conicequidistant:Hoe,equalEarth:Yoe,equirectangular:Ioe,gnomonic:Xoe,identity:Voe,mercator:Boe,mollweide:ase,naturalEarth1:Woe,orthographic:Qoe,stereographic:Zoe,transversemercator:Koe};for(const e in sv)tT(e,sv[e]);function lse(){}const Ro=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ij(){var e=1,t=1,n=l;function i(c,f){return f.map(d=>r(c,d))}function r(c,f){var d=[],g=[];return a(c,f,p=>{n(p,c,f),use(p)>0?d.push([p]):g.push(p)}),g.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(cse((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(c,f,d){var g=[],p=[],y,v,b,S,_,w;for(y=v=-1,S=c[0]>=f,Ro[S<<1].forEach(A);++y<e-1;)b=S,S=c[y+1]>=f,Ro[b|S<<1].forEach(A);for(Ro[S<<0].forEach(A);++v<t-1;){for(y=-1,S=c[v*e+e]>=f,_=c[v*e]>=f,Ro[S<<1|_<<2].forEach(A);++y<e-1;)b=S,S=c[v*e+e+y+1]>=f,w=_,_=c[v*e+y+1]>=f,Ro[b|S<<1|_<<2|w<<3].forEach(A);Ro[S|_<<3].forEach(A)}for(y=-1,_=c[v*e]>=f,Ro[_<<2].forEach(A);++y<e-1;)w=_,_=c[v*e+y+1]>=f,Ro[_<<2|w<<3].forEach(A);Ro[_<<3].forEach(A);function A($){var M=[$[0][0]+y,$[0][1]+v],k=[$[1][0]+y,$[1][1]+v],T=o(M),N=o(k),R,B;(R=p[T])?(B=g[N])?(delete p[R.end],delete g[B.start],R===B?(R.ring.push(k),d(R.ring)):g[R.start]=p[B.end]={start:R.start,end:B.end,ring:R.ring.concat(B.ring)}):(delete p[R.end],R.ring.push(k),p[R.end=N]=R):(R=g[N])?(B=p[T])?(delete g[R.start],delete p[B.end],R===B?(R.ring.push(k),d(R.ring)):g[B.start]=p[R.end]={start:B.start,end:R.end,ring:B.ring.concat(R.ring)}):(delete g[R.start],R.ring.unshift(M),g[R.start=T]=R):g[T]=p[N]={start:T,end:N,ring:[M,k]}}}function o(c){return c[0]*2+c[1]*(e+1)*4}function l(c,f,d){c.forEach(g=>{var p=g[0],y=g[1],v=p|0,b=y|0,S,_=f[b*e+v];p>0&&p<e&&v===p&&(S=f[b*e+v-1],g[0]=p+(d-S)/(_-S)-.5),y>0&&y<t&&b===y&&(S=f[(b-1)*e+v],g[1]=y+(d-S)/(_-S)-.5)})}return i.contour=r,i.size=function(c){if(!arguments.length)return[e,t];var f=Math.floor(c[0]),d=Math.floor(c[1]);return f>=0&&d>=0||ee("invalid size"),e=f,t=d,i},i.smooth=function(c){return arguments.length?(n=c?l:lse,i):n===l},i}function use(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function cse(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=fse(e,t[n]))return r;return 0}function fse(e,t){for(var n=t[0],i=t[1],r=-1,a=0,o=e.length,l=o-1;a<o;l=a++){var c=e[a],f=c[0],d=c[1],g=e[l],p=g[0],y=g[1];if(dse(c,g,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function dse(e,t,n){var i;return hse(e,t,n)&&gse(e[i=+(e[0]===t[0])],n[i],t[i])}function hse(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function gse(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function rj(e,t,n){return function(i){var r=Ya(i),a=n?Math.min(r[0],0):r[0],o=r[1],l=o-a,c=t?gl(a,o,e):l/(e+1);return ir(a+c,o,c)}}function nT(e){J.call(this,null,e)}nT.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ye(nT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||ni,a=ij().smooth(e.smooth!==!1),o=e.thresholds||pse(i,r,e),l=e.as===null?null:e.as||"contour",c=[];return i.forEach(f=>{const d=r(f),g=a.size([d.width,d.height])(d.values,ie(o)?o:o(d.values));mse(g,d,f,e),g.forEach(p=>{c.push(Wv(f,dt(l!=null?{[l]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function pse(e,t,n){const i=rj(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>ku(t(r).values)))}function mse(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(je(r)&&(r=r(n,i)),je(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const o=(lt(r)?r:r[0])||1,l=(lt(r)?r:r[1])||1,c=a&&a[0]||0,f=a&&a[1]||0;e.forEach(aj(t,o,l,c,f))}function aj(e,t,n,i,r){const a=e.x1||0,o=e.y1||0,l=t*n<0;function c(g){g.forEach(f)}function f(g){l&&g.reverse(),g.forEach(d)}function d(g){g[0]=(g[0]-a)*t+i,g[1]=(g[1]-o)*n+r}return function(g){return g.coordinates.forEach(c),g}}function _4(e,t,n){const i=e>=0?e:VC(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function PE(e){return je(e)?e:ii(+e)}function oj(){var e=c=>c[0],t=c=>c[1],n=Md,i=[-1,-1],r=960,a=500,o=2;function l(c,f){const d=_4(i[0],c,e)>>o,g=_4(i[1],c,t)>>o,p=d?d+2:0,y=g?g+2:0,v=2*p+(r>>o),b=2*y+(a>>o),S=new Float32Array(v*b),_=new Float32Array(v*b);let w=S;c.forEach($=>{const M=p+(+e($)>>o),k=y+(+t($)>>o);M>=0&&M<v&&k>=0&&k<b&&(S[M+k*v]+=+n($))}),d>0&&g>0?(yf(v,b,S,_,d),vf(v,b,_,S,g),yf(v,b,S,_,d),vf(v,b,_,S,g),yf(v,b,S,_,d),vf(v,b,_,S,g)):d>0?(yf(v,b,S,_,d),yf(v,b,_,S,d),yf(v,b,S,_,d),w=_):g>0&&(vf(v,b,S,_,g),vf(v,b,_,S,g),vf(v,b,S,_,g),w=_);const A=f?Math.pow(2,-2*o):1/S9(w);for(let $=0,M=v*b;$<M;++$)w[$]*=A;return{values:w,scale:1<<o,width:v,height:b,x1:p,y1:y,x2:p+(r>>o),y2:y+(a>>o)}}return l.x=function(c){return arguments.length?(e=PE(c),l):e},l.y=function(c){return arguments.length?(t=PE(c),l):t},l.weight=function(c){return arguments.length?(n=PE(c),l):n},l.size=function(c){if(!arguments.length)return[r,a];var f=+c[0],d=+c[1];return f>=0&&d>=0||ee("invalid size"),r=f,a=d,l},l.cellSize=function(c){return arguments.length?((c=+c)>=1||ee("invalid cell size"),o=Math.floor(Math.log(c)/Math.LN2),l):1<<o},l.bandwidth=function(c){return arguments.length?(c=Ee(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&ee("invalid bandwidth"),i=c,l):i},l}function yf(e,t,n,i,r){const a=(r<<1)+1;for(let o=0;o<t;++o)for(let l=0,c=0;l<e+r;++l)l<e&&(c+=n[l+o*e]),l>=r&&(l>=a&&(c-=n[l-a+o*e]),i[l-r+o*e]=c/Math.min(l+1,e-1+a-l,a))}function vf(e,t,n,i,r){const a=(r<<1)+1;for(let o=0;o<e;++o)for(let l=0,c=0;l<t+r;++l)l<t&&(c+=n[o+l*e]),l>=r&&(l>=a&&(c-=n[o+(l-a)*e]),i[o+(l-r)*e]=c/Math.min(l+1,t-1+a-l,a))}function iT(e){J.call(this,null,e)}iT.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const yse=["x","y","weight","size","cellSize","bandwidth"];function sj(e,t){return yse.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ye(iT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=vse(i,e.groupby),a=(e.groupby||[]).map(Xt),o=sj(oj(),e),l=e.as||"grid",c=[];function f(d,g){for(let p=0;p<a.length;++p)d[a[p]]=g[p];return d}return c=r.map(d=>dt(f({[l]:o(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function vse(e,t){var n=[],i=d=>d(l),r,a,o,l,c,f;if(t==null)n.push(e);else for(r={},a=0,o=e.length;a<o;++a)l=e[a],c=t.map(i),f=r[c],f||(r[c]=f=[],f.dims=c,n.push(f)),f.push(l);return n}function rT(e){J.call(this,null,e)}rT.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ye(rT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=ij().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||rj(e.count||10,e.nice,!!r),o=e.size,l,c;return r||(r=t.materialize(t.SOURCE).source,l=sj(oj(),e)(r,!0),c=aj(l,l.scale||1,l.scale||1,0,0),o=[l.width,l.height],r=l.values),a=ie(a)?a:a(r),r=i.size(o)(r,a),c&&r.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(dt),n}});const cA="Feature",aT="FeatureCollection",bse="MultiPoint";function oT(e){J.call(this,null,e)}oT.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ye(oT,J,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],o=r&&r[1],l=e.geojson||!r&&ni,c=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(Kn(l))||a&&t.modified(Kn(a))||o&&t.modified(Kn(o)),(!this.value||f)&&(c=t.SOURCE,this._features=n=[],this._points=i=[]),l&&t.visit(c,d=>n.push(l(d))),a&&o&&(t.visit(c,d=>{var g=a(d),p=o(d);g!=null&&p!=null&&(g=+g)===g&&(p=+p)===p&&i.push([g,p])}),n=n.concat({type:cA,geometry:{type:bse,coordinates:i}})),this.value={type:aT,features:n}}});function sT(e){J.call(this,null,e)}sT.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ye(sT,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||ni,a=e.as||"path",o=n.SOURCE;!i||e.modified()?(this.value=i=nj(e.projection),n.materialize().reflow()):o=r===ni||t.modified(r.fields)?n.ADD_MOD:n.ADD;const l=xse(i,e.pointRadius);return n.visit(o,c=>c[a]=i(r(c))),i.pointRadius(l),n.modifies(a)}});function xse(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function lT(e){J.call(this,null,e)}lT.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ye(lT,J,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],o=a[0],l=a[1],c;function f(d){const g=n([i(d),r(d)]);g?(d[o]=g[0],d[l]=g[1]):(d[o]=void 0,d[l]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(c=t.modified(i.fields)||t.modified(r.fields),t.visit(c?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function uT(e){J.call(this,null,e)}uT.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ye(uT,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=Sse(nj(e.projection),e.field||zr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,o=>o[r]=i),n.modifies(r)}});function Sse(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(a),o};return i.context=r=>(e.context(r),i),i}function cT(e){J.call(this,[],e),this.generator=poe()}cT.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ye(cT,J,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)je(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(m7(n[0],r)):t.add.push(dt(r)),n[0]=r,t}});function fT(e){J.call(this,null,e)}fT.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ye(fT,J,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||ni,a=_se(e.opacity,e),o=Ese(e.color,e),l=e.as||"image",c={$x:0,$y:0,$value:0,$max:i?ku(n.map(f=>ku(r(f).values))):0};return n.forEach(f=>{const d=r(f),g=Pe({},f,c);i||(g.$max=ku(d.values||[])),f[l]=wse(d,g,o.dep?o:ii(o(g)),a.dep?a:ii(a(g)))}),t.reflow(!0).modifies(l)}});function Ese(e,t){let n;return je(e)?(n=i=>yl(e(i,t)),n.dep=lj(e)):n=ii(yl(e||"#888")),n}function _se(e,t){let n;return je(e)?(n=i=>e(i,t),n.dep=lj(e)):e?n=ii(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function lj(e){if(!je(e))return!1;const t=ca(Kn(e));return t.$x||t.$y||t.$value||t.$max}function wse(e,t,n,i){const r=e.width,a=e.height,o=e.x1||0,l=e.y1||0,c=e.x2||r,f=e.y2||a,d=e.values,g=d?S=>d[S]:Zs,p=cl(c-o,f-l),y=p.getContext("2d"),v=y.getImageData(0,0,c-o,f-l),b=v.data;for(let S=l,_=0;S<f;++S){t.$y=S-l;for(let w=o,A=S*r;w<c;++w,_+=4){t.$x=w-o,t.$value=g(w+A);const $=n(t);b[_+0]=$.r,b[_+1]=$.g,b[_+2]=$.b,b[_+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function uj(e){J.call(this,null,e),this.modified(!0)}ye(uj,J,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Cse(e.type),uA.forEach(i=>{e[i]!=null&&w4(n,i,e[i])})):uA.forEach(i=>{e.modified(i)&&w4(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Ase(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Ase(e,t){const n=$se(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Cse(e){const t=tT((e||"mercator").toLowerCase());return t||ee("Unrecognized projection type: "+e),t()}function w4(e,t,n){je(e[t])&&e[t](n)}function $se(e){return e=Ee(e),e.length===1?e[0]:{type:aT,features:e.reduce((t,n)=>t.concat(Tse(n)),[])}}function Tse(e){return e.type===aT?e.features:Ee(e).filter(t=>t!=null).map(t=>t.type===cA?t:{type:cA,geometry:t})}const Mse=Object.freeze(Object.defineProperty({__proto__:null,contour:rT,geojson:oT,geopath:sT,geopoint:lT,geoshape:uT,graticule:cT,heatmap:fT,isocontour:nT,kde2d:iT,projection:uj},Symbol.toStringTag,{value:"Module"}));function kse(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,o=n.length,l,c=0,f=0;for(a=0;a<o;++a)l=n[a],c+=l.x,f+=l.y;for(c=(c/o-e)*i,f=(f/o-t)*i,a=0;a<o;++a)l=n[a],l.x-=c,l.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function Ose(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return cj(this.cover(t,n),t,n,e)}function cj(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,o={data:i},l=e._x0,c=e._y0,f=e._x1,d=e._y1,g,p,y,v,b,S,_,w;if(!a)return e._root=o,e;for(;a.length;)if((b=t>=(g=(l+f)/2))?l=g:f=g,(S=n>=(p=(c+d)/2))?c=p:d=p,r=a,!(a=a[_=S<<1|b]))return r[_]=o,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return o.next=a,r?r[_]=o:e._root=o,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(b=t>=(g=(l+f)/2))?l=g:f=g,(S=n>=(p=(c+d)/2))?c=p:d=p;while((_=S<<1|b)===(w=(v>=p)<<1|y>=g));return r[w]=a,r[_]=o,e}function Dse(e){var t,n,i=e.length,r,a,o=new Array(i),l=new Array(i),c=1/0,f=1/0,d=-1/0,g=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=r,l[n]=a,r<c&&(c=r),r>d&&(d=r),a<f&&(f=a),a>g&&(g=a));if(c>d||f>g)return this;for(this.cover(c,f).cover(d,g),n=0;n<i;++n)cj(this,o[n],l[n],e[n]);return this}function Nse(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var o=r-n||1,l=this._root,c,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,c=new Array(4),c[f]=l,l=c,o*=2,f){case 0:r=n+o,a=i+o;break;case 1:n=r-o,a=i+o;break;case 2:r=n+o,i=a-o;break;case 3:n=r-o,i=a-o;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function Rse(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function zse(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function di(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Fse(e,t,n){var i,r=this._x0,a=this._y0,o,l,c,f,d=this._x1,g=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new di(y,r,a,d,g)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,g=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(o=v.x0)>d||(l=v.y0)>g||(c=v.x1)<r||(f=v.y1)<a))if(y.length){var S=(o+c)/2,_=(l+f)/2;p.push(new di(y[3],S,_,c,f),new di(y[2],o,_,S,f),new di(y[1],S,l,c,_),new di(y[0],o,l,S,_)),(b=(t>=_)<<1|e>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var w=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),$=w*w+A*A;if($<n){var M=Math.sqrt(n=$);r=e-M,a=t-M,d=e+M,g=t+M,i=y.data}}return i}function Lse(e){if(isNaN(d=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,o=this._x0,l=this._y0,c=this._x1,f=this._y1,d,g,p,y,v,b,S,_;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(o+c)/2))?o=p:c=p,(b=g>=(y=(l+f)/2))?l=y:f=y,t=n,!(n=n[S=b<<1|v]))return this;if(!n.length)break;(t[S+1&3]||t[S+2&3]||t[S+3&3])&&(i=t,_=S)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[S]=a:delete t[S],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function Use(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Bse(){return this._root}function qse(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function jse(e){var t=[],n,i=this._root,r,a,o,l,c;for(i&&t.push(new di(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,o=n.y0,l=n.x1,c=n.y1)&&i.length){var f=(a+l)/2,d=(o+c)/2;(r=i[3])&&t.push(new di(r,f,d,l,c)),(r=i[2])&&t.push(new di(r,a,d,f,c)),(r=i[1])&&t.push(new di(r,f,o,l,d)),(r=i[0])&&t.push(new di(r,a,o,f,d))}return this}function Ise(e){var t=[],n=[],i;for(this._root&&t.push(new di(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,o=i.x0,l=i.y0,c=i.x1,f=i.y1,d=(o+c)/2,g=(l+f)/2;(a=r[0])&&t.push(new di(a,o,l,d,g)),(a=r[1])&&t.push(new di(a,d,l,c,g)),(a=r[2])&&t.push(new di(a,o,g,d,f)),(a=r[3])&&t.push(new di(a,d,g,c,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Pse(e){return e[0]}function Hse(e){return arguments.length?(this._x=e,this):this._x}function Gse(e){return e[1]}function Yse(e){return arguments.length?(this._y=e,this):this._y}function dT(e,t,n){var i=new hT(t??Pse,n??Gse,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function hT(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function A4(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xi=dT.prototype=hT.prototype;xi.copy=function(){var e=new hT(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=A4(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=A4(i));return e};xi.add=Ose;xi.addAll=Dse;xi.cover=Nse;xi.data=Rse;xi.extent=zse;xi.find=Fse;xi.remove=Lse;xi.removeAll=Use;xi.root=Bse;xi.size=qse;xi.visit=jse;xi.visitAfter=Ise;xi.x=Hse;xi.y=Yse;function hi(e){return function(){return e}}function rl(e){return(e()-.5)*1e-6}function Xse(e){return e.x+e.vx}function Vse(e){return e.y+e.vy}function Wse(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=hi(e==null?1:+e));function o(){for(var f,d=t.length,g,p,y,v,b,S,_=0;_<a;++_)for(g=dT(t,Xse,Vse).visitAfter(l),f=0;f<d;++f)p=t[f],b=n[p.index],S=b*b,y=p.x+p.vx,v=p.y+p.vy,g.visit(w);function w(A,$,M,k,T){var N=A.data,R=A.r,B=b+R;if(N){if(N.index>p.index){var U=y-N.x-N.vx,Q=v-N.y-N.vy,G=U*U+Q*Q;G<B*B&&(U===0&&(U=rl(i),G+=U*U),Q===0&&(Q=rl(i),G+=Q*Q),G=(B-(G=Math.sqrt(G)))/G*r,p.vx+=(U*=G)*(B=(R*=R)/(S+R)),p.vy+=(Q*=G)*B,N.vx-=U*(B=1-B),N.vy-=Q*B)}return}return $>y+B||k<y-B||M>v+B||T<v-B}}function l(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function c(){if(t){var f,d=t.length,g;for(n=new Array(d),f=0;f<d;++f)g=t[f],n[g.index]=+e(g,f,t)}}return o.initialize=function(f,d){t=f,i=d,c()},o.iterations=function(f){return arguments.length?(a=+f,o):a},o.strength=function(f){return arguments.length?(r=+f,o):r},o.radius=function(f){return arguments.length?(e=typeof f=="function"?f:hi(+f),c(),o):e},o}function Qse(e){return e.index}function C4(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Zse(e){var t=Qse,n=g,i,r=hi(30),a,o,l,c,f,d=1;e==null&&(e=[]);function g(S){return 1/Math.min(l[S.source.index],l[S.target.index])}function p(S){for(var _=0,w=e.length;_<d;++_)for(var A=0,$,M,k,T,N,R,B;A<w;++A)$=e[A],M=$.source,k=$.target,T=k.x+k.vx-M.x-M.vx||rl(f),N=k.y+k.vy-M.y-M.vy||rl(f),R=Math.sqrt(T*T+N*N),R=(R-a[A])/R*S*i[A],T*=R,N*=R,k.vx-=T*(B=c[A]),k.vy-=N*B,M.vx+=T*(B=1-B),M.vy+=N*B}function y(){if(o){var S,_=o.length,w=e.length,A=new Map(o.map((M,k)=>[t(M,k,o),M])),$;for(S=0,l=new Array(_);S<w;++S)$=e[S],$.index=S,typeof $.source!="object"&&($.source=C4(A,$.source)),typeof $.target!="object"&&($.target=C4(A,$.target)),l[$.source.index]=(l[$.source.index]||0)+1,l[$.target.index]=(l[$.target.index]||0)+1;for(S=0,c=new Array(w);S<w;++S)$=e[S],c[S]=l[$.source.index]/(l[$.source.index]+l[$.target.index]);i=new Array(w),v(),a=new Array(w),b()}}function v(){if(o)for(var S=0,_=e.length;S<_;++S)i[S]=+n(e[S],S,e)}function b(){if(o)for(var S=0,_=e.length;S<_;++S)a[S]=+r(e[S],S,e)}return p.initialize=function(S,_){o=S,f=_,y()},p.links=function(S){return arguments.length?(e=S,y(),p):e},p.id=function(S){return arguments.length?(t=S,p):t},p.iterations=function(S){return arguments.length?(d=+S,p):d},p.strength=function(S){return arguments.length?(n=typeof S=="function"?S:hi(+S),v(),p):n},p.distance=function(S){return arguments.length?(r=typeof S=="function"?S:hi(+S),b(),p):r},p}var Kse={value:()=>{}};function fj(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new G1(n)}function G1(e){this._=e}function Jse(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}G1.prototype=fj.prototype={constructor:G1,on:function(e,t){var n=this._,i=Jse(e+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(e=i[a]).type)&&(r=ele(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(r=(e=i[a]).type)n[r]=$4(n[r],e.name,t);else if(t==null)for(r in n)n[r]=$4(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new G1(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function ele(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function $4(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Kse,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ud=0,Lg=0,ug=0,dj=1e3,lv,Ug,uv=0,Xu=0,Nb=0,xp=typeof performance=="object"&&performance.now?performance:Date,hj=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gT(){return Xu||(hj(tle),Xu=xp.now()+Nb)}function tle(){Xu=0}function cv(){this._call=this._time=this._next=null}cv.prototype=gj.prototype={constructor:cv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?gT():+n)+(t==null?0:+t),!this._next&&Ug!==this&&(Ug?Ug._next=this:lv=this,Ug=this),this._call=e,this._time=n,fA()},stop:function(){this._call&&(this._call=null,this._time=1/0,fA())}};function gj(e,t,n){var i=new cv;return i.restart(e,t,n),i}function nle(){gT(),++ud;for(var e=lv,t;e;)(t=Xu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ud}function T4(){Xu=(uv=xp.now())+Nb,ud=Lg=0;try{nle()}finally{ud=0,rle(),Xu=0}}function ile(){var e=xp.now(),t=e-uv;t>dj&&(Nb-=t,uv=e)}function rle(){for(var e,t=lv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:lv=n);Ug=e,fA(i)}function fA(e){if(!ud){Lg&&(Lg=clearTimeout(Lg));var t=e-Xu;t>24?(e<1/0&&(Lg=setTimeout(T4,e-xp.now()-Nb)),ug&&(ug=clearInterval(ug))):(ug||(uv=xp.now(),ug=setInterval(ile,dj)),ud=1,hj(T4))}}function ale(e,t,n){var i=new cv,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,o,l){o=+o,l=l==null?gT():+l,i._restart(function c(f){f+=r,i._restart(c,r+=o,l),a(f)},o,l)},i.restart(e,t,n),i)}const ole=1664525,sle=1013904223,M4=4294967296;function lle(){let e=1;return()=>(e=(ole*e+sle)%M4)/M4}function ule(e){return e.x}function cle(e){return e.y}var fle=10,dle=Math.PI*(3-Math.sqrt(5));function hle(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,o=.6,l=new Map,c=gj(g),f=fj("tick","end"),d=lle();e==null&&(e=[]);function g(){p(),f.call("tick",t),n<i&&(c.stop(),f.call("end",t))}function p(b){var S,_=e.length,w;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,l.forEach(function($){$(n)}),S=0;S<_;++S)w=e[S],w.fx==null?w.x+=w.vx*=o:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=o:(w.y=w.fy,w.vy=0);return t}function y(){for(var b=0,S=e.length,_;b<S;++b){if(_=e[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=fle*Math.sqrt(.5+b),A=b*dle;_.x=w*Math.cos(A),_.y=w*Math.sin(A)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return c.restart(g),t},stop:function(){return c.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),l.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(o=1-b,t):1-o},randomSource:function(b){return arguments.length?(d=b,l.forEach(v),t):d},force:function(b,S){return arguments.length>1?(S==null?l.delete(b):l.set(b,v(S)),t):l.get(b)},find:function(b,S,_){var w=0,A=e.length,$,M,k,T,N;for(_==null?_=1/0:_*=_,w=0;w<A;++w)T=e[w],$=b-T.x,M=S-T.y,k=$*$+M*M,k<_&&(N=T,_=k);return N},on:function(b,S){return arguments.length>1?(f.on(b,S),t):f.on(b)}}}function gle(){var e,t,n,i,r=hi(-30),a,o=1,l=1/0,c=.81;function f(y){var v,b=e.length,S=dT(e,ule,cle).visitAfter(g);for(i=y,v=0;v<b;++v)t=e[v],S.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function g(y){var v=0,b,S,_=0,w,A,$;if(y.length){for(w=A=$=0;$<4;++$)(b=y[$])&&(S=Math.abs(b.value))&&(v+=b.value,_+=S,w+=S*b.x,A+=S*b.y);y.x=w/_,y.y=A/_}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,S){if(!y.value)return!0;var _=y.x-t.x,w=y.y-t.y,A=S-v,$=_*_+w*w;if(A*A/c<$)return $<l&&(_===0&&(_=rl(n),$+=_*_),w===0&&(w=rl(n),$+=w*w),$<o&&($=Math.sqrt(o*$)),t.vx+=_*y.value*i/$,t.vy+=w*y.value*i/$),!0;if(y.length||$>=l)return;(y.data!==t||y.next)&&(_===0&&(_=rl(n),$+=_*_),w===0&&(w=rl(n),$+=w*w),$<o&&($=Math.sqrt(o*$)));do y.data!==t&&(A=a[y.data.index]*i/$,t.vx+=_*A,t.vy+=w*A);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:hi(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(o=y*y,f):Math.sqrt(o)},f.distanceMax=function(y){return arguments.length?(l=y*y,f):Math.sqrt(l)},f.theta=function(y){return arguments.length?(c=y*y,f):Math.sqrt(c)},f}function ple(e){var t=hi(.1),n,i,r;typeof e!="function"&&(e=hi(e==null?0:+e));function a(l){for(var c=0,f=n.length,d;c<f;++c)d=n[c],d.vx+=(r[c]-d.x)*i[c]*l}function o(){if(n){var l,c=n.length;for(i=new Array(c),r=new Array(c),l=0;l<c;++l)i[l]=isNaN(r[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return a.initialize=function(l){n=l,o()},a.strength=function(l){return arguments.length?(t=typeof l=="function"?l:hi(+l),o(),a):t},a.x=function(l){return arguments.length?(e=typeof l=="function"?l:hi(+l),o(),a):e},a}function mle(e){var t=hi(.1),n,i,r;typeof e!="function"&&(e=hi(e==null?0:+e));function a(l){for(var c=0,f=n.length,d;c<f;++c)d=n[c],d.vy+=(r[c]-d.y)*i[c]*l}function o(){if(n){var l,c=n.length;for(i=new Array(c),r=new Array(c),l=0;l<c;++l)i[l]=isNaN(r[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return a.initialize=function(l){n=l,o()},a.strength=function(l){return arguments.length?(t=typeof l=="function"?l:hi(+l),o(),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:hi(+l),o(),a):e},a}const k4={center:kse,collide:Wse,nbody:gle,link:Zse,x:ple,y:mle},Bg="forces",dA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],yle=["static","iterations"],pj=["x","y","vx","vy"];function pT(e){J.call(this,null,e)}pT.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:pj}]};ye(pT,J,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(dA),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&mj(n,e,0,t)):(this.value=n=ble(t.source,e),n.on("tick",vle(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(yle)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let l=this._argops,c=0,f=l.length,d;c<f;++c)if(d=l[c],!(d.name!==Bg||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,o;r<a;++r)if(i[r].name==="links"&&(o=i[r].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(pj)}});function vle(e,t){return()=>e.touch(t).run()}function ble(e,t){const n=hle(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),mj(n,t,!0).on("end",()=>a=!0)}function mj(e,t,n,i){var r=Ee(t.forces),a,o,l,c;for(a=0,o=dA.length;a<o;++a)l=dA[a],l!==Bg&&t.modified(l)&&e[l](t[l]);for(a=0,o=r.length;a<o;++a)c=Bg+a,l=n||t.modified(Bg,a)?Sle(r[a]):i&&xle(r[a],i)?e.force(c):null,l&&e.force(c,l);for(o=e.numForces||0;a<o;++a)e.force(Bg+a,null);return e.numForces=r.length,e}function xle(e,t){var n,i;for(n in e)if(je(i=e[n])&&t.modified(Kn(i)))return 1;return 0}function Sle(e){var t,n;_e(k4,e.force)||ee("Unrecognized force: "+e.force),t=k4[e.force]();for(n in e)je(t[n])&&Ele(t[n],e[n],e);return t}function Ele(e,t,n){e(je(t)?i=>t(i,n):t)}const _le=Object.freeze(Object.defineProperty({__proto__:null,force:pT},Symbol.toStringTag,{value:"Module"}));function wle(e,t){return e.parent===t.parent?1:2}function Ale(e){return e.reduce(Cle,0)/e.length}function Cle(e,t){return e+t.x}function $le(e){return 1+e.reduce(Tle,0)}function Tle(e,t){return Math.max(e,t.y)}function Mle(e){for(var t;t=e.children;)e=t[0];return e}function kle(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Ole(){var e=wle,t=1,n=1,i=!1;function r(a){var o,l=0;a.eachAfter(function(p){var y=p.children;y?(p.x=Ale(y),p.y=$le(y)):(p.x=o?l+=e(p,o):0,p.y=0,o=p)});var c=Mle(a),f=kle(a),d=c.x-e(c,f)/2,g=f.x+e(f,c)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(g-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function Dle(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Nle(){return this.eachAfter(Dle)}function Rle(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function zle(e,t){for(var n=this,i=[n],r,a,o=-1;n=i.pop();)if(e.call(t,n,++o,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function Fle(e,t){for(var n=this,i=[n],r=[],a,o,l,c=-1;n=i.pop();)if(r.push(n),a=n.children)for(o=0,l=a.length;o<l;++o)i.push(a[o]);for(;n=r.pop();)e.call(t,n,++c,this);return this}function Lle(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Ule(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Ble(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function qle(e){for(var t=this,n=jle(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function jle(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Ile(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Ple(){return Array.from(this)}function Hle(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Gle(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Yle(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function mT(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Wle)):t===void 0&&(t=Vle);for(var n=new cd(e),i,r=[n],a,o,l,c;i=r.pop();)if((o=t(i.data))&&(c=(o=Array.from(o)).length))for(i.children=o,l=c-1;l>=0;--l)r.push(a=o[l]=new cd(o[l])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(yj)}function Xle(){return mT(this).eachBefore(Qle)}function Vle(e){return e.children}function Wle(e){return Array.isArray(e)?e[1]:null}function Qle(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function yj(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function cd(e){this.data=e,this.depth=this.height=0,this.parent=null}cd.prototype=mT.prototype={constructor:cd,count:Nle,each:Rle,eachAfter:Fle,eachBefore:zle,find:Lle,sum:Ule,sort:Ble,path:qle,ancestors:Ile,descendants:Ple,leaves:Hle,links:Gle,copy:Xle,[Symbol.iterator]:Yle};function Y1(e){return e==null?null:vj(e)}function vj(e){if(typeof e!="function")throw new Error;return e}function wu(){return 0}function Af(e){return function(){return e}}const Zle=1664525,Kle=1013904223,O4=4294967296;function Jle(){let e=1;return()=>(e=(Zle*e+Kle)%O4)/O4}function eue(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tue(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function nue(e,t){for(var n=0,i=(e=tue(Array.from(e),t)).length,r=[],a,o;n<i;)a=e[n],o&&bj(o,a)?++n:(o=rue(r=iue(r,a)),n=0);return o}function iue(e,t){var n,i;if(HE(t,e))return[t];for(n=0;n<e.length;++n)if(f1(t,e[n])&&HE(qg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(f1(qg(e[n],e[i]),t)&&f1(qg(e[n],t),e[i])&&f1(qg(e[i],t),e[n])&&HE(xj(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function f1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function bj(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function HE(e,t){for(var n=0;n<t.length;++n)if(!bj(e,t[n]))return!1;return!0}function rue(e){switch(e.length){case 1:return aue(e[0]);case 2:return qg(e[0],e[1]);case 3:return xj(e[0],e[1],e[2])}}function aue(e){return{x:e.x,y:e.y,r:e.r}}function qg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,o=t.y,l=t.r,c=a-n,f=o-i,d=l-r,g=Math.sqrt(c*c+f*f);return{x:(n+a+c/g*d)/2,y:(i+o+f/g*d)/2,r:(g+r+l)/2}}function xj(e,t,n){var i=e.x,r=e.y,a=e.r,o=t.x,l=t.y,c=t.r,f=n.x,d=n.y,g=n.r,p=i-o,y=i-f,v=r-l,b=r-d,S=c-a,_=g-a,w=i*i+r*r-a*a,A=w-o*o-l*l+c*c,$=w-f*f-d*d+g*g,M=y*v-p*b,k=(v*$-b*A)/(M*2)-i,T=(b*S-v*_)/M,N=(y*A-p*$)/(M*2)-r,R=(p*_-y*S)/M,B=T*T+R*R-1,U=2*(a+k*T+N*R),Q=k*k+N*N-a*a,G=-(Math.abs(B)>1e-6?(U+Math.sqrt(U*U-4*B*Q))/(2*B):Q/U);return{x:i+k+T*G,y:r+N+R*G,r:G}}function D4(e,t,n){var i=e.x-t.x,r,a,o=e.y-t.y,l,c,f=i*i+o*o;f?(a=t.r+n.r,a*=a,c=e.r+n.r,c*=c,a>c?(r=(f+c-a)/(2*f),l=Math.sqrt(Math.max(0,c/f-r*r)),n.x=e.x-r*i-l*o,n.y=e.y-r*o+l*i):(r=(f+a-c)/(2*f),l=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-l*o,n.y=t.y+r*o+l*i)):(n.x=t.x+n.r,n.y=t.y)}function N4(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function R4(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function d1(e){this._=e,this.next=null,this.previous=null}function oue(e,t){if(!(a=(e=eue(e)).length))return 0;var n,i,r,a,o,l,c,f,d,g,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;D4(i,n,r=e[2]),n=new d1(n),i=new d1(i),r=new d1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(c=3;c<a;++c){D4(n._,i._,r=e[c]),r=new d1(r),f=i.next,d=n.previous,g=i._.r,p=n._.r;do if(g<=p){if(N4(f._,r._)){i=f,n.next=i,i.previous=n,--c;continue e}g+=f._.r,f=f.next}else{if(N4(d._,r._)){n=d,n.next=i,i.previous=n,--c;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,o=R4(n);(r=r.next)!==i;)(l=R4(r))<o&&(n=r,o=l);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=nue(n,t),c=0;c<a;++c)n=e[c],n.x-=r.x,n.y-=r.y;return r.r}function sue(e){return Math.sqrt(e.value)}function lue(){var e=null,t=1,n=1,i=wu;function r(a){const o=Jle();return a.x=t/2,a.y=n/2,e?a.eachBefore(z4(e)).eachAfter(GE(i,.5,o)).eachBefore(F4(1)):a.eachBefore(z4(sue)).eachAfter(GE(wu,1,o)).eachAfter(GE(i,a.r/Math.min(t,n),o)).eachBefore(F4(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=Y1(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Af(+a),r):i},r}function z4(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function GE(e,t,n){return function(i){if(r=i.children){var r,a,o=r.length,l=e(i)*t||0,c;if(l)for(a=0;a<o;++a)r[a].r+=l;if(c=oue(r,n),l)for(a=0;a<o;++a)r[a].r-=l;i.r=c+l}}}function F4(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Sj(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function a0(e,t,n,i,r){for(var a=e.children,o,l=-1,c=a.length,f=e.value&&(i-t)/e.value;++l<c;)o=a[l],o.y0=n,o.y1=r,o.x0=t,o.x1=t+=o.value*f}function uue(){var e=1,t=1,n=0,i=!1;function r(o){var l=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/l,o.eachBefore(a(t,l)),i&&o.eachBefore(Sj),o}function a(o,l){return function(c){c.children&&a0(c,c.x0,o*(c.depth+1)/l,c.x1,o*(c.depth+2)/l);var f=c.x0,d=c.y0,g=c.x1-n,p=c.y1-n;g<f&&(f=g=(f+g)/2),p<d&&(d=p=(d+p)/2),c.x0=f,c.y0=d,c.x1=g,c.y1=p}}return r.round=function(o){return arguments.length?(i=!!o,r):i},r.size=function(o){return arguments.length?(e=+o[0],t=+o[1],r):[e,t]},r.padding=function(o){return arguments.length?(n=+o,r):n},r}var cue={depth:-1},L4={},YE={};function fue(e){return e.id}function due(e){return e.parentId}function U4(){var e=fue,t=due,n;function i(r){var a=Array.from(r),o=e,l=t,c,f,d,g,p,y,v,b,S=new Map;if(n!=null){const _=a.map(($,M)=>hue(n($,M,r))),w=_.map(B4),A=new Set(_).add("");for(const $ of w)A.has($)||(A.add($),_.push($),w.push(B4($)),a.push(YE));o=($,M)=>_[M],l=($,M)=>w[M]}for(d=0,c=a.length;d<c;++d)f=a[d],y=a[d]=new cd(f),(v=o(f,d,r))!=null&&(v+="")&&(b=y.id=v,S.set(b,S.has(b)?L4:y)),(v=l(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<c;++d)if(y=a[d],v=y.parent){if(p=S.get(v),!p)throw new Error("missing: "+v);if(p===L4)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(g)throw new Error("multiple roots");g=y}if(!g)throw new Error("no root");if(n!=null){for(;g.data===YE&&g.children.length===1;)g=g.children[0],--c;for(let _=a.length-1;_>=0&&(y=a[_],y.data===YE);--_)y.data=null}if(g.parent=cue,g.eachBefore(function(_){_.depth=_.parent.depth+1,--c}).eachBefore(yj),g.parent=null,c>0)throw new Error("cycle");return g}return i.id=function(r){return arguments.length?(e=Y1(r),i):e},i.parentId=function(r){return arguments.length?(t=Y1(r),i):t},i.path=function(r){return arguments.length?(n=Y1(r),i):n},i}function hue(e){e=`${e}`;let t=e.length;return hA(e,t-1)&&!hA(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function B4(e){let t=e.length;if(t<2)return"";for(;--t>1&&!hA(e,t););return e.slice(0,t)}function hA(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function gue(e,t){return e.parent===t.parent?1:2}function XE(e){var t=e.children;return t?t[0]:e.t}function VE(e){var t=e.children;return t?t[t.length-1]:e.t}function pue(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function mue(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function yue(e,t,n){return e.a.parent===t.parent?e.a:n}function X1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}X1.prototype=Object.create(cd.prototype);function vue(e){for(var t=new X1(e,0),n,i=[t],r,a,o,l;n=i.pop();)if(a=n._.children)for(n.children=new Array(l=a.length),o=l-1;o>=0;--o)i.push(r=n.children[o]=new X1(a[o],o)),r.parent=n;return(t.parent=new X1(null,0)).children=[t],t}function bue(){var e=gue,t=1,n=1,i=null;function r(f){var d=vue(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(o),i)f.eachBefore(c);else{var g=f,p=f,y=f;f.eachBefore(function(w){w.x<g.x&&(g=w),w.x>p.x&&(p=w),w.depth>y.depth&&(y=w)});var v=g===p?1:e(g,p)/2,b=v-g.x,S=t/(p.x+v+b),_=n/(y.depth||1);f.eachBefore(function(w){w.x=(w.x+b)*S,w.y=w.depth*_})}return f}function a(f){var d=f.children,g=f.parent.children,p=f.i?g[f.i-1]:null;if(d){mue(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=l(f,p,f.parent.A||g[0])}function o(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function l(f,d,g){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],S=p.m,_=y.m,w=v.m,A=b.m,$;v=VE(v),p=XE(p),v&&p;)b=XE(b),y=VE(y),y.a=f,$=v.z+w-p.z-S+e(v._,p._),$>0&&(pue(yue(v,f,g),f,$),S+=$,_+=$),w+=v.m,S+=p.m,A+=b.m,_+=y.m;v&&!VE(y)&&(y.t=v,y.m+=w-_),p&&!XE(b)&&(b.t=p,b.m+=S-A,g=f)}return g}function c(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function Rb(e,t,n,i,r){for(var a=e.children,o,l=-1,c=a.length,f=e.value&&(r-n)/e.value;++l<c;)o=a[l],o.x0=t,o.x1=i,o.y0=n,o.y1=n+=o.value*f}var Ej=(1+Math.sqrt(5))/2;function _j(e,t,n,i,r,a){for(var o=[],l=t.children,c,f,d=0,g=0,p=l.length,y,v,b=t.value,S,_,w,A,$,M,k;d<p;){y=r-n,v=a-i;do S=l[g++].value;while(!S&&g<p);for(_=w=S,M=Math.max(v/y,y/v)/(b*e),k=S*S*M,$=Math.max(w/k,k/_);g<p;++g){if(S+=f=l[g].value,f<_&&(_=f),f>w&&(w=f),k=S*S*M,A=Math.max(w/k,k/_),A>$){S-=f;break}$=A}o.push(c={value:S,dice:y<v,children:l.slice(d,g)}),c.dice?a0(c,n,i,r,b?i+=v*S/b:a):Rb(c,n,i,b?n+=y*S/b:r,a),b-=S,d=g}return o}const wj=(function e(t){function n(i,r,a,o,l){_j(t,i,r,a,o,l)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(Ej);function xue(){var e=wj,t=!1,n=1,i=1,r=[0],a=wu,o=wu,l=wu,c=wu,f=wu;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(g),r=[0],t&&p.eachBefore(Sj),p}function g(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,S=p.x1-y,_=p.y1-y;S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),p.x0=v,p.y0=b,p.x1=S,p.y1=_,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=o(p)-y,S-=l(p)-y,_-=c(p)-y,S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),e(p,v,b,S,_))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=vj(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:Af(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(o=typeof p=="function"?p:Af(+p),d):o},d.paddingRight=function(p){return arguments.length?(l=typeof p=="function"?p:Af(+p),d):l},d.paddingBottom=function(p){return arguments.length?(c=typeof p=="function"?p:Af(+p),d):c},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:Af(+p),d):f},d}function Sue(e,t,n,i,r){var a=e.children,o,l=a.length,c,f=new Array(l+1);for(f[0]=c=o=0;o<l;++o)f[o+1]=c+=a[o].value;d(0,l,e.value,t,n,i,r);function d(g,p,y,v,b,S,_){if(g>=p-1){var w=a[g];w.x0=v,w.y0=b,w.x1=S,w.y1=_;return}for(var A=f[g],$=y/2+A,M=g+1,k=p-1;M<k;){var T=M+k>>>1;f[T]<$?M=T+1:k=T}$-f[M-1]<f[M]-$&&g+1<M&&--M;var N=f[M]-A,R=y-N;if(S-v>_-b){var B=y?(v*R+S*N)/y:S;d(g,M,N,v,b,B,_),d(M,p,R,B,b,S,_)}else{var U=y?(b*R+_*N)/y:_;d(g,M,N,v,b,S,U),d(M,p,R,v,U,S,_)}}}function Eue(e,t,n,i,r){(e.depth&1?Rb:a0)(e,t,n,i,r)}const _ue=(function e(t){function n(i,r,a,o,l){if((c=i._squarify)&&c.ratio===t)for(var c,f,d,g,p=-1,y,v=c.length,b=i.value;++p<v;){for(f=c[p],d=f.children,g=f.value=0,y=d.length;g<y;++g)f.value+=d[g].value;f.dice?a0(f,r,a,o,b?a+=(l-a)*f.value/b:l):Rb(f,r,a,b?r+=(o-r)*f.value/b:o,l),b-=f.value}else i._squarify=c=_j(t,i,r,a,o,l),c.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(Ej);function gA(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function yT(e){J.call(this,null,e)}yT.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const wue=e=>e.values;ye(yT,J,{transform(e,t){t.source||ee("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(o=>{o.children&&Vv(o.data)&&r.rem.push(o.data)}),this.value=a=mT({values:Ee(e.keys).reduce((o,l)=>(o.key(l),o),Aue()).entries(r.source)},wue),n&&a.each(o=>{o.children&&(o=dt(o.data),r.add.push(o),r.source.push(o))}),gA(a,Me,Me)),r.source.root=a,r}});function Aue(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const o=r.length,l=e[a++],c={},f={};let d=-1,g,p,y;for(;++d<o;)g=l(p=r[d])+"",(y=c[g])?y.push(p):c[g]=[p];for(g in c)f[g]=n(c[g],a);return f}function i(r,a){if(++a>e.length)return r;const o=[];for(const l in r)o.push({key:l,values:i(r[l],a)});return o}return t}function us(e){J.call(this,null,e)}const Cue=(e,t)=>e.parent===t.parent?1:2;ye(us,J,{transform(e,t){(!t.source||!t.source.root)&&ee(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(dc(e.sort,o=>o.data)),$ue(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Cue:Md);try{this.value=n(r)}catch(o){ee(o)}return r.each(o=>Tue(o,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function $ue(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function Tue(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const pA=["x","y","r","depth","children"];function vT(e){us.call(this,e)}vT.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:pA.length,default:pA}]};ye(vT,us,{layout:lue,params:["radius","size","padding"],fields:pA});const mA=["x0","y0","x1","y1","depth","children"];function bT(e){us.call(this,e)}bT.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:mA.length,default:mA}]};ye(bT,us,{layout:uue,params:["size","round","padding"],fields:mA});function xT(e){J.call(this,null,e)}xT.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ye(xT,J,{transform(e,t){t.source||ee("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?gA(U4().id(e.key).parentId(e.parentKey)(r.source),e.key,Fr):gA(U4()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const q4={tidy:bue,cluster:Ole},yA=["x","y","depth","children"];function ST(e){us.call(this,e)}ST.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:yA.length,default:yA}]};ye(ST,us,{layout(e){const t=e||"tidy";if(_e(q4,t))return q4[t]();ee("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:yA});function ET(e){J.call(this,[],e)}ET.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ye(ET,J,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||ee("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,o=>a[Me(o)]=1),i.each(o=>{const l=o.data,c=o.parent&&o.parent.data;c&&a[Me(l)]&&a[Me(c)]&&r.add.push(dt({source:c,target:l}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>a[Me(o)]=1),n.forEach(o=>{(a[Me(o.source)]||a[Me(o.target)])&&r.mod.push(o)})),r}});const j4={binary:Sue,dice:a0,slice:Rb,slicedice:Eue,squarify:wj,resquarify:_ue},vA=["x0","y0","x1","y1","depth","children"];function _T(e){us.call(this,e)}_T.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:vA.length,default:vA}]};ye(_T,us,{layout(){const e=xue();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{_e(j4,t)?e.tile(j4[t]):ee("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:vA});const Mue=Object.freeze(Object.defineProperty({__proto__:null,nest:yT,pack:vT,partition:bT,stratify:xT,tree:ST,treelinks:ET,treemap:_T},Symbol.toStringTag,{value:"Module"})),WE=4278190080;function kue(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function Oue(e,t,n,i,r){const a=e.width,o=e.height,l=i||r,c=cl(a,o).getContext("2d"),f=cl(a,o).getContext("2d"),d=l&&cl(a,o).getContext("2d");n.forEach(N=>V1(c,N,!1)),V1(f,t,!1),l&&V1(d,t,!0);const g=QE(c,a,o),p=QE(f,a,o),y=l&&QE(d,a,o),v=e.bitmap(),b=l&&e.bitmap();let S,_,w,A,$,M,k,T;for(_=0;_<o;++_)for(S=0;S<a;++S)$=_*a+S,M=g[$]&WE,T=p[$]&WE,k=l&&y[$]&WE,(M||k||T)&&(w=e(S),A=e(_),!r&&(M||T)&&v.set(w,A),l&&(M||k)&&b.set(w,A));return[v,b]}function QE(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function V1(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>V1(e,a.items,n))}):hr[i].draw(e,{items:n?t.map(Due):t})}function Due(e){const t=Wv(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const zo=5,ai=31,Sp=32,Ws=new Uint32Array(Sp+1),ta=new Uint32Array(Sp+1);ta[0]=0;Ws[0]=~ta[0];for(let e=1;e<=Sp;++e)ta[e]=ta[e-1]<<1|1,Ws[e]=~ta[e];function Nue(e,t){const n=new Uint32Array(~~((e*t+Sp)/Sp));function i(a,o){n[a]|=o}function r(a,o){n[a]&=o}return{array:n,get:(a,o)=>{const l=o*e+a;return n[l>>>zo]&1<<(l&ai)},set:(a,o)=>{const l=o*e+a;i(l>>>zo,1<<(l&ai))},clear:(a,o)=>{const l=o*e+a;r(l>>>zo,~(1<<(l&ai)))},getRange:(a,o,l,c)=>{let f=c,d,g,p,y;for(;f>=o;--f)if(d=f*e+a,g=f*e+l,p=d>>>zo,y=g>>>zo,p===y){if(n[p]&Ws[d&ai]&ta[(g&ai)+1])return!0}else{if(n[p]&Ws[d&ai]||n[y]&ta[(g&ai)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,o,l,c)=>{let f,d,g,p,y;for(;o<=c;++o)if(f=o*e+a,d=o*e+l,g=f>>>zo,p=d>>>zo,g===p)i(g,Ws[f&ai]&ta[(d&ai)+1]);else for(i(g,Ws[f&ai]),i(p,ta[(d&ai)+1]),y=g+1;y<p;++y)i(y,4294967295)},clearRange:(a,o,l,c)=>{let f,d,g,p,y;for(;o<=c;++o)if(f=o*e+a,d=o*e+l,g=f>>>zo,p=d>>>zo,g===p)r(g,ta[f&ai]|Ws[(d&ai)+1]);else for(r(g,ta[f&ai]),r(p,Ws[(d&ai)+1]),y=g+1;y<p;++y)r(y,0)},outOfBounds:(a,o,l,c)=>a<0||o<0||c>=t||l>=e}}function Rue(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),o=l=>~~((l+n)/i);return o.invert=l=>l*i-n,o.bitmap=()=>Nue(r,a),o.ratio=i,o.padding=n,o.width=e,o.height=t,o}function zue(e,t,n,i){const r=e.width,a=e.height;return function(o){const l=o.datum.datum.items[i].items,c=l.length,f=o.datum.fontSize,d=sr.width(o.datum,o.datum.text);let g=0,p,y,v,b,S,_,w;for(let A=0;A<c;++A)p=l[A].x,v=l[A].y,y=l[A].x2===void 0?p:l[A].x2,b=l[A].y2===void 0?v:l[A].y2,S=(p+y)/2,_=(v+b)/2,w=Math.abs(y-p+b-v),w>=g&&(g=w,o.x=S,o.y=_);return S=d/2,_=f/2,p=o.x-S,y=o.x+S,v=o.y-_,b=o.y+_,o.align="center",p<0&&y<=r?o.align="left":0<=p&&r<y&&(o.align="right"),o.baseline="middle",v<0&&b<=a?o.baseline="top":0<=v&&a<b&&(o.baseline="bottom"),!0}}function fv(e,t,n,i,r,a){let o=n/2;return e-o<0||e+o>r||t-(o=i/2)<0||t+o>a}function al(e,t,n,i,r,a,o,l){const c=r*a/(i*2),f=e(t-c),d=e(t+c),g=e(n-(a=a/2)),p=e(n+a);return o.outOfBounds(f,g,d,p)||o.getRange(f,g,d,p)||l&&l.getRange(f,g,d,p)}function Fue(e,t,n,i){const r=e.width,a=e.height,o=t[0],l=t[1];function c(f,d,g,p,y){const v=e.invert(f),b=e.invert(d);let S=g,_=a,w;if(!fv(v,b,p,y,r,a)&&!al(e,v,b,y,p,S,o,l)&&!al(e,v,b,y,p,y,o,null)){for(;_-S>=1;)w=(S+_)/2,al(e,v,b,y,p,w,o,l)?_=w:S=w;if(S>g)return[v,b,S,!0]}}return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=sr.width(f.datum,f.datum.text);let v=n?p:0,b=!1,S=!1,_=0,w,A,$,M,k,T,N,R,B,U,Q,G,I,z,D,q,Y;for(let Z=0;Z<g;++Z){for(w=d[Z].x,$=d[Z].y,A=d[Z].x2===void 0?w:d[Z].x2,M=d[Z].y2===void 0?$:d[Z].y2,w>A&&(Y=w,w=A,A=Y),$>M&&(Y=$,$=M,M=Y),B=e(w),Q=e(A),U=~~((B+Q)/2),G=e($),z=e(M),I=~~((G+z)/2),N=U;N>=B;--N)for(R=I;R>=G;--R)q=c(N,R,v,y,p),q&&([f.x,f.y,v,b]=q);for(N=U;N<=Q;++N)for(R=I;R<=z;++R)q=c(N,R,v,y,p),q&&([f.x,f.y,v,b]=q);!b&&!n&&(D=Math.abs(A-w+M-$),k=(w+A)/2,T=($+M)/2,D>=_&&!fv(k,T,y,p,r,a)&&!al(e,k,T,p,y,p,o,null)&&(_=D,f.x=k,f.y=T,S=!0))}return b||S?(k=y/2,T=p/2,o.setRange(e(f.x-k),e(f.y-T),e(f.x+k),e(f.y+T)),f.align="center",f.baseline="middle",!0):!1}}const Lue=[-1,-1,1,1],Uue=[-1,1,-1,1];function Bue(e,t,n,i){const r=e.width,a=e.height,o=t[0],l=t[1],c=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=sr.width(f.datum,f.datum.text),v=[];let b=n?p:0,S=!1,_=!1,w=0,A,$,M,k,T,N,R,B,U,Q,G,I;for(let z=0;z<g;++z){for(A=d[z].x,M=d[z].y,$=d[z].x2===void 0?A:d[z].x2,k=d[z].y2===void 0?M:d[z].y2,v.push([e((A+$)/2),e((M+k)/2)]);v.length;)if([R,B]=v.pop(),!(o.get(R,B)||l.get(R,B)||c.get(R,B))){c.set(R,B);for(let D=0;D<4;++D)T=R+Lue[D],N=B+Uue[D],c.outOfBounds(T,N,T,N)||v.push([T,N]);if(T=e.invert(R),N=e.invert(B),U=b,Q=a,!fv(T,N,y,p,r,a)&&!al(e,T,N,p,y,U,o,l)&&!al(e,T,N,p,y,p,o,null)){for(;Q-U>=1;)G=(U+Q)/2,al(e,T,N,p,y,G,o,l)?Q=G:U=G;U>b&&(f.x=T,f.y=N,b=U,S=!0)}}!S&&!n&&(I=Math.abs($-A+k-M),T=(A+$)/2,N=(M+k)/2,I>=w&&!fv(T,N,y,p,r,a)&&!al(e,T,N,p,y,p,o,null)&&(w=I,f.x=T,f.y=N,_=!0))}return S||_?(T=y/2,N=p/2,o.setRange(e(f.x-T),e(f.y-N),e(f.x+T),e(f.y+N)),f.align="center",f.baseline="middle",!0):!1}}const que=["right","center","left"],jue=["bottom","middle","top"];function Iue(e,t,n,i){const r=e.width,a=e.height,o=t[0],l=t[1],c=i.length;return function(f){const d=f.boundary,g=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,S,_,w,A,$,M,k,T,N,R,B,U;for(let Q=0;Q<c;++Q){if(y=(n[Q]&3)-1,v=(n[Q]>>>2&3)-1,b=y===0&&v===0||i[Q]<0,S=y&&v?Math.SQRT1_2:1,_=i[Q]<0?-1:1,w=d[1+y]+i[Q]*y*S,T=d[4+v]+_*g*v/2+i[Q]*v*S,$=T-g/2,M=T+g/2,N=e(w),B=e($),U=e(M),!p)if(I4(N,N,B,U,o,l,w,w,$,M,d,b))p=sr.width(f.datum,f.datum.text);else continue;if(k=w+_*p*y/2,w=k-p/2,A=k+p/2,N=e(w),R=e(A),I4(N,R,B,U,o,l,w,A,$,M,d,b))return f.x=y?y*_<0?A:w:k,f.y=v?v*_<0?M:$:T,f.align=que[y*_+1],f.baseline=jue[v*_+1],o.setRange(N,B,R,U),!0}return!1}}function I4(e,t,n,i,r,a,o,l,c,f,d,g){return!(r.outOfBounds(e,n,t,i)||(g&&a||r).getRange(e,n,t,i))}const ZE=0,KE=4,JE=8,e_=0,t_=1,n_=2,Pue={"top-left":ZE+e_,top:ZE+t_,"top-right":ZE+n_,left:KE+e_,middle:KE+t_,right:KE+n_,"bottom-left":JE+e_,bottom:JE+t_,"bottom-right":JE+n_},Hue={naive:zue,"reduced-search":Fue,floodfill:Bue};function Gue(e,t,n,i,r,a,o,l,c,f,d){if(!e.length)return e;const g=Math.max(i.length,r.length),p=Yue(i,g),y=Xue(r,g),v=Vue(e[0].datum),b=v==="group"&&e[0].datum.items[c].marktype,S=b==="area",_=Wue(v,b,l,c),w=f===null||f===1/0,A=S&&d==="naive";let $=-1,M=-1;const k=e.map(B=>{const U=w?sr.width(B,B.text):void 0;return $=Math.max($,U),M=Math.max(M,B.fontSize),{datum:B,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(B),textWidth:U}});f=f===null||f===1/0?Math.max($,M)+Math.max(...i):f;const T=Rue(t[0],t[1],f);let N;if(!A){n&&k.sort((Q,G)=>n(Q.datum,G.datum));let B=!1;for(let Q=0;Q<y.length&&!B;++Q)B=y[Q]===5||p[Q]<0;const U=(v&&o||S)&&e.map(Q=>Q.datum);N=a.length||U?Oue(T,U||[],a,B,S):kue(T,o&&k)}const R=S?Hue[d](T,N,o,c):Iue(T,N,y,p);return k.forEach(B=>B.opacity=+R(B)),k}function Yue(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Xue(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=Pue[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Vue(e){return e&&e.mark&&e.mark.marktype}function Wue(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const o=a.datum.items[i].items;return r(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:a=>{const o=a.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:r}const bA=["x","y","opacity","align","baseline"],Aj=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function wT(e){J.call(this,null,e)}wT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Aj},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:bA.length,default:bA}]};ye(wT,J,{transform(e,t){function n(a){const o=e[a];return je(o)&&t.modified(o.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ee("Size parameter should be specified as a [width, height] array.");const r=e.as||bA;return Gue(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ee(e.offset==null?1:e.offset),Ee(e.anchor||Aj),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const o=a.datum;o[r[0]]=a.x,o[r[1]]=a.y,o[r[2]]=a.opacity,o[r[3]]=a.align,o[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const Que=Object.freeze(Object.defineProperty({__proto__:null,label:wT},Symbol.toStringTag,{value:"Module"}));function Cj(e,t){var n=[],i=function(d){return d(l)},r,a,o,l,c,f;if(t==null)n.push(e);else for(r={},a=0,o=e.length;a<o;++a)l=e[a],c=t.map(i),f=r[c],f||(r[c]=f=[],f.dims=c,n.push(f)),f.push(l);return n}function AT(e){J.call(this,null,e)}AT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ye(AT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Cj(i,e.groupby),a=(e.groupby||[]).map(Xt),o=a.length,l=e.as||[Xt(e.x),Xt(e.y)],c=[];r.forEach(f=>{R7(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const g={};for(let p=0;p<o;++p)g[a[p]]=f.dims[p];g[l[0]]=d[0],g[l[1]]=d[1],c.push(dt(g))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const xA={constant:o3,linear:s3,log:k7,exp:O7,pow:D7,quad:l3,poly:N7},Zue=(e,t)=>e==="poly"?t:e==="quad"?2:1;function CT(e){J.call(this,null,e)}CT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(xA)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ye(CT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Cj(i,e.groupby),a=(e.groupby||[]).map(Xt),o=e.method||"linear",l=e.order==null?3:e.order,c=Zue(o,l),f=e.as||[Xt(e.x),Xt(e.y)],d=xA[o],g=[];let p=e.extent;_e(xA,o)||ee("Invalid regression method: "+o),p!=null&&o==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,l);if(e.params){g.push(dt({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const S=p||Ya(y,e.x),_=w=>{const A={};for(let $=0;$<a.length;++$)A[a[$]]=y.dims[$];A[f[0]]=w[0],A[f[1]]=w[1],g.push(dt(A))};o==="linear"||o==="constant"?S.forEach(w=>_([w,b.predict(w)])):nb(b.predict,S,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=g}return n}});const Kue=Object.freeze(Object.defineProperty({__proto__:null,loess:AT,regression:CT},Symbol.toStringTag,{value:"Module"})),Qo=11102230246251565e-32,Gn=134217729,Jue=(3+8*Qo)*Qo;function i_(e,t,n,i,r){let a,o,l,c,f=t[0],d=i[0],g=0,p=0;d>f==d>-f?(a=f,f=t[++g]):(a=d,d=i[++p]);let y=0;if(g<e&&p<n)for(d>f==d>-f?(o=f+a,l=a-(o-f),f=t[++g]):(o=d+a,l=a-(o-d),d=i[++p]),a=o,l!==0&&(r[y++]=l);g<e&&p<n;)d>f==d>-f?(o=a+f,c=o-a,l=a-(o-c)+(f-c),f=t[++g]):(o=a+d,c=o-a,l=a-(o-c)+(d-c),d=i[++p]),a=o,l!==0&&(r[y++]=l);for(;g<e;)o=a+f,c=o-a,l=a-(o-c)+(f-c),f=t[++g],a=o,l!==0&&(r[y++]=l);for(;p<n;)o=a+d,c=o-a,l=a-(o-c)+(d-c),d=i[++p],a=o,l!==0&&(r[y++]=l);return(a!==0||y===0)&&(r[y++]=a),y}function ece(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function o0(e){return new Float64Array(e)}const tce=(3+16*Qo)*Qo,nce=(2+12*Qo)*Qo,ice=(9+64*Qo)*Qo*Qo,bf=o0(4),P4=o0(8),H4=o0(12),G4=o0(16),oi=o0(4);function rce(e,t,n,i,r,a,o){let l,c,f,d,g,p,y,v,b,S,_,w,A,$,M,k,T,N;const R=e-r,B=n-r,U=t-a,Q=i-a;$=R*Q,p=Gn*R,y=p-(p-R),v=R-y,p=Gn*Q,b=p-(p-Q),S=Q-b,M=v*S-($-y*b-v*b-y*S),k=U*B,p=Gn*U,y=p-(p-U),v=U-y,p=Gn*B,b=p-(p-B),S=B-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,bf[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,bf[1]=A-(_+g)+(g-k),N=w+_,g=N-w,bf[2]=w-(N-g)+(_-g),bf[3]=N;let G=ece(4,bf),I=nce*o;if(G>=I||-G>=I||(g=e-R,l=e-(R+g)+(g-r),g=n-B,f=n-(B+g)+(g-r),g=t-U,c=t-(U+g)+(g-a),g=i-Q,d=i-(Q+g)+(g-a),l===0&&c===0&&f===0&&d===0)||(I=ice*o+Jue*Math.abs(G),G+=R*d+Q*l-(U*f+B*c),G>=I||-G>=I))return G;$=l*Q,p=Gn*l,y=p-(p-l),v=l-y,p=Gn*Q,b=p-(p-Q),S=Q-b,M=v*S-($-y*b-v*b-y*S),k=c*B,p=Gn*c,y=p-(p-c),v=c-y,p=Gn*B,b=p-(p-B),S=B-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,oi[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,oi[1]=A-(_+g)+(g-k),N=w+_,g=N-w,oi[2]=w-(N-g)+(_-g),oi[3]=N;const z=i_(4,bf,4,oi,P4);$=R*d,p=Gn*R,y=p-(p-R),v=R-y,p=Gn*d,b=p-(p-d),S=d-b,M=v*S-($-y*b-v*b-y*S),k=U*f,p=Gn*U,y=p-(p-U),v=U-y,p=Gn*f,b=p-(p-f),S=f-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,oi[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,oi[1]=A-(_+g)+(g-k),N=w+_,g=N-w,oi[2]=w-(N-g)+(_-g),oi[3]=N;const D=i_(z,P4,4,oi,H4);$=l*d,p=Gn*l,y=p-(p-l),v=l-y,p=Gn*d,b=p-(p-d),S=d-b,M=v*S-($-y*b-v*b-y*S),k=c*f,p=Gn*c,y=p-(p-c),v=c-y,p=Gn*f,b=p-(p-f),S=f-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,oi[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,oi[1]=A-(_+g)+(g-k),N=w+_,g=N-w,oi[2]=w-(N-g)+(_-g),oi[3]=N;const q=i_(D,H4,4,oi,G4);return G4[q-1]}function h1(e,t,n,i,r,a){const o=(t-a)*(n-r),l=(e-r)*(i-a),c=o-l,f=Math.abs(o+l);return Math.abs(c)>=tce*f?c:-rce(e,t,n,i,r,a,f)}const Y4=Math.pow(2,-52),g1=new Uint32Array(512);class dv{static from(t,n=uce,i=cce){const r=t.length,a=new Float64Array(r*2);for(let o=0;o<r;o++){const l=t[o];a[2*o]=n(l),a[2*o+1]=i(l)}return new dv(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,o=t.length>>1;let l=1/0,c=1/0,f=-1/0,d=-1/0;for(let R=0;R<o;R++){const B=t[2*R],U=t[2*R+1];B<l&&(l=B),U<c&&(c=U),B>f&&(f=B),U>d&&(d=U),this._ids[R]=R}const g=(l+f)/2,p=(c+d)/2;let y,v,b;for(let R=0,B=1/0;R<o;R++){const U=r_(g,p,t[2*R],t[2*R+1]);U<B&&(y=R,B=U)}const S=t[2*y],_=t[2*y+1];for(let R=0,B=1/0;R<o;R++){if(R===y)continue;const U=r_(S,_,t[2*R],t[2*R+1]);U<B&&U>0&&(v=R,B=U)}let w=t[2*v],A=t[2*v+1],$=1/0;for(let R=0;R<o;R++){if(R===y||R===v)continue;const B=sce(S,_,w,A,t[2*R],t[2*R+1]);B<$&&(b=R,$=B)}let M=t[2*b],k=t[2*b+1];if($===1/0){for(let U=0;U<o;U++)this._dists[U]=t[2*U]-t[0]||t[2*U+1]-t[1];Df(this._ids,this._dists,0,o-1);const R=new Uint32Array(o);let B=0;for(let U=0,Q=-1/0;U<o;U++){const G=this._ids[U],I=this._dists[G];I>Q&&(R[B++]=G,Q=I)}this.hull=R.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(h1(S,_,w,A,M,k)<0){const R=v,B=w,U=A;v=b,w=M,A=k,b=R,M=B,k=U}const T=lce(S,_,w,A,M,k);this._cx=T.x,this._cy=T.y;for(let R=0;R<o;R++)this._dists[R]=r_(t[2*R],t[2*R+1],T.x,T.y);Df(this._ids,this._dists,0,o-1),this._hullStart=y;let N=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(S,_)]=y,a[this._hashKey(w,A)]=v,a[this._hashKey(M,k)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let R=0,B,U;R<this._ids.length;R++){const Q=this._ids[R],G=t[2*Q],I=t[2*Q+1];if(R>0&&Math.abs(G-B)<=Y4&&Math.abs(I-U)<=Y4||(B=G,U=I,Q===y||Q===v||Q===b))continue;let z=0;for(let ue=0,F=this._hashKey(G,I);ue<this._hashSize&&(z=a[(F+ue)%this._hashSize],!(z!==-1&&z!==i[z]));ue++);z=n[z];let D=z,q;for(;q=i[D],h1(G,I,t[2*D],t[2*D+1],t[2*q],t[2*q+1])>=0;)if(D=q,D===z){D=-1;break}if(D===-1)continue;let Y=this._addTriangle(D,Q,i[D],-1,-1,r[D]);r[Q]=this._legalize(Y+2),r[D]=Y,N++;let Z=i[D];for(;q=i[Z],h1(G,I,t[2*Z],t[2*Z+1],t[2*q],t[2*q+1])<0;)Y=this._addTriangle(Z,Q,q,r[Q],-1,r[Z]),r[Q]=this._legalize(Y+2),i[Z]=Z,N--,Z=q;if(D===z)for(;q=n[D],h1(G,I,t[2*q],t[2*q+1],t[2*D],t[2*D+1])<0;)Y=this._addTriangle(q,Q,D,-1,r[D],r[q]),this._legalize(Y+2),r[q]=Y,i[D]=D,N--,D=q;this._hullStart=n[Q]=D,i[D]=n[Z]=Q,i[Q]=Z,a[this._hashKey(G,I)]=Q,a[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array(N);for(let R=0,B=this._hullStart;R<N;R++)this.hull[R]=B,B=i[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(ace(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,o=0;for(;;){const l=i[t],c=t-t%3;if(o=c+(t+2)%3,l===-1){if(a===0)break;t=g1[--a];continue}const f=l-l%3,d=c+(t+1)%3,g=f+(l+2)%3,p=n[o],y=n[t],v=n[d],b=n[g];if(oce(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[l]=p;const _=i[g];if(_===-1){let A=this._hullStart;do{if(this._hullTri[A]===g){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,_),this._link(l,i[o]),this._link(o,g);const w=f+(l+1)%3;a<g1.length&&(g1[a++]=w)}else{if(a===0)break;t=g1[--a]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,o){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=n,this._triangles[l+2]=i,this._link(l,r),this._link(l+1,a),this._link(l+2,o),this.trianglesLen+=3,l}}function ace(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function r_(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function oce(e,t,n,i,r,a,o,l){const c=e-o,f=t-l,d=n-o,g=i-l,p=r-o,y=a-l,v=c*c+f*f,b=d*d+g*g,S=p*p+y*y;return c*(g*S-b*y)-f*(d*S-b*p)+v*(d*y-g*p)<0}function sce(e,t,n,i,r,a){const o=n-e,l=i-t,c=r-e,f=a-t,d=o*o+l*l,g=c*c+f*f,p=.5/(o*f-l*c),y=(f*d-l*g)*p,v=(o*g-c*d)*p;return y*y+v*v}function lce(e,t,n,i,r,a){const o=n-e,l=i-t,c=r-e,f=a-t,d=o*o+l*l,g=c*c+f*f,p=.5/(o*f-l*c),y=e+(f*d-l*g)*p,v=t+(o*g-c*d)*p;return{x:y,y:v}}function Df(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],o=t[a];let l=r-1;for(;l>=n&&t[e[l]]>o;)e[l+1]=e[l--];e[l+1]=a}else{const r=n+i>>1;let a=n+1,o=i;cg(e,r,a),t[e[n]]>t[e[i]]&&cg(e,n,i),t[e[a]]>t[e[i]]&&cg(e,a,i),t[e[n]]>t[e[a]]&&cg(e,n,a);const l=e[a],c=t[l];for(;;){do a++;while(t[e[a]]<c);do o--;while(t[e[o]]>c);if(o<a)break;cg(e,a,o)}e[n+1]=e[o],e[o]=l,i-a+1>=o-n?(Df(e,t,a,i),Df(e,t,n,o-1)):(Df(e,t,n,o-1),Df(e,t,a,i))}}function cg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function uce(e){return e[0]}function cce(e){return e[1]}const X4=1e-6;class Tu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>X4||Math.abs(this._y1-a)>X4)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class SA{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let fce=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,o;const l=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,S=0,_=i.length,w,A;b<_;b+=3,S+=2){const $=i[b]*2,M=i[b+1]*2,k=i[b+2]*2,T=t[$],N=t[$+1],R=t[M],B=t[M+1],U=t[k],Q=t[k+1],G=R-T,I=B-N,z=U-T,D=Q-N,q=(G*D-I*z)*2;if(Math.abs(q)<1e-9){if(a===void 0){a=o=0;for(const Z of n)a+=t[Z*2],o+=t[Z*2+1];a/=n.length,o/=n.length}const Y=1e9*Math.sign((a-T)*D-(o-N)*z);w=(T+U)/2-Y*D,A=(N+Q)/2+Y*z}else{const Y=1/q,Z=G*G+I*I,ue=z*z+D*D;w=T+(D*Z-I*ue)*Y,A=N+(G*ue-z*Z)*Y}l[S]=w,l[S+1]=A}let c=n[n.length-1],f,d=c*4,g,p=t[2*c],y,v=t[2*c+1];r.fill(0);for(let b=0;b<n.length;++b)c=n[b],f=d,g=p,y=v,d=c*4,p=t[2*c],v=t[2*c+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-g}render(t){const n=t==null?t=new Tu:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:o,vectors:l}=this;if(a.length<=1)return null;for(let d=0,g=i.length;d<g;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=o[y],S=o[y+1],_=o[v],w=o[v+1];this._renderSegment(b,S,_,w,t)}let c,f=a[a.length-1];for(let d=0;d<a.length;++d){c=f,f=a[d];const g=Math.floor(r[f]/3)*2,p=o[g],y=o[g+1],v=c*4,b=this._project(p,y,l[v+2],l[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Tu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Tu:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let o=2;o<a;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new SA;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let o;const l=this._regioncode(t,n),c=this._regioncode(i,r);l===0&&c===0?(a.moveTo(t,n),a.lineTo(i,r)):(o=this._clipSegment(t,n,i,r,l,c))&&(a.moveTo(o[0],o[1]),a.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,o=n.length;a<o;a+=2)for(let l=0,c=r.length;l<c;l+=2)if(n[a]===r[l]&&n[a+1]===r[l+1]&&n[(a+2)%o]===r[(l+c-2)%c]&&n[(a+3)%o]===r[(l+c-1)%c]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,o=i[t];if(o===-1)return null;const l=[];let c=o;do{const f=Math.floor(c/3);if(l.push(n[f*2],n[f*2+1]),c=c%3===2?c-2:c+1,a[c]!==t)break;c=r[c]}while(c!==o&&c!==-1);return l}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,o,l=n[i-2],c=n[i-1],f,d=this._regioncode(l,c),g,p=0;for(let y=0;y<i;y+=2)if(a=l,o=c,l=n[y],c=n[y+1],f=d,d=this._regioncode(l,c),f===0&&d===0)g=p,p=0,r?r.push(l,c):r=[l,c];else{let v,b,S,_,w;if(f===0){if((v=this._clipSegment(a,o,l,c,f,d))===null)continue;[b,S,_,w]=v}else{if((v=this._clipSegment(l,c,a,o,d,f))===null)continue;[_,w,b,S]=v,g=p,p=this._edgecode(b,S),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(b,S):r=[b,S]}g=p,p=this._edgecode(_,w),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(_,w):r=[_,w]}if(r)g=p,p=this._edgecode(r[0],r[1]),g&&p&&this._edge(t,g,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,o){const l=a<o;for(l&&([t,n,i,r,a,o]=[i,r,t,n,o,a]);;){if(a===0&&o===0)return l?[i,r,t,n]:[t,n,i,r];if(a&o)return null;let c,f,d=a||o;d&8?(c=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(c=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),c=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),c=this.xmin),a?(t=c,n=f,a=this._regioncode(t,n)):(i=c,r=f,o=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,o){let l=Array.from(n),c;if((c=this._project(l[0],l[1],i,r))&&l.unshift(c[0],c[1]),(c=this._project(l[l.length-2],l[l.length-1],a,o))&&l.push(c[0],c[1]),l=this._clipFinite(t,l))for(let f=0,d=l.length,g,p=this._edgecode(l[d-2],l[d-1]);f<d;f+=2)g=p,p=this._edgecode(l[f],l[f+1]),g&&p&&(f=this._edge(t,g,p,l,f),d=l.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(t,n,i,r,a){for(;n!==i;){let o,l;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,l=this.ymin;break}(r[a]!==o||r[a+1]!==l)&&this.contains(t,o,l)&&(r.splice(a,0,o,l),a+=2)}return a}_project(t,n,i,r){let a=1/0,o,l,c;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<a&&(c=this.ymin,l=t+(a=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<a&&(c=this.ymax,l=t+(a=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<a&&(l=this.xmax,c=n+(a=o)*r)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<a&&(l=this.xmin,c=n+(a=o)*r)}return[l,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const dce=2*Math.PI,xf=Math.pow;function hce(e){return e[0]}function gce(e){return e[1]}function pce(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],o=2*t[i+2];if((n[o]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function mce(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class $T{static from(t,n=hce,i=gce,r){return new $T("length"in t?yce(t,n,i,r):Float64Array.from(vce(t,n,i,r)))}constructor(t){this._delaunator=new dv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&pce(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const c=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*c],n[2*c+1],n[2*f],n[2*f+1]],g=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=mce(n[2*p],n[2*p+1],g);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new dv(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let c=0,f=i.length;c<f;++c){const d=a[c%3===2?c-2:c+1];(i[c]===-1||o[d]===-1)&&(o[d]=c)}for(let c=0,f=r.length;c<f;++c)l[r[c]]=c;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new fce(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:o,collinear:l}=this;if(l){const g=l.indexOf(t);g>0&&(yield l[g-1]),g<l.length-1&&(yield l[g+1]);return}const c=n[t];if(c===-1)return;let f=c,d=-1;do{if(yield d=o[f],f=f%3===2?f-2:f+1,o[f]!==t)return;if(f=a[f],f===-1){const g=i[(r[t]+1)%i.length];g!==d&&(yield g);return}}while(f!==c)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:o,halfedges:l,triangles:c,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,g=xf(n-f[t*2],2)+xf(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=c[y];const b=xf(n-f[v*2],2)+xf(i-f[v*2+1],2);if(b<g&&(g=b,d=v),y=y%3===2?y-2:y+1,c[y]!==t)break;if(y=l[y],y===-1){if(y=a[(o[t]+1)%a.length],y!==v&&xf(n-f[y*2],2)+xf(i-f[y*2+1],2)<g)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Tu:void 0,{points:i,halfedges:r,triangles:a}=this;for(let o=0,l=r.length;o<l;++o){const c=r[o];if(c<o)continue;const f=a[o]*2,d=a[c]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Tu:void 0,{points:r}=this;for(let a=0,o=r.length;a<o;a+=2){const l=r[a],c=r[a+1];t.moveTo(l+n,c),t.arc(l,c,n,0,dce)}return i&&i.value()}renderHull(t){const n=t==null?t=new Tu:void 0,{hull:i,points:r}=this,a=i[0]*2,o=i.length;t.moveTo(r[a],r[a+1]);for(let l=1;l<o;++l){const c=2*i[l];t.lineTo(r[c],r[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new SA;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Tu:void 0,{points:r,triangles:a}=this,o=a[t*=3]*2,l=a[t+1]*2,c=a[t+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.lineTo(r[c],r[c+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new SA;return this.renderTriangle(t,n),n.value()}}function yce(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let o=0;o<r;++o){const l=e[o];a[o*2]=t.call(i,l,o,e),a[o*2+1]=n.call(i,l,o,e)}return a}function*vce(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function TT(e){J.call(this,null,e)}TT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const bce=[-1e5,-1e5,1e5,1e5];ye(TT,J,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:bce;const a=this.value=$T.from(i,e.x,e.y).voronoi(r);for(let o=0,l=i.length;o<l;++o){const c=a.cellPolygon(o);i[o][n]=c&&!Sce(c)?xce(c):null}return t.reflow(e.modified()).modifies(n)}});function xce(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Sce(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Ece=Object.freeze(Object.defineProperty({__proto__:null,voronoi:TT},Symbol.toStringTag,{value:"Module"}));var a_=Math.PI/180,jg=64,W1=2048;function _ce(){var e=[256,256],t,n,i,r,a,o,l,c=$j,f=[],d=Math.random,g={};g.layout=function(){for(var v=p(cl()),b=Mce((e[0]>>5)*e[1]),S=null,_=f.length,w=-1,A=[],$=f.map(k=>({text:t(k),font:n(k),style:r(k),weight:a(k),rotate:o(k),size:~~(i(k)+1e-14),padding:l(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,T)=>T.size-k.size);++w<_;){var M=$[w];M.x=e[0]*(d()+.5)>>1,M.y=e[1]*(d()+.5)>>1,wce(v,M,$,w),M.hasText&&y(b,M,S)&&(A.push(M),S?Cce(S,M):S=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(jg<<5)/b,v.height=W1/b;var S=v.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:b}}function y(v,b,S){for(var _=b.x,w=b.y,A=Math.hypot(e[0],e[1]),$=c(e),M=d()<.5?1:-1,k=-M,T,N,R;(T=$(k+=M))&&(N=~~T[0],R=~~T[1],!(Math.min(Math.abs(N),Math.abs(R))>=A));)if(b.x=_+N,b.y=w+R,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!S||!Ace(b,v,e[0]))&&(!S||$ce(b,S))){for(var B=b.sprite,U=b.width>>5,Q=e[0]>>5,G=b.x-(U<<4),I=G&127,z=32-I,D=b.y1-b.y0,q=(b.y+b.y0)*Q+(G>>5),Y,Z=0;Z<D;Z++){Y=0;for(var ue=0;ue<=U;ue++)v[q+ue]|=Y<<z|(ue<U?(Y=B[Z*U+ue])>>>I:0);q+=Q}return b.sprite=null,!0}return!1}return g.words=function(v){return arguments.length?(f=v,g):f},g.size=function(v){return arguments.length?(e=[+v[0],+v[1]],g):e},g.font=function(v){return arguments.length?(n=su(v),g):n},g.fontStyle=function(v){return arguments.length?(r=su(v),g):r},g.fontWeight=function(v){return arguments.length?(a=su(v),g):a},g.rotate=function(v){return arguments.length?(o=su(v),g):o},g.text=function(v){return arguments.length?(t=su(v),g):t},g.spiral=function(v){return arguments.length?(c=kce[v]||v,g):c},g.fontSize=function(v){return arguments.length?(i=su(v),g):i},g.padding=function(v){return arguments.length?(l=su(v),g):l},g.random=function(v){return arguments.length?(d=v,g):d},g}function wce(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(jg<<5)/a,W1/a);var o=0,l=0,c=0,f=n.length,d,g,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*a_),S=Math.cos(t.rotate*a_),_=d*S,w=d*b,A=p*S,$=p*b;d=Math.max(Math.abs(_+$),Math.abs(_-$))+31>>5<<5,p=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(p>c&&(c=p),o+d>=jg<<5&&(o=0,l+=c,c=0),l+p>=W1)break;r.translate((o+(d>>1))/a,(l+(p>>1))/a),t.rotate&&r.rotate(t.rotate*a_),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=o,t.yoff=l,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=d}for(var M=r.getImageData(0,0,(jg<<5)/a,W1/a).data,k=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,g=d>>5,p=t.y1-t.y0,y=0;y<p*g;y++)k[y]=0;if(o=t.xoff,o==null)return;l=t.yoff;var T=0,N=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var R=g*v+(y>>5),B=M[(l+v)*(jg<<5)+(o+y)<<2]?1<<31-y%32:0;k[R]|=B,T|=B}T?N=v:(t.y0++,p--,v--,l++)}t.y1=t.y0+N,t.sprite=k.slice(0,(t.y1-t.y0)*g)}}}function Ace(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),o=a&127,l=32-o,c=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,g=0;g<c;g++){d=0;for(var p=0;p<=r;p++)if((d<<l|(p<r?(d=i[g*r+p])>>>o:0))&t[f+p])return!0;f+=n}return!1}function Cce(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function $ce(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function $j(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Tce(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function Mce(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function su(e){return typeof e=="function"?e:function(){return e}}var kce={archimedean:$j,rectangular:Tce};const Tj=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Oce=["text","font","rotate","fontSize","fontStyle","fontWeight"];function MT(e){J.call(this,_ce(),e)}MT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Tj}]};ye(MT,J,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ee("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return je(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||Oce.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,o=e.as||Tj;let l=e.fontSize||14,c;if(je(l)?c=e.fontSizeRange:l=ii(l),c){const v=l,b=ct("sqrt")().domain(Ya(r,v)).range(c);l=S=>b(v(S))}r.forEach(v=>{v[o[0]]=NaN,v[o[1]]=NaN,v[o[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(l).random(Ur).layout(),d=a.size(),g=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,S;v<y;++v)b=f[v],S=b.datum,S[o[0]]=b.x+g,S[o[1]]=b.y+p,S[o[2]]=b.font,S[o[3]]=b.size,S[o[4]]=b.style,S[o[5]]=b.weight,S[o[6]]=b.rotate;return t.reflow(i).modifies(o)}});const Dce=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:MT},Symbol.toStringTag,{value:"Module"})),Nce=e=>new Uint8Array(e),Rce=e=>new Uint16Array(e),Jg=e=>new Uint32Array(e);function zce(){let e=8,t=[],n=Jg(0),i=p1(0,e),r=p1(0,e);return{data:()=>t,seen:()=>n=Fce(n,t.length),add(a){for(let o=0,l=t.length,c=a.length,f;o<c;++o)f=a[o],f._index=l++,t.push(f)},remove(a,o){const l=t.length,c=Array(l-a),f=t;let d,g,p;for(g=0;!o[g]&&g<l;++g)c[g]=t[g],f[g]=g;for(p=g;g<l;++g)d=t[g],o[g]?f[g]=-1:(f[g]=p,i[p]=i[g],r[p]=r[g],c[p]=d,d._index=p++),i[g]=0;return t=c,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,o){i[a]|=o},clear(a,o){i[a]&=~o},resize(a,o){const l=i.length;(a>l||o>e)&&(e=Math.max(o,e),i=p1(a,e,i),r=p1(a,e))}}}function Fce(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function p1(e,t,n){const i=(t<257?Nce:t<65537?Rce:Jg)(e);return n&&i.set(n),i}function V4(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const o=this,l=o.bisect(o.range,r.value),c=r.index,f=l[0],d=l[1],g=c.length;let p;for(p=0;p<f;++p)a[c[p]]|=i;for(p=d;p<g;++p)a[c[p]]|=i;return o}}}function W4(){let e=Jg(0),t=[],n=0;function i(l,c,f){if(!c.length)return[];const d=n,g=c.length,p=Jg(g);let y=Array(g),v,b,S;for(S=0;S<g;++S)y[S]=l(c[S]),p[S]=S;if(y=Lce(y,p),d)v=t,b=e,t=Array(d+g),e=Jg(d+g),Uce(f,v,b,d,y,p,g,t,e);else{if(f>0)for(S=0;S<g;++S)p[S]+=f;t=y,e=p}return n=d+g,{index:p,value:y}}function r(l,c){const f=n;let d,g,p;for(g=0;!c[e[g]]&&g<f;++g);for(p=g;g<f;++g)c[d=e[g]]||(e[p]=d,t[p]=t[g],++p);n=f-l}function a(l){for(let c=0,f=n;c<f;++c)e[c]=l[e[c]]}function o(l,c){let f;return c?f=c.length:(c=t,f=n),[PW(c,l[0],0,f),hl(c,l[1],0,f)]}return{insert:i,remove:r,bisect:o,reindex:a,index:()=>e,size:()=>n}}function Lce(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),YW(e,t)}function Uce(e,t,n,i,r,a,o,l,c){let f=0,d=0,g;for(g=0;f<i&&d<o;++g)t[f]<r[d]?(l[g]=t[f],c[g]=n[f++]):(l[g]=r[d],c[g]=a[d++]+e);for(;f<i;++f,++g)l[g]=t[f],c[g]=n[f];for(;d<o;++d,++g)l[g]=r[d],c[g]=a[d]+e}function kT(e){J.call(this,zce(),e),this._indices=null,this._dims=null}kT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ye(kT,J,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],o=i.length;let l=0,c,f;for(;l<o;++l)c=n[l].fname,f=r[c]||(r[c]=W4()),a.push(V4(f,l,i[l]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,o=this._dims,l=this.value,c=l.curr(),f=l.prev(),d=l.all(),g=n.rem=n.add,p=n.mod,y=r.length,v={};let b,S,_,w,A,$,M,k,T;if(f.set(c),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&l.add(t.add),t.mod.length)for($={},w=t.mod,M=0,k=w.length;M<k;++M)$[w[M]._index]=1;for(M=0;M<y;++M)T=i[M],(!o[M]||e.modified("fields",M)||t.modified(T.fields))&&(_=T.fname,(b=v[_])||(a[_]=S=W4(),v[_]=b=S.insert(T,t.source,0)),o[M]=V4(S,M,r[M]).onAdd(b,c));for(M=0,k=l.data().length;M<k;++M)A[M]||(f[M]!==c[M]?g.push(M):$[M]&&c[M]!==d&&p.push(M));return l.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,o=this._indices,l=e.fields,c={},f=n.add,d=r.size()+i.length,g=a.length;let p=r.size(),y,v,b;r.resize(d,g),r.add(i);const S=r.curr(),_=r.prev(),w=r.all();for(y=0;y<g;++y)v=l[y].fname,b=c[v]||(c[v]=o[v].insert(l[y],i,p)),a[y].onAdd(b,S);for(;p<d;++p)_[p]=w,S[p]!==w&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),o=e.mod;let l,c,f;for(l=0,c=o.length;l<c;++l)f=o[l]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),o=r.prev(),l=r.all(),c={},f=n.rem,d=t.rem;let g,p,y,v;for(g=0,p=d.length;g<p;++g)y=d[g]._index,c[y]=1,o[y]=v=a[y],a[y]=l,v!==l&&f.push(y);for(y in i)i[y].remove(p,c);return this.reindex(t,p,c),c},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const o in i)i[o].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,o=i.length;let l=0,c,f;for(n.filters=0,f=0;f<o;++f)e.modified("query",f)&&(c=f,++l);if(l===1)l=i[c].one,this.incrementOne(i[c],r[c],n.add,n.rem);else for(f=0,l=0;f<o;++f)e.modified("query",f)&&(l|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return l},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),o=r.curr(),l=r.prev(),c=e.index(),f=e.bisect(e.range),d=e.bisect(t),g=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let S,_,w;if(g<y)for(S=g,_=Math.min(y,p);S<_;++S)w=c[S],a[w]!==n&&(l[w]=o[w],a[w]=n,i.push(w)),o[w]^=b;else if(g>y)for(S=y,_=Math.min(g,v);S<_;++S)w=c[S],a[w]!==n&&(l[w]=o[w],a[w]=n,i.push(w)),o[w]^=b;if(p>v)for(S=Math.max(g,v),_=p;S<_;++S)w=c[S],a[w]!==n&&(l[w]=o[w],a[w]=n,i.push(w)),o[w]^=b;else if(p<v)for(S=Math.max(y,p),_=v;S<_;++S)w=c[S],a[w]!==n&&(l[w]=o[w],a[w]=n,i.push(w)),o[w]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),o=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],g=l[0],p=l[1],y=e.one;let v,b,S;if(f<g)for(v=f,b=Math.min(g,d);v<b;++v)S=o[v],a[S]^=y,n.push(S);else if(f>g)for(v=g,b=Math.min(f,p);v<b;++v)S=o[v],a[S]^=y,i.push(S);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)S=o[v],a[S]^=y,n.push(S);else if(d<p)for(v=Math.max(g,d),b=p;v<b;++v)S=o[v],a[S]^=y,i.push(S);e.range=t.slice()}});function OT(e){J.call(this,null,e)}OT.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ye(OT,J,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),o=i.data(),l=i.curr(),c=i.prev(),f=d=>l[d]&n?null:o[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const g=l[d]&n;return!g&&g^c[d]&n?o[d]:null}),a.filter(a.REM,d=>{const g=l[d]&n;return g&&!(g^(g^c[d]&n))?o[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(l[d]&n)===r?o[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const Bce=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:kT,resolvefilter:OT},Symbol.toStringTag,{value:"Module"})),qce="RawCode",Vu="Literal",jce="Property",Ice="Identifier",Pce="ArrayExpression",Hce="BinaryExpression",Mj="CallExpression",Gce="ConditionalExpression",Yce="LogicalExpression",Xce="MemberExpression",Vce="ObjectExpression",Wce="UnaryExpression";function ya(e){this.type=e}ya.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=Qce(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function Qce(e){switch(e.type){case Pce:return e.elements;case Hce:case Yce:return[e.left,e.right];case Mj:return[e.callee].concat(e.arguments);case Gce:return[e.test,e.consequent,e.alternate];case Xce:return[e.object,e.property];case Vce:return e.properties;case jce:return[e.key,e.value];case Wce:return[e.argument];case Ice:case Vu:case qce:default:return[]}}var oo,Ae,ne,ei,vt,zb=1,s0=2,Wu=3,Dl=4,Fb=5,mc=6,ki=7,l0=8,Zce=9;oo={};oo[zb]="Boolean";oo[s0]="<end>";oo[Wu]="Identifier";oo[Dl]="Keyword";oo[Fb]="Null";oo[mc]="Numeric";oo[ki]="Punctuator";oo[l0]="String";oo[Zce]="RegularExpression";var Kce="ArrayExpression",Jce="BinaryExpression",efe="CallExpression",tfe="ConditionalExpression",kj="Identifier",nfe="Literal",ife="LogicalExpression",rfe="MemberExpression",afe="ObjectExpression",ofe="Property",sfe="UnaryExpression",_n="Unexpected token %0",lfe="Unexpected number",ufe="Unexpected string",cfe="Unexpected identifier",ffe="Unexpected reserved word",dfe="Unexpected end of input",EA="Invalid regular expression",o_="Invalid regular expression: missing /",Oj="Octal literals are not allowed in strict mode.",hfe="Duplicate data property in object literal not allowed in strict mode",Bn="ILLEGAL",Ep="Disabled.",gfe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),pfe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Lb(e,t){if(!e)throw new Error("ASSERT: "+t)}function Bo(e){return e>=48&&e<=57}function DT(e){return"0123456789abcdefABCDEF".includes(e)}function ep(e){return"01234567".includes(e)}function mfe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function _p(e){return e===10||e===13||e===8232||e===8233}function u0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&gfe.test(String.fromCharCode(e))}function hv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&pfe.test(String.fromCharCode(e))}const yfe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Dj(){for(;ne<ei;){const e=Ae.charCodeAt(ne);if(mfe(e)||_p(e))++ne;else break}}function _A(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ne<ei&&DT(Ae[ne])?(i=Ae[ne++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):st({},_n,Bn);return String.fromCharCode(r)}function vfe(){var e,t,n,i;for(e=Ae[ne],t=0,e==="}"&&st({},_n,Bn);ne<ei&&(e=Ae[ne++],!!DT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&st({},_n,Bn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function Nj(){var e,t;for(e=Ae.charCodeAt(ne++),t=String.fromCharCode(e),e===92&&(Ae.charCodeAt(ne)!==117&&st({},_n,Bn),++ne,e=_A("u"),(!e||e==="\\"||!u0(e.charCodeAt(0)))&&st({},_n,Bn),t=e);ne<ei&&(e=Ae.charCodeAt(ne),!!hv(e));)++ne,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ae.charCodeAt(ne)!==117&&st({},_n,Bn),++ne,e=_A("u"),(!e||e==="\\"||!hv(e.charCodeAt(0)))&&st({},_n,Bn),t+=e);return t}function bfe(){var e,t;for(e=ne++;ne<ei;){if(t=Ae.charCodeAt(ne),t===92)return ne=e,Nj();if(hv(t))++ne;else break}return Ae.slice(e,ne)}function xfe(){var e,t,n;return e=ne,t=Ae.charCodeAt(ne)===92?Nj():bfe(),t.length===1?n=Wu:yfe.hasOwnProperty(t)?n=Dl:t==="null"?n=Fb:t==="true"||t==="false"?n=zb:n=Wu,{type:n,value:t,start:e,end:ne}}function s_(){var e=ne,t=Ae.charCodeAt(ne),n,i=Ae[ne],r,a,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ne,{type:ki,value:String.fromCharCode(t),start:e,end:ne};default:if(n=Ae.charCodeAt(ne+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ne+=2,{type:ki,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ne};case 33:case 61:return ne+=2,Ae.charCodeAt(ne)===61&&++ne,{type:ki,value:Ae.slice(e,ne),start:e,end:ne}}}if(o=Ae.substr(ne,4),o===">>>=")return ne+=4,{type:ki,value:o,start:e,end:ne};if(a=o.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ne+=3,{type:ki,value:a,start:e,end:ne};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ne+=2,{type:ki,value:r,start:e,end:ne};if(r==="//"&&st({},_n,Bn),"<>=!+-*%&|^/".includes(i))return++ne,{type:ki,value:i,start:e,end:ne};st({},_n,Bn)}function Sfe(e){let t="";for(;ne<ei&&DT(Ae[ne]);)t+=Ae[ne++];return t.length===0&&st({},_n,Bn),u0(Ae.charCodeAt(ne))&&st({},_n,Bn),{type:mc,value:parseInt("0x"+t,16),start:e,end:ne}}function Efe(e){let t="0"+Ae[ne++];for(;ne<ei&&ep(Ae[ne]);)t+=Ae[ne++];return(u0(Ae.charCodeAt(ne))||Bo(Ae.charCodeAt(ne)))&&st({},_n,Bn),{type:mc,value:parseInt(t,8),octal:!0,start:e,end:ne}}function Q4(){var e,t,n;if(n=Ae[ne],Lb(Bo(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ne,e="",n!=="."){if(e=Ae[ne++],n=Ae[ne],e==="0"){if(n==="x"||n==="X")return++ne,Sfe(t);if(ep(n))return Efe(t);n&&Bo(n.charCodeAt(0))&&st({},_n,Bn)}for(;Bo(Ae.charCodeAt(ne));)e+=Ae[ne++];n=Ae[ne]}if(n==="."){for(e+=Ae[ne++];Bo(Ae.charCodeAt(ne));)e+=Ae[ne++];n=Ae[ne]}if(n==="e"||n==="E")if(e+=Ae[ne++],n=Ae[ne],(n==="+"||n==="-")&&(e+=Ae[ne++]),Bo(Ae.charCodeAt(ne)))for(;Bo(Ae.charCodeAt(ne));)e+=Ae[ne++];else st({},_n,Bn);return u0(Ae.charCodeAt(ne))&&st({},_n,Bn),{type:mc,value:parseFloat(e),start:t,end:ne}}function _fe(){var e="",t,n,i,r,a=!1;for(t=Ae[ne],Lb(t==="'"||t==='"',"String literal must starts with a quote"),n=ne,++ne;ne<ei;)if(i=Ae[ne++],i===t){t="";break}else if(i==="\\")if(i=Ae[ne++],!i||!_p(i.charCodeAt(0)))switch(i){case"u":case"x":Ae[ne]==="{"?(++ne,e+=vfe()):e+=_A(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:ep(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ne<ei&&ep(Ae[ne])&&(a=!0,r=r*8+"01234567".indexOf(Ae[ne++]),"0123".includes(i)&&ne<ei&&ep(Ae[ne])&&(r=r*8+"01234567".indexOf(Ae[ne++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&Ae[ne]===`
`&&++ne;else{if(_p(i.charCodeAt(0)))break;e+=i}return t!==""&&st({},_n,Bn),{type:l0,value:e,octal:a,start:n,end:ne}}function wfe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";st({},EA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{st({},EA)}try{return new RegExp(e,t)}catch{return null}}function Afe(){var e,t,n,i,r;for(e=Ae[ne],Lb(e==="/","Regular expression literal must start with a slash"),t=Ae[ne++],n=!1,i=!1;ne<ei;)if(e=Ae[ne++],t+=e,e==="\\")e=Ae[ne++],_p(e.charCodeAt(0))&&st({},o_),t+=e;else if(_p(e.charCodeAt(0)))st({},o_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||st({},o_),r=t.substr(1,t.length-2),{value:r,literal:t}}function Cfe(){var e,t,n;for(t="",n="";ne<ei&&(e=Ae[ne],!!hv(e.charCodeAt(0)));)++ne,e==="\\"&&ne<ei?st({},_n,Bn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&st({},EA,n),{value:n,literal:t}}function $fe(){var e,t,n,i;return vt=null,Dj(),e=ne,t=Afe(),n=Cfe(),i=wfe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ne}}function Tfe(e){return e.type===Wu||e.type===Dl||e.type===zb||e.type===Fb}function Rj(){if(Dj(),ne>=ei)return{type:s0,start:ne,end:ne};const e=Ae.charCodeAt(ne);return u0(e)?xfe():e===40||e===41||e===59?s_():e===39||e===34?_fe():e===46?Bo(Ae.charCodeAt(ne+1))?Q4():s_():Bo(e)?Q4():s_()}function Di(){const e=vt;return ne=e.end,vt=Rj(),ne=e.end,e}function zj(){const e=ne;vt=Rj(),ne=e}function Mfe(e){const t=new ya(Kce);return t.elements=e,t}function Z4(e,t,n){const i=new ya(e==="||"||e==="&&"?ife:Jce);return i.operator=e,i.left=t,i.right=n,i}function kfe(e,t){const n=new ya(efe);return n.callee=e,n.arguments=t,n}function Ofe(e,t,n){const i=new ya(tfe);return i.test=e,i.consequent=t,i.alternate=n,i}function NT(e){const t=new ya(kj);return t.name=e,t}function Ig(e){const t=new ya(nfe);return t.value=e.value,t.raw=Ae.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function K4(e,t,n){const i=new ya(rfe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function Dfe(e){const t=new ya(afe);return t.properties=e,t}function J4(e,t,n){const i=new ya(ofe);return i.key=t,i.value=n,i.kind=e,i}function Nfe(e,t){const n=new ya(sfe);return n.operator=e,n.argument=t,n.prefix=!0,n}function st(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,o)=>(Lb(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(r),n.index=ne,n.description=r,n}function Ub(e){e.type===s0&&st(e,dfe),e.type===mc&&st(e,lfe),e.type===l0&&st(e,ufe),e.type===Wu&&st(e,cfe),e.type===Dl&&st(e,ffe),st(e,_n,e.value)}function ti(e){const t=Di();(t.type!==ki||t.value!==e)&&Ub(t)}function Ot(e){return vt.type===ki&&vt.value===e}function l_(e){return vt.type===Dl&&vt.value===e}function Rfe(){const e=[];for(ne=vt.start,ti("[");!Ot("]");)Ot(",")?(Di(),e.push(null)):(e.push(Qu()),Ot("]")||ti(","));return Di(),Mfe(e)}function ez(){ne=vt.start;const e=Di();return e.type===l0||e.type===mc?(e.octal&&st(e,Oj),Ig(e)):NT(e.value)}function zfe(){var e,t,n,i;if(ne=vt.start,e=vt,e.type===Wu)return n=ez(),ti(":"),i=Qu(),J4("init",n,i);if(e.type===s0||e.type===ki)Ub(e);else return t=ez(),ti(":"),i=Qu(),J4("init",t,i)}function Ffe(){var e=[],t,n,i,r={},a=String;for(ne=vt.start,ti("{");!Ot("}");)t=zfe(),t.key.type===kj?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?st({},hfe):r[i]=!0,e.push(t),Ot("}")||ti(",");return ti("}"),Dfe(e)}function Lfe(){ti("(");const e=RT();return ti(")"),e}const Ufe={if:1};function Bfe(){var e,t,n;if(Ot("("))return Lfe();if(Ot("["))return Rfe();if(Ot("{"))return Ffe();if(e=vt.type,ne=vt.start,e===Wu||Ufe[vt.value])n=NT(Di().value);else if(e===l0||e===mc)vt.octal&&st(vt,Oj),n=Ig(Di());else{if(e===Dl)throw new Error(Ep);e===zb?(t=Di(),t.value=t.value==="true",n=Ig(t)):e===Fb?(t=Di(),t.value=null,n=Ig(t)):Ot("/")||Ot("/=")?(n=Ig($fe()),zj()):Ub(Di())}return n}function qfe(){const e=[];if(ti("("),!Ot(")"))for(;ne<ei&&(e.push(Qu()),!Ot(")"));)ti(",");return ti(")"),e}function jfe(){ne=vt.start;const e=Di();return Tfe(e)||Ub(e),NT(e.value)}function Ife(){return ti("."),jfe()}function Pfe(){ti("[");const e=RT();return ti("]"),e}function Hfe(){var e,t,n;for(e=Bfe();;)if(Ot("."))n=Ife(),e=K4(".",e,n);else if(Ot("("))t=qfe(),e=kfe(e,t);else if(Ot("["))n=Pfe(),e=K4("[",e,n);else break;return e}function tz(){const e=Hfe();if(vt.type===ki&&(Ot("++")||Ot("--")))throw new Error(Ep);return e}function Q1(){var e,t;if(vt.type!==ki&&vt.type!==Dl)t=tz();else{if(Ot("++")||Ot("--"))throw new Error(Ep);if(Ot("+")||Ot("-")||Ot("~")||Ot("!"))e=Di(),t=Q1(),t=Nfe(e.value,t);else{if(l_("delete")||l_("void")||l_("typeof"))throw new Error(Ep);t=tz()}}return t}function nz(e){let t=0;if(e.type!==ki&&e.type!==Dl)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Gfe(){var e,t,n,i,r,a,o,l,c,f;if(e=vt,c=Q1(),i=vt,r=nz(i),r===0)return c;for(i.prec=r,Di(),t=[e,vt],o=Q1(),a=[c,i,o];(r=nz(vt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)o=a.pop(),l=a.pop().value,c=a.pop(),t.pop(),n=Z4(l,c,o),a.push(n);i=Di(),i.prec=r,a.push(i),t.push(vt),n=Q1(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=Z4(a[f-1].value,a[f-2],n),f-=2;return n}function Qu(){var e,t,n;return e=Gfe(),Ot("?")&&(Di(),t=Qu(),ti(":"),n=Qu(),e=Ofe(e,t,n)),e}function RT(){const e=Qu();if(Ot(","))throw new Error(Ep);return e}function zT(e){Ae=e,ne=0,ei=Ae.length,vt=null,zj();const t=RT();if(vt.type!==s0)throw new Error("Unexpect token after expression.");return t}var Fj={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Lj(e){function t(o,l,c,f){let d=e(l[0]);return c&&(d=c+"("+d+")",c.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+o+(f<0?"":f===0?"()":"("+l.slice(1).map(e).join(",")+")")}function n(o,l,c){return f=>t(o,f,l,c)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&ee("Missing arguments to clamp function."),o.length>3&&ee("Too many arguments to clamp function.");const l=o.map(e);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(o){o.length<3&&ee("Missing arguments to if function."),o.length>3&&ee("Too many arguments to if function.");const l=o.map(e);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function Yfe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Uj(e){e=e||{};const t=e.allowed?ca(e.allowed):{},n=e.forbidden?ca(e.forbidden):{},i=e.constants||Fj,r=(e.functions||Lj)(g),a=e.globalvar,o=e.fieldvar,l=je(a)?a:v=>`${a}["${v}"]`;[...Object.getOwnPropertyNames(Object.prototype).filter(v=>typeof Object.prototype[v]=="function")];let c={},f={},d=0;function g(v){if(Se(v))return v;const b=p[v.type];return b==null&&ee("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:_e(n,b)?ee("Illegal identifier: "+b):_e(i,b)?i[b]:_e(t,b)?b:(c[b]=1,l(b))},MemberExpression:v=>{const b=!v.computed,S=g(v.object);b&&(d+=1);const _=g(v.property);return S===o&&(f[Yfe(_)]=1),b&&(d-=1),S+(b?"."+_:"["+_+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&ee("Illegal callee type: "+v.callee.type);const b=v.callee.name,S=v.arguments,_=_e(r,b)&&r[b];return _||ee("Unrecognized function: "+b),je(_)?_(S):_+"("+S.map(g).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(g).join(",")+"]",BinaryExpression:v=>"("+g(v.left)+" "+v.operator+" "+g(v.right)+")",UnaryExpression:v=>"("+v.operator+g(v.argument)+")",ConditionalExpression:v=>"("+g(v.test)+"?"+g(v.consequent)+":"+g(v.alternate)+")",LogicalExpression:v=>"("+g(v.left)+v.operator+g(v.right)+")",ObjectExpression:v=>{for(const b of v.properties){const S=b.key.name;vC.has(S)&&ee("Illegal property: "+S)}return"{"+v.properties.map(g).join(",")+"}"},Property:v=>{d+=1;const b=g(v.key);return d-=1,b+":"+g(v.value)}};function y(v){const b={code:g(v),globals:Object.keys(c),fields:Object.keys(f)};return c={},f={},b}return y.functions=r,y.constants=i,y}const iz=Symbol("vega_selection_getter");function Bj(e){return(!e.getter||!e.getter[iz])&&(e.getter=zr(e.field),e.getter[iz]=!0),e.getter}const FT="intersect",rz="union",Xfe="vlMulti",Vfe="vlPoint",az="or",Wfe="and",za="_vgsid_",wp=zr(za),Qfe="E",Zfe="R",Kfe="R-E",Jfe="R-LE",ede="R-RE",tde="E-LT",nde="E-LTE",ide="E-GT",rde="E-GTE",ade="E-VALID",ode="E-ONE",gv="index:unit";function oz(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,o,l;a<r;++a)if(l=n[a],o=Bj(l)(e),sl(o)&&(o=Qn(o)),sl(i[a])&&(i[a]=Qn(i[a])),ie(i[a])&&sl(i[a][0])&&(i[a]=i[a].map(Qn)),l.type===Qfe){if(ie(i[a])?!i[a].includes(o):o!==i[a])return!1}else if(l.type===Zfe){if(!Tf(o,i[a]))return!1}else if(l.type===ede){if(!Tf(o,i[a],!0,!1))return!1}else if(l.type===Kfe){if(!Tf(o,i[a],!1,!1))return!1}else if(l.type===Jfe){if(!Tf(o,i[a],!1,!0))return!1}else if(l.type===tde){if(o>=i[a])return!1}else if(l.type===nde){if(o>i[a])return!1}else if(l.type===ide){if(o<=i[a])return!1}else if(l.type===rde){if(o<i[a])return!1}else if(l.type===ade){if(o===null||isNaN(o))return!1}else if(l.type===ode&&i[a].indexOf(o)===-1)return!1;return!0}function sde(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[gv]&&i[gv].value:void 0,o=n===FT,l=r.length,c=0,f,d,g,p,y;c<l;++c)if(f=r[c],a&&o){if(d=d||{},g=d[p=f.unit]||0,g===-1)continue;if(y=oz(t,f),d[p]=y?-1:++g,y&&a.size===1)return!0;if(!y&&g===a.get(p).count)return!1}else if(y=oz(t,f),o^y)return y;return l&&o}const qj=Rd(wp),lde=qj.left,ude=qj.right;function cde(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[gv]&&i[gv].value:void 0,o=n===FT,l=wp(t),c=lde(r,l);if(c===r.length||wp(r[c])!==l)return!1;if(a&&o){if(a.size===1)return!0;if(ude(r,l)-c<a.size)return!1}return!0}function fde(e,t){return ie(e)||ee("First argument to selectionTuples must be an array."),xe(t)||ee("Second argument to selectionTuples must be an object."),e.map(n=>Pe(t.fields?{values:t.fields.map(i=>Bj(i)(n.datum))}:{[za]:wp(n.datum)},t))}function dde(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],o={},l={},c={},f,d,g,p,y,v,b,S,_,w,A=a.length,$=0,M,k;$<A;++$)if(f=a[$],p=f.unit,d=f.fields,g=f.values,d&&g){for(M=0,k=d.length;M<k;++M)y=d[M],b=o[y.field]||(o[y.field]={}),S=b[p]||(b[p]=[]),c[y.field]=_=y.type.charAt(0),w=u_[`${_}_union`],b[p]=w(S,Ee(g[M]));n&&(S=l[p]||(l[p]=[]),S.push(Ee(g).reduce((T,N,R)=>(T[d[R].field]=N,T),{})))}else y=za,v=wp(f),b=o[y]||(o[y]={}),S=b[p]||(b[p]=[]),S.push(v),n&&(S=l[p]||(l[p]=[]),S.push({[za]:v}));if(t=t||rz,o[za]?o[za]=u_[`${za}_${t}`](...Object.values(o[za])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(N=>o[T][N]).reduce((N,R)=>N===void 0?R:u_[`${c[T]}_${t}`](N,R))}),a=Object.keys(l),n&&a.length){const T=i?Vfe:Xfe;o[T]=t===rz?{[az]:a.reduce((N,R)=>(N.push(...l[R]),N),[])}:{[Wfe]:a.map(N=>({[az]:l[N]}))}}return o}var u_={[`${za}_union`]:tQ,[`${za}_intersect`]:JW,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Qn(t[0]),i=Qn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Qn(t[0]),i=Qn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const hde=":",gde="@";function LT(e,t,n,i){t[0].type!==Vu&&ee("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&it(t).value,o="unit",l=gde+o,c=hde+r;a===FT&&!_e(i,l)&&(i[l]=n.getData(r).indataRef(n,o)),_e(i,c)||(i[c]=n.getData(r).tuplesRef())}function jj(e){const t=this.context.data[e];return t?t.values.value:[]}function pde(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function mde(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Fr).insert(t)),1}function yde(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const c0=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},vde=c0("format"),Ij=c0("timeFormat"),bde=c0("utcFormat"),xde=c0("timeParse"),Sde=c0("utcParse"),m1=new Date(2e3,0,1);function Bb(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(m1.setYear(2e3),m1.setMonth(e),m1.setDate(t),Ij.call(this,m1,n))}function Ede(e){return Bb.call(this,e,1,"%B")}function _de(e){return Bb.call(this,e,1,"%b")}function wde(e){return Bb.call(this,0,2+e,"%A")}function Ade(e){return Bb.call(this,0,2+e,"%a")}const Cde=":",$de="@",wA="%",Pj="$";function UT(e,t,n,i){t[0].type!==Vu&&ee("First argument to data functions must be a string literal.");const r=t[0].value,a=Cde+r;if(!_e(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function Tde(e,t,n,i){t[0].type!==Vu&&ee("First argument to indata must be a string literal."),t[1].type!==Vu&&ee("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,o=$de+a;_e(o,i)||(i[o]=n.getData(r).indataRef(n,a))}function mi(e,t,n,i){if(t[0].type===Vu)sz(n,i,t[0].value);else for(e in n.scales)sz(n,i,e)}function sz(e,t,n){const i=wA+n;if(!_e(t,i))try{t[i]=e.scaleRef(n)}catch{}}function so(e,t){if(Se(e)){const n=t.scales[e];return n&&c6(n.value)?n.value:void 0}else if(je(e))return c6(e)?e:void 0}function Mde(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=mi,n._range=mi,n._scale=mi;const i=r=>"_["+(r.type===Vu?ge(wA+r.value):ge(wA)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function BT(e,t){return function(n,i,r){if(n){const a=so(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const kde=BT("area",Vae),Ode=BT("bounds",Kae),Dde=BT("centroid",roe);function Nde(e,t){const n=so(e,(t||this).context);return n&&n.scale()}function Rde(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function qT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function zde(){return qT(this.context.dataflow,"warn",arguments)}function Fde(){return qT(this.context.dataflow,"info",arguments)}function Lde(){return qT(this.context.dataflow,"debug",arguments)}function c_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function AA(e){const t=yl(e),n=c_(t.r),i=c_(t.g),r=c_(t.b);return .2126*n+.7152*i+.0722*r}function Ude(e,t){const n=AA(e),i=AA(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function Bde(){const e=[].slice.call(arguments);return e.unshift({}),Pe(...e)}function Hj(e,t){return e===t||e!==e&&t!==t?!0:ie(e)?ie(t)&&e.length===t.length?qde(e,t):!1:xe(e)&&xe(t)?Gj(e,t):!1}function qde(e,t){for(let n=0,i=e.length;n<i;++n)if(!Hj(e[n],t[n]))return!1;return!0}function Gj(e,t){for(const n in e)if(!Hj(e[n],t[n]))return!1;return!0}function lz(e){return t=>Gj(e,t)}function jde(e,t,n,i,r,a){const o=this.context.dataflow,l=this.context.data[e],c=l.input,f=o.stamp();let d=l.changes,g,p;if(o._trigger===!1||!(c.value.length||t||i))return 0;if((!d||d.stamp<f)&&(l.changes=d=o.changeset(),d.stamp=f,o.runAfter(()=>{l.modified=!0,o.pulse(c,d).run()},!0,1)),n&&(g=n===!0?Fr:ie(n)||Vv(n)?n:lz(n),d.remove(g)),t&&d.insert(t),i&&(g=lz(i),c.value.some(g)?d.remove(g):d.insert(i)),r){if(je(r))throw Error("modify parameter must be a data tuple, not a function");for(p in a)d.modify(r,p,a[p])}return 1}function Ide(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function Pde(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const uz={};function Hde(e,t){const n=uz[t]||(uz[t]=zr(t));return ie(e)?e.map(n):n(e)}function qb(e){return ie(e)||ArrayBuffer.isView(e)?e:null}function jT(e){return qb(e)||(Se(e)?e:null)}function Gde(e,...t){return qb(e).join(...t)}function Yde(e,...t){return jT(e).indexOf(...t)}function Xde(e,...t){return jT(e).lastIndexOf(...t)}function Vde(e,...t){return jT(e).slice(...t)}function Wde(e,t,n){return je(n)&&ee("Function argument passed to replace."),!Se(t)&&!CC(t)&&ee("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Qde(e){return qb(e).slice().reverse()}function Zde(e){return qb(e).slice().sort(Dd)}function Kde(e,t,n){return e$(e||0,t||0,n||0)}function Jde(e,t){const n=so(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function ehe(e,t){const n=so(e,(t||this).context);return n?n.copy():void 0}function the(e,t){const n=so(e,(t||this).context);return n?n.domain():[]}function nhe(e,t,n){const i=so(e,(n||this).context);return i?ie(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function ihe(e,t){const n=so(e,(t||this).context);return n&&n.range?n.range():[]}function rhe(e,t,n){const i=so(e,(n||this).context);return i?i(t):void 0}function ahe(e,t,n,i,r){e=so(e,(r||this).context);const a=FU(t,n);let o=e.domain(),l=o[0],c=it(o),f=ni;return c-l?f=wU(e,l,c):e=(e.interpolator?ct("sequential")().interpolator(e.interpolator()):ct("linear")().interpolate(e.interpolate()).range(e.range())).domain([l=0,c=1]),e.ticks&&(o=e.ticks(+i||15),l!==o[0]&&o.unshift(l),c!==it(o)&&o.push(c)),o.forEach(d=>a.stop(f(d),e(d))),a}function ohe(e,t,n){const i=so(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function she(e){let t=null;return function(n){return n?gp(n,t=t||id(e)):e}}const Yj=e=>e.data;function Xj(e,t){const n=jj.call(t,e);return n.root&&n.root.lookup||{}}function lhe(e,t,n){const i=Xj(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(Yj):void 0}function uhe(e,t){const n=Xj(e,this)[t];return n?n.ancestors().map(Yj):void 0}const Vj=()=>typeof window<"u"&&window||null;function che(){const e=Vj();return e?e.screen:{}}function fhe(){const e=Vj();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function dhe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Wj(e,t,n){if(!e)return[];const[i,r]=e,a=new un().set(i[0],i[1],r[0],r[1]),o=n||this.context.dataflow.scenegraph().root;return DB(o,a,hhe(t))}function hhe(e){let t=null;if(e){const n=Ee(e.marktype),i=Ee(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function ghe(e,t,n,i=5){e=Ee(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function phe(e){return Ee(e).reduce((t,[n,i],r)=>t+=r==0?`M ${n},${i} `:r===e.length-1?" Z":`L ${n},${i} `,"")}function mhe(e,t,n){const{x:i,y:r,mark:a}=n,o=new un().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[c,f]of t)c<o.x1&&(o.x1=c),c>o.x2&&(o.x2=c),f<o.y1&&(o.y1=f),f>o.y2&&(o.y2=f);return o.translate(i,r),Wj([[o.x1,o.y1],[o.x2,o.y2]],e,a).filter(c=>yhe(c.x,c.y,t))}function yhe(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[o,l]=n[a],[c,f]=n[r];f>t!=l>t&&e<(o-c)*(t-f)/(l-f)+c&&i++}return i&1}const Ap={random(){return Ur()},cumulativeNormal:Jv,cumulativeLogNormal:e3,cumulativeUniform:r3,densityNormal:WC,densityLogNormal:JC,densityUniform:i3,quantileNormal:eb,quantileLogNormal:t3,quantileUniform:a3,sampleNormal:Kv,sampleLogNormal:KC,sampleUniform:n3,isArray:ie,isBoolean:uc,isDate:sl,isDefined(e){return e!==void 0},isNumber:lt,isObject:xe,isRegExp:CC,isString:Se,isTuple:Vv,isValid(e){return e!=null&&e===e},toBoolean:TC,toDate(e){return MC(e)},toNumber:Qn,toString:kC,indexof:Yde,join:Gde,lastindexof:Xde,replace:Wde,reverse:Qde,sort:Zde,slice:Vde,flush:n9,lerp:r9,merge:Bde,pad:s9,peek:it,pluck:Hde,span:Lp,inrange:Tf,truncate:l9,rgb:yl,lab:xy,hcl:Sy,hsl:vy,luminance:AA,contrast:Ude,sequence:ir,format:vde,utcFormat:bde,utcParse:Sde,utcOffset:j9,utcSequence:H9,timeFormat:Ij,timeParse:xde,timeOffset:q9,timeSequence:P9,timeUnitSpecifier:M9,monthFormat:Ede,monthAbbrevFormat:_de,dayFormat:wde,dayAbbrevFormat:Ade,quarter:KF,utcquarter:JF,week:O9,utcweek:R9,dayofyear:k9,utcdayofyear:N9,warn:zde,info:Fde,debug:Lde,extent(e){return Ya(e)},inScope:Rde,intersect:Wj,clampRange:e9,pinchDistance:Ide,pinchAngle:Pde,screen:che,containerSize:dhe,windowSize:fhe,bandspace:Kde,setdata:mde,pathShape:she,panLinear:VF,panLog:WF,panPow:QF,panSymlog:ZF,zoomLinear:SC,zoomLog:EC,zoomPow:ay,zoomSymlog:_C,encode:yde,modify:jde,lassoAppend:ghe,lassoPath:phe,intersectLasso:mhe},vhe=["view","item","group","xy","x","y"],bhe="event.vega.",Qj="this.",IT={},Zj={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ge(Pj+e)}]`,functions:xhe,constants:Fj,visitors:IT},CA=Uj(Zj);function xhe(e){const t=Lj(e);vhe.forEach(n=>t[n]=bhe+n);for(const n in Ap)t[n]=Qj+n;return Pe(t,Mde(e,Ap,IT)),t}function en(e,t,n){return arguments.length===1?Ap[e]:(Ap[e]=t,n&&(IT[e]=n),CA&&(CA.functions[e]=Qj+e),this)}en("bandwidth",Jde,mi);en("copy",ehe,mi);en("domain",the,mi);en("range",ihe,mi);en("invert",nhe,mi);en("scale",rhe,mi);en("gradient",ahe,mi);en("geoArea",kde,mi);en("geoBounds",Ode,mi);en("geoCentroid",Dde,mi);en("geoShape",ohe,mi);en("geoScale",Nde,mi);en("indata",pde,Tde);en("data",jj,UT);en("treePath",lhe,UT);en("treeAncestors",uhe,UT);en("vlSelectionTest",sde,LT);en("vlSelectionIdTest",cde,LT);en("vlSelectionResolve",dde,LT);en("vlSelectionTuples",fde);function Za(e,t){const n={};let i;try{e=Se(e)?e:ge(e)+"",i=zT(e)}catch{ee("Expression parse error: "+e)}i.visit(a=>{if(a.type!==Mj)return;const o=a.callee.name,l=Zj.visitors[o];l&&l(o,a.arguments,t,n)});const r=CA(i);return r.globals.forEach(a=>{const o=Pj+a;!_e(n,o)&&t.getSignal(a)&&(n[o]=t.signalRef(a))}),{$expr:Pe({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function She(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const Ehe=ca(["rule"]),cz=ca(["group","image","rect"]);function _he(e,t){let n="";return Ehe[t]||(e.x2&&(e.x?(cz[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(cz[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function PT(e){return(e+"").toLowerCase()}function whe(e){return PT(e)==="operator"}function Ahe(e){return PT(e)==="collect"}function fg(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function Che(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var $he={operator:(e,t)=>fg(e,["_"],t.code),parameter:(e,t)=>fg(e,["datum","_"],t.code),event:(e,t)=>fg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return fg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const o="o["+ge(a)+"]";r+=`$=${i[a].code};if(${o}!==$)${o}=$,m=1;`}return r+=_he(i,n),r+="return m;",fg(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(ge).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,o)=>{const l=t[o];let c,f;return a.path?(c=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+o]=a,c=`this.f${o}(a)`,f=`this.f${o}(b)`),Che(c,f,-l,l)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function The(e){const t=this;whe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Mhe(e){const t=this;if(e.params){const n=t.get(e.id);n||ee("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function khe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=ie(r)?r.map(a=>fz(a,n,t)):fz(r,n,t)}return t}function fz(e,t,n){if(!e||!xe(e))return e;for(let i=0,r=dz.length,a;i<r;++i)if(a=dz[i],_e(e,a.key))return a.parse(e,t,n);return e}var dz=[{key:"$ref",parse:Ohe},{key:"$key",parse:Nhe},{key:"$expr",parse:Dhe},{key:"$field",parse:Rhe},{key:"$encode",parse:Fhe},{key:"$compare",parse:zhe},{key:"$context",parse:Lhe},{key:"$subflow",parse:Uhe},{key:"$tupleid",parse:Bhe}];function Ohe(e,t){return t.get(e.$ref)||ee("Operator not defined: "+e.$ref)}function Dhe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=ji(t.parameterExpression(e.$expr),e.$fields))}function Nhe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=$C(e.$key,e.$flat,t.expr.codegen))}function Rhe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=zr(e.$field,e.$name,t.expr.codegen))}function zhe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Ee(e.$compare).map(r=>r&&r.$tupleid?Me:r);return t.fn[n]||(t.fn[n]=wC(i,e.$order,t.expr.codegen))}function Fhe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=ji(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function Lhe(e,t){return t}function Uhe(e,t){const n=e.$subflow;return function(i,r,a){const o=t.fork().parse(n),l=o.get(n.operators[0].id),c=o.signals.parent;return c&&c.set(a),l.detachSubflow=()=>t.detach(o),l}}function Bhe(){return Me}function qhe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&ee("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function jhe(e){var t=this,n=xe(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,o=void 0;i||ee("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(o=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,o)}const Ihe={skip:!0};function Phe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const o=t.signals[a];e.signals(a,o)&&(i[a]=o.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const o=t.data[a];e.data(a,o)&&(r[a]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function Hhe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],Ihe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Fr).insert(i[a]))}),(e.subcontext||[]).forEach((a,o)=>{const l=t.subcontext[o];l&&l.setState(a)})}function Kj(e,t,n,i){return new Jj(e,t,n,i)}function Jj(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||$he,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function hz(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Jj.prototype=hz.prototype={fork(){const e=new hz(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),Ahe(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const o=n.data[a]||(n.data[a]={});e.data[a].forEach(l=>o[l]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[PT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:She,parseOperator:The,parseOperatorParameters:Mhe,parseParameters:khe,parseStream:qhe,parseUpdate:jhe,getState:Phe,setState:Hhe};function Ghe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),eI(t,e.description()))}function eI(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Yhe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const f_="default";function Xhe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:f_,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?Se(r)?r:r.user:f_,o=i.item&&i.item.cursor||null;return r&&a===r.user&&o==r.item?r:{user:a,item:o}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Se(i)||(r=i.item,i=i.user),$A(e,i&&i!==f_?i:r||i),r},{cursor:t})}function $A(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function pv(e,t){var n=e._runtime.data;return _e(n,t)||ee("Unrecognized data set: "+t),n[t]}function Vhe(e,t){return arguments.length<2?pv(this,e).values.value:jb.call(this,e,hc().remove(Fr).insert(t))}function jb(e,t){y7(t)||ee("Second argument to changes must be a changeset.");const n=pv(this,e);return n.modified=!0,this.pulse(n.input,t)}function Whe(e,t){return jb.call(this,e,hc().insert(t))}function Qhe(e,t){return jb.call(this,e,hc().remove(t))}function tI(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function nI(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Ib(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Zhe(e){var t=Ib(e),n=tI(e),i=nI(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function Khe(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,o,l;return r&&(l=Ib(e),o=t.changedTouches?t.changedTouches[0]:t,a=$b(o,r),a[0]-=l[0],a[1]-=l[1]),t.dataflow=e,t.item=n,t.vega=Jhe(e,n,a),t}function Jhe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(o){var l=i,c;if(o){for(c=t;c;c=c.mark.group)if(c.mark.name===o){l=c;break}}return l&&l.mark&&l.mark.interactive?l:{}}function a(o){if(!o)return n;Se(o)&&(o=r(o));const l=n.slice();for(;o;)l[0]-=o.x||0,l[1]-=o.y||0,o=o.mark&&o.mark.group;return l}return{view:ii(e),item:ii(t||{}),group:r,xy:a,x:o=>a(o)[0],y:o=>a(o)[1]}}const gz="view",ege="timer",tge="window",nge={trap:!1};function ige(e){const t=Pe({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{ie(i[a])&&(i[a]=ca(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function iI(e,t,n,i){e._eventListeners.push({type:n,sources:Ee(t),handler:i})}function rge(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function y1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||xe(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function age(e,t,n){var i=this,r=new Zv(n),a=function(f,d){i.runAsync(null,()=>{e===gz&&rge(i,t)&&f.preventDefault(),r.receive(Khe(i,f,d))})},o;if(e===ege)y1(i,"timer",t)&&i.timer(a,t);else if(e===gz)y1(i,"view",t)&&i.addEventListener(t,a,nge);else if(e===tge?y1(i,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&y1(i,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)i.warn("Can not resolve event source: "+e);else{for(var l=0,c=o.length;l<c;++l)o[l].addEventListener(t,a);iI(i,o,t,a)}return r}function pz(e){return e.item}function mz(e){return e.item.mark.source}function yz(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function oge(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",pz),mz,yz(e)),this.on(this.events("view","pointerout",pz),mz,yz(t)),this}function sge(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,o,l,c;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(o=i[r],a=o.sources.length;--a>=0;)o.sources[a].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)c=n[r].type,l=n[r].handler,this._handler.off(c,l);return this}function lr(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const lge="vega-bind",uge="vega-bind-name",cge="vega-bind-radio";function fge(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,o)})}},i.debounce&&(r.update=AC(i.debounce,r.update))),(i.input==null&&i.element?dge:gge)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function dge(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),iI(i,t,r,a),e.set=o=>{t.value=o,t.dispatchEvent(hge(r))}}function hge(e){return typeof Event<"u"?new Event(e):{type:e}}function gge(e,t,n,i){const r=i.signal(n.signal),a=lr("div",{class:lge}),o=n.input==="radio"?a:a.appendChild(lr("label"));o.appendChild(lr("span",{class:uge},n.name||n.signal)),t.appendChild(a);let l=pge;switch(n.input){case"checkbox":l=mge;break;case"select":l=yge;break;case"radio":l=vge;break;case"range":l=bge;break}l(e,o,n,r)}function pge(e,t,n,i){const r=lr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function mge(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=lr("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=o=>a.checked=!!o||null}function yge(e,t,n,i){const r=lr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((o,l)=>{const c={value:o};mv(o,i)&&(c.selected=!0),r.appendChild(lr("option",c,(a[l]||o)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=o=>{for(let l=0,c=n.options.length;l<c;++l)if(mv(n.options[l],o)){r.selectedIndex=l;return}}}function vge(e,t,n,i){const r=lr("span",{class:cge}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((o,l)=>{const c={type:"radio",name:n.signal,value:o};mv(o,i)&&(c.checked=!0);const f=lr("input",c);f.addEventListener("change",()=>e.update(o));const d=lr("label",{},(a[l]||o)+"");return d.prepend(f),r.appendChild(d),f}),e.set=o=>{const l=e.elements,c=l.length;for(let f=0;f<c;++f)mv(l[f].value,o)&&(l[f].checked=!0)}}function bge(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,o=n.step||gl(a,r,100),l=lr("input",{type:"range",name:n.signal,min:a,max:r,step:o});l.value=i;const c=lr("span",{},+i);t.appendChild(l),t.appendChild(c);const f=()=>{c.textContent=l.value,e.update(+l.value)};l.addEventListener("input",f),l.addEventListener("change",f),e.elements=[l],e.set=d=>{l.value=d,c.textContent=d}}function mv(e,t){return e===t||e+""==t+""}function rI(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,tI(e),nI(e),Ib(e),r,a).background(e.background())}function HT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function xge(e,t,n,i){const r=new i(e.loader(),HT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Ib(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function Sge(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=Tb(i);e=n._el=e?d_(n,e,!0):null,Ghe(n),a||n.error("Unrecognized renderer type: "+i);const o=a.handler||n0,l=e?a.renderer:a.headless;return n._renderer=l?rI(n,n._renderer,e,l):null,n._handler=xge(n,n._handler,e,o),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=d_(n,t,!0):e.appendChild(lr("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&r!=="container"&&(c.element=d_(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{fge(n,c.element||t,c)})),n}function d_(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const dg=e=>+e||0,Ege=e=>({top:e,bottom:e,left:e,right:e});function vz(e){return xe(e)?{top:dg(e.top),bottom:dg(e.bottom),left:dg(e.left),right:dg(e.right)}:Ege(dg(e))}async function GT(e,t,n,i){const r=Tb(t),a=r&&r.headless;return a||ee("Unrecognized renderer type: "+t),await e.runAsync(),rI(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function _ge(e,t){e!==tl.Canvas&&e!==tl.SVG&&e!==tl.PNG&&ee("Unrecognized image type: "+e);const n=await GT(this,e,t);return e===tl.SVG?wge(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function wge(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Age(e,t){return(await GT(this,tl.Canvas,e,t)).canvas()}async function Cge(e){return(await GT(this,tl.SVG,e)).svg()}function $ge(e,t,n){return Kj(e,Zf,Ap,n).parse(t)}function Tge(e){var t=this._runtime.scales;return _e(t,e)||ee("Unrecognized scale or projection: "+e),t[e].value}var aI="width",oI="height",YT="padding",bz={skip:!0};function sI(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===YT?i.left+i.right:0)}function lI(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===YT?i.top+i.bottom:0)}function Mge(e){var t=e._signals,n=t[aI],i=t[oI],r=t[YT];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,l=>{e._width=l.size,e._viewWidth=sI(e,l.size),a()},{size:n}),e._resizeHeight=e.add(null,l=>{e._height=l.size,e._viewHeight=lI(e,l.size),a()},{size:i});const o=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=r.rank+1}function kge(e,t,n,i,r,a){this.runAfter(o=>{let l=0;o._autosize=0,o.width()!==n&&(l=1,o.signal(aI,n,bz),o._resizeWidth.skip(!0)),o.height()!==i&&(l=1,o.signal(oI,i,bz),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==r[0]||o._origin[1]!==r[1])&&(o._resize=1,o._origin=r),l&&o.run("enter"),a&&o.runAfter(c=>c.resize())},!1,1)}function Oge(e){return this._runtime.getState(e||{data:Dge,signals:Nge,recurse:!0})}function Dge(e,t){return t.modified&&ie(t.input.value)&&!e.startsWith("_:vega:_")}function Nge(e,t){return!(e==="parent"||t instanceof Zf.proxy)}function Rge(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function zge(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(ale(n,t))}function Fge(e,t,n,i){const r=e.element();r&&r.setAttribute("title",Lge(i))}function Lge(e){return e==null?"":ie(e)?uI(e):xe(e)&&!sl(e)?Uge(e):e+""}function Uge(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ie(n)?uI(n):cI(n))}).join(`
`)}function uI(e){return"["+e.map(cI).join(", ")+"]"}function cI(e){return ie(e)?"[]":xe(e)&&!sl(e)?"{}":e}function Bge(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function fI(e,t){const n=this;if(t=t||{},zf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=Pe({},e.locale,t.locale);n.locale(s7(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||tl.Canvas,n._scenegraph=new aB;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Fge,n._redraw=!0,n._handler=new n0().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=ige(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=$ge(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:Pe({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=sI(n,n._width),n._viewHeight=lI(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Mge(n),Yhe(n),Xhe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function v1(e,t){return _e(e._signals,t)?e._signals[t]:ee("Unrecognized signal name: "+ge(t))}function dI(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function xz(e,t,n,i){let r=dI(n,i);return r||(r=HT(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function Sz(e,t,n){const i=dI(t,n);return i&&t._targets.remove(i),e}ye(fI,zf,{async evaluate(e,t,n){if(await zf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Zhe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&N1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&eI(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=v1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",vz(e)):vz(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Tb(e)||ee("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(zf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(v1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:kge,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=HT(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return xz(this,e,v1(this,e),t)},removeSignalListener(e,t){return Sz(this,v1(this,e),t)},addDataListener(e,t){return xz(this,e,pv(this,e).values,t)},removeDataListener(e,t){return Sz(this,pv(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=$A(this,null);this._globalCursor=!!e,t&&$A(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:zge,events:age,finalize:sge,hover:oge,data:Vhe,change:jb,insert:Whe,remove:Qhe,scale:Tge,initialize:Sge,toImageURL:_ge,toCanvas:Age,toSVG:Cge,getState:Oge,setState:Rge,_watchPixelRatio:Bge});const qge="view",yv="[",vv="]",hI="{",gI="}",jge=":",pI=",",Ige="@",Pge=">",Hge=/[[\]{}]/,Gge={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let mI,yI;function Nl(e,t,n){return mI=t||qge,yI=n||Gge,vI(e.trim()).map(TA)}function Yge(e){return yI[e]}function tp(e,t,n,i,r){const a=e.length;let o=0,l;for(;t<a;++t){if(l=e[t],!o&&l===n)return t;r&&r.includes(l)?--o:i&&i.includes(l)&&++o}return t}function vI(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=tp(e,r,pI,yv+hI,vv+gI),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function TA(e){return e[0]==="["?Xge(e):Vge(e)}function Xge(e){const t=e.length;let n=1,i;if(n=tp(e,n,vv,yv,vv),n===t)throw"Empty between selector: "+e;if(i=vI(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Pge)throw"Expected '>' after between selector: "+e;i=i.map(TA);const r=TA(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function Vge(e){const t={source:mI},n=[];let i=[0,0],r=0,a=0,o=e.length,l=0,c,f;if(e[o-1]===gI){if(l=e.lastIndexOf(hI),l>=0){try{i=Wge(e.substring(l+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,l).trim(),o=e.length}else throw"Unmatched right brace: "+e;l=0}if(!o)throw e;if(e[0]===Ige&&(r=++l),c=tp(e,l,jge),c<o&&(n.push(e.substring(a,c).trim()),a=l=++c),l=tp(e,l,yv),l===o)n.push(e.substring(a,o).trim());else if(n.push(e.substring(a,l).trim()),f=[],a=++l,a===o)throw"Unmatched left bracket: "+e;for(;l<o;){if(l=tp(e,l,vv),l===o)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,l).trim()),l<o-1&&e[++l]!==yv)throw"Expected left bracket: "+e;a=++l}if(!(o=n.length)||Hge.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],r?t.markname=n[0].slice(1):Yge(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function Wge(e){const t=e.split(pI);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function Qge(e){return xe(e)?e:{type:e||"pad"}}const hg=e=>+e||0,Zge=e=>({top:e,bottom:e,left:e,right:e});function Kge(e){return xe(e)?e.signal?e:{top:hg(e.top),bottom:hg(e.bottom),left:hg(e.left),right:hg(e.right)}:Zge(hg(e))}const wn=e=>xe(e)&&!ie(e)?Pe({},e):{value:e};function Ez(e,t,n,i){return n!=null?(xe(n)&&!ie(n)||ie(n)&&n.length&&xe(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function jn(e,t,n){for(const i in t)Ez(e,i,t[i]);for(const i in n)Ez(e,i,n[i],"update")}function Hd(e,t,n){for(const i in t)n&&_e(n,i)||(e[i]=Pe(e[i]||{},t[i]));return e}function Cf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const XT="mark",VT="frame",WT="scope",Jge="axis",epe="axis-domain",tpe="axis-grid",npe="axis-label",ipe="axis-tick",rpe="axis-title",ape="legend",ope="legend-band",spe="legend-entry",lpe="legend-gradient",bI="legend-label",upe="legend-symbol",cpe="legend-title",fpe="title",dpe="title-text",hpe="title-subtitle";function gpe(e,t,n,i,r){const a={},o={};let l,c,f,d;c="lineBreak",t==="text"&&r[c]!=null&&!Cf(c,e)&&h_(a,c,r[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===VT?r.group:n===XT?Pe({},r.mark,r[t]):null;for(c in d)f=Cf(c,e)||(c==="fill"||c==="stroke")&&(Cf("fill",e)||Cf("stroke",e)),f||h_(a,c,d[c]);Ee(i).forEach(g=>{const p=r.style&&r.style[g];for(const y in p)Cf(y,e)||h_(a,y,p[y])}),e=Pe({},e);for(c in a)d=a[c],d.signal?(l=l||{})[c]=d:o[c]=d;return e.enter=Pe(o,e.enter),l&&(e.update=Pe(l,e.update)),e}function h_(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const xI=e=>Se(e)?ge(e):e.signal?`(${e.signal})`:SI(e);function Pb(e){if(e.gradient!=null)return mpe(e);let t=e.signal?`(${e.signal})`:e.color?ppe(e.color):e.field!=null?SI(e.field):e.value!==void 0?ge(e.value):void 0;return e.scale!=null&&(t=ype(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Z1(e.exponent)})`),e.mult!=null&&(t+=`*${Z1(e.mult)}`),e.offset!=null&&(t+=`+${Z1(e.offset)}`),e.round&&(t=`round(${t})`),t}const b1=(e,t,n,i)=>`(${e}(${[t,n,i].map(Pb).join(",")})+'')`;function ppe(e){return e.c?b1("hcl",e.h,e.c,e.l):e.h||e.s?b1("hsl",e.h,e.s,e.l):e.l||e.a?b1("lab",e.l,e.a,e.b):e.r||e.g||e.b?b1("rgb",e.r,e.g,e.b):null}function mpe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ge(n));for(;t.length&&it(t)==null;)t.pop();return t.unshift(xI(e.gradient)),`gradient(${t.join(",")})`}function Z1(e){return xe(e)?"("+Pb(e)+")":e}function SI(e){return EI(xe(e)?e:{datum:e})}function EI(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):ee("Invalid field reference: "+ge(e));return e.signal||(i=Se(i)?to(i).map(ge).join("]["):EI(i)),t+"["+i+"]"}function ype(e,t){const n=xI(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Z1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function vpe(e){let t="";return e.forEach(n=>{const i=Pb(n);t+=n.test?`(${n.test})?${i}:`:i}),it(t)===":"&&(t+="null"),t}function _I(e,t,n,i,r,a){const o={};a=a||{},a.encoders={$encode:o},e=gpe(e,t,n,i,r.config);for(const l in e)o[l]=bpe(e[l],t,a,r);return a}function bpe(e,t,n,i){const r={},a={};for(const o in e)e[o]!=null&&(r[o]=Spe(xpe(e[o]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function xpe(e){return ie(e)?vpe(e):Pb(e)}function Spe(e,t,n,i){const r=Za(e,t);return r.$fields.forEach(a=>i[a]=1),Pe(n,r.$params),r.$expr}const Epe="outer",_pe=["value","update","init","react","bind"];function _z(e,t){ee(e+' for "outer" push: '+ge(t))}function wI(e,t){const n=e.name;if(e.push===Epe)t.signals[n]||_z("No prior signal definition",n),_pe.forEach(i=>{e[i]!==void 0&&_z("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function MA(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function Hb(e,t,n,i){return new MA(e,t,n,i)}function bv(e,t){return Hb("operator",e,t)}function Te(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Cp(e,t){return t?{$field:e,$name:t}:{$field:e}}const kA=Cp("key");function wz(e,t){return{$compare:e,$order:t}}function wpe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Ape="ascending",Cpe="descending";function $pe(e){return xe(e)?(e.order===Cpe?"-":"+")+Gb(e.op,e.field):""}function Gb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const QT="scope",OA="view";function pn(e){return e&&e.signal}function Tpe(e){return e&&e.expr}function K1(e){if(pn(e))return!0;if(xe(e)){for(const t in e)if(K1(e[t]))return!0}return!1}function Jr(e,t){return e??t}function Ru(e){return e&&e.signal||e}const Az="timer";function $p(e,t){return(e.merge?kpe:e.stream?Ope:e.type?Dpe:ee("Invalid stream specification: "+ge(e)))(e,t)}function Mpe(e){return e===QT?OA:e||OA}function kpe(e,t){const n=e.merge.map(r=>$p(r,t)),i=ZT({merge:n},e,t);return t.addStream(i).id}function Ope(e,t){const n=$p(e.stream,t),i=ZT({stream:n},e,t);return t.addStream(i).id}function Dpe(e,t){let n;e.type===Az?(n=t.event(Az,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Mpe(e.source),e.type);const i=ZT({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function ZT(e,t,n){let i=t.between;return i&&(i.length!==2&&ee('Stream "between" parameter must have 2 entries: '+ge(t)),e.between=[$p(i[0],n),$p(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(Npe(t.marktype,t.markname,t.markrole)),t.source===QT&&i.push("inScope(event.item)"),i.length&&(e.filter=Za("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function Npe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const Rpe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function zpe(e,t,n){const i=e.encode,r={target:n};let a=e.events,o=e.update,l=[];a||ee("Signal update missing events specification."),Se(a)&&(a=Nl(a,t.isSubscope()?QT:OA)),a=Ee(a).filter(c=>c.signal||c.scale?(l.push(c),0):1),l.length>1&&(l=[Lpe(l)]),a.length&&l.push(a.length>1?{merge:a}:a[0]),i!=null&&(o&&ee("Signal encode and update are mutually exclusive."),o="encode(item(),"+ge(i)+")"),r.update=Se(o)?Za(o,t):o.expr!=null?Za(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Rpe,$params:{$value:t.signalRef(o.signal)}}:ee("Invalid signal update specification."),e.force&&(r.options={force:!0}),l.forEach(c=>t.addUpdate(Pe(Fpe(c,t),r)))}function Fpe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):$p(e,t)}}function Lpe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Upe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?ee("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Za(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>zpe(r,t,n.id))}const wt=e=>(t,n,i)=>Hb(e,n,t||void 0,i),AI=wt("aggregate"),Bpe=wt("axisticks"),CI=wt("bound"),va=wt("collect"),Cz=wt("compare"),qpe=wt("datajoin"),$I=wt("encode"),jpe=wt("expression"),Ipe=wt("facet"),Ppe=wt("field"),Hpe=wt("key"),Gpe=wt("legendentries"),Ype=wt("load"),Xpe=wt("mark"),Vpe=wt("multiextent"),Wpe=wt("multivalues"),Qpe=wt("overlap"),Zpe=wt("params"),TI=wt("prefacet"),Kpe=wt("projection"),Jpe=wt("proxy"),e0e=wt("relay"),MI=wt("render"),t0e=wt("scale"),yc=wt("sieve"),n0e=wt("sortitems"),kI=wt("viewlayout"),i0e=wt("values");let r0e=0;const OI={min:"min",max:"max",count:"sum"};function a0e(e,t){const n=e.type||"linear";vU(n)||ee("Unrecognized scale type: "+ge(n)),t.addScale(e.name,{type:n,domain:void 0})}function o0e(e,t){const n=t.getScale(e.name).params;let i;n.domain=DI(e.domain,e,t),e.range!=null&&(n.range=RI(e,t,n)),e.interpolate!=null&&m0e(e.interpolate,n),e.nice!=null&&(n.nice=p0e(e.nice,t)),e.bins!=null&&(n.bins=g0e(e.bins,t));for(i in e)_e(n,i)||i==="name"||(n[i]=Or(e[i],t))}function Or(e,t){return xe(e)?e.signal?t.signalRef(e.signal):ee("Unsupported object: "+ge(e)):e}function J1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Or(n,t))}function Yb(e){ee("Can not find data set: "+ge(e))}function DI(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ee("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ie(e)?s0e:e.fields?u0e:l0e)(e,t,n)}function s0e(e,t,n){return e.map(i=>Or(i,n))}function l0e(e,t,n){const i=n.getData(e.data);return i||Yb(e.data),nd(t.type)?i.valuesRef(n,e.field,NI(e.sort,!1)):SU(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function u0e(e,t,n){const i=e.data,r=e.fields.reduce((a,o)=>(o=Se(o)?{data:i,field:o}:ie(o)||o.signal?c0e(o,n):o,a.push(o),a),[]);return(nd(t.type)?f0e:SU(t.type)?d0e:h0e)(e,n,r)}function c0e(e,t){const n="_:vega:_"+r0e++,i=va({});if(ie(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+ge(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,yc({})]),{data:n,field:"data"}}function f0e(e,t,n){const i=NI(e.sort,!0);let r,a;const o=n.map(f=>{const d=t.getData(f.data);return d||Yb(f.data),d.countsRef(t,f.field,i)}),l={groupby:kA,pulse:o};i&&(r=i.op||"count",a=i.field?Gb(r,i.field):"count",l.ops=[OI[r]],l.fields=[t.fieldRef(a)],l.as=[a]),r=t.add(AI(l));const c=t.add(va({pulse:Te(r)}));return a=t.add(i0e({field:kA,sort:t.sortRef(i),pulse:Te(c)})),Te(a)}function NI(e,t){return e&&(!e.field&&!e.op?xe(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ee("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!OI[e.op]&&ee("Multiple domain scales can not be sorted using "+e.op)),e}function d0e(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Yb(r.data),a.domainRef(t,r.field)});return Te(t.add(Wpe({values:i})))}function h0e(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Yb(r.data),a.extentRef(t,r.field)});return Te(t.add(Vpe({extents:i})))}function g0e(e,t){return e.signal||ie(e)?J1(e,t):t.objectProperty(e)}function p0e(e,t){return e.signal?t.signalRef(e.signal):xe(e)?{interval:Or(e.interval),step:Or(e.step)}:Or(e)}function m0e(e,t){t.interpolate=Or(e.type||e),e.gamma!=null&&(t.interpolateGamma=Or(e.gamma))}function RI(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Se(r)){if(i&&_e(i,r))return e=Pe({},e,{range:i[r]}),RI(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=nd(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ee("Unrecognized scale range value: "+ge(r))}else if(r.scheme){n.scheme=ie(r.scheme)?J1(r.scheme,t):Or(r.scheme,t),r.extent&&(n.schemeExtent=J1(r.extent,t)),r.count&&(n.schemeCount=Or(r.count,t));return}else if(r.step){n.rangeStep=Or(r.step,t);return}else{if(nd(e.type)&&!ie(r))return DI(r,e,t);ie(r)||ee("Unsupported range type: "+ge(r))}return r.map(a=>(ie(a)?J1:Or)(a,t))}function y0e(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=DA(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=DA(n[r],r,t));t.addProjection(e.name,i)}function DA(e,t,n){return ie(e)?e.map(i=>DA(i,t,n)):xe(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ee("Unsupported parameter object: "+ge(e)):e}const ba="top",Gd="left",Yd="right",El="bottom",zI="center",v0e="vertical",b0e="start",x0e="middle",S0e="end",NA="index",KT="label",E0e="offset",fd="perc",_0e="perc2",Nr="value",f0="guide-label",JT="guide-title",w0e="group-title",A0e="group-subtitle",$z="symbol",ey="gradient",RA="discrete",zA="size",C0e="shape",$0e="fill",T0e="stroke",M0e="strokeWidth",k0e="strokeDash",O0e="opacity",eM=[zA,C0e,$0e,T0e,M0e,k0e,O0e],d0={name:1,style:1,interactive:1},rt={value:0},Rr={value:1},Xb="group",FI="rect",tM="rule",D0e="symbol",vc="text";function Tp(e){return e.type=Xb,e.interactive=e.interactive||!1,e}function Ii(e,t){const n=(i,r)=>Jr(e[i],Jr(t[i],r));return n.isVertical=i=>v0e===Jr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Jr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Jr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Jr(e.columns,Jr(t.columns,+n.isVertical(!0))),n}function LI(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function N0e(e,t,n){const i=t.config.style[n];return i&&i[e]}function Vb(e,t,n){return`item.anchor === '${b0e}' ? ${e} : item.anchor === '${S0e}' ? ${t} : ${n}`}const nM=Vb(ge(Gd),ge(Yd),ge(zI));function R0e(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},xe(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function UI(e,t){return t?e?xe(e)?Object.assign({},e,{offset:UI(e.offset,t)}):{value:e,offset:t}:t:e}function gr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Hd(e.encode,t,d0)):e.interactive=!1,e}function z0e(e,t,n,i){const r=Ii(e,n),a=r.isVertical(),o=r.gradientThickness(),l=r.gradientLength();let c,f,d,g,p;a?(f=[0,1],d=[0,0],g=o,p=l):(f=[0,0],d=[1,0],g=l,p=o);const y={enter:c={opacity:rt,x:rt,y:rt,width:wn(g),height:wn(p)},update:Pe({},c,{opacity:Rr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:rt}};return jn(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),gr({type:FI,role:lpe,encode:y},i)}function F0e(e,t,n,i,r){const a=Ii(e,n),o=a.isVertical(),l=a.gradientThickness(),c=a.gradientLength();let f,d,g,p,y="";o?(f="y",g="y2",d="x",p="width",y="1-"):(f="x",g="x2",d="y",p="height");const v={opacity:rt,fill:{scale:t,field:Nr}};v[f]={signal:y+"datum."+fd,mult:c},v[d]=rt,v[g]={signal:y+"datum."+_0e,mult:c},v[p]=wn(l);const b={enter:v,update:Pe({},v,{opacity:Rr}),exit:{opacity:rt}};return jn(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),gr({type:FI,role:ope,key:Nr,from:r,encode:b},i)}const L0e=`datum.${fd}<=0?"${Gd}":datum.${fd}>=1?"${Yd}":"${zI}"`,U0e=`datum.${fd}<=0?"${El}":datum.${fd}>=1?"${ba}":"${x0e}"`;function Tz(e,t,n,i){const r=Ii(e,t),a=r.isVertical(),o=wn(r.gradientThickness()),l=r.gradientLength();let c=r("labelOverlap"),f,d,g,p,y="";const v={enter:f={opacity:rt},update:d={opacity:Rr,text:{field:KT}},exit:{opacity:rt}};return jn(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Jr(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:U0e},g="y",p="x",y="1-"):(f.align=d.align={signal:L0e},f.baseline={value:"top"},g="x",p="y"),f[g]=d[g]={signal:y+"datum."+fd,mult:l},f[p]=d[p]=o,o.offset=Jr(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:r("labelSeparation"),method:c,order:"datum."+NA}:void 0,gr({type:vc,role:bI,style:f0,key:Nr,from:i,encode:v,overlap:c},n)}function B0e(e,t,n,i,r){const a=Ii(e,t),o=n.entries,l=!!(o&&o.interactive),c=o?o.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),g={data:"value"},p=`(${r}) ? datum.${E0e} : datum.${zA}`,y=f?wn(f):{field:zA},v=`datum.${NA}`,b=`max(1, ${r})`;let S,_,w,A,$;y.mult=.5,S={enter:_={opacity:rt,x:{signal:p,mult:.5,offset:d},y},update:w={opacity:Rr,x:_.x,y:_.y},exit:{opacity:rt}};let M=null,k=null;e.fill||(M=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),jn(S,{fill:a("symbolFillColor",M),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",k),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),eM.forEach(B=>{e[B]&&(w[B]=_[B]={scale:e[B],field:Nr})});const T=gr({type:D0e,role:upe,key:Nr,from:g,clip:f?!0:void 0,encode:S},n.symbols),N=wn(d);N.offset=a("labelOffset"),S={enter:_={opacity:rt,x:{signal:p,offset:N},y},update:w={opacity:Rr,text:{field:KT},x:_.x,y:_.y},exit:{opacity:rt}},jn(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const R=gr({type:vc,role:bI,style:f0,key:Nr,from:g,encode:S},n.labels);return S={enter:{noBound:{value:!f},width:rt,height:f?wn(f):rt,opacity:rt},exit:{opacity:rt},update:w={opacity:Rr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,w.row.signal=`${v}%${A}`,w.column.signal=`floor(${v} / ${A})`,$={field:["row",v]}):(w.row.signal=`floor(${v} / ${b})`,w.column.signal=`${v} % ${b}`,$={field:v}),w.column.signal=`(${r})?${w.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:NA}},Tp({role:WT,from:i,encode:Hd(S,o,d0),marks:[T,R],name:c,interactive:l,sort:$})}function q0e(e,t){const n=Ii(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const iM='item.orient === "left"',rM='item.orient === "right"',Wb=`(${iM} || ${rM})`,j0e=`datum.vgrad && ${Wb}`,I0e=Vb('"top"','"bottom"','"middle"'),P0e=Vb('"right"','"left"','"center"'),H0e=`datum.vgrad && ${rM} ? (${P0e}) : (${Wb} && !(datum.vgrad && ${iM})) ? "left" : ${nM}`,G0e=`item._anchor || (${Wb} ? "middle" : "start")`,Y0e=`${j0e} ? (${iM} ? -90 : 90) : 0`,X0e=`${Wb} ? (datum.vgrad ? (${rM} ? "bottom" : "top") : ${I0e}) : "top"`;function V0e(e,t,n,i){const r=Ii(e,t),a={enter:{opacity:rt},update:{opacity:Rr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:rt}};return jn(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:G0e},angle:{signal:Y0e},align:{signal:H0e},baseline:{signal:X0e},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),gr({type:vc,role:cpe,style:JT,from:i,encode:a},n)}function W0e(e,t){let n;return xe(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Mz(e.path)+")":e.sphere&&(n="geoShape("+Mz(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Mz(e){return xe(e)&&e.signal?e.signal:ge(e)}function BI(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Xb?WT:t||XT}function Q0e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||BI(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Z0e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function aM(e,t){const n=x7(e.type);n||ee("Unrecognized transform type: "+ge(e.type));const i=Hb(n.type.toLowerCase(),null,qI(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function qI(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const o=e.params[a];i[o.name]=K0e(o,t,n)}return i}function K0e(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return J0e(e,t,n);if(r===void 0){e.required&&ee("Missing required "+ge(t.type)+" parameter: "+ge(e.name));return}else{if(i==="param")return eme(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!pn(r)?r.map(a=>kz(e,a,n)):kz(e,r,n)}function kz(e,t,n){const i=e.type;if(pn(t))return Dz(i)?ee("Expression references can not be signals."):g_(i)?n.fieldRef(t):Nz(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||g_(i);return r&&tme(t)?n.exprRef(t.expr,t.as):r&&nme(t)?Cp(t.field,t.as):Dz(i)?Za(t,n):ime(i)?Te(n.getData(t).values):g_(i)?Cp(t):Nz(i)?n.compareRef(t):t}}function J0e(e,t,n){return Se(t.from)||ee('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function eme(e,t,n){const i=t[e.name];return e.array?(ie(i)||ee("Expected an array of sub-parameters. Instead: "+ge(i)),i.map(r=>Oz(e,r,n))):Oz(e,i,n)}function Oz(e,t,n){const i=e.params.length;let r;for(let o=0;o<i;++o){r=e.params[o];for(const l in r.key)if(r.key[l]!==t[l]){r=null;break}if(r)break}r||ee("Unsupported parameter: "+ge(t));const a=Pe(qI(r,t,n),r.key);return Te(n.add(Zpe(a)))}const tme=e=>e&&e.expr,nme=e=>e&&e.field,ime=e=>e==="data",Dz=e=>e==="expr",g_=e=>e==="field",Nz=e=>e==="compare";function rme(e,t,n){let i,r,a,o,l;return e?(i=e.facet)&&(t||ee("Only group marks can be faceted."),i.field!=null?o=l=ty(i,n):(e.data?l=Te(n.getData(e.data).aggregate):(a=aM(Pe({type:"aggregate",groupby:Ee(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=ty(i,n),o=l=Te(n.add(a))),r=n.keyRef(i.groupby,!0))):o=Te(n.add(va(null,[{}]))),o||(o=ty(e,n)),{key:r,pulse:o,parent:l}}function ty(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Te(t.getData(e.data).output)}function Zu(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}Zu.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],o=null,l=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);l<n;++l)t[l].params.pulse=Te(t[l-1]),e.add(t[l]),t[l].type==="aggregate"&&(o=t[l]);return new Zu(e,a,r,i,o)};function jI(e){return Se(e)?e:null}function Rz(e,t,n){const i=Gb(n.op,n.field);let r;if(t.ops){for(let a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function gg(e,t,n,i,r,a,o){const l=t[n]||(t[n]={}),c=$pe(a);let f=jI(r),d,g;if(f!=null&&(e=t.scope,f=f+(c?"|"+c:""),d=l[f]),!d){const p=a?{field:kA,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Te(t.output)};c&&(p.sort=e.sortRef(a)),g=e.add(Hb(i,void 0,p)),o&&(t.index[r]=g),d=Te(g),f!=null&&(l[f]=d)}return d}Zu.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=jI(t);let o,l,c;return a!=null&&(e=i.scope,o=r[a]),o?n&&n.field&&Rz(e,o.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:Te(i.output)},n&&n.field&&Rz(e,c,n),l=e.add(AI(c)),o=e.add(va({pulse:Te(l)})),o={agg:l,ref:Te(o)},a!=null&&(r[a]=o)),o.ref},tuplesRef(){return Te(this.values)},extentRef(e,t){return gg(e,this,"extent","extent",t,!1)},domainRef(e,t){return gg(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return gg(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return gg(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return gg(e,this,"indata","tupleindex",t,!0,!0)}};function ame(e,t,n){const i=e.from.facet,r=i.name,a=ty(i,t);let o;i.name||ee("Facet must have a name: "+ge(i)),i.data||ee("Facet must reference a data set: "+ge(i)),i.field?o=t.add(TI({field:t.fieldRef(i.field),pulse:a})):i.groupby?o=t.add(Ipe({key:t.keyRef(i.groupby),group:Te(t.proxy(n.parent)),pulse:a})):ee("Facet must specify groupby or field: "+ge(i));const l=t.fork(),c=l.add(va()),f=l.add(yc({pulse:Te(c)}));l.addData(r,new Zu(l,c,c,f)),l.addSignal("parent",null),o.params.subflow={$subflow:l.parse(e).toRuntime()}}function ome(e,t,n){const i=t.add(TI({pulse:n.pulse})),r=t.fork();r.add(yc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function II(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,o=e.modify,l=e.values,c=t.add(bv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,o,l].map(g=>g??"null").join(",")+"),0)",d=Za(f,t);c.update=d.$expr,c.params=d.$params}function Qb(e,t){const n=BI(e),i=e.type===Xb,r=e.from&&e.from.facet,a=e.overlap;let o=e.layout||n===WT||n===VT,l,c,f,d,g,p,y;const v=n===XT||o||r,b=rme(e.from,i,t);c=t.add(qpe({key:b.key||(e.key?Cp(e.key):void 0),pulse:b.pulse,clean:!i}));const S=Te(c);c=f=t.add(va({pulse:S})),c=t.add(Xpe({markdef:Q0e(e),interactive:Z0e(e.interactive,t),clip:W0e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Te(c)}));const _=Te(c);c=d=t.add($I(_I(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const T=aM(k,t),N=T.metadata;(N.generates||N.changes)&&ee("Mark transforms should not generate new data."),N.nomod||(d.params.mod=!0),T.params.pulse=Te(c),t.add(c=T)}),e.sort&&(c=t.add(n0e({sort:t.compareRef(e.sort),pulse:Te(c)})));const w=Te(c);(r||o)&&(o=t.add(kI({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:w})),p=Te(o));const A=t.add(CI({mark:_,pulse:p||w}));y=Te(A),i&&(v&&(l=t.operators,l.pop(),o&&l.pop()),t.pushState(w,p||y,S),r?ame(e,t,b):v?ome(e,t,b):t.parse(e),t.popState(),v&&(o&&l.push(o),l.push(A))),a&&(y=sme(a,y,t));const $=t.add(MI({pulse:y})),M=t.add(yc({pulse:Te($)},void 0,t.parent()));e.name!=null&&(g=e.name,t.addData(g,new Zu(t,f,$,M)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&ee("Marks only support modify triggers."),II(k,t,g)}))}function sme(e,t,n){const i=e.method,r=e.bound,a=e.separation,o={separation:pn(a)?n.signalRef(a.signal):a,method:pn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),r){const l=r.tolerance;o.boundTolerance=pn(l)?n.signalRef(l.signal):+l,o.boundScale=n.scaleRef(r.scale),o.boundOrient=r.orient}return Te(n.add(Qpe(o)))}function lme(e,t){const n=t.config.legend,i=e.encode||{},r=Ii(e,n),a=i.legend||{},o=a.name||void 0,l=a.interactive,c=a.style,f={};let d=0,g,p,y;eM.forEach(A=>e[A]?(f[A]=e[A],d=d||e[A]):0),d||ee("Missing valid scale for legend.");const v=ume(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},S=Te(t.add(va(null,[b]))),_={enter:{x:{value:0},y:{value:0}}},w=Te(t.add(Gpe(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===ey?(y=[z0e(e,d,n,i.gradient),Tz(e,n,i.labels,w)],p.count=p.count||t.signalRef(`max(2,2*floor((${Ru(r.gradientLength())})/100))`)):v===RA?y=[F0e(e,d,n,i.gradient,w),Tz(e,n,i.labels,w)]:(g=q0e(e,n),y=[B0e(e,n,i,w,Ru(g.columns))],p.size=dme(e,t,y[0].marks)),y=[Tp({role:spe,from:S,encode:_,marks:y,layout:g,interactive:l})],b.title&&y.push(V0e(e,n,i.title,S)),Qb(Tp({role:ape,from:S,encode:Hd(fme(r,e,n),a,d0),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:o,interactive:l,style:c}),t)}function ume(e,t){let n=e.type||$z;return!e.type&&cme(e)===1&&(e.fill||e.stroke)&&(n=a$(t)?ey:Cw(t)?RA:$z),n!==ey?n:Cw(t)?RA:ey}function cme(e){return eM.reduce((t,n)=>t+(e[n]?1:0),0)}function fme(e,t,n){const i={enter:{},update:{}};return jn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function dme(e,t,n){const i=Ru(zz("size",e,n)),r=Ru(zz("strokeWidth",e,n)),a=Ru(hme(n[1].encode,t,f0));return Za(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function zz(e,t,n){return t[e]?`scale("${t[e]}",datum)`:LI(e,n[0].encode)}function hme(e,t,n){return LI("fontSize",e)||N0e("fontSize",t,n)}const gme=`item.orient==="${Gd}"?-90:item.orient==="${Yd}"?90:0`;function pme(e,t){e=Se(e)?{text:e}:e;const n=Ii(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,o=r.interactive,l=r.style,c=[],f={},d=Te(t.add(va(null,[f])));return c.push(vme(e,n,mme(e),d)),e.subtitle&&c.push(bme(e,n,i.subtitle,d)),Qb(Tp({role:fpe,from:d,encode:yme(n,r),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:o,style:l}),t)}function mme(e){const t=e.encode;return t&&t.title||Pe({name:e.name,interactive:e.interactive,style:e.style},t)}function yme(e,t){const n={enter:{},update:{}};return jn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:nM},angle:{signal:gme},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Hd(n,t,d0)}function vme(e,t,n,i){const r={value:0},a=e.text,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return jn(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),gr({type:vc,role:dpe,style:w0e,from:i,encode:o},n)}function bme(e,t,n,i){const r={value:0},a=e.subtitle,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return jn(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),gr({type:vc,role:hpe,style:A0e,from:i,encode:o},n)}function xme(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(aM(i,t))}),e.on&&e.on.forEach(i=>{II(i,t,e.name)}),t.addDataPipeline(e.name,Sme(e,t,n))}function Sme(e,t,n){const i=[];let r=null,a=!1,o=!1,l,c,f,d,g;for(e.values?pn(e.values)||K1(e.format)?(i.push(Fz(t,e)),i.push(r=lu())):i.push(r=lu({$ingest:e.values,$format:e.format})):e.url?K1(e.url)||K1(e.format)?(i.push(Fz(t,e)),i.push(r=lu())):i.push(r=lu({$request:e.url,$format:e.format})):e.source&&(r=l=Ee(e.source).map(p=>Te(t.getData(p).output)),i.push(null)),c=0,f=n.length;c<f;++c)d=n[c],g=d.metadata,!r&&!g.source&&i.push(r=lu()),i.push(d),g.generates&&(o=!0),g.modifies&&!o&&(a=!0),g.source?r=d:g.changes&&(r=null);return l&&(f=l.length-1,i[0]=e0e({derive:a,pulse:f?l:l[0]}),(a||f)&&i.splice(1,0,lu())),r||i.push(lu()),i.push(yc({})),i}function lu(e){const t=va({},e);return t.metadata={source:!0},t}function Fz(e,t){return Ype({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const PI=e=>e===El||e===ba,Zb=(e,t,n)=>pn(e)?Ame(e.signal,t,n):e===Gd||e===ba?t:n,An=(e,t,n)=>pn(e)?_me(e.signal,t,n):PI(e)?t:n,la=(e,t,n)=>pn(e)?wme(e.signal,t,n):PI(e)?n:t,HI=(e,t,n)=>pn(e)?Cme(e.signal,t,n):e===ba?{value:t}:{value:n},Eme=(e,t,n)=>pn(e)?$me(e.signal,t,n):e===Yd?{value:t}:{value:n},_me=(e,t,n)=>GI(`${e} === '${ba}' || ${e} === '${El}'`,t,n),wme=(e,t,n)=>GI(`${e} !== '${ba}' && ${e} !== '${El}'`,t,n),Ame=(e,t,n)=>oM(`${e} === '${Gd}' || ${e} === '${ba}'`,t,n),Cme=(e,t,n)=>oM(`${e} === '${ba}'`,t,n),$me=(e,t,n)=>oM(`${e} === '${Yd}'`,t,n),GI=(e,t,n)=>(t=t!=null?wn(t):t,n=n!=null?wn(n):n,Lz(t)&&Lz(n)?(t=t?t.signal||ge(t.value):null,n=n?n.signal||ge(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Pe({test:e},t)].concat(n||[])),Lz=e=>e==null||Object.keys(e).length===1,oM=(e,t,n)=>({signal:`${e} ? (${Nf(t)}) : (${Nf(n)})`}),Tme=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Gd}' ? (${Nf(i)}) : `:"")+(n!=null?`${e} === '${El}' ? (${Nf(n)}) : `:"")+(r!=null?`${e} === '${Yd}' ? (${Nf(r)}) : `:"")+(t!=null?`${e} === '${ba}' ? (${Nf(t)}) : `:"")+"(null)"}),Nf=e=>pn(e)?e.signal:e==null?null:ge(e),Mme=(e,t)=>t===0?0:pn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Bf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Sf(e,t,n,i){let r;if(t&&_e(t,e))return t[e];if(_e(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[JT][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[f0][r]}return null}function Uz(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function kme(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,l,c,f;if(pn(o)){const g=Uz([n.axisX,n.axisY]),p=Uz([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);l={};for(f of g)l[f]=An(o,Sf(f,n.axisX,r,i),Sf(f,n.axisY,r,i));c={};for(f of p)c[f]=Tme(o.signal,Sf(f,n.axisTop,r,i),Sf(f,n.axisBottom,r,i),Sf(f,n.axisLeft,r,i),Sf(f,n.axisRight,r,i))}else l=o===ba||o===El?n.axisX:n.axisY,c=n["axis"+o[0].toUpperCase()+o.slice(1)];return l||c||a?Pe({},r,l,c,a):r}function Ome(e,t,n,i){const r=Ii(e,t),a=e.orient;let o,l;const c={enter:o={opacity:rt},update:l={opacity:Rr},exit:{opacity:rt}};jn(c,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=Bz(e,0),d=Bz(e,1);return o.x=l.x=An(a,f,rt),o.x2=l.x2=An(a,d),o.y=l.y=la(a,f,rt),o.y2=l.y2=la(a,d),gr({type:tM,role:epe,from:i,encode:c},n)}function Bz(e,t){return{scale:e.scale,range:t}}function Dme(e,t,n,i,r){const a=Ii(e,t),o=e.orient,l=e.gridScale,c=Zb(o,1,-1),f=Nme(e.offset,c);let d,g,p;const y={enter:d={opacity:rt},update:p={opacity:Rr},exit:g={opacity:rt}};jn(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:Nr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=An(o,{signal:"height"},{signal:"width"}),S=l?{scale:l,range:0,mult:c,offset:f}:{value:0,offset:f},_=l?{scale:l,range:1,mult:c,offset:f}:Pe(b,{mult:c,offset:f});return d.x=p.x=An(o,v,S),d.y=p.y=la(o,v,S),d.x2=p.x2=la(o,_),d.y2=p.y2=An(o,_),g.x=An(o,v),g.y=la(o,v),gr({type:tM,role:tpe,key:Nr,from:i,encode:y},n)}function Nme(e,t){if(t!==1)if(!xe(e))e=pn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Pe({},e);for(;n.mult!=null;)if(xe(n.mult))n=n.mult=Pe({},n.mult);else return n.mult=pn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Rme(e,t,n,i,r,a){const o=Ii(e,t),l=e.orient,c=Zb(l,-1,1);let f,d,g;const p={enter:f={opacity:rt},update:g={opacity:Rr},exit:d={opacity:rt}};jn(p,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const y=wn(r);y.mult=c;const v={scale:e.scale,field:Nr,band:a.band,extra:a.extra,offset:a.offset,round:o("tickRound")};return g.y=f.y=An(l,rt,v),g.y2=f.y2=An(l,y),d.x=An(l,v),g.x=f.x=la(l,rt,v),g.x2=f.x2=la(l,y),d.y=la(l,v),gr({type:tM,role:ipe,key:Nr,from:i,encode:p},n)}function p_(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function zme(e,t,n,i,r,a){const o=Ii(e,t),l=e.orient,c=e.scale,f=Zb(l,-1,1),d=Ru(o("labelFlush")),g=Ru(o("labelFlushOffset")),p=o("labelAlign"),y=o("labelBaseline");let v=d===0||!!d,b;const S=wn(r);S.mult=f,S.offset=wn(o("labelPadding")||0),S.offset.mult=f;const _={scale:c,field:Nr,band:.5,offset:UI(a.offset,o("labelOffset"))},w=An(l,v?p_(c,d,'"left"','"right"','"center"'):{value:"center"},Eme(l,"left","right")),A=An(l,HI(l,"bottom","top"),v?p_(c,d,'"top"','"bottom"','"middle"'):{value:"middle"}),$=p_(c,d,`-(${g})`,g,0);v=v&&g;const M={opacity:rt,x:An(l,_,S),y:la(l,_,S)},k={enter:M,update:b={opacity:Rr,text:{field:KT},x:M.x,y:M.y,align:w,baseline:A},exit:{opacity:rt,x:M.x,y:M.y}};jn(k,{dx:!p&&v?An(l,$):null,dy:!y&&v?la(l,$):null}),jn(k,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:p,baseline:y});const T=o("labelBound");let N=o("labelOverlap");return N=N||T?{separation:o("labelSeparation"),method:N,order:"datum.index",bound:T?{scale:c,orient:l,tolerance:T}:null}:void 0,b.align!==w&&(b.align=Bf(b.align,w)),b.baseline!==A&&(b.baseline=Bf(b.baseline,A)),gr({type:vc,role:npe,style:f0,key:Nr,from:i,encode:k,overlap:N},n)}function Fme(e,t,n,i){const r=Ii(e,t),a=e.orient,o=Zb(a,-1,1);let l,c;const f={enter:l={opacity:rt,anchor:wn(r("titleAnchor",null)),align:{signal:nM}},update:c=Pe({},l,{opacity:Rr,text:wn(e.title)}),exit:{opacity:rt}},d={signal:`lerp(range("${e.scale}"), ${Vb(0,1,.5)})`};return c.x=An(a,d),c.y=la(a,d),l.angle=An(a,rt,Mme(o,90)),l.baseline=An(a,HI(a,El,ba),{value:El}),c.angle=l.angle,c.baseline=l.baseline,jn(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),Lme(r,a,f,n),f.update.align=Bf(f.update.align,l.align),f.update.angle=Bf(f.update.angle,l.angle),f.update.baseline=Bf(f.update.baseline,l.baseline),gr({type:vc,role:rpe,style:JT,from:i,encode:f},n)}function Lme(e,t,n,i){const r=(l,c)=>l!=null?(n.update[c]=Bf(wn(l),n.update[c]),!1):!Cf(c,i),a=r(e("titleX"),"x"),o=r(e("titleY"),"y");n.enter.auto=o===a?wn(o):An(t,wn(o),wn(a))}function Ume(e,t){const n=kme(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,o=r.interactive,l=r.style,c=Ii(e,n),f=R0e(c),d={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},g=Te(t.add(va({},[d]))),p=Te(t.add(Bpe({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(Dme(e,n,i.grid,p,f)),d.ticks&&(v=c("tickSize"),y.push(Rme(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(zme(e,n,i.labels,p,v,f))),d.domain&&y.push(Ome(e,n,i.domain,g)),d.title&&y.push(Fme(e,n,i.title,g)),Qb(Tp({role:Jge,from:g,encode:Hd(Bme(c,e),r,d0),marks:y,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:a,interactive:o,style:l}),t)}function Bme(e,t){const n={enter:{},update:{}};return jn(n,{orient:e("orient"),offset:e("offset")||0,position:Jr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function YI(e,t,n){const i=Ee(e.signals),r=Ee(e.scales);return n||i.forEach(a=>wI(a,t)),Ee(e.projections).forEach(a=>y0e(a,t)),r.forEach(a=>a0e(a,t)),Ee(e.data).forEach(a=>xme(a,t)),r.forEach(a=>o0e(a,t)),(n||i).forEach(a=>Upe(a,t)),Ee(e.axes).forEach(a=>Ume(a,t)),Ee(e.marks).forEach(a=>Qb(a,t)),Ee(e.legends).forEach(a=>lme(a,t)),e.title&&pme(e.title,t),t.parseLambdas(),t}const qme=e=>Hd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function jme(e,t){const n=t.config,i=Te(t.root=t.add(bv())),r=Ime(e,n);r.forEach(f=>wI(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(va()),o=t.add($I(_I(qme(e.encode),Xb,VT,e.style,t,{pulse:Te(a)}))),l=t.add(kI({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Te(o)}));t.operators.pop(),t.pushState(Te(o),Te(l),null),YI(e,t,r),t.operators.push(l);let c=t.add(CI({mark:i,pulse:Te(l)}));return c=t.add(MI({pulse:Te(c)})),c=t.add(yc({pulse:Te(c)})),t.addData("root",new Zu(t,a,a,c)),t}function pg(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Ime(e,t){const n=o=>Jr(e[o],t[o]),i=[pg("background",n("background")),pg("autosize",Qge(n("autosize"))),pg("padding",Kge(n("padding"))),pg("width",n("width")||0),pg("height",n("height")||0)],r=i.reduce((o,l)=>(o[l.name]=l,o),{}),a={};return Ee(e.signals).forEach(o=>{_e(r,o.name)?o=Pe(r[o.name],o):i.push(o),a[o.name]=o}),Ee(t.signals).forEach(o=>{!_e(a,o.name)&&!_e(r,o.name)&&i.push(o)}),i}function XI(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function qz(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}XI.prototype=qz.prototype={parse(e){return YI(e,this)},fork(){return new qz(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof MA?Te(e):e;return this.add(Jpe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let o,l;i&&(o=i.data||(i.data={}),l=o[r]||(o[r]=[]),l.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Te(this.add(yc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Te(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return it(this._parent)},encode(){return it(this._encode)},lookup(){return it(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Se(e))return Cp(e,t);e.signal||ee("Unsupported field reference: "+ge(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Te(this.add(Ppe(r)))}return i},compareRef(e){let t=!1;const n=a=>pn(a)?(t=!0,this.signalRef(a.signal)):Tpe(a)?(t=!0,this.exprRef(a.expr)):a,i=Ee(e.field).map(n),r=Ee(e.order).map(n);return t?Te(this.add(Cz({fields:i,orders:r}))):wz(i,r)},keyRef(e,t){let n=!1;const i=a=>pn(a)?(n=!0,Te(r[a.signal])):a,r=this.signals;return e=Ee(e).map(i),n?Te(this.add(Hpe({fields:e,flat:t}))):wpe(e,t)},sortRef(e){if(!e)return e;const t=Gb(e.op,e.field),n=e.order||Ape;return n.signal?Te(this.add(Cz({fields:t,orders:this.signalRef(n.signal)}))):wz(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return _e(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ee("Duplicate signal name: "+ge(e));const n=t instanceof MA?t:this.add(bv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ee("Unrecognized signal name: "+ge(e)),this.signals[e]},signalRef(e){return this.signals[e]?Te(this.signals[e]):(_e(this.lambdas,e)||(this.lambdas[e]=this.add(bv(null))),Te(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Za(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!xe(e)?e:this.signalRef(e.signal||sM(e))},exprRef(e,t){const n={expr:Za(e,this)};return t&&(n.expr.$name=t),Te(this.add(jpe(n)))},addBinding(e,t){this.bindings||ee("Nested signals do not support binding: "+ge(e)),this.bindings.push(Pe({signal:e},t))},addScaleProj(e,t){_e(this.scales,e)&&ee("Duplicate scale or projection name: "+ge(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,t0e(t))},addProjection(e,t){this.addScaleProj(e,Kpe(t))},getScale(e){return this.scales[e]||ee("Unrecognized scale name: "+ge(e)),this.scales[e]},scaleRef(e){return Te(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return _e(this.data,e)&&ee("Duplicate data set name: "+ge(e)),this.data[e]=t},getData(e){return this.data[e]||ee("Undefined data set name: "+ge(e)),this.data[e]},addDataPipeline(e,t){return _e(this.data,e)&&ee("Duplicate data set name: "+ge(e)),this.addData(e,Zu.fromEntries(this,t))}};function sM(e){return(ie(e)?Pme:Hme)(e)}function Pme(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(xe(r)?r.signal||sM(r):ge(r))}return n+"]"}function Hme(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+ge(i)+":"+(xe(r)?r.signal||sM(r):ge(r));return t+"}"}function Gme(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Yme(e,t,n){return xe(e)||ee("Input Vega specification must be an object."),t=kd(Gme(),t,e.config),jme(e,new XI(t,n)).toRuntime()}var Xme="6.2.0";Pe(Zf,zJ,dae,Hae,Mse,_le,Que,Mue,Kue,Ece,Dce,Bce);const Vme=Xme,Wme=Object.freeze(Object.defineProperty({__proto__:null,Bounds:un,CanvasHandler:n0,CanvasRenderer:Ny,DATE:Fi,DAY:Wn,DAYOFYEAR:Wa,Dataflow:zf,Debug:PF,DisallowedObjectProperties:vC,Error:bC,EventStream:Zv,Gradient:FU,GroupItem:xb,HOURS:fr,Handler:k$,HybridHandler:CB,HybridRenderer:Lw,Info:IF,Item:bb,MILLISECONDS:fa,MINUTES:dr,MONTH:Jn,Marks:hr,MultiPulse:HC,None:jF,Operator:Ct,Parameters:Qv,Pulse:ul,QUARTER:zi,RenderType:tl,Renderer:t0,ResourceLoader:IU,SECONDS:Lr,SVGHandler:hB,SVGRenderer:F$,SVGStringRenderer:AB,Scenegraph:aB,TIME_UNITS:RC,Transform:J,View:fI,WEEK:hn,Warn:xC,YEAR:qn,accessor:ji,accessorFields:Kn,accessorName:Xt,array:Ee,ascending:Dd,bandwidthNRD:VC,bin:_7,bootstrapCI:w7,boundClip:FB,boundContext:Zp,boundItem:Dw,boundMark:tB,boundStroke:ls,changeset:hc,clampRange:e9,codegenExpression:Uj,compare:wC,constant:ii,cumulativeLogNormal:e3,cumulativeNormal:Jv,cumulativeUniform:r3,dayofyear:k9,debounce:AC,defaultLocale:BC,definition:x7,densityLogNormal:JC,densityNormal:WC,densityUniform:i3,domChild:dn,domClear:$r,domCreate:Js,domFind:M$,dotbin:A7,error:ee,expressionFunction:en,extend:Pe,extent:Ya,extentIndex:t9,falsy:Ps,fastmap:Nd,field:zr,flush:n9,font:Ab,fontFamily:e0,fontSize:ro,format:D1,formatLocale:fy,formats:IC,hasOwnProperty:_e,id:Fp,identity:ni,inferType:u7,inferTypes:c7,ingest:dt,inherits:ye,inrange:Tf,interpolate:o$,interpolateColors:yb,interpolateRange:EU,intersect:DB,intersectBoxLine:Mf,intersectPath:g$,intersectPoint:p$,intersectRule:HU,isArray:ie,isBoolean:uc,isDate:sl,isFunction:je,isIterable:i9,isNumber:lt,isObject:xe,isRegExp:CC,isString:Se,isTuple:Vv,key:$C,lerp:r9,lineHeight:bl,loader:Yv,locale:s7,logger:Lv,lruCache:a9,markup:z$,merge:o9,mergeConfig:kd,multiLineOffset:C$,one:Md,pad:s9,panLinear:VF,panLog:WF,panPow:QF,panSymlog:ZF,parse:Yme,parseExpression:zT,parseSelector:Nl,path:rb,pathCurves:f$,pathEqual:LB,pathParse:id,pathRectangle:BU,pathRender:gp,pathSymbols:UU,pathTrail:qU,peek:it,point:$b,projection:tT,quantileLogNormal:t3,quantileNormal:eb,quantileUniform:a3,quantiles:YC,quantizeInterpolator:_U,quarter:KF,quartiles:XC,get random(){return Ur},randomInteger:BK,randomKDE:ZC,randomLCG:UK,randomLogNormal:$7,randomMixture:T7,randomNormal:QC,randomUniform:M7,read:h7,regressionConstant:o3,regressionExp:O7,regressionLinear:s3,regressionLoess:R7,regressionLog:k7,regressionPoly:N7,regressionPow:D7,regressionQuad:l3,renderModule:Tb,repeat:Eg,resetDefaultLocale:FZ,resetSVGDefIds:kre,responseType:d7,runtimeContext:Kj,sampleCurve:nb,sampleLogNormal:KC,sampleNormal:Kv,sampleUniform:n3,scale:ct,sceneEqual:L$,sceneFromJSON:iB,scenePickVisit:Ay,sceneToJSON:nB,sceneVisit:da,sceneZOrder:m$,scheme:s$,serializeXML:SB,setHybridRendererOptions:Cre,setRandom:FK,span:Lp,splitAccessPath:to,stringValue:ge,textMetrics:sr,timeBin:X9,timeFloor:L9,timeFormatLocale:lp,timeInterval:Ld,timeOffset:q9,timeSequence:P9,timeUnitSpecifier:M9,timeUnits:zC,toBoolean:TC,toDate:MC,toNumber:Qn,toSet:ca,toString:kC,transform:S7,transforms:Zf,truncate:l9,truthy:Fr,tupleid:Me,typeParsers:gw,utcFloor:U9,utcInterval:Ud,utcOffset:j9,utcSequence:H9,utcdayofyear:N9,utcquarter:JF,utcweek:R9,version:Vme,visitArray:Ys,week:O9,writeConfig:Od,zero:Zs,zoomLinear:SC,zoomLog:EC,zoomPow:ay,zoomSymlog:_C},Symbol.toStringTag,{value:"Module"}));function Qme(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Zme={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Kme={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Jme={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const e1e=Array.prototype.slice,uu=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,e1e.call(t,1))},t1e=(e,t=0,n=1,i=0,r=0,a=0,o=0)=>Se(e)?new Date(e):new Date(e,t,n,i,r,a,o);var n1e={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:t1e,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return uu("join",arguments)},indexof:function(){return uu("indexOf",arguments)},lastindexof:function(){return uu("lastIndexOf",arguments)},slice:function(){return uu("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Dd),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return uu("substring",arguments,String)},split:function(){return uu("split",arguments,String)},replace:function(){return uu("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const i1e=["view","item","group","xy","x","y"],FA=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&FA.add(setImmediate);const r1e={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Zme[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),FA.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||n1e[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Kme[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Jme[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);e.memberDepth-=1;const a=e(i.value);return vC.has(r)?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):FA.has(a)?console.error(`Prevented interpretation of method "${r}" which could lead to insecure code execution`):n[r]=a,n},{})};function mg(e,t,n,i,r,a){const o=l=>r1e[l.type](o,l);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=i,o.event=r,o.item=a,i1e.forEach(l=>o.fn[l]=(...c)=>r.vega[l](...c)),o(e)}var a1e={operator(e,t){const n=t.ast,i=e.functions;return r=>mg(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>mg(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>mg(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const o=a.item&&a.item.datum;return mg(n,i,r,o,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(o,l)=>{const c=o.datum;let f=0,d;for(const g in i)d=mg(i[g].ast,r,l,c,void 0,o),o[g]!==d&&(o[g]=d,f=1);return n!=="rule"&&Qme(o,i,a),f}}},o1e="6.4.2",s1e={version:o1e};function lM(e){return ce(e,"or")}function uM(e){return ce(e,"and")}function cM(e){return ce(e,"not")}function ny(e,t){if(cM(e))ny(e.not,t);else if(uM(e))for(const n of e.and)ny(n,t);else if(lM(e))for(const n of e.or)ny(n,t);else t(e)}function qf(e,t){return cM(e)?{not:qf(e.not,t)}:uM(e)?{and:e.and.map(n=>qf(n,t))}:lM(e)?{or:e.or.map(n=>qf(n,t))}:t(e)}const Le=structuredClone;function VI(e){throw new Error(e)}function dd(e,t){const n={};for(const i of t)_e(e,i)&&(n[i]=e[i]);return n}function ur(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>bt(e)).join(",")})`};function Ge(e){if(lt(e))return e;const t=Se(e)?e:bt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function LA(e){return e===!1||e===null}function We(e,t){return e.includes(t)}function hd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function fM(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function WI(e,...t){for(const n of t)l1e(e,n??{});return e}function l1e(e,t){for(const n of le(t))Od(e,n,t[n],!0)}function rr(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function u1e(e,t){const n=le(e),i=le(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function QI(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function dM(e,t){for(const n of e)if(t.has(n))return!0;return!1}function UA(e){const t=new Set;for(const n of e){const r=to(n).map((o,l)=>l===0?o:`[${o}]`),a=r.map((o,l)=>r.slice(0,l+1).join(""));for(const o of a)t.add(o)}return t}function hM(e,t){return e===void 0||t===void 0?!0:dM(UA(e),UA(t))}function $t(e){return le(e).length===0}const le=Object.keys,ln=Object.values,_l=Object.entries;function gd(e){return e===!0||e===!1}function xv(e){return Se(e)||lt(e)||gd(e)}function Lt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function np(e,t){return cM(e)?`!(${np(e.not,t)})`:uM(e)?`(${e.and.map(n=>np(n,t)).join(") && (")})`:lM(e)?`(${e.or.map(n=>np(n,t)).join(") || (")})`:t(e)}function Sv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Sv(e[n],t)&&delete e[n],$t(e)}function h0(e){return e.charAt(0).toUpperCase()+e.substr(1)}function gM(e,t="datum"){const n=to(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(ge).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function ZI(e,t="datum"){return`${t}[${ge(to(e).join("."))}]`}function yt(e){return`datum['${e.replaceAll("'","\\'")}']`}function KI(e){return e.replaceAll("\\'","'").replaceAll("\\.",".")}function c1e(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function qr(e){return`${to(e).map(c1e).join("\\.")}`}function Ku(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Xd(e){return`${to(e).join(".")}`}function pd(e){return e?to(e).length:0}function Kt(...e){return e.find(t=>t!==void 0)}let JI=42;function eP(e){const t=++JI;return e?String(e)+t:t}function f1e(){JI=42}function tP(e){return nP(e)?e:`__${e}`}function nP(e){return e.startsWith("__")}function Mp(e){if(e!==void 0)return(e%360+360)%360}function Kb(e){return lt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const jz=Object.getPrototypeOf(structuredClone({}));function ar(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!ar(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!ar(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==jz.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==jz.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!ar(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function bt(e){const t=[];return(function n(i){if(i!=null&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const o=t.push(i)-1,l=Object.keys(i).sort();for(a="",r=0;r<l.length;r++){const c=l[r],f=n(i[c]);f&&(a&&(a+=","),a+=`${JSON.stringify(c)}:${f}`)}return t.splice(o,1),`{${a}}`})(e)}function ce(e,t){return xe(e)&&_e(e,t)&&e[t]!==void 0}const Zo="row",Ko="column",Jb="facet",Ut="x",Tn="y",xa="x2",lo="y2",Rl="xOffset",Vd="yOffset",Sa="radius",cs="radius2",Pr="theta",fs="theta2",Ea="latitude",_a="longitude",wa="latitude2",jr="longitude2",zl="time",Ui="color",uo="fill",co="stroke",Bi="shape",ds="size",bc="angle",hs="opacity",Fl="fillOpacity",Ll="strokeOpacity",Ul="strokeWidth",Bl="strokeDash",g0="text",md="order",p0="detail",ex="key",Ju="tooltip",tx="href",nx="url",ix="description",d1e={x:1,y:1,x2:1,y2:1},iP={theta:1,theta2:1,radius:1,radius2:1};function rP(e){return _e(iP,e)}const pM={longitude:1,longitude2:1,latitude:1,latitude2:1};function aP(e){switch(e){case Ea:return"y";case wa:return"y2";case _a:return"x";case jr:return"x2"}}function oP(e){return _e(pM,e)}const h1e=le(pM),mM={...d1e,...iP,...pM,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function jf(e){return e===Ui||e===uo||e===co}const sP={row:1,column:1,facet:1},Dr=le(sP),yM={...mM,...sP},g1e=le(yM),{order:QAe,detail:ZAe,tooltip:KAe,...p1e}=yM,{row:JAe,column:eCe,facet:tCe,...m1e}=p1e;function y1e(e){return _e(m1e,e)}function lP(e){return _e(yM,e)}const v1e=[xa,lo,wa,jr,fs,cs];function uP(e){return xc(e)!==e}function xc(e){switch(e){case xa:return Ut;case lo:return Tn;case wa:return Ea;case jr:return _a;case fs:return Pr;case cs:return Sa}return e}function wl(e){if(rP(e))switch(e){case Pr:return"startAngle";case fs:return"endAngle";case Sa:return"outerRadius";case cs:return"innerRadius"}return e}function fo(e){switch(e){case Ut:return xa;case Tn:return lo;case Ea:return wa;case _a:return jr;case Pr:return fs;case Sa:return cs}}function qi(e){switch(e){case Ut:case xa:return"width";case Tn:case lo:return"height"}}function cP(e){switch(e){case Ut:return"xOffset";case Tn:return"yOffset";case xa:return"x2Offset";case lo:return"y2Offset";case Pr:return"thetaOffset";case Sa:return"radiusOffset";case fs:return"theta2Offset";case cs:return"radius2Offset"}}function vM(e){switch(e){case Ut:return"xOffset";case Tn:return"yOffset"}}function b1e(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const x1e=le(mM),{x:nCe,y:iCe,x2:rCe,y2:aCe,xOffset:oCe,yOffset:sCe,latitude:lCe,longitude:uCe,latitude2:cCe,longitude2:fCe,theta:dCe,theta2:hCe,radius:gCe,radius2:pCe,...bM}=mM,S1e=le(bM),xM={x:1,y:1},gs=le(xM);function Jt(e){return _e(xM,e)}const SM={theta:1,radius:1},E1e=le(SM);function rx(e){return e==="width"?Ut:Tn}const fP={xOffset:1,yOffset:1};function m0(e){return _e(fP,e)}const _1e={time:1};function m_(e){return e in _1e}const{text:mCe,tooltip:yCe,href:vCe,url:bCe,description:xCe,detail:SCe,key:ECe,order:_Ce,...dP}=bM,w1e=le(dP);function A1e(e){return _e(bM,e)}function C1e(e){switch(e){case Ui:case uo:case co:case ds:case Bi:case hs:case Ul:case Bl:return!0;case Fl:case Ll:case bc:case zl:return!1}}const hP={...xM,...SM,...fP,...dP},EM=le(hP);function ho(e){return _e(hP,e)}function $1e(e,t){return M1e(e)[t]}const gP={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:wCe,...T1e}=gP;function M1e(e){switch(e){case Ui:case uo:case co:case ix:case p0:case ex:case Ju:case tx:case md:case hs:case Fl:case Ll:case Ul:case Jb:case Zo:case Ko:return gP;case Ut:case Tn:case Rl:case Vd:case Ea:case _a:case zl:return T1e;case xa:case lo:case wa:case jr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ds:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Bl:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Bi:return{point:"always",geoshape:"always"};case g0:return{text:"always"};case bc:return{point:"always",square:"always",text:"always"};case nx:return{image:"always"};case Pr:return{text:"always",arc:"always"};case Sa:return{text:"always",arc:"always"};case fs:case cs:return{arc:"always"}}}function y_(e){switch(e){case Ut:case Tn:case Pr:case Sa:case Rl:case Vd:case ds:case bc:case Ul:case hs:case Fl:case Ll:case zl:case xa:case lo:case fs:case cs:return;case Jb:case Zo:case Ko:case Bi:case Bl:case g0:case Ju:case tx:case nx:case ix:return"discrete";case Ui:case uo:case co:return"flexible";case Ea:case _a:case wa:case jr:case p0:case ex:case md:return}}const k1e={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},O1e={count:1,min:1,max:1};function as(e){return ce(e,"argmin")}function ql(e){return ce(e,"argmax")}function _M(e){return Se(e)&&_e(k1e,e)}const D1e=new Set(["count","valid","missing","distinct"]);function ax(e){return Se(e)&&D1e.has(e)}function N1e(e){return Se(e)&&We(["min","max"],e)}const R1e=new Set(["count","sum","distinct","valid","missing"]),z1e=new Set(["mean","average","median","q1","q3","min","max"]);function pP(e){return uc(e)&&(e=yx(e,void 0)),`bin${le(e).map(t=>ox(e[t])?Lt(`_${t}_${_l(e[t])}`):Lt(`_${t}_${e[t]}`)).join("")}`}function Tt(e){return e===!0||Sc(e)&&!e.binned}function Rn(e){return e==="binned"||Sc(e)&&e.binned===!0}function Sc(e){return xe(e)}function ox(e){return ce(e,"param")}function Iz(e){switch(e){case Zo:case Ko:case ds:case Ui:case uo:case co:case Ul:case hs:case Fl:case Ll:case Bi:return 6;case Bl:return 4;default:return 10}}function y0(e){return ce(e,"expr")}function zn(e,{level:t}={level:0}){const n=le(e||{}),i={};for(const r of n)i[r]=t===0?nr(e[r]):zn(e[r],{level:t-1});return i}function mP(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:o,color:l,subtitleColor:c,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:g,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,S={...b,...l?{fill:l}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...o!==void 0?{limit:o}:{}},w={...c?{subtitleColor:c}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...g?{subtitleFontStyle:g}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=dd(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:A,nonMarkTitleProperties:_,subtitle:w}}function Qs(e){return Se(e)||ie(e)&&Se(e[0])}function $e(e){return ce(e,"signal")}function Ec(e){return ce(e,"step")}function yP(e){return ie(e)?!1:ce(e,"fields")&&!ce(e,"data")}function F1e(e){return ie(e)?!1:ce(e,"fields")&&ce(e,"data")}function Xo(e){return ie(e)?!1:ce(e,"field")&&ce(e,"data")}const L1e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},U1e=le(L1e),B1e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},BA=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],q1e="  ";function vP(e){const t=ie(e.condition)?e.condition.map(Pz):Pz(e.condition);return{...nr(e),condition:t}}function nr(e){if(y0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Pz(e){if(y0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Dt(e){if(y0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return $e(e)?e:e!==void 0?{value:e}:void 0}function j1e(e){return $e(e)?e.signal:ge(e)}function Hz(e){return $e(e)?e.signal:ge(e.value)}function oa(e){return $e(e)?e.signal:e==null?null:ge(e)}function I1e(e,t,n){for(const i of n){const r=Ka(i,t.markDef,t.config);r!==void 0&&(e[i]=Dt(r))}return e}function bP(e){return[].concat(e.type,e.style??[])}function gt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&ce(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:Ka(e,t,n,i)}function Ka(e,t,n,{vgChannel:i}={}){const r=qA(e,t,n.style);return Kt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function qA(e,t,n){return xP(e,bP(t),n)}function xP(e,t,n){t=Ee(t);let i;for(const r of t){const a=n[r];ce(a,e)&&(i=a[e])}return i}function SP(e,t){return Ee(e).reduce((n,i)=>(n.field.push(be(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function EP(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(ar(r,i))return;n.push(i)}),n}function _P(e,t){return ar(e,t)||!t?e:e?[...Ee(e),...Ee(t)].join(", "):t}function wP(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((Qs(n)||$e(n))&&(Qs(i)||$e(i)))return{explicit:e.explicit,value:_P(n,i)};if(Qs(n)||$e(n))return{explicit:e.explicit,value:n};if(Qs(i)||$e(i))return{explicit:e.explicit,value:i};if(!Qs(n)&&!$e(n)&&!Qs(i)&&!$e(i))return{explicit:e.explicit,value:EP(n,i)};throw new Error("It should never reach here")}function wM(e){return`Invalid specification ${bt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const P1e='Autosize "fit" only works for single views and layered views.';function Gz(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Yz(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Xz(e){return e?`Dropping "fit-${e}" because spec has discrete ${qi(e)}.`:'Dropping "fit" because spec has discrete size.'}function AM(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Vz(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function H1e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function G1e(e){return`The "nearest" transform is not supported for ${e} marks.`}function AP(e){return`Selection not supported for ${e} yet.`}function Y1e(e){return`Cannot find a selection named "${e}".`}const X1e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",V1e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",W1e="Legend bindings are only supported for selections over an individual field or encoding channel.";function Q1e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Z1e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const K1e="The same selection must be used to override scale domains in a layered view.",J1e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function eye(e){return`Unknown repeated value "${e}".`}function Wz(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const tye="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",CM="Animation involving facet, layer, or concat is currently unsupported.";function nye(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ge(e)}.`}function iye(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${ge(t)} encoding found for selection ${ge(n.param)}. Using "field": ${ge(i)}.`}const rye="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function aye(e){return`Unrecognized parse "${e}".`}function Qz(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const oye="Attempt to add the same child twice.";function sye(e){return`Ignoring an invalid transform: ${bt(e)}.`}const lye='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Zz(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function uye(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${bt(t)} is overridden by a child projection ${bt(n)}.`}const cye="Arc marks uses theta channel rather than angle, replacing angle with theta.";function fye(e){return`${e}Offset dropped because ${e} is continuous`}function dye(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${bt(n)}}.`}function CP(e){return`Invalid field type "${e}".`}function hye(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function gye(e){return`Invalid aggregation operator "${e}".`}function $P(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function pye(e){return`Position range does not support relative band size for ${e}.`}function jA(e,t){return`Dropping ${bt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const mye="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function sx(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function yye(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function vye(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function bye(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function xye(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function v_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Sye(e){return`The ${e} for range marks cannot be an expression`}function Eye(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function _ye(e,t){return`Specified orient "${e}" overridden with "${t}".`}function wye(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Aye(e){return`Cannot use the relative band size with ${e} scale.`}function Cye(e){return`Using unaggregated domain with raw field has no effect (${bt(e)}).`}function $ye(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Tye(e){return`Unaggregated domain is currently unsupported for log scale (${bt(e)}).`}function Mye(e){return`Cannot apply size to non-oriented mark "${e}".`}function kye(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Oye(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function TP(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function MP(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Dye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${bt(n)} and ${bt(i)}). Using ${bt(n)}.`}function Nye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${bt(n)} and ${bt(i)}). Using the union of the two domains.`}function Rye(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function zye(e){return`Dropping sort property ${bt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Kz="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Fye="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Lye="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Uye="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Bye(e,t){return`Unioning discrete legend values from ${e} and ${t}.`}function qye(e){return`Cannot stack "${e}" if there is already "${e}2".`}function jye(e){return`Stack is applied to a non-linear scale (${e}).`}function Iye(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Ev(e,t){return`Invalid ${e}: ${bt(t)}.`}function Pye(e){return`Dropping day from datetime ${bt(e)} as day cannot be combined with other units.`}function Hye(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Gye(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Yye(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Jz(e){return`1D error band does not support ${e}.`}function kP(e){return`Channel ${e} is required for "binned" bin.`}function Xye(e){return`Channel ${e} should not be used with "binned" bin.`}function Vye(e){return`Domain for ${e} is required for threshold scale.`}const OP=Lv(xC);let ec=OP;function Wye(e){return ec=e,ec}function Qye(){return ec=OP,ec}function $M(...e){ec.error(...e)}function de(...e){ec.warn(...e)}function Zye(...e){ec.debug(...e)}function _c(e){if(e&&xe(e)){for(const t of MM)if(ce(e,t))return!0}return!1}const DP=["january","february","march","april","may","june","july","august","september","october","november","december"],Kye=DP.map(e=>e.substr(0,3)),NP=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Jye=NP.map(e=>e.substr(0,3));function eve(e){if(Kb(e)&&(e=+e),lt(e))return e>4&&de(Ev("quarter",e)),e-1;throw new Error(Ev("quarter",e))}function tve(e){if(Kb(e)&&(e=+e),lt(e))return e-1;{const t=e.toLowerCase(),n=DP.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Kye.indexOf(i);if(r!==-1)return r;throw new Error(Ev("month",e))}}function nve(e){if(Kb(e)&&(e=+e),lt(e))return e%7;{const t=e.toLowerCase(),n=NP.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Jye.indexOf(i);if(r!==-1)return r;throw new Error(Ev("day",e))}}function TM(e,t){const n=[];if(t&&e.day!==void 0&&le(e).length>1&&(de(Pye(e)),e=Le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?tve(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?eve(e.quarter):e.quarter;n.push(lt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?nve(e.day):e.day;n.push(lt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function tc(e){const n=TM(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function ive(e){const n=TM(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function rve(e){const t=TM(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const RP={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},MM=le(RP);function ave(e){return _e(RP,e)}function wc(e){return xe(e)?e.binned:zP(e)}function zP(e){return e==null?void 0:e.startsWith("binned")}function kM(e){return e.startsWith("utc")}function ove(e){return e.substring(3)}const sve={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function lx(e){return MM.filter(t=>LP(e,t))}function FP(e){const t=lx(e);return t[t.length-1]}function LP(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function lve(e,t,{end:n}={end:!1}){const i=gM(t),r=kM(e)?"utc":"";function a(c){return c==="quarter"?`(${r}quarter(${i})-1)`:`${r}${c}(${i})`}let o;const l={};for(const c of MM)LP(e,c)&&(l[c]=a(c),o=c);return n&&(l[o]+="+1"),ive(l)}function UP(e){if(!e)return;const t=lx(e);return`timeUnitSpecifier(${bt(t)}, ${bt(sve)})`}function uve(e,t,n){if(!e)return;const i=UP(e);return`${n||kM(e)?"utc":"time"}Format(${t}, ${i})`}function Cn(e){if(!e)return;let t;return Se(e)?zP(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:xe(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),kM(t.unit)&&(t.utc=!0,t.unit=ove(t.unit)),t}function cve(e){const{utc:t,...n}=Cn(e);return n.unit?(t?"utc":"")+le(n).map(i=>Lt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${le(n).map(i=>Lt(`_${i}_${n[i]}`)).join("")}`}function BP(e,t=n=>n){const n=Cn(e),i=FP(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:o}=qP(i,n.step),l={...r,[o]:+r[o]+a};return`${t(tc(l))} - ${t(tc(r))}`}}const fve={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function dve(e){return _e(fve,e)}function qP(e,t=1){if(dve(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function hve(e){return ce(e,"param")}function OM(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function DM(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function NM(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function RM(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function zM(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function FM(e){if(e!=null&&e.field){if(ie(e.range)&&e.range.length===2)return!0;if($e(e.range))return!0}return!1}function LM(e){return!!(e!=null&&e.field)&&(ie(e.oneOf)||ie(e.in))}function gve(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function jP(e){return LM(e)||OM(e)||FM(e)||DM(e)||RM(e)||NM(e)||zM(e)}function Oa(e,t){return vx(e,{timeUnit:t,wrapTime:!0})}function pve(e,t){return e.map(n=>Oa(n,t))}function IP(e,t=!0){const{field:n}=e,i=Cn(e.timeUnit),{unit:r,binned:a}=i||{},o=be(e,{expr:"datum"}),l=r?`time(${a?o:lve(r,n)})`:o;if(OM(e))return`${l}===${Oa(e.equal,r)}`;if(DM(e)){const c=e.lt;return`${l}<${Oa(c,r)}`}else if(RM(e)){const c=e.gt;return`${l}>${Oa(c,r)}`}else if(NM(e)){const c=e.lte;return`${l}<=${Oa(c,r)}`}else if(zM(e)){const c=e.gte;return`${l}>=${Oa(c,r)}`}else{if(LM(e))return`indexof([${pve(e.oneOf,r).join(",")}], ${l}) !== -1`;if(gve(e))return ux(l,e.valid);if(FM(e)){const{range:c}=zn(e),f=$e(c)?{signal:`${c.signal}[0]`}:c[0],d=$e(c)?{signal:`${c.signal}[1]`}:c[1];if(f!==null&&d!==null&&t)return`inrange(${l}, [${Oa(f,r)}, ${Oa(d,r)}])`;const g=[];return f!==null&&g.push(`${l} >= ${Oa(f,r)}`),d!==null&&g.push(`${l} <= ${Oa(d,r)}`),g.length>0?g.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${bt(e)}`)}function ux(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function mve(e){return jP(e)&&e.timeUnit?{...e,timeUnit:Cn(e.timeUnit)}:e}const v0={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function yve(e){return e==="quantitative"||e==="temporal"}function UM(e){return e==="ordinal"||e==="nominal"}const nc=v0.quantitative,BM=v0.ordinal,yd=v0.temporal,qM=v0.nominal,Wd=v0.geojson;function vve(e){if(e)switch(e=e.toLowerCase(),e){case"q":case nc:return"quantitative";case"t":case yd:return"temporal";case"o":case BM:return"ordinal";case"n":case qM:return"nominal";case Wd:return"geojson"}}const Fn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},IA={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function bve(e,t){const n=IA[e],i=IA[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const xve={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function e8(e){return xve[e]}const PP=new Set(["linear","log","pow","sqrt","symlog"]),HP=new Set([...PP,"time","utc"]);function GP(e){return PP.has(e)}const YP=new Set(["quantile","quantize","threshold"]),Sve=new Set([...HP,...YP,"sequential","identity"]),Eve=new Set(["ordinal","bin-ordinal","point","band"]);function Vt(e){return Eve.has(e)}function ha(e){return Sve.has(e)}function Ba(e){return HP.has(e)}function vd(e){return YP.has(e)}const _ve={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function wve(e){return!Se(e)&&ce(e,"name")}function XP(e){return ce(e,"param")}function Ave(e){return ce(e,"unionWith")}function Cve(e){return xe(e)&&"field"in e}const $ve={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:ACe,domain:CCe,range:$Ce,rangeMax:TCe,rangeMin:MCe,scheme:kCe,...Tve}=$ve,Mve=le(Tve);function PA(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Ba(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Ba(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ba(e);case"nice":return Ba(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ha(e)&&!We(["log","time","utc","threshold","quantile"],e)}}function VP(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return jf(e)?void 0:wye(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function kve(e,t){return We([BM,qM],t)?e===void 0||Vt(e):t===yd?We([Fn.TIME,Fn.UTC,void 0],e):t===nc?GP(e)||vd(e)||e===void 0:!0}function Ove(e,t,n=!1){if(!ho(e))return!1;switch(e){case Ut:case Tn:case Rl:case Vd:case Pr:case Sa:return Ba(t)||t==="band"?!0:t==="point"?!n:!1;case zl:return We(["linear","band"],t);case ds:case Ul:case hs:case Fl:case Ll:case bc:return Ba(t)||vd(t)||We(["band","point","ordinal"],t);case Ui:case uo:case co:return t!=="band";case Bl:case Bi:return t==="ordinal"||vd(t)}}function Dve(e){return xe(e)&&"value"in e}const Si={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},WP=Si.arc,cx=Si.area,fx=Si.bar,Nve=Si.image,dx=Si.line,hx=Si.point,Rve=Si.rect,_v=Si.rule,QP=Si.text,jM=Si.tick,zve=Si.trail,IM=Si.circle,PM=Si.square,ZP=Si.geoshape;function jl(e){return["line","area","trail"].includes(e)}function kp(e){return["rect","bar","image","arc","tick"].includes(e)}const Fve=new Set(le(Si));function Ja(e){return ce(e,"type")}const Lve=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Uve=["fill","fillOpacity"],Bve=[...Lve,...Uve],qve={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},t8=le(qve),b_=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],jve={area:["line","point"],bar:b_,rect:b_,line:["point"],tick:["bandSize","thickness",...b_]},Ive={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Pve={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},KP=le(Pve);function ic(e){return ce(e,"band")}const Hve={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Gve=5,HM={binSpacing:0,continuousBandSize:Gve,minBandSize:.25,timeUnitBandPosition:.5},Yve={...HM,binSpacing:1},Xve={...HM,thickness:1};function Vve(e){return Ja(e)?e.type:e}function JP(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function GM({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){var l,c;if(!i||!ha(i)||r)return"always-valid";const a=JP(gt("invalid",e,t),{isPath:jl(e.type)});return((c=(l=t.scale)==null?void 0:l.invalid)==null?void 0:c[n])!==void 0?"show":a}function Wve(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function eH({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function tH({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){var d;const o=n==null?void 0:n.get("type"),l=pa(t),c=ax(l==null?void 0:l.aggregate),f=GM({scaleChannel:e,markDef:r,config:a,scaleType:o,isCountAggregate:c});if(l&&f==="show"){const g=((d=a.scale.invalid)==null?void 0:d[e])??"zero-or-min";return{test:ux(be(l,{expr:"datum"}),!1),...Qve(g,n,i)}}}function Qve(e,t,n){if(Dve(e)){const{value:i}=e;return $e(i)?{signal:i.signal}:{value:i}}return eH({scale:t,scaleName:n,mode:"zeroOrMin"})}function YM(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:o}=e,l=xc(t),c=XM(e),f=tH({scaleChannel:l,channelDef:n,scale:r,scaleName:a,markDef:i,config:o});return f!==void 0?[f,c]:c}function Zve(e){const{datum:t}=e;return _c(t)?tc(t):`${bt(t)}`}function zu(e,t,n,i){const r={};if(t&&(r.scale=t),go(e)){const{datum:a}=e;_c(a)?r.signal=tc(a):$e(a)?r.signal=a.signal:y0(a)?r.signal=a.expr:r.value=a}else r.field=be(e,n);if(i){const{offset:a,band:o}=i;a&&(r.offset=a),o&&(r.band=o)}return r}function wv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:o=.5}){const l=!$e(o)&&0<o&&o<1?"datum":void 0,c=be(t,{expr:l,suffix:r}),f=n!==void 0?be(n,{expr:l}):be(t,{suffix:a,expr:l}),d={};if(o===0||o===1){d.scale=e;const g=o===0?c:f;d.field=g}else{const g=$e(o)?`(1-${o.signal}) * ${c} + ${o.signal} * ${f}`:`${1-o} * ${c} + ${o} * ${f}`;d.signal=`scale("${e}", ${g})`}return i&&(d.offset=i),d}function Kve({scaleName:e,fieldDef:t}){const n=be(t,{expr:"datum"}),i=be(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function XM({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:o,stack:l,offset:c,defaultRef:f,bandPosition:d}){if(t){if(Ue(t)){const g=o==null?void 0:o.get("type");if(bi(t)){d??(d=Al({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:p,timeUnit:y,type:v}=t;if(Tt(p)||d&&y&&v===yd)return l!=null&&l.impute?zu(t,a,{binSuffix:"mid"},{offset:c}):d&&!Vt(g)?wv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:c}):zu(t,a,_0(t,e)?{binSuffix:"range"}:{},{offset:c});if(Rn(p)){if(he(n))return wv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:c});de(kP(e===Ut?xa:lo))}}return zu(t,a,Vt(g)?{binSuffix:"range"}:{},{offset:c,band:g==="band"?d??t.bandPosition??.5:void 0})}else if(ga(t)){const g=t.value,p=c?{offset:c}:{};return{...ip(e,g),...p}}}return je(f)&&(f=f()),f&&{...f,...c?{offset:c}:{}}}function ip(e,t){return We(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:We(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Dt(t)}function rc(e){return e&&e!=="number"&&e!=="time"}function nH(e,t,n){return`${e}(${t}${n?`, ${bt(n)}`:""})`}function VM({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){var f;if(rc(n))return sa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const o=iH(e,i,r),l=bd(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(l==="quantitative"){if(r&&a.normalizedNumberFormatType)return sa({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return sa({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(l==="temporal"&&a.timeFormatType&&he(e)&&e.timeUnit===void 0)return sa({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function c(d){return he(d)?Cn(d.timeUnit)||{}:{unit:void 0,utc:void 0}}if(Ed(e)){const{unit:d,utc:g}=c(e),p=ebe({field:o,timeUnit:d,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:g||Ac(e)&&((f=e.scale)==null?void 0:f.type)===Fn.UTC});return p?{signal:p}:void 0}if(t=HA({type:l,specifiedFormat:t,config:a,normalizeStack:r}),he(e)&&Tt(e.bin)){const d=be(e,{expr:i,binSuffix:"end"});return{signal:b0(o,d,t,n,a)}}else return t||bd(e)==="quantitative"?{signal:`${oH(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function iH(e,t,n){return he(e)?n?`${be(e,{expr:t,suffix:"end"})}-${be(e,{expr:t,suffix:"start"})}`:be(e,{expr:t}):Zve(e)}function sa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:o}){if(o??(o=iH(e,i,r)),o!=="datum.value"&&he(e)&&Tt(e.bin)){const l=be(e,{expr:i,binSuffix:"end"});return{signal:b0(o,l,t,n,a)}}return{signal:nH(n,o,t)}}function rH(e,t,n,i,r,a){var o;if(!(Se(i)&&rc(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&bd(e)==="quantitative"&&(r.normalizedNumberFormatType&&xd(e)&&e.stack==="normalize"||r.numberFormatType))){if(xd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return HA({type:"quantitative",config:r,normalizeStack:!0});if(Ed(e)){const l=he(e)?(o=Cn(e.timeUnit))==null?void 0:o.unit:void 0;return l===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:Jve({specifiedFormat:n,timeUnit:l,config:r,omitTimeFormatConfig:a})}return HA({type:t,specifiedFormat:n,config:r})}}function aH(e,t,n){var i;if(e&&($e(e)||e==="number"||e==="time"))return e;if(Ed(t)&&n!=="time"&&n!=="utc")return he(t)&&((i=Cn(t==null?void 0:t.timeUnit))!=null&&i.utc)?"utc":"time"}function HA({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Se(t))return t;if(e===nc)return i?n.normalizedNumberFormat:n.numberFormat}function Jve({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:UP(t)}:i?void 0:n.timeFormat)}function oH(e,t){return`format(${e}, "${t||""}")`}function n8(e,t,n,i){return rc(n)?nH(n,e,t):oH(e,(Se(t)?t:void 0)??i.numberFormat)}function b0(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return b0(e,t,r.numberFormat,r.numberFormatType,r);const a=n8(e,n,i,r),o=n8(t,n,i,r);return`${ux(e,!1)} ? "null" : ${a} + "${q1e}" + ${o}`}function ebe({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${bt(n)})`:(n=Se(n)?n:r,`${a?"utc":"time"}Format(${e}, ${bt(n)})`):uve(t,e,a)}const gx="min",tbe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function i8(e){return _e(tbe,e)}function nbe(e){return ce(e,"encoding")}function Jo(e){return e&&(e.op==="count"||ce(e,"field"))}function sH(e){return e&&ie(e)}function x0(e){return ce(e,"row")||ce(e,"column")}function WM(e){return ce(e,"header")}function px(e){return ce(e,"facet")}function ibe(e){return ce(e,"param")}function rbe(e){return!Se(e)&&ce(e,"repeat")}function r8(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function QM(e){return ce(e,"sort")}function Al({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Ue(e)&&e.bandPosition!==void 0)return e.bandPosition;if(he(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return Ka("timeUnitBandPosition",n,i);if(Tt(a))return .5}}function lH({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:o}){var f,d,g;const l=qi(e),c=gt(o?"size":l,i,r,{vgChannel:l});if(c!==void 0)return c;if(he(t)){const{timeUnit:p,bin:y}=t;if(p&&!n)return{band:Ka("timeUnitBandSize",i,r)};if(Tt(y)&&!Vt(a))return{band:1}}if(kp(i.type))return a?Vt(a)?((f=r[i.type])==null?void 0:f.discreteBandSize)||{band:1}:(d=r[i.type])==null?void 0:d.continuousBandSize:(g=r[i.type])==null?void 0:g.discreteBandSize}function uH(e,t,n,i){return Tt(e.bin)||e.timeUnit&&bi(e)&&e.type==="temporal"?Al({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function cH(e){return ce(e,"sort")&&!ce(e,"field")}function S0(e){return ce(e,"condition")}function mx(e){const t=e==null?void 0:e.condition;return!!t&&!ie(t)&&he(t)}function E0(e){const t=e==null?void 0:e.condition;return!!t&&!ie(t)&&Ue(t)}function abe(e){const t=e==null?void 0:e.condition;return!!t&&(ie(t)||ga(t))}function he(e){return ce(e,"field")||(e==null?void 0:e.aggregate)==="count"}function bd(e){return e==null?void 0:e.type}function go(e){return ce(e,"datum")}function ol(e){return bi(e)&&!Cv(e)||Av(e)}function a8(e){return bi(e)&&e.type==="quantitative"&&!e.bin||Av(e)}function Av(e){return go(e)&&lt(e.datum)}function Ue(e){return he(e)||go(e)}function bi(e){return e&&(ce(e,"field")||e.aggregate==="count")&&ce(e,"type")}function ga(e){return ce(e,"value")}function Ac(e){return ce(e,"scale")||ce(e,"sort")}function xd(e){return ce(e,"axis")||ce(e,"stack")||ce(e,"impute")}function fH(e){return ce(e,"legend")}function dH(e){return ce(e,"format")||ce(e,"formatType")}function obe(e){return ur(e,["legend","axis","header","scale"])}function sbe(e){return ce(e,"op")}function be(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(ube(e))n=tP("count");else{let o;if(!t.nofn)if(sbe(e))o=e.op;else{const{bin:l,aggregate:c,timeUnit:f}=e;Tt(l)?(o=pP(l),r=(t.binSuffix??"")+(t.suffix??"")):c?ql(c)?(a=`["${n}"]`,n=`argmax_${c.argmax}`):as(c)?(a=`["${n}"]`,n=`argmin_${c.argmin}`):o=String(c):f&&!wc(f)&&(o=cve(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Xd(n):t.expr?ZI(n,t.expr)+a:qr(n)+a}function Cv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return he(e)&&!!e.bin;case"temporal":return!1}throw new Error(CP(e.type))}function lbe(e){var t;return Ac(e)&&vd((t=e.scale)==null?void 0:t.type)}function ube(e){return e.aggregate==="count"}function cbe(e,t){var o;const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(Tt(i))return`${n} (binned)`;if(r&&!wc(r)){const l=(o=Cn(r))==null?void 0:o.unit;if(l)return`${n} (${lx(l).join("-")})`}else if(a)return ql(a)?`${n} for max ${a.argmax}`:as(a)?`${n} for min ${a.argmin}`:`${h0(a)} of ${n}`;return n}function fbe(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(ql(t))return`${r} for argmax(${t.argmax})`;if(as(t))return`${r} for argmin(${t.argmin})`;const a=i&&!wc(i)?Cn(i):void 0,o=t||(a==null?void 0:a.unit)||(a==null?void 0:a.maxbins)&&"timeunit"||Tt(n)&&"bin";return o?`${o.toUpperCase()}(${r})`:r}const hH=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return fbe(e);default:return cbe(e,t)}};let gH=hH;function pH(e){gH=e}function dbe(){pH(hH)}function If(e,t,{allowDisabling:n,includeDefault:i=!0}){var l;const r=(l=ZM(e))==null?void 0:l.title;if(!he(e))return r??e.title;const a=e,o=i?KM(a,t):void 0;return n?Kt(r,a.title,o):r??a.title??o}function ZM(e){if(xd(e)&&e.axis)return e.axis;if(fH(e)&&e.legend)return e.legend;if(WM(e)&&e.header)return e.header}function KM(e,t){return gH(e,t)}function Sd(e){if(dH(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=ZM(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function hbe(e,t){var a;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(QM(e)&&ie(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!ql(n)&&!as(n))return"quantitative";if(Ac(e)&&((a=e.scale)!=null&&a.type))switch(IA[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function pa(e){if(he(e))return e;if(mx(e))return e.condition}function gn(e){if(Ue(e))return e;if(E0(e))return e.condition}function mH(e,t,n,i={}){if(xv(e)){const r=Se(e)?"string":lt(e)?"number":"boolean";return de(dye(t,r,e)),{value:e}}return Ue(e)?$v(e,t,n,i):E0(e)?{...e,condition:$v(e.condition,t,n,i)}:e}function $v(e,t,n,i){if(dH(e)){const{format:r,formatType:a,...o}=e;if(rc(a)&&!n.customFormatTypes)return de(Zz(t)),$v(o,t,n,i)}else{const r=xd(e)?"axis":fH(e)?"legend":WM(e)?"header":null;if(r&&e[r]){const{format:a,formatType:o,...l}=e[r];if(rc(o)&&!n.customFormatTypes)return de(Zz(t)),$v({...e,[r]:l},t,n,i)}}return he(e)?JM(e,t,i):gbe(e)}function gbe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lt(n)?"quantitative":Se(n)?"nominal":_c(n)?"temporal":void 0,{...e,type:t}}function JM(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:o}=e,l={...e};if(!n&&i&&!_M(i)&&!ql(i)&&!as(i)&&(de(gye(i)),delete l.aggregate),r&&(l.timeUnit=Cn(r)),o&&(l.field=`${o}`),Tt(a)&&(l.bin=yx(a,t)),Rn(a)&&!Jt(t)&&de(Xye(t)),bi(l)){const{type:c}=l,f=vve(c);c!==f&&(l.type=f),c!=="quantitative"&&ax(i)&&(de(hye(c,i)),l.type="quantitative")}else if(!uP(t)){const c=hbe(l,t);l.type=c}if(bi(l)){const{compatible:c,warning:f}=pbe(l,t)||{};c===!1&&de(f)}if(QM(l)&&Se(l.sort)){const{sort:c}=l;if(i8(c))return{...l,sort:{encoding:c}};const f=c.substring(1);if(c.charAt(0)==="-"&&i8(f))return{...l,sort:{encoding:f,order:"descending"}}}if(WM(l)){const{header:c}=l;if(c){const{orient:f,...d}=c;if(f)return{...l,header:{...d,labelOrient:c.labelOrient||f,titleOrient:c.titleOrient||f}}}}return l}function yx(e,t){return uc(e)?{maxbins:Iz(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Iz(t)}:e}const Ef={compatible:!0};function pbe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Zo:case Ko:case Jb:return Cv(e)?Ef:{compatible:!1,warning:vye(t)};case Ut:case Tn:case Rl:case Vd:case Ui:case uo:case co:case g0:case p0:case ex:case Ju:case tx:case nx:case bc:case Pr:case Sa:case ix:return Ef;case _a:case jr:case Ea:case wa:return n!==nc?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Ef;case hs:case Fl:case Ll:case Ul:case ds:case fs:case cs:case xa:case lo:case zl:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Ef;case Bi:case Bl:return!Cv(e)&&!lbe(e)?{compatible:!1,warning:bye(t)}:Ef;case md:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ef}}function Ed(e){const{formatType:t}=Sd(e);return t==="time"||!t&&mbe(e)}function mbe(e){return e&&(e.type==="temporal"||he(e)&&!!e.timeUnit)}function vx(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var c;const a=t&&((c=Cn(t))==null?void 0:c.unit);let o=a||n==="temporal",l;return y0(e)?l=e.expr:$e(e)?l=e.signal:_c(e)?(o=!0,l=tc(e)):(Se(e)||lt(e))&&o&&(l=`datetime(${bt(e)})`,ave(a)&&(lt(e)&&e<1e4||Se(e)&&isNaN(Date.parse(e)))&&(l=tc({[a]:e}))),l?i&&o?`time(${l})`:l:r?void 0:bt(e)}function yH(e,t){const{type:n}=e;return t.map(i=>{const r=he(e)&&!wc(e.timeUnit)?e.timeUnit:void 0,a=vx(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function _0(e,t){return Tt(e.bin)?ho(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const o8={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function w0(e){return e==null?void 0:e.condition}const vH=["domain","grid","labels","ticks","title"],ybe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},bH={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},vbe={...bH,style:1,labelExpr:1,encoding:1};function s8(e){return _e(vbe,e)}const bbe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},xH=le(bbe);function ps(e){return ce(e,"mark")}class bx{constructor(t,n){se(this,"name");se(this,"run");this.name=t,this.run=n}hasMatchingType(t){return ps(t)?Vve(t.mark)===this.name:!1}}function Fu(e,t){const n=e==null?void 0:e[t];return n?ie(n)?hd(n,i=>!!i.field):he(n)||mx(n):!1}function SH(e,t){const n=e==null?void 0:e[t];return n?ie(n)?hd(n,i=>!!i.field):he(n)||go(n)||E0(n):!1}function EH(e,t){if(Jt(t)){const n=e[t];if((he(n)||go(n))&&(UM(n.type)||he(n)&&n.timeUnit)){const i=vM(t);return SH(e,i)}}return!1}function _H(e){return hd(g1e,t=>{if(Fu(e,t)){const n=e[t];if(ie(n))return hd(n,i=>!!i.aggregate);{const i=pa(n);return i&&!!i.aggregate}}return!1})}function wH(e,t){const n=[],i=[],r=[],a=[],o={};return ek(e,(l,c)=>{if(he(l)){const{field:f,aggregate:d,bin:g,timeUnit:p,...y}=l;if(d||p||g){const v=ZM(l),b=v==null?void 0:v.title;let S=be(l,{forAs:!0});const _={...b?[]:{title:If(l,t,{allowDisabling:!0})},...y,field:S};if(d){let w;if(ql(d)?(w="argmax",S=be({op:"argmax",field:d.argmax},{forAs:!0}),_.field=`${S}.${f}`):as(d)?(w="argmin",S=be({op:"argmin",field:d.argmin},{forAs:!0}),_.field=`${S}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(w=d),w){const A={op:w,as:S};f&&(A.field=f),a.push(A)}}else if(n.push(S),bi(l)&&Tt(g)){if(i.push({bin:g,field:f,as:S}),n.push(be(l,{binSuffix:"end"})),_0(l,c)&&n.push(be(l,{binSuffix:"range"})),Jt(c)){const w={field:`${S}_end`};o[`${c}2`]=w}_.bin="binned",uP(c)||(_.type=nc)}else if(p&&!wc(p)){r.push({timeUnit:p,field:f,as:S});const w=bi(l)&&l.type!==yd&&"time";w&&(c===g0||c===Ju?_.formatType=w:A1e(c)?_.legend={formatType:w,..._.legend}:Jt(c)&&(_.axis={formatType:w,..._.axis}))}o[c]=_}else n.push(f),o[c]=e[c]}else o[c]=e[c]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:o}}function xbe(e,t,n){const i=$1e(t,n);if(i){if(i==="binned"){const r=e[t===xa?Ut:Tn];return!!(he(r)&&he(e[t])&&Rn(r.bin))}}else return!1;return!0}function Sbe(e,t,n,i){const r={};for(const a of le(e))lP(a)||de(yye(a));for(let a of x1e){if(!e[a])continue;const o=e[a];if(m0(a)){const l=b1e(a),c=r[l];if(he(c)&&yve(c.type)&&he(o)&&!c.timeUnit){de(fye(l));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(de(cye),a=Pr),!xbe(e,a,t)){de(sx(a,t));continue}if(a===ds&&t==="line"){const l=pa(e[a]);if(l!=null&&l.aggregate){de(mye);continue}}if(a===Ui&&(n?"fill"in e:"stroke"in e)){de($P("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===p0||a===md&&!ie(o)&&!ga(o)||a===Ju&&ie(o)){if(o){if(a===md){const l=e[a];if(cH(l)){r[a]=l;continue}}r[a]=Ee(o).reduce((l,c)=>(he(c)?l.push(JM(c,a)):de(jA(c,a)),l),[])}}else{if(a===Ju&&o===null)r[a]=null;else if(!he(o)&&!go(o)&&!ga(o)&&!S0(o)&&!$e(o)){de(jA(o,a));continue}r[a]=mH(o,a,i)}}return r}function xx(e,t){const n={};for(const i of le(e)){const r=mH(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function Ebe(e){const t=[];for(const n of le(e))if(Fu(e,n)){const i=e[n],r=Ee(i);for(const a of r)he(a)?t.push(a):mx(a)&&t.push(a.condition)}return t}function ek(e,t,n){if(e)for(const i of le(e)){const r=e[i];if(ie(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function _be(e,t,n,i){return e?le(e).reduce((r,a)=>{const o=e[a];return ie(o)?o.reduce((l,c)=>t.call(i,l,c,a),r):t.call(i,r,o,a)},n):n}function AH(e,t){return le(t).reduce((n,i)=>{switch(i){case Ut:case Tn:case tx:case ix:case nx:case xa:case lo:case Rl:case Vd:case Pr:case fs:case Sa:case cs:case zl:case Ea:case _a:case wa:case jr:case g0:case Bi:case bc:case Ju:return n;case md:if(e==="line"||e==="trail")return n;case p0:case ex:{const r=t[i];if(ie(r)||he(r))for(const a of Ee(r))a.aggregate||n.push(be(a,{}));return n}case ds:if(e==="trail")return n;case Ui:case uo:case co:case hs:case Fl:case Ll:case Bl:case Ul:{const r=pa(t[i]);return r&&!r.aggregate&&n.push(be(r,{})),n}}},[])}function wbe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(ie(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return ie(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function GA(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:o,titlePrefix:l})=>{const c=i?` of ${tk(t)}`:"";return{field:o+t.field,type:t.type,title:$e(l)?{signal:`${l}"${escape(c)}"`}:l+c}}),a=Ebe(n).map(obe);return{tooltip:[...r,...rr(a,Ge)]}}function tk(e){const{title:t,field:n}=e;return Kt(t,n)}function nk(e,t,n,i,r){const{scale:a,axis:o}=n;return({partName:l,mark:c,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:g={}})=>{const p=tk(n);return CH(e,l,r,{mark:c,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...o!==void 0?{axis:o}:{}},...Se(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...g}})}}function CH(e,t,n,i){const{clip:r,color:a,opacity:o}=e,l=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...o?{opacity:o}:{},...Ja(i.mark)?i.mark:{type:i.mark},style:`${l}-${String(t)}`,...uc(e[t])?{}:e[t]}}]:[]}function $H(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],o=i[`${r}2`],l=i[`${r}Error`],c=i[`${r}Error2`];return{continuousAxisChannelDef:x1(a,n),continuousAxisChannelDef2:x1(o,n),continuousAxisChannelDefError:x1(l,n),continuousAxisChannelDefError2:x1(c,n),continuousAxis:r}}function x1(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...i}=e;return n!==t&&de(Yye(n,t)),i}else return e}function TH(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(Ja(n)&&n.orient)return n.orient;if(ol(r)){if(ol(a)){const o=he(r)&&r.aggregate,l=he(a)&&a.aggregate;if(!o&&l===t)return"vertical";if(!l&&o===t)return"horizontal";if(o===t&&l===t)throw new Error("Both x and y cannot have aggregate");return Ed(a)&&!Ed(r)?"horizontal":"vertical"}return"horizontal"}else{if(ol(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Tv="boxplot",Abe=["box","median","outliers","rule","ticks"],Cbe=new bx(Tv,kH);function MH(e){return lt(e)?"tukey":e}function kH(e,{config:t}){e={...e,encoding:xx(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...o}=e,l=Ja(n)?n:{type:n};r&&de(AP("boxplot"));const c=l.extent??t.boxplot.extent,f=gt("size",l,t),d=l.invalid,g=MH(c),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:S,groupby:_,aggregate:w,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:M,customTooltipWithoutAggregatedField:k}=$be(e,c,t),T=Xd(b.field),{color:N,size:R,...B}=A,U=Gr=>nk(l,S,b,Gr,t.boxplot),Q=U(B),G=U(A),I=(xe(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",z=U({...B,...R?{size:R}:{},color:{condition:{test:`${yt(`lower_box_${b.field}`)} >= ${yt(`upper_box_${b.field}`)}`,...N||{value:I}}}}),D=GA([{fieldPrefix:g==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:g==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),q={type:"tick",color:"black",opacity:1,orient:$,invalid:d,aria:!1},Y=g==="min-max"?D:GA([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),Z=[...Q({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...Q({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...Q({partName:"ticks",mark:q,positionPrefix:"lower_whisker",extraEncoding:Y}),...Q({partName:"ticks",mark:q,positionPrefix:"upper_whisker",extraEncoding:Y})],ue=[...g!=="tukey"?Z:[],...G({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:M,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:D}),...z({partName:"median",mark:{type:"tick",invalid:d,...xe(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:$,aria:!1},positionPrefix:"mid_box",extraEncoding:D})];if(g==="min-max")return{...o,transform:(o.transform??[]).concat(v),layer:ue};const F=yt(`lower_box_${b.field}`),H=yt(`upper_box_${b.field}`),ae=`(${H} - ${F})`,pe=`${F} - ${c} * ${ae}`,ve=`${H} + ${c} * ${ae}`,De=yt(b.field),Xe={joinaggregate:OH(b.field),groupby:_},Nt={transform:[{filter:`(${pe} <= ${De}) && (${De} <= ${ve})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${T}`},{op:"max",field:b.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${T}`},...w],groupby:_}],layer:Z},{tooltip:me,...Fe}=B,{scale:qe,axis:fe}=b,tn=tk(b),Qe=CH(l,"outliers",t.boxplot,{transform:[{filter:`(${De} < ${pe}) || (${De} > ${ve})`}],mark:"point",encoding:{[S]:{field:b.field,type:b.type,...tn!==void 0?{title:tn}:{},...qe!==void 0?{scale:qe}:{},...fe!==void 0?{axis:fe}:{}},...Fe,...N?{color:N}:{},...k?{tooltip:k}:{}}})[0];let jt;const nn=[...p,...y,Xe];return Qe?jt={transform:nn,layer:[Qe,Nt]}:(jt=Nt,jt.transform.unshift(...nn)),{...o,layer:[jt,{transform:v,layer:ue}]}}function OH(e){const t=Xd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function $be(e,t,n){const i=TH(e,Tv),{continuousAxisChannelDef:r,continuousAxis:a}=$H(e,i,Tv),o=r.field,l=Xd(o),c=MH(t),f=[...OH(o),{op:"median",field:o,as:`mid_box_${l}`},{op:"min",field:o,as:(c==="min-max"?"lower_whisker_":"min_")+l},{op:"max",field:o,as:(c==="min-max"?"upper_whisker_":"max_")+l}],d=c==="min-max"||c==="tukey"?[]:[{calculate:`${yt(`upper_box_${l}`)} - ${yt(`lower_box_${l}`)}`,as:`iqr_${l}`},{calculate:`min(${yt(`upper_box_${l}`)} + ${yt(`iqr_${l}`)} * ${t}, ${yt(`max_${l}`)})`,as:`upper_whisker_${l}`},{calculate:`max(${yt(`lower_box_${l}`)} - ${yt(`iqr_${l}`)} * ${t}, ${yt(`min_${l}`)})`,as:`lower_whisker_${l}`}],{[a]:g,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=wbe(p),{bins:b,timeUnits:S,aggregate:_,groupby:w,encoding:A}=wH(v,n),$=i==="vertical"?"horizontal":"vertical",M=i,k=[...b,...S,{aggregate:[..._,...f],groupby:w},...d];return{bins:b,timeUnits:S,transform:k,groupby:w,aggregate:_,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:M,customTooltipWithoutAggregatedField:y}}const ik="errorbar",Tbe=["ticks","rule"],Mbe=new bx(ik,DH);function DH(e,{config:t}){e={...e,encoding:xx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:o,markDef:l,outerSpec:c,tooltipEncoding:f}=NH(e,ik,t);delete a.size;const d=nk(l,r,i,a,t.errorbar),g=l.thickness,p=l.size,y={type:"tick",orient:o,aria:!1,...g!==void 0?{thickness:g}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...g!==void 0?{size:g}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...c,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function kbe(e,t){const{encoding:n}=e;if(Obe(n))return{orient:TH(e,t),inputType:"raw"};const i=Dbe(n),r=Nbe(n),a=n.x,o=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const l=n.x2,c=n.y2;if(Ue(l)&&Ue(c))throw new Error(`${t} cannot have both x2 and y2`);if(Ue(l)){if(ol(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ue(c)){if(ol(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const l=n.xError,c=n.xError2,f=n.yError,d=n.yError2;if(Ue(c)&&!Ue(l))throw new Error(`${t} cannot have xError2 without xError`);if(Ue(d)&&!Ue(f))throw new Error(`${t} cannot have yError2 without yError`);if(Ue(l)&&Ue(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ue(l)){if(ol(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ue(f)){if(ol(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Obe(e){return(Ue(e.x)||Ue(e.y))&&!Ue(e.x2)&&!Ue(e.y2)&&!Ue(e.xError)&&!Ue(e.xError2)&&!Ue(e.yError)&&!Ue(e.yError2)}function Dbe(e){return Ue(e.x2)||Ue(e.y2)}function Nbe(e){return Ue(e.xError)||Ue(e.xError2)||Ue(e.yError)||Ue(e.yError2)}function NH(e,t,n){const{mark:i,encoding:r,params:a,projection:o,...l}=e,c=Ja(i)?i:{type:i};a&&de(AP(t));const{orient:f,inputType:d}=kbe(e,t),{continuousAxisChannelDef:g,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=$H(e,f,t),{errorBarSpecificAggregate:S,postAggregateCalculates:_,tooltipSummary:w,tooltipTitleWithFieldName:A}=Rbe(c,g,p,y,v,d,t,n),{[b]:$,[b==="x"?"x2":"y2"]:M,[b==="x"?"xError":"yError"]:k,[b==="x"?"xError2":"yError2"]:T,...N}=r,{bins:R,timeUnits:B,aggregate:U,groupby:Q,encoding:G}=wH(N,n),I=[...U,...S],z=d!=="raw"?[]:Q,D=GA(w,g,G,A);return{transform:[...l.transform??[],...R,...B,...I.length===0?[]:[{aggregate:I,groupby:z}],..._],groupby:z,continuousAxisChannelDef:g,continuousAxis:b,encodingWithoutContinuousAxis:G,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:l,tooltipEncoding:D}}function Rbe(e,t,n,i,r,a,o,l){let c=[],f=[];const d=t.field;let g,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":l.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&de(Gye(y,v,o)),v==="stderr"||v==="stdev")c=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${yt(`center_${d}`)} + ${yt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${yt(`center_${d}`)} - ${yt(`extent_${d}`)}`,as:`lower_${d}`}],g=[{fieldPrefix:"center_",titlePrefix:h0(y)},{fieldPrefix:"upper_",titlePrefix:l8(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:l8(y,v,"-")}],p=!0;else{let b,S,_;v==="ci"?(b="mean",S="ci0",_="ci1"):(b="median",S="q1",_="q3"),c=[{op:S,field:d,as:`lower_${d}`},{op:_,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],g=[{fieldPrefix:"upper_",titlePrefix:If({field:d,aggregate:_,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:If({field:d,aggregate:S,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:If({field:d,aggregate:b,type:"quantitative"},l,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&de(Hye(e.center,e.extent)),a==="aggregated-upper-lower"?(g=[],f=[{calculate:yt(n.field),as:`upper_${d}`},{calculate:yt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(g=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${yt(d)} + ${yt(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${yt(d)} + ${yt(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${yt(d)} - ${yt(i.field)}`,as:`lower_${d}`}));for(const y of f)g.push({fieldPrefix:y.as.substring(0,6),titlePrefix:Ku(Ku(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:c,tooltipSummary:g,tooltipTitleWithFieldName:p}}function l8(e,t,n){return`${h0(e)} ${n} ${t}`}const rk="errorband",zbe=["band","borders"],Fbe=new bx(rk,RH);function RH(e,{config:t}){e={...e,encoding:xx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:o,outerSpec:l,tooltipEncoding:c}=NH(e,rk,t),f=o,d=nk(f,r,i,a,t.errorband),g=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:g?"area":"rect"},y={type:g?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return g?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?de(Jz("interpolate")):f.tension&&de(Jz("tension")),{...l,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:c}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:c})]}}const zH={};function ak(e,t,n){const i=new bx(e,t);zH[e]={normalizer:i,parts:n}}function Lbe(){return le(zH)}ak(Tv,kH,Abe);ak(ik,DH,Tbe);ak(rk,RH,zbe);const Ube=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],FH={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},LH={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Bbe=le(FH),qbe=le(LH),jbe={header:1,headerRow:1,headerColumn:1,headerFacet:1},UH=le(jbe),BH=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Ibe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Pbe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ma="_vgsid_",Hbe={point:{on:"click",fields:[ma],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function ok(e){return e==="legend"||!!(e!=null&&e.legend)}function x_(e){return ok(e)&&xe(e)}function sk(e){return!!(e!=null&&e.select)}function qH(e){const t=[];for(const n of e||[]){if(sk(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const o={...a,bind:r,init:i};t.push(o)}else{const o={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(o)}}return t}function Gbe(e){return Sx(e)||uk(e)||lk(e)}function lk(e){return ce(e,"concat")}function Sx(e){return ce(e,"vconcat")}function uk(e){return ce(e,"hconcat")}function jH({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function eo(e){return ce(e,"step")}function u8(e){return ce(e,"view")||ce(e,"width")||ce(e,"height")}const c8=20,Ybe={align:1,bounds:1,center:1,columns:1,spacing:1},Xbe=le(Ybe);function Vbe(e,t,n){const i=n[t],r={},{spacing:a,columns:o}=i;a!==void 0&&(r.spacing=a),o!==void 0&&(px(e)&&!x0(e.facet)||lk(e))&&(r.columns=o),Sx(e)&&(r.columns=1);for(const l of Xbe)if(e[l]!==void 0)if(l==="spacing"){const c=e[l];r[l]=lt(c)?c:{row:c.row??a,column:c.column??a}}else r[l]=e[l];return r}function YA(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function XA(e,t){const n=Mv(e,t);return eo(n)?n.step:IH}function Mv(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Kt(n,{step:e.step})}const IH=20,Wbe={continuousWidth:300,continuousHeight:300,step:IH},Qbe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Wbe,mark:Ive,arc:{},area:{},bar:Yve,circle:{},geoshape:{},image:{},line:{},point:{},rect:HM,rule:{color:"black"},square:{},text:{color:"black"},tick:Xve,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:_ve,projection:{},legend:Ibe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Hbe,style:{},title:{},facet:{spacing:c8},concat:{spacing:c8},normalizedNumberFormat:".0%"},Fo=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],f8={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},d8={blue:Fo[0],orange:Fo[1],red:Fo[2],teal:Fo[3],green:Fo[4],yellow:Fo[5],purple:Fo[6],pink:Fo[7],brown:Fo[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Zbe(e={}){return{signals:[{name:"color",value:xe(e)?{...d8,...e}:d8}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Kbe(e){return{signals:[{name:"fontSize",value:xe(e)?{...f8,...e}:f8}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Jbe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function PH(e){const t=le(e||{}),n={};for(const i of t){const r=e[i];n[i]=w0(r)?vP(r):nr(r)}return n}function exe(e){const t=le(e),n={};for(const i of t)n[i]=PH(e[i]);return n}const txe=[...KP,...xH,...UH,"background","padding","legend","lineBreak","scale","style","title","view"];function HH(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,o=kd({},Le(Qbe),n?Jbe(n):{},t?Zbe(t):{},i?Kbe(i):{},a||{});r&&Od(o,"selection",r,!0);const l=ur(o,txe);for(const c of["background","lineBreak","padding"])o[c]&&(l[c]=nr(o[c]));for(const c of KP)o[c]&&(l[c]=zn(o[c]));for(const c of xH)o[c]&&(l[c]=PH(o[c]));for(const c of UH)o[c]&&(l[c]=zn(o[c]));if(o.legend&&(l.legend=zn(o.legend)),o.scale){const{invalid:c,...f}=o.scale,d=zn(c,{level:1});l.scale={...zn(f),...le(d).length>0?{invalid:d}:{}}}return o.style&&(l.style=exe(o.style)),o.title&&(l.title=zn(o.title)),o.view&&(l.view=zn(o.view)),l}const nxe=new Set(["view",...Fve]),ixe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],rxe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...jve};function axe(e){e=Le(e);for(const t of ixe)delete e[t];if(e.axis)for(const t in e.axis)w0(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Ube)delete e.legend[t];if(e.mark){for(const t of t8)delete e.mark[t];e.mark.tooltip&&xe(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(qH(e.params)),delete e.params);for(const t of nxe){for(const i of t8)delete e[t][i];const n=rxe[t];if(n)for(const i of n)delete e[t][i];sxe(e,t)}for(const t of Lbe())delete e[t];oxe(e);for(const t in e)xe(e[t])&&$t(e[t])&&delete e[t];return $t(e)?void 0:e}function oxe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=mP(e.title);$t(t)||(e.style["group-title"]={...e.style["group-title"],...t}),$t(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),$t(i)?delete e.title:e.title=i}function sxe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};$t(a)||(e.style[n??t]=a),delete e[t]}function Ex(e){return ce(e,"layer")}function lxe(e){return ce(e,"repeat")}function uxe(e){return!ie(e.repeat)&&ce(e.repeat,"layer")}class ck{map(t,n){return px(t)?this.mapFacet(t,n):lxe(t)?this.mapRepeat(t,n):uk(t)?this.mapHConcat(t,n):Sx(t)?this.mapVConcat(t,n):lk(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Ex(t))return this.mapLayer(t,n);if(ps(t))return this.mapUnit(t,n);throw new Error(wM(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const cxe={zero:1,center:1,normalize:1};function fxe(e){return _e(cxe,e)}const dxe=new Set([WP,fx,cx,_v,hx,IM,PM,dx,QP,jM]),hxe=new Set([fx,cx,WP]);function _f(e){return he(e)&&bd(e)==="quantitative"&&!e.bin}function h8(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),o=e[t],l=e[r];if(he(o)&&he(l))if(_f(o)&&_f(l)){if(o.stack)return t;if(l.stack)return r;const c=he(o)&&!!o.aggregate,f=he(l)&&!!l.aggregate;if(c!==f)return c?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(_f(o))return t;if(_f(l))return r}else{if(_f(o))return a&&n==="vertical"?void 0:t;if(_f(l))return a&&n==="horizontal"?void 0:r}}function gxe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function GH(e,t){var b,S;const n=Ja(e)?e:{type:e},i=n.type;if(!dxe.has(i))return null;const r=h8(t,"x",n)||h8(t,"theta",n);if(!r)return null;const a=t[r],o=he(a)?be(a,{}):void 0,l=gxe(r),c=[],f=new Set;if(t[l]){const _=t[l],w=he(_)?be(_,{}):void 0;w&&w!==o&&(c.push(l),f.add(w))}const d=l==="x"?"xOffset":"yOffset",g=t[d],p=he(g)?be(g,{}):void 0;p&&p!==o&&(c.push(d),f.add(p));const y=S1e.reduce((_,w)=>{if(w!=="tooltip"&&Fu(t,w)){const A=t[w];for(const $ of Ee(A)){const M=pa($);if(M.aggregate)continue;const k=be(M,{});(!k||!f.has(k))&&_.push({channel:w,fieldDef:M})}}return _},[]);let v;return a.stack!==void 0?uc(a.stack)?v=a.stack?"zero":null:v=a.stack:hxe.has(i)&&(v="zero"),!v||!fxe(v)||_H(t)&&y.length===0?null:((b=a==null?void 0:a.scale)!=null&&b.type&&((S=a==null?void 0:a.scale)==null?void 0:S.type)!==Fn.LINEAR&&a!=null&&a.stack&&de(jye(a.scale.type)),Ue(t[fo(r)])?(a.stack!==void 0&&de(qye(r)),null):(he(a)&&a.aggregate&&!R1e.has(a.aggregate)&&de(Iye(a.aggregate)),{groupbyChannels:c,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:jl(i),stackBy:y,offset:v}))}function YH(e,t,n){const i=zn(e),r=gt("orient",i,n);if(i.orient=vxe(i.type,t,r),r!==void 0&&r!==i.orient&&de(_ye(i.orient,r)),i.type==="bar"&&i.orient){const c=gt("cornerRadiusEnd",i,n);if(c!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:Hve[i.orient];for(const d of f)i[d]=c;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=gt("opacity",i,n),o=gt("fillOpacity",i,n);return a===void 0&&o===void 0&&(i.opacity=mxe(i.type,t)),gt("cursor",i,n)===void 0&&(i.cursor=pxe(i,t,n)),i}function pxe(e,t,n){return t.href||e.href||gt("href",e,n)?"pointer":e.cursor}const XH=.7;function mxe(e,t){if(We([hx,jM,IM,PM],e)&&!_H(t))return XH}function yxe(e,t,{graticule:n}){if(n)return!1;const i=Ka("filled",e,t),r=e.type;return Kt(i,r!==hx&&r!==dx&&r!==_v)}function vxe(e,t,n){switch(e){case hx:case IM:case PM:case Rve:case Nve:return}const{x:i,y:r,x2:a,y2:o}=t;switch(e){case QP:case fx:if(he(i)&&(Rn(i.bin)||he(r)&&r.aggregate&&!i.aggregate))return"vertical";if(he(r)&&(Rn(r.bin)||he(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(o||a){if(n)return n;if(!a)return(he(i)&&i.type===nc&&!Tt(i.bin)||Av(i))&&he(r)&&Rn(r.bin)?"horizontal":"vertical";if(!o)return(he(r)&&r.type===nc&&!Tt(r.bin)||Av(r))&&he(i)&&Rn(i.bin)?"vertical":"horizontal"}case _v:if(a&&!(he(i)&&Rn(i.bin))&&o&&!(he(r)&&Rn(r.bin)))return;case cx:if(o)return he(r)&&Rn(r.bin)?"horizontal":"vertical";if(a)return he(i)&&Rn(i.bin)?"vertical":"horizontal";if(e===_v){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case dx:case jM:{const l=a8(i),c=a8(r);if(n)return n;if(l&&!c)return e!=="tick"?"horizontal":"vertical";if(!l&&c)return e!=="tick"?"vertical":"horizontal";if(l&&c)return"vertical";{const f=bi(i)&&i.type===yd,d=bi(r)&&r.type===yd;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function bxe(e){const{point:t,line:n,...i}=e;return le(i).length>1?i:i.type}function xxe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ur(e[t],["point","line"])});return e}function S_(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?xe(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?xe(t.point)?t.point:{}:void 0}function g8(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Sxe{constructor(){se(this,"name","path-overlay")}hasMatchingType(t,n){if(ps(t)){const{mark:i,encoding:r}=t,a=Ja(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!S_(a,n[a.type],r);case"area":return!!S_(a,n[a.type],r)||!!g8(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:o,mark:l,name:c,encoding:f,...d}=t,g=xx(f,r),p=Ja(l)?l:{type:l},y=S_(p,r[p.type],g),v=p.type==="area"&&g8(p,r[p.type]),b=[{name:c,...a?{params:a}:{},mark:bxe({...p.type==="area"&&gt("opacity",p,r)==null&&gt("fillOpacity",p,r)==null?{opacity:XH}:{},...p}),encoding:ur(g,["shape"])}],S=GH(YH(p,g,r),g);let _=g;if(S){const{fieldChannel:w,offset:A}=S;_={...g,[w]:{...g[w],...A?{stack:A}:{}}}}return _=ur(_,["y2","x2"]),v&&b.push({...o?{projection:o}:{},mark:{type:"line",...dd(p,["clip","interpolate","tension","tooltip"]),...v},encoding:_}),y&&b.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...dd(p,["clip","tooltip"]),...y},encoding:_}),i({...d,layer:b},{...n,config:xxe(r)})}}function Exe(e,t){return t?x0(e)?WH(e,t):VH(e,t):e}function E_(e,t){return t?WH(e,t):e}function VA(e,t,n){const i=t[e];if(rbe(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};de(eye(i.repeat));return}return t}function VH(e,t){if(e=VA("field",e,t),e!==void 0){if(e===null)return null;if(QM(e)&&Jo(e.sort)){const n=VA("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function p8(e,t){if(he(e))return VH(e,t);{const n=VA("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function m8(e,t){if(Ue(e)){const n=p8(e,t);if(n)return n;if(S0(e))return{condition:e.condition}}else{if(E0(e)){const n=p8(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function WH(e,t){const n={};for(const i in e)if(ce(e,i)){const r=e[i];if(ie(r))n[i]=r.map(a=>m8(a,t)).filter(a=>a);else{const a=m8(r,t);a!==void 0&&(n[i]=a)}}return n}class _xe{constructor(){se(this,"name","RuleForRangedLine")}hasMatchingType(t){if(ps(t)){const{encoding:n,mark:i}=t;if(i==="line"||Ja(i)&&i.type==="line")for(const r of v1e){const a=xc(r),o=n[a];if(n[r]&&(he(o)&&!Rn(o.bin)||go(o)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return de(Eye(!!r.x2,!!r.y2)),i({...t,mark:xe(a)?{...a,type:"rule"}:"rule"},n)}}class wxe extends ck{constructor(){super(...arguments);se(this,"nonFacetUnitNormalizers",[Cbe,Mbe,Fbe,new Sxe,new _xe])}map(n,i){if(ps(n)){const r=Fu(n.encoding,Zo),a=Fu(n.encoding,Ko),o=Fu(n.encoding,Jb);if(r||a||o)return this.mapFacetedUnit(n,i)}return super.map(n,i)}mapUnit(n,i){const{parentEncoding:r,parentProjection:a}=i,o=E_(n.encoding,i.repeater),l={...n,...n.name?{name:[i.repeaterPrefix,n.name].filter(f=>f).join("_")}:{},...o?{encoding:o}:{}};if(r||a)return this.mapUnitWithParentEncodingOrProjection(l,i);const c=this.mapLayerOrUnit.bind(this);for(const f of this.nonFacetUnitNormalizers)if(f.hasMatchingType(l,i.config))return f.run(l,i,c);return l}mapRepeat(n,i){return uxe(n)?this.mapLayerRepeat(n,i):this.mapNonLayerRepeat(n,i)}mapLayerRepeat(n,i){const{repeat:r,spec:a,...o}=n,{row:l,column:c,layer:f}=r,{repeater:d={},repeaterPrefix:g=""}=i;return l||c?this.mapRepeat({...n,repeat:{...l?{row:l}:{},...c?{column:c}:{}},spec:{repeat:{layer:f},spec:a}},i):{...o,layer:f.map(p=>{const y={...d,layer:p},v=`${(a.name?`${a.name}_`:"")+g}child__layer_${Lt(p)}`,b=this.mapLayerOrUnit(a,{...i,repeater:y,repeaterPrefix:v});return b.name=v,b})}}mapNonLayerRepeat(n,i){const{repeat:r,spec:a,data:o,...l}=n;!ie(r)&&n.columns&&(n=ur(n,["columns"]),de(Wz("repeat")));const c=[],{repeater:f={},repeaterPrefix:d=""}=i,g=!ie(r)&&r.row||[f?f.row:null],p=!ie(r)&&r.column||[f?f.column:null],y=ie(r)&&r||[f?f.repeat:null];for(const b of y)for(const S of g)for(const _ of p){const w={repeat:b,row:S,column:_,layer:f.layer},A=`${(a.name?`${a.name}_`:"")+d}child__${ie(r)?`${Lt(b)}`:(r.row?`row_${Lt(S)}`:"")+(r.column?`column_${Lt(_)}`:"")}`,$=this.map(a,{...i,repeater:w,repeaterPrefix:A});$.name=A,c.push(ur($,["data"]))}const v=ie(r)?n.columns:r.column?r.column.length:1;return{data:a.data??o,align:"all",...l,columns:v,concat:c}}mapFacet(n,i){const{facet:r}=n;return x0(r)&&n.columns&&(n=ur(n,["columns"]),de(Wz("facet"))),super.mapFacet(n,i)}mapUnitWithParentEncodingOrProjection(n,i){const{encoding:r,projection:a}=n,{parentEncoding:o,parentProjection:l,config:c}=i,f=v8({parentProjection:l,projection:a}),d=y8({parentEncoding:o,encoding:E_(r,i.repeater)});return this.mapUnit({...n,...f?{projection:f}:{},...d?{encoding:d}:{}},{config:c})}mapFacetedUnit(n,i){const{row:r,column:a,facet:o,...l}=n.encoding,{mark:c,width:f,projection:d,height:g,view:p,params:y,encoding:v,...b}=n,{facetMapping:S,layout:_}=this.getFacetMappingAndLayout({row:r,column:a,facet:o},i),w=E_(l,i.repeater);return this.mapFacet({...b,..._,facet:S,spec:{...f?{width:f}:{},...g?{height:g}:{},...p?{view:p}:{},...d?{projection:d}:{},mark:c,encoding:w,...y?{params:y}:{}}},i)}getFacetMappingAndLayout(n,i){const{row:r,column:a,facet:o}=n;if(r||a){o&&de(xye([...r?[Zo]:[],...a?[Ko]:[]]));const l={},c={};for(const f of[Zo,Ko]){const d=n[f];if(d){const{align:g,center:p,spacing:y,columns:v,...b}=d;l[f]=b;for(const S of["align","center","spacing"])d[S]!==void 0&&(c[S]??(c[S]={}),c[S][f]=d[S])}}return{facetMapping:l,layout:c}}else{const{align:l,center:c,spacing:f,columns:d,...g}=o;return{facetMapping:Exe(g,i.repeater),layout:{...l?{align:l}:{},...c?{center:c}:{},...f?{spacing:f}:{},...d?{columns:d}:{}}}}}mapLayer(n,{parentEncoding:i,parentProjection:r,...a}){const{encoding:o,projection:l,...c}=n,f={...a,parentEncoding:y8({parentEncoding:i,encoding:o,layer:!0}),parentProjection:v8({parentProjection:r,projection:l})};return super.mapLayer({...c,...n.name?{name:[f.repeaterPrefix,n.name].filter(d=>d).join("_")}:{}},f)}}function y8({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...le(e),...le(t)]);for(const a of r){const o=t[a],l=e[a];if(Ue(o)){const c={...l,...o};i[a]=c}else E0(o)?i[a]={...o,condition:{...l,...o.condition}}:o||o===null?i[a]=o:(n||ga(l)||$e(l)||Ue(l)||ie(l))&&(i[a]=l)}}else i=t;return!i||$t(i)?void 0:i}function v8(e){const{parentProjection:t,projection:n}=e;return t&&n&&de(uye({parentProjection:t,projection:n})),n??t}function fk(e){return ce(e,"filter")}function Axe(e){return ce(e,"stop")}function QH(e){return ce(e,"lookup")}function Cxe(e){return ce(e,"data")}function $xe(e){return ce(e,"param")}function Txe(e){return ce(e,"pivot")}function Mxe(e){return ce(e,"density")}function kxe(e){return ce(e,"quantile")}function Oxe(e){return ce(e,"regression")}function Dxe(e){return ce(e,"loess")}function Nxe(e){return ce(e,"sample")}function Rxe(e){return ce(e,"window")}function zxe(e){return ce(e,"joinaggregate")}function Fxe(e){return ce(e,"flatten")}function Lxe(e){return ce(e,"calculate")}function ZH(e){return ce(e,"bin")}function Uxe(e){return ce(e,"impute")}function Bxe(e){return ce(e,"timeUnit")}function qxe(e){return ce(e,"aggregate")}function jxe(e){return ce(e,"stack")}function Ixe(e){return ce(e,"fold")}function Pxe(e){return ce(e,"extent")&&!ce(e,"density")&&!ce(e,"regression")}function Hxe(e){return e.map(t=>fk(t)?{filter:qf(t.filter,mve)}:t)}class Gxe extends ck{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=b8(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=b8(t,n),t.encoding){const i={};for(const[r,a]of _l(t.encoding))i[r]=KH(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:_l(i).map(([a,o])=>{const{init:l,bind:c,empty:f,...d}=o;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const g of ln(n.selectionPredicates[a]??{}))g.empty=f!=="none";return{name:a,value:l,select:d,bind:c}})}:t}}function b8(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(fk(a))return{filter:WA(a,t)};if(ZH(a)&&Sc(a.bin))return{...a,bin:JH(a.bin)};if(QH(a)){const{selection:o,...l}=a.from;return o?{...a,from:{param:o,...l}}:a}return a});return{...i,transform:r}}return e}function KH(e,t){var i,r;const n=Le(e);if(he(n)&&Sc(n.bin)&&(n.bin=JH(n.bin)),Ac(n)&&((r=(i=n.scale)==null?void 0:i.domain)!=null&&r.selection)){const{selection:a,...o}=n.scale.domain;n.scale.domain={...o,...a?{param:a}:{}}}if(S0(n))if(ie(n.condition))n.condition=n.condition.map(a=>{const{selection:o,param:l,test:c,...f}=a;return l?a:{...f,test:WA(a,t)}});else{const{selection:a,param:o,test:l,...c}=KH(n.condition,t);n.condition=o?n.condition:{...c,test:WA(n.condition,t)}}return n}function JH(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function WA(e,t){const n=i=>qf(i,r=>{var l;const a=t.emptySelections[r]??!0,o={param:r,empty:a};return(l=t.selectionPredicates)[r]??(l[r]=[]),t.selectionPredicates[r].push(o),o});return e.selection?n(e.selection):qf(e.test||e.filter,i=>i.selection?n(i.selection):i)}class QA extends ck{map(t,n){const i=n.selections??[];if(t.params&&!ps(t)){const r=[];for(const a of t.params)sk(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const o of i)if(!o.views||!o.views.length)a.push(o);else for(const l of o.views)(Se(l)&&(l===t.name||r.includes(l))||ie(l)&&l.map(c=>r.indexOf(c)).every((c,f,d)=>c!==-1&&(f===0||c>d[f-1])))&&a.push(o);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=QA.prototype[e];QA.prototype[e]=function(n,i){return t.call(this,n,Yxe(n,i))}}function Yxe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function eG(e,t){t===void 0&&(t=HH(e.config));const n=Qxe(e,t),{width:i,height:r}=e,a=Zxe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const Xxe=new wxe,Vxe=new Gxe,Wxe=new QA;function Qxe(e,t={}){const n={config:t};return Wxe.map(Xxe.map(Vxe.map(e,n),n),n)}function x8(e){return Se(e)?{type:e}:e??{}}function Zxe(e,t,n){let{width:i,height:r}=t;const a=ps(e)||Ex(e),o={};a?i=="container"&&r=="container"?(o.type="fit",o.contains="padding"):i=="container"?(o.type="fit-x",o.contains="padding"):r=="container"&&(o.type="fit-y",o.contains="padding"):(i=="container"&&(de(Gz("width")),i=void 0),r=="container"&&(de(Gz("height")),r=void 0));const l={type:"pad",...o,...n?x8(n.autosize):{},...x8(e.autosize)};if(l.type==="fit"&&!a&&(de(P1e),l.type="pad"),i=="container"&&!(l.type=="fit"||l.type=="fit-x")&&de(Yz("width")),r=="container"&&!(l.type=="fit"||l.type=="fit-y")&&de(Yz("height")),!ar(l,{type:"pad"}))return l}function Kxe(e){return["fit","fit-x","fit-y"].includes(e)}function Jxe(e){return e?`fit-${rx(e)}`:"fit"}const e2e=["background","padding"];function S8(e,t){const n={};for(const i of e2e)e&&e[i]!==void 0&&(n[i]=nr(e[i]));return t&&(n.params=e.params),n}class ms{constructor(t={},n={}){se(this,"explicit");se(this,"implicit");this.explicit=t,this.implicit=n}clone(){return new ms(Le(this.explicit),Le(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Kt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of le(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ra(e){return{explicit:!0,value:e}}function Ji(e){return{explicit:!1,value:e}}function tG(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:_x(t,n,i,r)}}function _x(e,t,n,i){return e.explicit&&t.explicit&&de(Dye(n,i,e.value,t.value)),e}function Cl(e,t,n,i,r=_x){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ar(e.value,t.value)?e:r(e,t,n,i)}class t2e extends ms{constructor(n={},i={},r=!1){super(n,i);se(this,"explicit");se(this,"implicit");se(this,"parseNothing");this.explicit=n,this.implicit=i,this.parseNothing=r}clone(){const n=super.clone();return n.parseNothing=this.parseNothing,n}}function _d(e){return ce(e,"url")}function Op(e){return ce(e,"values")}function nG(e){return ce(e,"name")&&!_d(e)&&!Op(e)&&!dl(e)}function dl(e){return e&&(iG(e)||rG(e)||dk(e))}function iG(e){return ce(e,"sequence")}function rG(e){return ce(e,"sphere")}function dk(e){return ce(e,"graticule")}var qt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(qt||(qt={}));function aG({invalid:e,isPath:t}){switch(JP(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function n2e(e){const{marks:t,scales:n}=aG(e);return t===n?qt.Main:n==="include-invalid-values"?qt.PreFilterInvalid:qt.PostFilterInvalid}class xt{constructor(t,n){se(this,"debugName");se(this,"_children",[]);se(this,"_parent",null);se(this,"_hash");this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){de(oye);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Ri extends xt{constructor(n,i,r,a){super(n,i);se(this,"type");se(this,"refCounts");se(this,"_source");se(this,"_name");this.type=r,this.refCounts=a,this._source=this._name=i,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const n=new this.constructor;return n.debugName=`clone_${this.debugName}`,n._source=this._source,n._name=`clone_${this._name}`,n.type=this.type,n.refCounts=this.refCounts,n.refCounts[n._name]=0,n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${eP()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(n){this._source=n}}function __(e){return e.as!==void 0}function E8(e){return`${e}_end`}class Pa extends xt{constructor(n,i){super(n);se(this,"timeUnits");this.timeUnits=i}clone(){return new Pa(null,Le(this.timeUnits))}static makeFromEncoding(n,i){const r=i.reduceFieldDef((a,o,l)=>{const{field:c,timeUnit:f}=o;if(f){let d;if(wc(f)){if(Ft(i)){const{mark:g,markDef:p,config:y}=i,v=Al({fieldDef:o,markDef:p,config:y});(kp(g)||v)&&(d={timeUnit:Cn(f),field:c})}}else d={as:be(o,{forAs:!0}),field:c,timeUnit:f};if(Ft(i)){const{mark:g,markDef:p,config:y}=i,v=Al({fieldDef:o,markDef:p,config:y});kp(g)&&Jt(l)&&v!==.5&&(d.rectBandPosition=v)}d&&(a[Ge(d)]=d)}return a},{});return $t(r)?null:new Pa(n,r)}static makeFromTransform(n,i){const{timeUnit:r,...a}={...i},o=Cn(r),l={...a,timeUnit:o};return new Pa(n,{[Ge(l)]:l})}merge(n){this.timeUnits={...this.timeUnits};for(const i in n.timeUnits)this.timeUnits[i]||(this.timeUnits[i]=n.timeUnits[i]);for(const i of n.children)n.removeChild(i),i.parent=this;n.remove()}removeFormulas(n){const i={};for(const[r,a]of _l(this.timeUnits)){const o=__(a)?a.as:`${a.field}_end`;n.has(o)||(i[r]=a)}this.timeUnits=i}producedFields(){return new Set(ln(this.timeUnits).map(n=>__(n)?n.as:E8(n.field)))}dependentFields(){return new Set(ln(this.timeUnits).map(n=>n.field))}hash(){return`TimeUnit ${Ge(this.timeUnits)}`}assemble(){const n=[];for(const i of ln(this.timeUnits)){const{rectBandPosition:r}=i,a=Cn(i.timeUnit);if(__(i)){const{field:o,as:l}=i,{unit:c,utc:f,...d}=a,g=[l,`${l}_end`];n.push({field:qr(o),type:"timeunit",...c?{units:lx(c)}:{},...f?{timezone:"utc"}:{},...d,as:g}),n.push(..._8(g,r,a))}else if(i){const{field:o}=i,l=KI(o),c=oG({timeUnit:a,field:l}),f=E8(l);n.push({type:"formula",expr:c,as:f}),n.push(..._8([l,f],r,a))}}return n}}const wx="offsetted_rect_start",Ax="offsetted_rect_end";function oG({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=FP(i),{part:o,step:l}=qP(a,e.step);return`${r?"utcOffset":"timeOffset"}('${o}', ${yt(t)}, ${n?-l:l})`}function _8([e,t],n,i){if(n!==void 0&&n!==.5){const r=yt(e),a=yt(t);return[{type:"formula",expr:w8([oG({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${wx}`},{type:"formula",expr:w8([r,a],n+.5),as:`${e}_${Ax}`}]}return[]}function w8([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const A0="_tuple_fields";class i2e{constructor(...t){se(this,"hasChannel");se(this,"hasField");se(this,"hasSelectionId");se(this,"timeUnit");se(this,"items");this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const r2e={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new i2e),a={},o={},l=new Set,c=(v,b)=>{const S=b==="visual"?v.channel:v.field;let _=Lt(`${i}_${S}`);for(let w=1;l.has(_);w++)_=Lt(`${i}_${S}_${w}`);return l.add(_),{[b]:_}},f=t.type,d=e.config.selection[f],g=n.value!==void 0?Ee(n.value):null;let{fields:p,encodings:y}=xe(n.select)?n.select:{};if(!p&&!y&&g){for(const v of g)if(xe(v))for(const b of le(v))y1e(b)?(y||(y=[])).push(b):f==="interval"?(de(J1e),y=d.encodings):(p??(p=[])).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let S=b.field;if(b.aggregate){de(H1e(v,b.aggregate));continue}else if(!S){de(Vz(v));continue}if(b.timeUnit&&!wc(b.timeUnit)){S=e.vgField(v);const _={timeUnit:b.timeUnit,as:S,field:b.field};o[Ge(_)]=_}if(!a[S]){const _=f==="interval"&&ho(v)&&ha(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",w={field:S,channel:v,type:_,index:r.items.length};w.signals={...c(w,"data"),...c(w,"visual")},r.items.push(a[S]=w),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===ma,oP(v)?(w.geoChannel=v,w.channel=aP(v),r.hasChannel[w.channel]=a[S]):r.hasChannel[v]=a[S]}}else de(Vz(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...c(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ma}g&&(t.init=g.map(v=>r.items.map(b=>xe(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),$t(o)||(r.timeUnit=new Pa(null,o))},signals:(e,t,n)=>{const i=t.name+A0;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(cG)})}},sG="_curr",iy="anim_value",$f="anim_clock",ZA="eased_anim_clock",lG="min_extent",uG="max_range_extent",w_="last_tick_at",A_="is_playing",a2e=1/60*1e3,o2e=(e,t)=>[{name:ZA,update:$f},{name:`${e}_domain`,init:`domain('${t}')`},{name:lG,init:`extent(${e}_domain)[0]`},{name:uG,init:`extent(range('${t}'))[1]`},{name:iy,update:`invert('${t}', ${ZA})`}],s2e={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Ha(t)&&(n=n.concat([{name:$f,init:"0",on:[{events:{type:"timer",throttle:a2e},update:`${A_} ? (${$f} + (now() - ${w_}) > ${uG} ? 0 : ${$f} + (now() - ${w_})) : ${$f}`}]},{name:w_,init:"now()",on:[{events:[{signal:$f},{signal:A_}],update:"now()"}]},{name:A_,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+A0,a=t.project,o="(item().isVoronoi ? datum.datum : datum)",l=ln(e.component.selection??{}).reduce((d,g)=>g.type==="interval"?d.concat(g.name+Pf):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${l?` && ${l}`:""}`;let f=`unit: ${Lu(e)}, `;if(t.project.hasSelectionId)f+=`${ma}: ${o}[${ge(ma)}]`;else if(Ha(t))f+=`fields: ${r}, values: [${iy} ? ${iy} : ${lG}]`;else{const d=a.items.map(g=>{const p=e.fieldDef(g.channel);return p!=null&&p.bin?`[${o}[${ge(e.vgField(g.channel,{}))}], ${o}[${ge(e.vgField(g.channel,{binSuffix:"end"}))}]]`:`${o}[${ge(g.field)}]`}).join(", ");f+=`fields: ${r}, values: [${d}]`}if(Ha(t))return n.concat(o2e(t.name,e.scaleName(zl)),[{name:i+ss,on:[{events:[{signal:ZA},{signal:iy}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+ss,on:d?[{events:d,update:`${c} ? {${f}} : null`,force:!0}]:[]}])}}};function cG(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=qr(r.field),r}function ac(e,t=!0,n=ni){if(ie(e)){const i=e.map(r=>ac(r,t,n));return t?`[${i.join(", ")}]`:i}else if(_c(e))return n(t?tc(e):rve(e));return t?n(bt(e)):e}function l2e(e,t){for(const n of ln(e.component.selection??{})){const i=n.name;let r=`${i}${ss}, ${n.resolve==="global"?"true":`{unit: ${Lu(e)}}`}`;for(const a of Cx)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+z2e,on:[{events:{signal:n.name+ss},update:`modify(${ge(n.name+oc)}, ${r})`}]})}return hk(t)}function u2e(e,t){if(e.component.selection&&le(e.component.selection).length){const n=ge(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Nl("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return hk(t)}function c2e(e,t){let n=!1;for(const i of ln(e.component.selection??{})){const r=i.name,a=ge(r+oc);if(t.filter(l=>l.name===r).length===0){const l=i.resolve==="global"?"union":i.resolve,c=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${TG}(${a}, ${ge(l)}${c}`})}n=!0;for(const l of Cx)l.defined(i)&&l.topLevelSignals&&(t=l.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),hk(t)}function f2e(e,t){const n=[],i=[],r=Lu(e,{escape:!1});for(const a of ln(e.component.selection??{})){const o={name:a.name+oc};if(a.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:ma}}]),a.init){const c=a.project.items.map(cG);o.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[ma]:ac(f,!1)[0]})):a.init.map(f=>({unit:r,fields:c,values:ac(f,!1)}))}if([...n,...t].filter(c=>c.name===a.name+oc).length||n.push(o),Ha(a)&&t.length){const c=e.lookupDataSource(e.getDataName(qt.Main)),f=t.find(g=>g.name===c),d=f.transform.find(g=>g.type==="filter"&&g.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const g={name:f.name+sG,source:f.name,transform:[d]};i.push(g)}}}return n.concat(t,i)}function fG(e,t){for(const n of ln(e.component.selection??{}))for(const i of Cx)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function d2e(e,t){for(const n of e.children)Ft(n)&&(t=fG(n,t));return t}function h2e(e,t,n,i){const r=NG(e,t.param,t);return{signal:ha(n.get("type"))&&ie(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function hk(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const es={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!ho(r))continue;const a=e.getScaleComponent(r),o=a?a.get("type"):void 0;if(o=="sequential"&&de(V1e),!a||!ha(o)){de(X1e);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(o=>n.filter(l=>l.name===o.signals.data).length===0);if(!e.parent||JA(e)||i.length===0)return n;const r=n.find(o=>o.name===t.name);let a=r.update;if(a.includes(TG))r.update=`{${i.map(o=>`${ge(qr(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of i){const l=`${ge(qr(o.field))}: ${o.signals.data}`;a.includes(l)||(a=`${a.substring(0,a.length-1)}, ${l}}`)}r.update=a}return n.concat(i.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!JA(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function KA(e,t){return`domain(${ge(e.scaleName(t))})`}function JA(e){return e.parent&&eh(e.parent)&&(!e.parent.parent||JA(e.parent.parent))}const Pf="_brush",dG="_scale_trigger",yg="geo_interval_init_tick",hG="_init",g2e="_center",p2e={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...xe(n.select)?n.select:{}};r.fields=[ma],r.encodings||(r.encodings=n.value?le(n.value):[_a,Ea]),n.select={type:"interval",...r}}if(t.translate&&!es.defined(t)){const r=`!event.item || event.item.mark.name !== ${ge(t.name+Pf)}`;for(const a of t.events){if(!a.between){de(`${a} is not an ordered event stream for interval selections.`);continue}const o=Ee((i=a.between[0]).filter??(i.filter=[]));o.includes(r)||o.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+ss,a=ln(t.project.hasChannel).filter(l=>l.channel===Ut||l.channel===Tn),o=t.init?t.init[0]:null;if(n.push(...a.reduce((l,c)=>l.concat(m2e(e,t,c,o==null?void 0:o[c.index])),[])),e.hasProjection){const l=ge(e.projectionName()),c=e.projectionName()+g2e,{x:f,y:d}=t.project.hasChannel,g=f==null?void 0:f.signals.visual,p=d==null?void 0:d.signals.visual,y=f?o==null?void 0:o[f.index]:`${c}[0]`,v=d?o==null?void 0:o[d.index]:`${c}[1]`,b=M=>e.getSizeSignalRef(M).signal,S=`[[${g?`${g}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${g?`${g}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;o&&(n.unshift({name:i+hG,init:`[scale(${l}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${l}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(k=>k.name===c)||n.unshift({name:c,update:`invert(${l}, [${b("width")}/2, ${b("height")}/2])`})));const _=`intersect(${S}, {markname: ${ge(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${Lu(e)}}`,A=`vlSelectionTuples(${_}, ${w})`,$=a.map(M=>M.signals.visual);return n.concat({name:r,on:[{events:[...$.length?[{signal:$.join(" || ")}]:[],...o?[{signal:yg}]:[]],update:A}]})}else{if(!es.defined(t)){const f=i+dG,d=a.map(g=>{const p=g.channel,{data:y,visual:v}=g.signals,b=ge(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),_=ha(S)?"+":"";return`(!isArray(${y}) || (${_}invert(${b}, ${v})[0] === ${_}${y}[0] && ${_}invert(${b}, ${v})[1] === ${_}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(g=>({scale:e.scaleName(g.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const l=a.map(f=>f.signals.data),c=`unit: ${Lu(e)}, fields: ${i+A0}, values`;return n.concat({name:r,...o?{init:`{${c}: ${ac(o)}}`}:{},...l.length?{on:[{events:[{signal:l.join(" || ")}],update:`${l.join(" && ")} ? {${c}: [${l}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ft(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===yg).length||n.unshift({name:yg,value:null,on:[{events:"timer{1}",update:`${yg} === null ? {} : ${yg}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,o=r==null?void 0:r.signals.visual,l=a==null?void 0:a.signals.visual,c=`data(${ge(t.name+oc)})`;if(es.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${o}[0]`}:{value:0},y:a!==void 0?{signal:`${l}[0]`}:{value:0},x2:r!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${l}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const S of le(f))f[S]=[{test:`${c}.length && ${c}[0].unit === ${Lu(e)}`,...f[S]},{value:0}];const{fill:d,fillOpacity:g,cursor:p,...y}=t.mark,v=le(y).reduce((S,_)=>(S[_]=[{test:[r!==void 0&&`${o}[0] !== ${o}[1]`,a!==void 0&&`${l}[0] !== ${l}[1]`].filter(w=>w).join(" && "),value:y[_]},{value:null}],S),{}),b=p??(t.translate?"move":null);return[{name:`${i+Pf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:g}},update:f}},...n,{name:i+Pf,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function m2e(e,t,n,i){const r=!e.hasProjection,a=n.channel,o=n.signals.visual,l=ge(r?e.scaleName(a):e.projectionName()),c=p=>`scale(${l}, ${p})`,f=e.getSizeSignalRef(a===Ut?"width":"height").signal,d=`${a}(unit)`,g=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${o}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=es.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,S=i?{init:ac(i,!0,c)}:{value:[]};return g.push({events:{signal:t.name+dG},update:ha(b)?`[${c(`${p}[0]`)}, ${c(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:o,...S,on:g},{name:p,...i?{init:ac(i)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${l}, ${o})`}]}]}else{const p=a===Ut?0:1,y=t.name+hG,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:o,...v,on:g}]}}function Qd({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=S0(t)&&t.condition;let o=[];a&&(o=Ee(a).map(f=>{const d=r(f);if(ibe(f)){const{param:g,empty:p}=f;return{test:DG(e,{param:g,empty:p}),...d}}else return{test:Dv(e,f.test),...d}})),i!==void 0&&o.push(i);const l=r(t);return l!==void 0&&o.push(l),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function gk(e,t="text"){const n=e.encoding[t];return Qd({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>pk(i,e.config),invalidValueRef:void 0})}function pk(e,t,n="datum"){if(e){if(ga(e))return Dt(e.value);if(Ue(e)){const{format:i,formatType:r}=Sd(e);return VM({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function gG(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,o=n.tooltip;if(ie(o))return{tooltip:A8({tooltip:o},a,r,t)};{const l=t.reactiveGeom?"datum.datum":"datum";return Qd({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:f=>{const d=mG(f,r,l);if(d)return d;if(f===null)return;let g=gt("tooltip",i,r);if(g===!0&&(g={content:"encoding"}),Se(g))return{value:g};if(xe(g))return $e(g)?g:g.content==="encoding"?A8(n,a,r,t):{signal:l}},invalidValueRef:void 0})}}function pG(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,o=i?"datum.datum":"datum",l=[];function c(d,g){const p=xc(g),y=bi(d)?d:{...d,type:e[p].type},v=y.title||KM(y,r),b=Ee(v).join(", ").replaceAll(/"/g,'\\"');let S;if(Jt(g)){const _=g==="x"?"x2":"y2",w=pa(e[_]);if(Rn(y.bin)&&w){const A=be(y,{expr:o}),$=be(w,{expr:o}),{format:M,formatType:k}=Sd(y);S=b0(A,$,M,k,r),a.add(_)}}if((Jt(g)||g===Pr||g===Sa)&&t&&t.fieldChannel===g&&t.offset==="normalize"){const{format:_,formatType:w}=Sd(y);S=VM({fieldOrDatumDef:y,format:_,formatType:w,expr:o,config:r,normalizeStack:!0}).signal}S??(S=mG(y,r,o).signal),l.push({channel:g,key:b,value:S})}ek(e,(d,g)=>{he(d)?c(d,g):mx(d)&&c(d.condition,g)});const f={};for(const{channel:d,key:g,value:p}of l)!a.has(d)&&!f[g]&&(f[g]=p);return f}function A8(e,t,n,{reactiveGeom:i}={}){const r=pG(e,t,n,{reactiveGeom:i}),a=_l(r).map(([o,l])=>`"${o}": ${l}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function mG(e,t,n="datum"){if(he(e)&&UM(e.type)&&!Sd(e).format&&!Sd(e).formatType){const i=`${n}["${e.field}"]`;return{signal:`isValid(${i}) ? isArray(${i}) ? join(${i}, '\\n') : ${i} : ""+${i}`}}return pk(e,t,n)}function y2e(e){const{markDef:t,config:n}=e,i=gt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...v2e(e),...b2e(e)}}function v2e(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=gt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:_e(B1e,t)?{}:{ariaRoleDescription:{value:t}}}function b2e(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Qd({model:e,channelDef:a,vgChannel:"description",mainRefFn:c=>pk(c,e.config),invalidValueRef:void 0});const o=gt("description",n,i);if(o!=null)return{description:Dt(o)};if(i.aria===!1)return{};const l=pG(t,r,i);if(!$t(l))return{description:{signal:_l(l).filter(([c])=>!c.startsWith("_")).map(([c,f])=>[c,f.replaceAll("\\n"," ")]).map(([c,f],d)=>`"${d>0?"; ":""}${c}: " + (${f})`).join(" + ")}}}function Ln(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:o}=n;let{defaultRef:l,defaultValue:c}=n;const f=r[e];l===void 0&&(c??(c=gt(e,i,a,{vgChannel:o,ignoreVgConfig:!S0(f)})),c!==void 0&&(l=Dt(c)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},g=tH({...d,scaleChannel:e,channelDef:f});return Qd({model:t,channelDef:f,vgChannel:o??e,invalidValueRef:g,mainRefFn:y=>XM({...d,channel:e,channelDef:y,stack:null,defaultRef:l})})}function yG(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,o=t.filled??gt("filled",n,r),l=We(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,c=gt(o===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[o===!0&&"color"]??l,f=gt(o===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[o===!1&&"color"],d=o?"fill":"stroke",g={...c?{fill:Dt(c)}:{},...f?{stroke:Dt(f)}:{}};return n.color&&(o?n.fill:n.stroke)&&de($P("property",{fill:"fill"in n,stroke:"stroke"in n})),{...g,...Ln("color",e,{vgChannel:d,defaultValue:o?c:f}),...Ln("fill",e,{defaultValue:i.fill?c:void 0}),...Ln("stroke",e,{defaultValue:i.stroke?f:void 0})}}function x2e(e){const{encoding:t,mark:n}=e,i=t.order;return!jl(n)&&ga(i)?Qd({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Dt(r.value),invalidValueRef:void 0}):{}}function wd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,o=t[a],l=n[a];if((a==="xOffset"||a==="yOffset")&&l)return{offsetType:"encoding",offset:XM({channel:a,channelDef:l,markDef:t,config:i==null?void 0:i.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Dt(o),bandPosition:r})};const c=t[a];return c?{offsetType:"visual",offset:c}:{}}function gi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:o,stack:l}=t,c=r[e],f=r[fo(e)],d=t.scaleName(e),g=t.getScaleComponent(e),{offset:p,offsetType:y}=wd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=mk({model:t,defaultPos:n,channel:e,scaleName:d,scale:g}),b=!c&&Jt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:S2e({channel:e,channelDef:c,channel2Def:f,markDef:a,config:o,scaleName:d,scale:g,stack:l,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function S2e(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:o}=e;if(Ue(n)&&r&&t===r.fieldChannel){if(he(n)){let l=n.bandPosition;if(l===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(l=.5),l!==void 0)return wv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:l,offset:a})}return zu(n,i,{suffix:"end"},{offset:a})}return YM(e)}function mk({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:o}=e;return()=>{const l=xc(n),c=wl(n),f=gt(n,a,o,{vgChannel:c});if(f!==void 0)return ip(n,f);switch(t){case"zeroOrMin":return C8({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:l,config:o});case"zeroOrMax":return C8({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:l,config:o});case"mid":return{...e[qi(n)],mult:.5}}}}function C8({mainChannel:e,config:t,...n}){const i=eH(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:o}=r.zeroOrMax;return{signal:`min(${a},${o})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const E2e={left:"x",center:"xc",right:"x2"},_2e={top:"y",middle:"yc",bottom:"y2"};function vG(e,t,n,i="middle"){if(e==="radius"||e==="theta")return wl(e);const r=e==="x"?"align":"baseline",a=gt(r,t,n);let o;return $e(a)?(de(Sye(r)),o=void 0):o=a,e==="x"?E2e[o||(i==="top"?"left":"center")]:_2e[o||i]}function kv(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?bG(e,t,{defaultPos:n,defaultPos2:i}):gi(e,t,{defaultPos:n})}function bG(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,o=fo(e),l=qi(e),c=w2e(t,i,o),f=c[l]?vG(e,r,a):wl(e);return{...gi(e,t,{defaultPos:n,vgChannel:f}),...c}}function w2e(e,t,n){const{encoding:i,mark:r,markDef:a,stack:o,config:l}=e,c=xc(n),f=qi(n),d=wl(n),g=i[c],p=e.scaleName(c),y=e.getScaleComponent(c),{offset:v}=n in i||n in a?wd({channel:n,markDef:a,encoding:i,model:e}):wd({channel:c,markDef:a,encoding:i,model:e});if(!g&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=qi(n),_=e.markDef[S];return _!=null?{[S]:{value:_}}:{[d]:{field:e.getName(n)}}}const b=A2e({channel:n,channelDef:g,channel2Def:i[n],markDef:a,config:l,scaleName:p,scale:y,stack:o,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:S1(n,a)||S1(n,{[n]:qA(n,a,l.style),[f]:qA(f,a,l.style)})||S1(n,l[r])||S1(n,l.mark)||{[d]:mk({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function A2e({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:o,stack:l,offset:c,defaultRef:f}){return Ue(t)&&l&&e.charAt(0)===l.fieldChannel.charAt(0)?zu(t,a,{suffix:"start"},{offset:c}):YM({channel:e,channelDef:n,scaleName:a,scale:o,stack:l,markDef:i,config:r,offset:c,defaultRef:f})}function S1(e,t){const n=qi(e),i=wl(e);if(t[i]!==void 0)return{[i]:ip(e,t[i])};if(t[e]!==void 0)return{[i]:ip(e,t[e])};if(t[n]){const r=t[n];if(ic(r))de(pye(n));else return{[n]:ip(e,r)}}}function os(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,o=fo(t),l=qi(t),c=i[t],f=i[o],d=e.getScaleComponent(t),g=d?d.get("type"):void 0,p=r.orient,y=i[l]??i.size??gt("size",r,n,{vgChannel:l}),v=cP(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return he(c)&&(Tt(c.bin)||Rn(c.bin)||c.timeUnit&&!f)&&!(y&&!ic(y))&&!i[v]&&!Vt(g)?T2e({fieldDef:c,fieldDef2:f,channel:t,model:e}):(Ue(c)&&Vt(g)||b)&&!f?$2e(c,t,e):bG(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function C2e(e,t,n,i,r,a,o){if(ic(r))if(n){const c=n.get("type");if(c==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=Ka("minBandSize",{type:o},i);return{signal:d?`max(${oa(d)}, ${f})`:f}}else r.band!==1&&(de(Aye(c)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if($e(r))return r;if(r)return{value:r}}if(n){const c=n.get("range");if(Ec(c)&&lt(c.step))return{value:c.step-2}}if(!a){const{bandPaddingInner:c,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:g}=i.scale,p=Kt(c,o==="tick"?g:o==="bar"?f:d);if($e(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(lt(p))return{signal:`${1-p} * ${e}`}}return{value:XA(i.view,e)-2}}function $2e(e,t,n){var R,B;const{markDef:i,encoding:r,config:a,stack:o}=n,l=i.orient,c=n.scaleName(t),f=n.getScaleComponent(t),d=qi(t),g=fo(t),p=cP(t),y=n.scaleName(p),v=n.getScaleComponent(vM(t)),b=i.type==="tick"||l==="horizontal"&&t==="y"||l==="vertical"&&t==="x";let S;(r.size||i.size)&&(b?S=Ln("size",n,{vgChannel:d,defaultRef:Dt(i.size)}):de(Mye(i.type)));const _=!!S,w=lH({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(R=f||v)==null?void 0:R.get("type"),useVlSizeChannel:b});S=S||{[d]:C2e(d,y||c,v||f,a,w,!!e,i.type)};const A=((B=f||v)==null?void 0:B.get("type"))==="band"&&ic(w)&&!_?"top":"middle",$=vG(t,i,a,A),M=$==="xc"||$==="yc",{offset:k,offsetType:T}=wd({channel:t,markDef:i,encoding:r,model:n,bandPosition:M?.5:0}),N=YM({channel:t,channelDef:e,markDef:i,config:a,scaleName:c,scale:f,stack:o,offset:k,defaultRef:mk({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:f}),bandPosition:M?T==="encoding"?0:.5:$e(w)?{signal:`(1-${w})/2`}:ic(w)?(1-w.band)/2:0});if(d)return{[$]:N,...S};{const U=wl(g),Q=S[d],G=k?{...Q,offset:k}:Q;return{[$]:N,[U]:ie(N)?[N[0],{...N[1],offset:G}]:{...N,offset:G}}}}function $8(e,t,n,i,r,a,o){if(rP(e))return 0;const l=e==="x"||e==="y2",c=l?-t/2:t/2;if($e(n)||$e(r)||$e(i)||a){const f=oa(n),d=oa(r),g=oa(i),p=oa(a),v=a?`(${o} < ${p} ? ${l?"":"-"}0.5 * (${p} - (${o})) : ${c})`:c,b=g?`${g} + `:"",S=f?`(${f} ? -1 : 1) * `:"",_=d?`(${d} + ${v})`:v;return{signal:b+S+_}}else return r=r||0,i+(n?-r-c:+r+c)}function T2e({fieldDef:e,fieldDef2:t,channel:n,model:i}){var B;const{config:r,markDef:a,encoding:o}=i,l=i.getScaleComponent(n),c=i.scaleName(n),f=l?l.get("type"):void 0,d=l.get("reverse"),g=lH({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),p=(B=i.component.axes[n])==null?void 0:B[0],y=(p==null?void 0:p.get("translate"))??.5,v=Jt(n)?gt("binSpacing",a,r)??0:0,b=fo(n),S=wl(n),_=wl(b),w=Ka("minBandSize",a,r),{offset:A}=wd({channel:n,markDef:a,encoding:o,model:i,bandPosition:0}),{offset:$}=wd({channel:b,markDef:a,encoding:o,model:i,bandPosition:0}),M=Kve({fieldDef:e,scaleName:c}),k=$8(n,v,d,y,A,w,M),T=$8(b,v,d,y,$??A,w,M),N=$e(g)?{signal:`(1-${g.signal})/2`}:ic(g)?(1-g.band)/2:.5,R=Al({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(Tt(e.bin)||e.timeUnit){const U=e.timeUnit&&R!==.5;return{[_]:T8({fieldDef:e,scaleName:c,bandPosition:N,offset:T,useRectOffsetField:U}),[S]:T8({fieldDef:e,scaleName:c,bandPosition:$e(N)?{signal:`1-${N.signal}`}:1-N,offset:k,useRectOffsetField:U})}}else if(Rn(e.bin)){const U=zu(e,c,{},{offset:T});if(he(t))return{[_]:U,[S]:zu(t,c,{},{offset:k})};if(Sc(e.bin)&&e.bin.step)return{[_]:U,[S]:{signal:`scale("${c}", ${be(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}de(kP(b))}function T8({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return wv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:wx,endSuffix:Ax}:{}})}const M2e=new Set(["aria","width","height"]);function Hr(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?yG(e):{};return{...k2e(e.markDef,t),...M8("fill",n),...M8("stroke",i),...Ln("opacity",e),...Ln("fillOpacity",e),...Ln("strokeOpacity",e),...Ln("strokeWidth",e),...Ln("strokeDash",e),...x2e(e),...gG(e),...gk(e,"href"),...y2e(e)}}function M8(e,t){return t?{[e]:t}:{}}function k2e(e,t){return U1e.reduce((n,i)=>(!M2e.has(i)&&ce(e,i)&&t[i]!=="ignore"&&(n[i]=Dt(e[i])),n),{})}function yk(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{var f;let o;if(!ho(a)||!(o=e.getScaleType(a)))return;const l=ax(r.aggregate),c=GM({scaleChannel:a,markDef:n,config:t,scaleType:o,isCountAggregate:l});if(Wve(c)){const d=e.vgField(a,{expr:"datum",binSuffix:(f=e.stack)!=null&&f.impute?"mid":void 0});d&&i.add(d)}}),i.size>0)return{defined:{signal:[...i].map(a=>ux(a,!0)).join(" && ")}}}function k8(e,t){if(t!==void 0)return{[e]:Dt(t)}}const C_="voronoi",xG={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(C_)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(jl(a))return de(G1e(a)),n;const o={name:e.getName(C_),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...gG(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let l=0,c=!1;return n.forEach((f,d)=>{const g=f.name??"";g===e.component.mark[0].name?l=d:g.includes(C_)&&(c=!0)}),c||n.splice(l+1,0,o),n}},SG={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!ok(e.bind),parse:(e,t,n)=>MG(t,n),topLevelSignals:(e,t,n)=>{var c;const i=t.name,r=t.project,a=t.bind,o=(c=t.init)==null?void 0:c[0],l=xG.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((f,d)=>{const g=Lt(`${i}_${f.field}`);n.filter(y=>y.name===g).length||n.unshift({name:g,...o?{init:ac(o[d])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${l}[${ge(f.field)}] : null`}]:[],bind:a[f.field]??a[f.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+ss),o=i+A0,l=r.items.map(f=>Lt(`${i}_${f.field}`)),c=l.map(f=>`${f} !== null`).join(" && ");return l.length&&(a.update=`${c} ? {fields: ${o}, values: [${l.join(", ")}]} : null`),delete a.value,delete a.on,n}},Ov="_toggle",EG={defined:e=>e.type==="point"&&!Ha(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Ov,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ss,i=t.name+Ov;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Lu(e)}}, `}${i} ? ${n} : null`}},O2e={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Ha(e),parse:(e,t)=>{t.clear&&(t.clear=Se(t.clear)?Nl(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(SG.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Lt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(o=>o.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const o=n.findIndex(l=>l.name===r.signals.data);i(o,"null")}}else{let r=n.findIndex(a=>a.name===t.name+ss);i(r,"null"),EG.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Ov),i(r,"false"))}return n}},_G={defined:e=>{const t=e.resolve==="global"&&e.bind&&ok(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ma;return t&&!n&&de(W1e),t&&n},parse:(e,t,n)=>{const i=Le(n);if(i.select=Se(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},MG(t,i),xe(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const l of t.events)l.filter=Ee(l.filter??[]),l.filter.includes(o)||l.filter.push(o)}const r=x_(t.bind)?t.bind.legend:"click",a=Se(r)?Nl(r,"view"):Ee(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=x_(t.bind)&&t.bind.legend,a=o=>l=>{const c=Le(l);return c.markname=o,c};for(const o of t.project.items){if(!o.hasLegend)continue;const l=`${Lt(o.field)}_legend`,c=`${i}_${l}`;if(n.filter(d=>d.name===c).length===0){const d=r.merge.map(a(`${l}_symbols`)).concat(r.merge.map(a(`${l}_labels`))).concat(r.merge.map(a(`${l}_entries`)));n.unshift({name:c,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+ss),o=i+A0,l=r.items.filter(p=>p.hasLegend).map(p=>Lt(`${i}_${Lt(p.field)}_legend`)),f=`${l.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${o}, values: [${l.join(", ")}]} : null`;t.events&&l.length>0?a.on.push({events:l.map(p=>({signal:p})),update:f}):l.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Ov),g=x_(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:g}):d.on[0].events=g),n}};function D2e(e,t,n){var r;const i=(r=e.fieldDef(t))==null?void 0:r.field;for(const a of ln(e.component.selection??{})){const o=a.project.hasField[i]??a.project.hasChannel[t];if(o&&_G.defined(a)){const l=n.get("selections")??[];l.push(a.name),n.set("selections",l,!1),o.hasLegend=!0}}}const wG="_translate_anchor",AG="_translate_delta",N2e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=es.defined(t),a=i+wG,{x:o,y:l}=t.project.hasChannel;let c=Nl(t.translate,"scope");return r||(c=c.map(f=>(f.between[0].markname=i+Pf,f))),n.push({name:a,value:{},on:[{events:c.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${o!==void 0?`, extent_x: ${r?KA(e,Ut):`slice(${o.signals.visual})`}`:""}${l!==void 0?`, extent_y: ${r?KA(e,Tn):`slice(${l.signals.visual})`}`:""}}`}]},{name:i+AG,value:{},on:[{events:c,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),o!==void 0&&O8(e,t,o,"width",n),l!==void 0&&O8(e,t,l,"height",n),n}};function O8(e,t,n,i,r){const a=t.name,o=a+wG,l=a+AG,c=n.channel,f=es.defined(t),d=r.find(M=>M.name===n.signals[f?"data":"visual"]),g=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(c),y=p==null?void 0:p.get("type"),v=p==null?void 0:p.get("reverse"),b=f?c===Ut?v?"":"-":v?"-":"":"",S=`${o}.extent_${c}`,_=`${b}${l}.${c} / ${f?`${g}`:`span(${S})`}`,w=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",$=`${w}(${S}, ${_}${A})`;d.on.push({events:{signal:l},update:f?$:`clampRange(${$}, 0, ${g})`})}const CG="_zoom_anchor",$G="_zoom_delta",R2e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=es.defined(t),a=i+$G,{x:o,y:l}=t.project.hasChannel,c=ge(e.scaleName(Ut)),f=ge(e.scaleName(Tn));let d=Nl(t.zoom,"scope");return r||(d=d.map(g=>(g.markname=i+Pf,g))),n.push({name:i+CG,on:[{events:d,update:r?`{${[c?`x: invert(${c}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(g=>g).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&D8(e,t,o,"width",n),l!==void 0&&D8(e,t,l,"height",n),n}};function D8(e,t,n,i,r){const a=t.name,o=n.channel,l=es.defined(t),c=r.find(w=>w.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(o),g=d==null?void 0:d.get("type"),p=l?KA(e,o):c.name,y=a+$G,v=`${a}${CG}.${o}`,b=!l||!d?"zoomLinear":g==="log"?"zoomLog":g==="symlog"?"zoomSymlog":g==="pow"?"zoomPow":"zoomLinear",S=l?g==="pow"?`, ${d.get("exponent")??1}`:g==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${b}(${p}, ${v}, ${y}${S})`;c.on.push({events:{signal:y},update:l?_:`clampRange(${_}, 0, ${f})`})}const oc="_store",ss="_tuple",z2e="_modify",TG="vlSelectionResolve",Cx=[s2e,p2e,r2e,EG,SG,es,_G,O2e,N2e,R2e,xG];function F2e(e){let t=e.parent;for(;t&&!cr(t);)t=t.parent;return t}function Lu(e,{escape:t}={escape:!0}){let n=t?ge(e.name):e.name;const i=F2e(e);if(i){const{facet:r}=i;for(const a of Dr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${ge(i.vgField(a))}])`)}return n}function vk(e){return ln(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function MG(e,t){(Se(t.select)||!t.select.on)&&delete e.events,(Se(t.select)||!t.select.clear)&&delete e.clear,(Se(t.select)||!t.select.toggle)&&delete e.toggle}function Ha(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function eC(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...eC(e.object)),t.push(...eC(e.property))),t)}function kG(e){return e.object.type==="MemberExpression"?kG(e.object):e.object.name==="datum"}function OG(e){const t=zT(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&kG(i)&&n.add(eC(i).slice(1).join("."))}),n}class Zd extends xt{constructor(n,i,r){super(n);se(this,"model");se(this,"filter");se(this,"expr");se(this,"_dependentFields");this.model=i,this.filter=r,this.expr=Dv(this.model,this.filter,this),this._dependentFields=OG(this.expr)}clone(){return new Zd(null,this.model,Le(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function L2e(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const o=Lt(a.name),l=a.select,c=Se(l)?l:l.type,f=xe(l)?Le(l):{type:c},d=i[c];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=Le(d[y]??f[y])));const g=n[o]={...f,name:o,type:c,init:a.value,bind:a.bind,events:Se(f.on)?Nl(f.on,"scope"):Ee(Le(f.on))};if(Ha(g)&&(r++,r>1)){delete n[o];continue}const p=Le(a);for(const y of Cx)y.defined(g)&&y.parse&&y.parse(e,g,p)}return r>1&&de(tye),n}function DG(e,t,n,i="datum"){const r=Se(t)?t:t.param,a=Lt(r),o=ge(a+oc);let l;try{l=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(l.project.timeUnit){const p=n??e.component.data.raw,y=l.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const c=l.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=l.resolve==="global"?")":`, ${ge(l.resolve)})`,d=`${c}${o}, ${i}${f}`,g=`length(data(${o}))`;return t.empty===!1?`${g} && ${d}`:`!${g} || ${d}`}function NG(e,t,n){const i=Lt(t),r=n.encoding;let a=n.field,o;try{o=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=o.project.items[0].field,o.project.items.length>1&&de(nye(a));else if(r&&!a){const l=o.project.items.filter(c=>c.channel===r);!l.length||l.length>1?(a=o.project.items[0].field,de(iye(l,r,n,a))):a=l[0].field}return`${o.name}[${ge(qr(a))}]`}function U2e(e,t){for(const[n,i]of _l(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Ri(new Zd(t,e,{param:n}),r,qt.Lookup,e.component.data.outputNodeRefCounts)}}function Dv(e,t,n){return np(t,i=>Se(i)?i:hve(i)?DG(e,i,n):IP(i))}function B2e(e,t){if(e)return ie(e)&&!Qs(e)?e.map(n=>KM(n,t)).join(", "):e}function $_(e,t,n,i){var r,a;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=i}function Pg(e,t,n,i={header:!1}){var g,p;const{disable:r,orient:a,scale:o,labelExpr:l,title:c,zindex:f,...d}=e.combine();if(!r){for(const y in d){const v=y,b=ybe[v],S=d[v];if(b&&b!==t&&b!=="both")delete d[v];else if(w0(S)){const{condition:_,...w}=S,A=Ee(_),$=o8[v];if($){const{vgProp:M,part:k}=$,T=[...A.map(N=>{const{test:R,...B}=N;return{test:Dv(null,R),...B}}),w];$_(d,k,M,T),delete d[v]}else if($===null){const M={signal:A.map(k=>{const{test:T,...N}=k;return`${Dv(null,T)} ? ${Hz(N)} : `}).join("")+Hz(w)};d[v]=M}}else if($e(S)){const _=o8[v];if(_){const{vgProp:w,part:A}=_;$_(d,A,w,S),delete d[v]}}We(["labelAlign","labelBaseline"],v)&&d[v]===null&&delete d[v]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:y}=d.encode;d.encode={...y?{grid:y}:{}},$t(d.encode)&&delete d.encode}return{scale:o,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Kt(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(l!==void 0){let v=l;(p=(g=d.encode)==null?void 0:g.labels)!=null&&p.update&&$e(d.encode.labels.update.text)&&(v=Ku(l,"datum.label",d.encode.labels.update.text.signal)),$_(d,"labels","text",{signal:v})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const v of vH)e.hasAxisPart(v)||delete d.encode[v];$t(d.encode)&&delete d.encode}const y=B2e(c,n);return{scale:o,orient:a,grid:!1,...y?{title:y}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Kt(f,0)}}}}function RG(e){const{axes:t}=e.component,n=[];for(const i of gs)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",o=e.getSizeSignalRef(a).signal;a!==o&&n.push({name:a,update:o})}}return n}function q2e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Pg(r,"grid",t)),...i.map(r=>Pg(r,"grid",t)),...n.map(r=>Pg(r,"main",t)),...i.map(r=>Pg(r,"main",t))].filter(r=>r)}function N8(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},l=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...le(o),...le(l)]),f={};for(const d of c.values())f[d]={signal:`${i.signal} === "${a}" ? ${oa(o[d])} : ${oa(l[d])}`};return f}return t[r]})])}function j2e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:GP(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",o=$e(n)?"axisOrient":`axis${h0(n)}`,l=[...r,...r.map(f=>a+f.substr(4))],c=["axis",o,a];return{vlOnlyAxisConfig:N8(l,i,e,n),vgAxisConfig:N8(c,i,e,n),axisConfigStyle:I2e([...c,...l],i)}}function I2e(e,t){var i;const n=[{}];for(const r of e){let a=(i=t[r])==null?void 0:i.style;if(a){a=Ee(a);for(const o of a)n.push(t.style[o])}}return Object.assign.apply(null,n)}function tC(e,t,n,i={}){var a;const r=xP(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((a=i[o])==null?void 0:a[e])!==void 0)return{configFrom:o,configValue:i[o][e]};return{}}const R8={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??P2e(n,e),gridScale:({model:e,channel:t})=>H2e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||FG(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||zG(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Y2e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??X2e(t.type,n,he(t)&&!!t.timeUnit,he(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,o=a?t.getSizeSignalRef(a):void 0;return n.tickCount??W2e({fieldOrDatumDef:i,scaleType:r,size:o,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??Q2e({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=LG(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",o=t.fieldDef(a);return EP(r?[r8(r)]:[],he(o)?[r8(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Z2e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??K2e(n,t)};function P2e(e,t){return!Vt(e)&&he(t)&&!Tt(t==null?void 0:t.bin)&&!Rn(t==null?void 0:t.bin)}function H2e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function G2e(e,t,n,i,r){const a=t==null?void 0:t.labelAngle;if(a!==void 0)return $e(a)?a:Mp(a);{const{configValue:o}=tC("labelAngle",i,t==null?void 0:t.style,r);return o!==void 0?Mp(o):n===Ut&&We([qM,BM],e.type)&&!(he(e)&&e.timeUnit)?270:void 0}}function nC(e){return`(((${e.signal} % 360) + 360) % 360)`}function zG(e,t,n,i){if(e!==void 0)if(n==="x"){if($e(e)){const r=nC(e),a=$e(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if($e(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if($e(e)){const r=nC(e),a=$e(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if($e(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function FG(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if($e(e)){const o=nC(e),l=$e(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${o} + 90)`:o} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${o} && ${o} < ${180+r}) === ${l} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if($e(t)){const o=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${o} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function Y2e(e,t){if(t==="x"&&We(["quantitative","temporal"],e))return!0}function X2e(e,t,n,i){if(n&&!xe(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function V2e(e){return e==="x"?"bottom":"left"}function W2e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var r;if(!i&&!Vt(t)&&t!=="log"){if(he(e)){if(Tt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&We(["month","hours","day","quarter"],(r=Cn(e.timeUnit))==null?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Q2e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(he(t)){const{timeUnit:n}=t;if(n){const i=BP(n);if(i)return{signal:i}}}}function LG(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,o=r?r.title:void 0;if(a&&o)return _P(a,o);if(a)return a;if(o)return o;if(a!==void 0)return a;if(o!==void 0)return o}function Z2e(e,t){const n=e.values;if(ie(n))return yH(t,n);if($e(n))return n}function K2e(e,t){return e==="rect"&&Cv(t)?1:0}class Ad extends xt{constructor(n,i){super(n);se(this,"transform");se(this,"_dependentFields");this.transform=i,this._dependentFields=OG(this.transform.calculate)}clone(){return new Ad(null,Le(this.transform))}static parseAllForSortIndex(n,i){return i.forEachFieldDef((r,a)=>{if(Ac(r)&&sH(r.sort)){const{field:o,timeUnit:l}=r,c=r.sort,f=c.map((d,g)=>`${IP({field:o,timeUnit:l,equal:d})} ? ${g} : `).join("")+c.length;n=new Ad(n,{calculate:f,as:Cd(r,a,{forAs:!0})})}}),n}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ge(this.transform)}`}}function Cd(e,t,n){return be(e,{prefix:t,suffix:"sort_index",...n})}function $x(e,t){return We(["top","bottom"],t)?"column":We(["left","right"],t)||e==="row"?"row":"column"}function $d(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Kt((t||{})[e],r[e],n.header[e])}function Tx(e,t,n,i){const r={};for(const a of e){const o=$d(a,t||{},n,i);o!==void 0&&(r[a]=o)}return r}const bk=["row","column"],xk=["header","footer"];function J2e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:o,titleOrient:l}=Tx(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),c=$x(t,l),f=Mp(o);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...BG(f,c),...UG(c,f,a),...qG(i,r,t,Bbe,FH)}}}function UG(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=FG(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function BG(e,t){const n=zG(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function eSe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of xk)if(n[r])for(const a of n[r]){const o=nSe(e,t,r,n,a);o!=null&&i.push(o)}return i}function tSe(e,t){const{sort:n}=e;return Jo(n)?{field:be(n,{expr:"datum"}),order:n.order??"ascending"}:ie(n)?{field:Cd(e,t,{expr:"datum"}),order:"ascending"}:{field:be(e,{expr:"datum"}),order:n??"ascending"}}function iC(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:o,labelOrient:l,labelExpr:c}=Tx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=VM({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=$x(t,l);return{text:{signal:c?Ku(Ku(c,"datum.label",f),"datum.value",be(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...BG(a,d),...UG(d,a,o),...qG(n,e,t,qbe,LH)}}function nSe(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:o}=i,l=e.config?e.config:void 0;if(o&&r.labels){const{labelOrient:g}=Tx(["labelOrient"],o.header,l,t);(t==="row"&&!We(["top","bottom"],g)||t==="column"&&!We(["left","right"],g))&&(a=iC(o,t,l))}const c=cr(e)&&!x0(e.facet),f=r.axes,d=(f==null?void 0:f.length)>0;if(a||d){const g=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:tSe(o,t)}:{},...d&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[g]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const iSe={column:{start:0,end:1},row:{start:1,end:0}};function rSe(e,t){return iSe[t][e]}function aSe(e,t){const n={};for(const i of Dr){const r=e[i];if(r!=null&&r.facetFieldDef){const{titleAnchor:a,titleOrient:o}=Tx(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),l=$x(i,o),c=rSe(a,l);c!==void 0&&(n[l]=c)}}return $t(n)?void 0:n}function qG(e,t,n,i,r){const a={};for(const o of i){if(!r[o])continue;const l=$d(o,t==null?void 0:t.header,e,n);l!==void 0&&(a[r[o]]=l)}return a}function Sk(e){return[...E1(e,"width"),...E1(e,"height"),...E1(e,"childWidth"),...E1(e,"childHeight")]}function E1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(i==null||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const o=a.get("type"),l=a.get("range");if(Vt(o)&&Ec(l)){const c=e.scaleName(n);return cr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[z8(c,l)]:[z8(c,l),{name:r,update:jG(c,a,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),o=a?"containerSize()[0]":"containerSize()[1]",l=YA(e.config.view,a?"width":"height"),c=`isFinite(${o}) ? ${o} : ${l}`;return[{name:r,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:r,value:i}]}function z8(e,t){const n=`${e}_step`;return $e(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function jG(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Kt(t.get("paddingOuter"),r);let o=t.get("paddingInner");return o=i==="band"?o!==void 0?o:r:1,`bandspace(${n}, ${oa(o)}, ${oa(a)}) * ${e}_step`}function IG(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function PG(e,t){return le(e).reduce((n,i)=>({...n,...Qd({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Dt(r.value),invalidValueRef:void 0})}),{})}function HG(e,t){if(cr(t))return e==="theta"?"independent":"shared";if(eh(t))return"shared";if(Tk(t))return Jt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Ek(e,t){const n=e.scale[t],i=Jt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&de(Rye(t)),"independent"):e[i][t]||"shared"}const oSe={...Pbe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},GG=le(oSe);class sSe extends ms{}const F8={symbols:lSe,gradient:uSe,labels:cSe,entries:fSe};function lSe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:o,encoding:l,config:c,mark:f}=n,d=o.filled&&f!=="trail";let g={...I1e({},n,Bve),...yG(n,{filled:d})};const p=r.get("symbolOpacity")??c.legend.symbolOpacity,y=r.get("symbolFillColor")??c.legend.symbolFillColor,v=r.get("symbolStrokeColor")??c.legend.symbolStrokeColor,b=p===void 0?YG(l.opacity)??o.opacity:void 0;if(g.fill){if(i==="fill"||d&&i===Ui)delete g.fill;else if(ce(g.fill,"field"))y?delete g.fill:(g.fill=Dt(c.legend.symbolBaseFillColor??"black"),g.fillOpacity=Dt(b??1));else if(ie(g.fill)){const S=rC(l.fill??l.color)??o.fill??(d&&o.color);S&&(g.fill=Dt(S))}}if(g.stroke){if(i==="stroke"||!d&&i===Ui)delete g.stroke;else if(ce(g.stroke,"field")||v)delete g.stroke;else if(ie(g.stroke)){const S=Kt(rC(l.stroke||l.color),o.stroke,d?o.color:void 0);S&&(g.stroke={value:S})}}if(i!==hs){const S=he(t)&&VG(n,r,t);S?g.opacity=[{test:S,...Dt(b??1)},Dt(c.legend.unselectedOpacity)]:b&&(g.opacity=Dt(b))}return g={...g,...e},$t(g)?void 0:g}function uSe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:o}=t;let l={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?YG(o.opacity)||a.opacity:void 0;return f&&(l.opacity=Dt(f)),l={...l,...e},$t(l)?void 0:l}function cSe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},o=n.config,l=he(t)?VG(n,r,t):void 0,c=l?[{test:l,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let g;rc(d)?g=sa({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:o}):f===void 0&&d===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?g=sa({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&he(t)&&t.timeUnit===void 0&&(g=sa({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const p={...c?{opacity:c}:{},...g?{text:g}:{},...e};return $t(p)?void 0:p}function fSe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function YG(e){return XG(e,(t,n)=>Math.max(t,n.value))}function rC(e){return XG(e,(t,n)=>Kt(t,n.value))}function XG(e,t){if(abe(e))return Ee(e.condition).reduce(t,e.value);if(ga(e))return e.value}function VG(e,t,n){const i=t.get("selections");if(!(i!=null&&i.length))return;const r=ge(n.field);return i.map(a=>`(!length(data(${ge(Lt(a)+oc)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const L8={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return rH(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return aH(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??vSe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??bSe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??hSe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>If(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(jf(n)&&Ba(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>dSe(t,e)};function dSe(e,t){const n=e.values;if(ie(n))return yH(t,n);if($e(n))return n}function hSe(e,t,n,i){if(t!=="shape"){const r=rC(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function gSe(e){const{legend:t}=e;return Kt(t.type,pSe(e))}function pSe({channel:e,timeUnit:t,scaleType:n}){if(jf(e)){if(We(["quarter","month","day"],t))return"symbol";if(Ba(n))return"gradient"}return"symbol"}function mSe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??ySe(n,t)}function ySe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function vSe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:o,gradientVerticalMaxLength:l,gradientVerticalMinLength:c}=e;if(Ba(r))return n==="horizontal"?i==="top"||i==="bottom"?U8(t,"width",o,a):o:U8(t,"height",c,l)}function U8(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function bSe(e){if(We(["quantile","threshold","log","symlog"],e))return"greedy"}function WG(e){const t=Ft(e)?xSe(e):wSe(e);return e.component.legends=t,t}function xSe(e){const{encoding:t}=e,n={};for(const i of[Ui,...BH]){const r=gn(t[i]);!r||!e.getScaleComponent(i)||i===Bi&&he(r)&&r.type===Wd||(n[i]=_Se(e,i))}return n}function SSe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function ESe(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(i==null?void 0:i.title))return!0}return e===(n||{})[t]}function _Se(e,t){var $;let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,o=a.legend,l=new sSe({},SSe(e,t));D2e(e,t,l);const c=n!==void 0?!n:o.disable;if(l.set("disable",c,n!==void 0),c)return l;n=n||{};const f=e.getScaleComponent(t).get("type"),d=gn(r[t]),g=he(d)?($=Cn(d.timeUnit))==null?void 0:$.unit:void 0,p=n.orient||a.legend.orient||"right",y=gSe({legend:n,channel:t,timeUnit:g,scaleType:f}),v=mSe({legend:n,legendType:y,orient:p,legendConfig:o}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:o,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const M of GG){if(y==="gradient"&&M.startsWith("symbol")||y==="symbol"&&M.startsWith("gradient"))continue;const k=M in L8?L8[M](b):n[M];if(k!==void 0){const T=ESe(k,M,n,e.fieldDef(t));(T||a.legend[M]===void 0)&&l.set(M,k,T)}}const S=(n==null?void 0:n.encoding)??{},_=l.get("selections"),w={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:l,legendType:y};for(const M of["labels","legend","title","symbols","gradient","entries"]){const k=PG(S[M]??{},e),T=M in F8?F8[M](k,A):k;T!==void 0&&!$t(T)&&(w[M]={..._!=null&&_.length&&he(d)?{name:`${Lt(d.field)}_legend_${M}`}:{},..._!=null&&_.length?{interactive:!0}:{},update:_!=null&&_.length?{...T,cursor:{value:"pointer"}}:T})}return $t(w)||l.set("encode",w,!!(n!=null&&n.encoding)),l}function wSe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){WG(i);for(const r of le(i.component.legends))n.legend[r]=Ek(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=QG(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of le(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function QG(e,t){var a,o,l,c;if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const f of GG){const d=Cl(e.getWithExplicit(f),t.getWithExplicit(f),f,"legend",(g,p)=>{switch(f){case"symbolType":return ASe(g,p);case"title":return wP(g,p);case"type":return r=!0,Ji("symbol")}return _x(g,p,f,"legend")});e.setWithExplicit(f,d)}return r&&((o=(a=e.implicit)==null?void 0:a.encode)!=null&&o.gradient&&Sv(e.implicit,["encode","gradient"]),(c=(l=e.explicit)==null?void 0:l.encode)!=null&&c.gradient&&Sv(e.explicit,["encode","gradient"])),e}function ASe(e,t){return t.value==="circle"?t:e}function CSe(e,t,n,i){if(_0(t,n)){const r=Ft(e)?e.axis(n)??e.legend(n)??{}:{},a=be(t,{expr:"datum"}),o=be(t,{expr:"datum",binSuffix:"end"});return{formulaAs:be(t,{binSuffix:"range",forAs:!0}),formula:b0(a,o,r.format,r.formatType,i)}}return{}}function ZG(e,t){return`${pP(e)}_${t}`}function $Se(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function _k(e,t,n){const i=yx(n,void 0)??{},r=ZG(i,t);return e.getName(`${r}_bins`)}function TSe(e){return"as"in e}function B8(e,t,n){let i,r;TSe(e)?i=Se(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[be(e,{forAs:!0}),be(e,{binSuffix:"end",forAs:!0})];const a={...yx(t,void 0)},o=ZG(a,e.field),{signal:l,extentSignal:c}=$Se(n,o);if(ox(a.extent)){const d=a.extent;r=NG(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...l?{signal:l}:{},...c?{extentSignal:c}:{},...r?{span:r}:{}};return{key:o,binComponent:f}}class Ga extends xt{constructor(n,i){super(n);se(this,"bins");this.bins=i}clone(){return new Ga(null,Le(this.bins))}static makeFromEncoding(n,i){const r=i.reduceFieldDef((a,o,l)=>{if(bi(o)&&Tt(o.bin)){const{key:c,binComponent:f}=B8(o,o.bin,i);a[c]={...f,...a[c],...CSe(i,o,l,i.config)}}return a},{});return $t(r)?null:new Ga(n,r)}static makeFromTransform(n,i,r){const{key:a,binComponent:o}=B8(i,i.bin,r);return new Ga(n,{[a]:o})}merge(n,i){for(const r of le(n.bins))r in this.bins?(i(n.bins[r].signal,this.bins[r].signal),this.bins[r].as=rr([...this.bins[r].as,...n.bins[r].as],Ge)):this.bins[r]=n.bins[r];for(const r of n.children)n.removeChild(r),r.parent=this;n.remove()}producedFields(){return new Set(ln(this.bins).map(n=>n.as).flat(2))}dependentFields(){return new Set(ln(this.bins).map(n=>n.field))}hash(){return`Bin ${Ge(this.bins)}`}assemble(){return ln(this.bins).flatMap(n=>{const i=[],[r,...a]=n.as,{extent:o,...l}=n.bin,c={type:"bin",field:qr(n.field),as:r,signal:n.signal,...ox(o)?{extent:null}:{extent:o},...n.span?{span:{signal:`span(${n.span})`}}:{},...l};!o&&n.extentSignal&&(i.push({type:"extent",field:qr(n.field),signal:n.extentSignal}),c.extent={signal:n.extentSignal}),i.push(c);for(const f of a)for(let d=0;d<2;d++)i.push({type:"formula",expr:be({field:r[d]},{expr:"datum"}),as:f[d]});return n.formula&&i.push({type:"formula",expr:n.formula,as:n.formulaAs}),i})}}function MSe(e,t,n,i){var a;const r=Ft(i)?i.encoding[fo(t)]:void 0;if(bi(n)&&Ft(i)&&uH(n,r,i.markDef,i.config)){e.add(be(n,{})),e.add(be(n,{suffix:"end"}));const{mark:o,markDef:l,config:c}=i,f=Al({fieldDef:n,markDef:l,config:c});kp(o)&&f!==.5&&Jt(t)&&(e.add(be(n,{suffix:wx})),e.add(be(n,{suffix:Ax}))),n.bin&&_0(n,t)&&e.add(be(n,{binSuffix:"range"}))}else if(oP(t)){const o=aP(t);e.add(i.getName(o))}else e.add(be(n));return Ac(n)&&Cve((a=n.scale)==null?void 0:a.range)&&e.add(n.scale.range.field),e}function kSe(e,t){for(const n of le(t)){const i=t[n];for(const r of le(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class ua extends xt{constructor(n,i,r){super(n);se(this,"dimensions");se(this,"measures");this.dimensions=i,this.measures=r}clone(){return new ua(null,new Set(this.dimensions),Le(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(n,i){let r=!1;i.forEachFieldDef(l=>{l.aggregate&&(r=!0)});const a={},o=new Set;return!r||(i.forEachFieldDef((l,c)=>{const{aggregate:f,field:d}=l;if(f)if(f==="count")a["*"]??(a["*"]={}),a["*"].count=new Set([be(l,{forAs:!0})]);else{if(as(f)||ql(f)){const g=as(f)?"argmin":"argmax",p=f[g];a[p]??(a[p]={}),a[p][g]=new Set([be({op:g,field:p},{forAs:!0})])}else a[d]??(a[d]={}),a[d][f]=new Set([be(l,{forAs:!0})]);ho(c)&&i.scaleDomain(c)==="unaggregated"&&(a[d]??(a[d]={}),a[d].min=new Set([be({field:d,aggregate:"min"},{forAs:!0})]),a[d].max=new Set([be({field:d,aggregate:"max"},{forAs:!0})]))}else MSe(o,c,l,i)}),o.size+le(a).length===0)?null:new ua(n,o,a)}static makeFromTransform(n,i){var o;const r=new Set,a={};for(const l of i.aggregate){const{op:c,field:f,as:d}=l;c&&(c==="count"?(a["*"]??(a["*"]={}),a["*"].count=new Set([d||be(l,{forAs:!0})])):(a[f]??(a[f]={}),(o=a[f])[c]??(o[c]=new Set),a[f][c].add(d||be(l,{forAs:!0}))))}for(const l of i.groupby??[])r.add(l);return r.size+le(a).length===0?null:new ua(n,r,a)}merge(n){return QI(this.dimensions,n.dimensions)?(kSe(this.measures,n.measures),!0):(Zye("different dimensions, cannot merge"),!1)}addDimensions(n){n.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...le(this.measures)])}producedFields(){const n=new Set;for(const i of le(this.measures))for(const r of le(this.measures[i])){const a=this.measures[i][r];a.size===0?n.add(`${r}_${i}`):a.forEach(n.add,n)}return n}hash(){return`Aggregate ${Ge({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const n=[],i=[],r=[];for(const o of le(this.measures))for(const l of le(this.measures[o]))for(const c of this.measures[o][l])r.push(c),n.push(l),i.push(o==="*"?null:qr(o));return{type:"aggregate",groupby:[...this.dimensions].map(qr),ops:n,fields:i,as:r}}}class Kd extends xt{constructor(n,i,r,a){super(n);se(this,"model");se(this,"name");se(this,"data");se(this,"column");se(this,"row");se(this,"facet");se(this,"childModel");this.model=i,this.name=r,this.data=a;for(const o of Dr){const l=i.facet[o];if(l){const{bin:c,sort:f}=l;this[o]={name:i.getName(`${o}_domain`),fields:[be(l),...Tt(c)?[be(l,{binSuffix:"end"})]:[]],...Jo(f)?{sortField:f}:ie(f)?{sortIndexField:Cd(l,o)}:{}}}}this.childModel=i.child}hash(){let n="Facet";for(const i of Dr)this[i]&&(n+=` ${i.charAt(0)}:${Ge(this[i])}`);return n}get fields(){var i;const n=[];for(const r of Dr)(i=this[r])!=null&&i.fields&&n.push(...this[r].fields);return n}dependentFields(){const n=new Set(this.fields);for(const i of Dr)this[i]&&(this[i].sortField&&n.add(this[i].sortField.field),this[i].sortIndexField&&n.add(this[i].sortIndexField));return n}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const n={};for(const i of gs){const r=this.childModel.component.scales[i];if(r&&!r.merged){const a=r.get("type"),o=r.get("range");if(Vt(a)&&Ec(o)){const l=lc(this.childModel,i),c=$k(l);c?n[i]=c:de(AM(i))}}}return n}assembleRowColumnHeaderData(n,i,r){const a={row:"y",column:"x",facet:void 0}[n],o=[],l=[],c=[];a&&r&&r[a]&&(i?(o.push(`distinct_${r[a]}`),l.push("max")):(o.push(r[a]),l.push("distinct")),c.push(`distinct_${r[a]}`));const{sortField:f,sortIndexField:d}=this[n];if(f){const{op:g=gx,field:p}=f;o.push(p),l.push(g),c.push(be(f,{forAs:!0}))}else d&&(o.push(d),l.push("max"),c.push(d));return{name:this[n].name,source:i??this.data,transform:[{type:"aggregate",groupby:this[n].fields,...o.length?{fields:o,ops:l,as:c}:{}}]}}assembleFacetHeaderData(n){var f,d;const{columns:i}=this.model.layout,{layoutHeaders:r}=this.model.component,a=[],o={};for(const g of bk){for(const p of xk){const y=((f=r[g])==null?void 0:f[p])??[];for(const v of y)if(((d=v.axes)==null?void 0:d.length)>0){o[g]=!0;break}}if(o[g]){const p=`length(data("${this.facet.name}"))`,y=g==="row"?i?{signal:`ceil(${p} / ${i})`}:1:i?{signal:`min(${p}, ${i})`}:{signal:p};a.push({name:`${this.facet.name}_${g}`,transform:[{type:"sequence",start:0,stop:y}]})}}const{row:l,column:c}=o;return(l||c)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,n)),a}assemble(){const n=[];let i=null;const r=this.getChildIndependentFieldsWithStep(),{column:a,row:o,facet:l}=this;if(a&&o&&(r.x||r.y)){i=`cross_${this.column.name}_${this.row.name}`;const c=[].concat(r.x??[],r.y??[]),f=c.map(()=>"distinct");n.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:c,ops:f}]})}for(const c of[Ko,Zo])this[c]&&n.push(this.assembleRowColumnHeaderData(c,i,r));if(l){const c=this.assembleFacetHeaderData(r);c&&n.push(...c)}return n}}function q8(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function OSe(e,t){const n=gM(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=q8(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=q8(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return de(aye(t)),null}function DSe(e){const t={};return ny(e.filter,n=>{if(jP(n)){let i=null;OM(n)?i=nr(n.equal):NM(n)?i=nr(n.lte):DM(n)?i=nr(n.lt):RM(n)?i=nr(n.gt):zM(n)?i=nr(n.gte):FM(n)?i=n.range[0]:LM(n)&&(i=(n.oneOf??n.in)[0]),i&&(_c(i)?t[n.field]="date":lt(i)?t[n.field]="number":Se(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function NSe(e){const t={};function n(i){Ed(i)?t[i.field]="date":i.type==="quantitative"&&N1e(i.aggregate)?t[i.field]="number":pd(i.field)>1?i.field in t||(t[i.field]="flatten"):Ac(i)&&Jo(i.sort)&&pd(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Ft(e)||cr(e))&&e.forEachFieldDef((i,r)=>{if(bi(i))n(i);else{const a=xc(r),o=e.fieldDef(a);n({...i,type:o.type})}}),Ft(e)){const{mark:i,markDef:r,encoding:a}=e;if(jl(i)&&!e.encoding.order){const o=r.orient==="horizontal"?"y":"x",l=a[o];he(l)&&l.type==="quantitative"&&!(l.field in t)&&(t[l.field]="number")}}return t}function RSe(e){const t={};if(Ft(e)&&e.component.selection)for(const n of le(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&pd(r.field)>1&&(t[r.field]="flatten")}return t}class Zn extends xt{constructor(n,i){super(n);se(this,"_parse");this._parse=i}clone(){return new Zn(null,Le(this._parse))}hash(){return`Parse ${Ge(this._parse)}`}static makeExplicit(n,i,r){var l;let a={};const o=i.data;return!dl(o)&&((l=o==null?void 0:o.format)!=null&&l.parse)&&(a=o.format.parse),this.makeWithAncestors(n,a,{},r)}static makeWithAncestors(n,i,r,a){for(const c of le(r)){const f=a.getWithExplicit(c);f.value!==void 0&&(f.explicit||f.value===r[c]||f.value==="derived"||r[c]==="flatten"?delete r[c]:de(Qz(c,r[c],f.value)))}for(const c of le(i)){const f=a.get(c);f!==void 0&&(f===i[c]?delete i[c]:de(Qz(c,i[c],f)))}const o=new ms(i,r);a.copyAll(o);const l={};for(const c of le(o.combine())){const f=o.get(c);f!==null&&(l[c]=f)}return le(l).length===0||a.parseNothing?null:new Zn(n,l)}get parse(){return this._parse}merge(n){this._parse={...this._parse,...n.parse},n.remove()}assembleFormatParse(){const n={};for(const i of le(this._parse)){const r=this._parse[i];pd(i)===1&&(n[i]=r)}return n}producedFields(){return new Set(le(this._parse))}dependentFields(){return new Set(le(this._parse))}assembleTransforms(n=!1){return le(this._parse).filter(i=>n?pd(i)>1:!0).map(i=>{const r=OSe(i,this._parse[i]);return r?{type:"formula",expr:r,as:Xd(i)}:null}).filter(i=>i!==null)}}class $l extends xt{clone(){return new $l(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ma])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ma}}}class C0 extends xt{constructor(n,i){super(n);se(this,"params");this.params=i}clone(){return new C0(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ge(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class $0 extends xt{constructor(n,i){super(n);se(this,"params");this.params=i}clone(){return new $0(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ge(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class sc extends xt{constructor(n){super(null);se(this,"_data");se(this,"_name");se(this,"_generator");n??(n={name:"source"});let i;if(dl(n)||(i=n.format?{...ur(n.format,["parse"])}:{}),Op(n))this._data={values:n.values};else if(_d(n)){if(this._data={url:n.url},!i.type){let r=/(?:\.([^.]+))?$/.exec(n.url)[1];We(["json","csv","tsv","dsv","topojson"],r)||(r="json"),i.type=r}}else rG(n)?this._data={values:[{type:"Sphere"}]}:(nG(n)||dl(n))&&(this._data={});this._generator=dl(n),n.name&&(this._name=n.name),i&&!$t(i)&&(this._data.format=i)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(n){this._name=n}set parent(n){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function wk(e){return e instanceof sc||e instanceof C0||e instanceof $0}var Gf;class Ak{constructor(){GN(this,Gf);iE(this,Gf,!1)}setModified(){iE(this,Gf,!0)}get modifiedFlag(){return HN(this,Gf)}}Gf=new WeakMap;class Cc extends Ak{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class Ck extends Ak{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class zSe extends Ck{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of le(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class FSe extends Ck{constructor(n){super();se(this,"requiresSelectionId");this.requiresSelectionId=n&&vk(n)}run(n){n instanceof $l&&(this.requiresSelectionId&&(wk(n.parent)||n.parent instanceof ua||n.parent instanceof Zn)||(this.setModified(),n.remove()))}}class LSe extends Ak{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Pa&&(i=t.producedFields(),dM(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class USe extends Ck{constructor(){super()}run(t){t instanceof Ri&&!t.isRequired()&&(this.setModified(),t.remove())}}class BSe extends Cc{run(t){if(!wk(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Zn)if(t instanceof Zn)this.setModified(),t.merge(n);else{if(hM(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class qSe extends Cc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Zn);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const o of i){const l=o.parse;for(const c of le(l))c in r?r[c]!==l[c]&&a.add(c):r[c]=l[c]}for(const o of a)delete r[o];if(!$t(r)){this.setModified();const o=new Zn(t,r);for(const l of n){if(l instanceof Zn)for(const c of le(r))delete l.parse[c];t.removeChild(l),l.parent=o,l instanceof Zn&&le(l.parse).length===0&&l.remove()}}}}}class jSe extends Cc{run(t){t instanceof Ri||t.numChildren()>0||t instanceof Kd||t instanceof sc||(this.setModified(),t.remove())}}class ISe extends Cc{run(t){const n=t.children.filter(r=>r instanceof Pa),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class PSe extends Cc{run(t){const n=t.children.filter(r=>r instanceof ua),i={};for(const r of n){const a=Ge(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of le(i)){const a=i[r];if(a.length>1){const o=a.pop();for(const l of a)o.merge(l)&&(t.removeChild(l),l.parent=o,l.remove(),this.setModified())}}}}class HSe extends Cc{constructor(n){super();se(this,"model");this.model=n}run(n){const i=!(wk(n)||n instanceof Zd||n instanceof Zn||n instanceof $l),r=[],a=[];for(const o of n.children)o instanceof Ga&&(i&&!hM(n.producedFields(),o.dependentFields())?r.push(o):a.push(o));if(r.length>0){const o=r.pop();for(const l of r)o.merge(l,this.model.renameSignal.bind(this.model));this.setModified(),n instanceof Ga?n.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(a.length>1){const o=a.pop();for(const l of a)o.merge(l,this.model.renameSignal.bind(this.model));this.setModified()}}}class GSe extends Cc{run(t){const n=[...t.children];if(!hd(n,o=>o instanceof Ri)||t.numChildren()<=1)return;const r=[];let a;for(const o of n)if(o instanceof Ri){let l=o;for(;l.numChildren()===1;){const[c]=l.children;if(c instanceof Ri)l=c;else break}r.push(...l.children),a?(t.removeChild(o),o.parent=a.parent,a.parent.removeChild(a),a.parent=l,this.setModified()):a=l}else r.push(o);if(r.length){this.setModified();for(const o of r)o.parent.removeChild(o),o.parent=a}}}class $c extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i}clone(){return new $c(null,Le(this.transform))}addDimensions(n){this.transform.groupby=rr(this.transform.groupby.concat(n),i=>i)}dependentFields(){const n=new Set;return this.transform.groupby&&this.transform.groupby.forEach(n.add,n),this.transform.joinaggregate.map(i=>i.field).filter(i=>i!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(n){return n.as??be(n)}hash(){return`JoinAggregateTransform ${Ge(this.transform)}`}assemble(){const n=[],i=[],r=[];for(const o of this.transform.joinaggregate)i.push(o.op),r.push(this.getDefaultName(o)),n.push(o.field===void 0?null:o.field);const a=this.transform.groupby;return{type:"joinaggregate",as:r,ops:i,fields:n,...a!==void 0?{groupby:a}:{}}}}class Td extends xt{constructor(n,i){super(n);se(this,"filter");this.filter=i}clone(){return new Td(null,{...this.filter})}static make(n,i,r){const{config:a,markDef:o}=i,{marks:l,scales:c}=r;if(l==="include-invalid-values"&&c==="include-invalid-values")return null;const f=i.reduceFieldDef((d,g,p)=>{const y=ho(p)&&i.getScaleComponent(p);if(y){const v=y.get("type"),{aggregate:b}=g,S=GM({scaleChannel:p,markDef:o,config:a,scaleType:v,isCountAggregate:ax(b)});S!=="show"&&S!=="always-valid"&&(d[g.field]=g)}return d},{});return le(f).length?new Td(n,f):null}dependentFields(){return new Set(le(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ge(this.filter)}`}assemble(){const n=le(this.filter).reduce((i,r)=>{const a=this.filter[r],o=be(a,{expr:"datum"});return a!==null&&(a.type==="temporal"?i.push(`(isDate(${o}) || (${aC(o)}))`):a.type==="quantitative"&&i.push(aC(o))),i},[]);return n.length>0?{type:"filter",expr:n.join(" && ")}:null}}function aC(e){return`isValid(${e}) && isFinite(+${e})`}function YSe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=be(i);return r&&t.push(r),t},[])}function XSe(e){return ie(e)&&e.every(t=>Se(t))&&e.length>1}class ts extends xt{constructor(n,i){super(n);se(this,"_stack");this._stack=i}clone(){return new ts(null,Le(this._stack))}static makeFromTransform(n,i){const{stack:r,groupby:a,as:o,offset:l="zero"}=i,c=[],f=[];if(i.sort!==void 0)for(const p of i.sort)c.push(p.field),f.push(Kt(p.order,"ascending"));const d={field:c,order:f};let g;return XSe(o)?g=o:Se(o)?g=[o,`${o}_end`]:g=[`${i.stack}_start`,`${i.stack}_end`],new ts(n,{dimensionFieldDefs:[],stackField:r,groupby:a,offset:l,sort:d,facetby:[],as:g})}static makeFromEncoding(n,i){const r=i.stack,{encoding:a}=i;if(!r)return null;const{groupbyChannels:o,fieldChannel:l,offset:c,impute:f}=r,d=o.map(v=>{const b=a[v];return pa(b)}).filter(v=>!!v),g=YSe(i),p=i.encoding.order;let y;if(ie(p)||he(p))y=SP(p);else{const v=cH(p)?p.sort:l==="y"?"descending":"ascending";y=g.reduce((b,S)=>(b.field.includes(S)||(b.field.push(S),b.order.push(v)),b),{field:[],order:[]})}return new ts(n,{dimensionFieldDefs:d,stackField:i.vgField(l),facetby:[],stackby:g,sort:y,offset:c,impute:f,as:[i.vgField(l,{suffix:"start",forAs:!0}),i.vgField(l,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(n){this._stack.facetby.push(...n)}dependentFields(){const n=new Set;return n.add(this._stack.stackField),this.getGroupbyFields().forEach(n.add,n),this._stack.facetby.forEach(n.add,n),this._stack.sort.field.forEach(n.add,n),n}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ge(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:n,impute:i,groupby:r}=this._stack;return n.length>0?n.map(a=>a.bin?i?[be(a,{binSuffix:"mid"})]:[be(a,{}),be(a,{binSuffix:"end"})]:[be(a)]).flat():r??[]}assemble(){const n=[],{facetby:i,dimensionFieldDefs:r,stackField:a,stackby:o,sort:l,offset:c,impute:f,as:d}=this._stack;if(f)for(const g of r){const{bandPosition:p=.5,bin:y}=g;if(y){const v=be(g,{expr:"datum"}),b=be(g,{expr:"datum",binSuffix:"end"});n.push({type:"formula",expr:`${aC(v)} ? ${p}*${v}+${1-p}*${b} : ${v}`,as:be(g,{binSuffix:"mid",forAs:!0})})}n.push({type:"impute",field:a,groupby:[...o,...i],key:be(g,{binSuffix:"mid"}),method:"value",value:0})}return n.push({type:"stack",groupby:[...this.getGroupbyFields(),...i],field:a,sort:l,as:d,offset:c}),n}}class Jd extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i}clone(){return new Jd(null,Le(this.transform))}addDimensions(n){this.transform.groupby=rr(this.transform.groupby.concat(n),i=>i)}dependentFields(){const n=new Set;return(this.transform.groupby??[]).forEach(n.add,n),(this.transform.sort??[]).forEach(i=>n.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(n){return n.as??be(n)}hash(){return`WindowTransform ${Ge(this.transform)}`}assemble(){const n=[],i=[],r=[],a=[];for(const p of this.transform.window)i.push(p.op),r.push(this.getDefaultName(p)),a.push(p.param===void 0?null:p.param),n.push(p.field===void 0?null:p.field);const o=this.transform.frame,l=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&i.every(p=>_M(p)))return{type:"joinaggregate",as:r,ops:i,fields:n,...l!==void 0?{groupby:l}:{}};const c=[],f=[];if(this.transform.sort!==void 0)for(const p of this.transform.sort)c.push(p.field),f.push(p.order??"ascending");const d={field:c,order:f},g=this.transform.ignorePeers;return{type:"window",params:a,as:r,ops:i,fields:n,sort:d,...g!==void 0?{ignorePeers:g}:{},...l!==void 0?{groupby:l}:{},...o!==void 0?{frame:o}:{}}}}function VSe(e){function t(n){if(!(n instanceof Kd)){const i=n.clone();if(i instanceof Ri){const r=sC+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof ua||i instanceof ts||i instanceof Jd||i instanceof $c)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function oC(e){if(e instanceof Kd)if(e.numChildren()===1&&!(e.children[0]instanceof Ri)){const t=e.children[0];(t instanceof ua||t instanceof ts||t instanceof Jd||t instanceof $c)&&t.addDimensions(e.fields),t.swapWithParent(),oC(e)}else{const t=e.model.component.data.main;KG(t);const n=VSe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(oC)}function KG(e){if(e instanceof Ri&&e.type===qt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Kd||(t.swapWithParent(),KG(e))}}const sC="scale_",_1=5;function lC(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!lC(t.children))return!1}return!0}function Wr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function j8(e,t,n){let i=e.sources,r=!1;return r=Wr(new USe,i)||r,r=Wr(new FSe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=Wr(new jSe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=Wr(new BSe,i)||r,r=Wr(new HSe(t),i)||r,r=Wr(new LSe,i)||r,r=Wr(new qSe,i)||r,r=Wr(new PSe,i)||r,r=Wr(new ISe,i)||r,r=Wr(new zSe,i)||r,r=Wr(new GSe,i)||r),e.sources=i,r}function WSe(e,t){lC(e.sources);let n=0,i=0;for(let r=0;r<_1&&j8(e,t,!0);r++)n++;e.sources.map(oC);for(let r=0;r<_1&&j8(e,t,!1);r++)i++;lC(e.sources),Math.max(n,i)===_1&&de(`Maximum optimization runs(${_1}) reached.`)}class xn{constructor(t){se(this,"signal");Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new xn(()=>t(n))}}function JG(e){Ft(e)?QSe(e):ZSe(e)}function QSe(e){const t=e.component.scales;for(const n of le(t)){const i=JSe(e,n);if(t[n].setWithExplicit("domains",i),tEe(e,n),e.component.data.isFaceted){let a=e;for(;!cr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const l of i.value)Xo(l)&&(l.data=sC+l.data.replace(sC,""))}}}function ZSe(e){for(const n of e.children)JG(n);const t=e.component.scales;for(const n of le(t)){let i,r=null;for(const a of e.children){const o=a.component.scales[n];if(o){i===void 0?i=o.getWithExplicit("domains"):i=Cl(i,o.getWithExplicit("domains"),"domains","scale",uC);const l=o.get("selectionExtent");r&&l&&r.param!==l.param&&de(K1e),r=l}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function KSe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=I8(t,n);if(!r){de(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=I8(t,n);if(r)return"unaggregated"}return e}function JSe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=KSe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&gn(i.x2)?gn(i.x)?Cl(Gs(n,r,e,"x"),Gs(n,r,e,"x2"),"domain","scale",uC):Gs(n,r,e,"x2"):t==="y"&&gn(i.y2)?gn(i.y)?Cl(Gs(n,r,e,"y"),Gs(n,r,e,"y2"),"domain","scale",uC):Gs(n,r,e,"y2"):Gs(n,r,e,t)}function eEe(e,t,n){return e.map(i=>({signal:`{data: ${vx(i,{timeUnit:n,type:t})}}`}))}function T_(e,t,n){var r;const i=(r=Cn(n))==null?void 0:r.unit;return t==="temporal"||i?eEe(e,t,i):[e]}function Gs(e,t,n,i){const{encoding:r,markDef:a,mark:o,config:l,stack:c}=n,f=gn(r[i]),{type:d}=f,g=f.timeUnit,p=n2e({invalid:Ka("invalid",a,l),isPath:jl(o)});if(Ave(t)){const b=Gs(e,void 0,n,i),S=T_(t.unionWith,d,g);return Ra([...S,...b.value])}else{if($e(t))return Ra([t]);if(t&&t!=="unaggregated"&&!XP(t))return Ra(T_(t,d,g))}if(c&&i===c.fieldChannel){if(c.offset==="normalize")return Ji([[0,1]]);const b=n.requestDataName(p);return Ji([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=ho(i)&&he(f)?nEe(n,i,e):void 0;if(go(f)){const b=T_([f.datum],d,g);return Ji(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return Ji([{data:n.requestDataName(p),field:be({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:be({field:b,aggregate:"max"})}])}else if(Tt(v.bin)){if(Vt(e))return Ji(e==="bin-ordinal"?[]:[{data:gd(y)?n.requestDataName(p):n.requestDataName(qt.Raw),field:n.vgField(i,_0(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!xe(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(Tt(b)){const S=_k(n,v.field,b);return Ji([new xn(()=>{const _=n.getSignalName(S);return`[${_}.start, ${_}.stop]`})])}else return Ji([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&We(["time","utc"],e)){const b=r[fo(i)];if(uH(v,b,a,l)){const S=n.requestDataName(p),_=Al({fieldDef:v,fieldDef2:b,markDef:a,config:l}),w=kp(o)&&_!==.5&&Jt(i);return Ji([{data:S,field:n.vgField(i,w?{suffix:wx}:{})},{data:S,field:n.vgField(i,{suffix:w?Ax:"end"})}])}}return Ji(y?[{data:gd(y)?n.requestDataName(p):n.requestDataName(qt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function M_(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":gx),...i?{field:qr(i)}:{},...r?{order:r}:{}}}function tEe(e,t){var l;const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=(l=e.fieldDef(t))==null?void 0:l.bin,a=XP(i)?i:void 0,o=Sc(r)&&ox(r.extent)?r.extent:void 0;(a||o)&&n.set("selectionExtent",a??o,!0)}function nEe(e,t,n){if(!Vt(n))return;const i=e.fieldDef(t),r=i.sort;if(sH(r))return{op:"min",field:Cd(i,t),order:"ascending"};const{stack:a}=e,o=a?new Set([...a.groupbyFields,...a.stackBy.map(l=>l.fieldDef.field)]):void 0;if(Jo(r)){const l=a&&!o.has(r.field);return M_(r,l)}else if(nbe(r)){const{encoding:l,order:c}=r,f=e.fieldDef(l),{aggregate:d,field:g}=f,p=a&&!o.has(g);if(as(d)||ql(d))return M_({field:be(f),order:c},p);if(_M(d)||!d)return M_({op:d,field:g,order:c},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(We(["ascending",void 0],r))return!0}}function I8(e,t){const{aggregate:n,type:i}=e;return n?Se(n)&&!z1e.has(n)?{valid:!1,reason:$ye(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:Tye(e)}:{valid:!0}:{valid:!1,reason:Cye(e)}}function uC(e,t,n,i){return e.explicit&&t.explicit&&de(Nye(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function iEe(e){const t=rr(e.map(o=>{if(Xo(o)){const{sort:l,...c}=o;return c}return o}),Ge),n=rr(e.map(o=>{if(Xo(o)){const l=o.sort;return l!==void 0&&!gd(l)&&("op"in l&&l.op==="count"&&delete l.field,l.order==="ascending"&&delete l.order),l}}).filter(o=>o!==void 0),Ge);if(t.length===0)return;if(t.length===1){const o=e[0];if(Xo(o)&&n.length>0){let l=n[0];if(n.length>1){de(Kz);const c=n.filter(f=>xe(f)&&"op"in f&&f.op!=="min");n.every(f=>xe(f)&&"op"in f)&&c.length===1?l=c[0]:l=!0}else if(xe(l)&&"field"in l){const c=l.field;o.field===c&&(l=l.order?{order:l.order}:!0)}return{...o,sort:l}}return o}const i=rr(n.map(o=>gd(o)||!("op"in o)||Se(o.op)&&_e(O1e,o.op)?o:(de(zye(o)),!0)),Ge);let r;i.length===1?r=i[0]:i.length>1&&(de(Kz),r=!0);const a=rr(e.map(o=>Xo(o)?o.data:null),o=>o);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(l=>l.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function $k(e){if(Xo(e)&&Se(e.field))return e.field;if(yP(e)){let t;for(const n of e.fields)if(Xo(n)&&Se(n.field)){if(!t)t=n.field;else if(t!==n.field)return de(Fye),t}return de(Lye),t}else if(F1e(e)){de(Uye);const t=e.fields[0];return Se(t)?t:void 0}}function lc(e,t){const i=e.component.scales[t].get("domains").map(r=>(Xo(r)&&(r.data=e.lookupDataSource(r.data)),r));return iEe(i)}function rEe(e,t,n,i){var r,a;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=i}function eY(e,t){if(Ft(e)){const i=e.fieldDef(t);if(i!=null&&i.field)return i.field}const n=(e.children??[]).map(i=>eY(i,t)).filter(i=>!!i);if(n.length>0){const i=rr(n,Ge);return i.length===1?i[0]:void 0}}function aEe(e,t,n){if(t===n)return!0;const i=e.getScaleType(t),r=e.getScaleType(n);if(!i||!r)return!1;const a=Vt(i),o=Vt(r);return a===o}function oEe(e,t){return e?`field:${e}`:`channel:${String(t)}`}function sEe(e){if(ie(e)){const t=e.filter(xv);return t.length>0?t:null}if(yP(e)){const t=[];if(t.push(...e.fields.flatMap(n=>ie(n)?n.filter(xv):[])),t.length>0)return rr(t,Ge)}return null}function cC(e,t){try{const n=lc(e,t);return sEe(n)}catch{return null}}function lEe(e,t,n){const i=cC(e,t),r=cC(e,n);return i&&r?rr([...i,...r],Ge):null}function P8(e,t,n){if(t&&t.length>0){const i=e.getWithExplicit("values");i!=null&&i.explicit||(n&&de(n),e.set("values",t,!1))}}function uEe(e,t,n){const i=e.getScaleComponent(t),r=e.getScaleComponent(n);if(!i||!r)return!1;const a=i.getWithExplicit("domains"),o=r.getWithExplicit("domains");if(!(a!=null&&a.explicit&&(o!=null&&o.explicit)))return!1;const l=lc(e,t),c=lc(e,n);return Ge(l)===Ge(c)}function tY(e){const t=e.component.legends,n={};for(const r of le(t)){const a=eY(e,r),o=oEe(a,r);if(!n[o]){n[o]=[{channel:r,cmpt:t[r].clone()}];continue}let l=!1;for(const c of n[o]){if(!aEe(e,c.channel,r))continue;if(QG(c.cmpt,t[r])){const d=e.getScaleType(c.channel),g=e.getScaleType(r);d&&g&&Vt(d)&&Vt(g)&&(uEe(e,c.channel,r)?P8(c.cmpt,cC(e,c.channel)):P8(c.cmpt,lEe(e,c.channel,r),Bye(c.channel,r))),l=!0;break}}l||n[o].push({channel:r,cmpt:t[r].clone()})}return ln(n).flat().map(r=>cEe(r.cmpt,e.config)).filter(r=>r!==void 0)}function cEe(e,t){var o,l,c;const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),(o=a.encode)!=null&&o.symbols){const f=a.encode.symbols.update;f.fill&&f.fill.value!=="transparent"&&!f.stroke&&!a.stroke&&(f.stroke={value:"transparent"});for(const d of BH)a[d]&&delete f[d]}if(a.title||delete a.title,i!==void 0){let f=i;(c=(l=a.encode)==null?void 0:l.labels)!=null&&c.update&&$e(a.encode.labels.update.text)&&(f=Ku(i,"datum.label",a.encode.labels.update.text.signal)),rEe(a,"labels","text",{signal:f})}return a}}function fEe(e){return eh(e)||Tk(e)?dEe(e):nY(e)}function dEe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),nY(e))}function nY(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},a=t.data.reduce((o,l)=>{const c=$e(l)?l.signal:`data('${e.lookupDataSource(l)}')`;return We(o,c)||o.push(c),o},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const hEe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class iY extends ms{constructor(n,i,r,a){super({...i},{name:n});se(this,"specifiedProjection");se(this,"size");se(this,"data");se(this,"merged",!1);this.specifiedProjection=i,this.size=r,this.data=a}get isFit(){return!!this.data}}function rY(e){e.component.projection=Ft(e)?gEe(e):yEe(e)}function gEe(e){if(e.hasProjection){const t=zn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?pEe(e):void 0,a=new iY(e.projectionName(!0),{...zn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function pEe(e){const t=[],{encoding:n}=e;for(const i of[[_a,Ea],[jr,wa]])(gn(n[i[0]])||gn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Bi)&&e.typedFieldDef(Bi).type===Wd&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(qt.Main)),t}function mEe(e,t){const n=fM(hEe,r=>!!(!_e(e.explicit,r)&&!_e(t.explicit,r)||_e(e.explicit,r)&&_e(t.explicit,r)&&ar(e.get(r),t.get(r))));if(ar(e.size,t.size)){if(n)return e;if(ar(e.explicit,{}))return t;if(ar(t.explicit,{}))return e}return null}function yEe(e){if(e.children.length===0)return;let t;for(const i of e.children)rY(i);const n=fM(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=mEe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new iY(i,t.specifiedProjection,t.size,Le(t.data));for(const a of e.children){const o=a.component.projection;o&&(o.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(o.get("name"),i),o.merged=!0)}return r}}function aY(e){return eh(e)||Tk(e)?e.children.reduce((t,n)=>t.concat(aY(n)),H8(e)):H8(e)}function H8(e){return le(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:o,selectionExtent:l,domains:c,range:f,reverse:d,...g}=r,p=vEe(r.range,a,n,e),y=lc(e,n),v=l?h2e(e,l,i,y):null;return t.push({name:a,type:o,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...g}),t},[])}function vEe(e,t,n,i){if(Jt(n)){if(Ec(e))return{step:{signal:`${t}_step`}}}else if(xe(e)&&Xo(e))return{...e,data:i.lookupDataSource(e.data)};return e}class oY extends ms{constructor(n,i){super({},{name:n});se(this,"merged",!1);this.setWithExplicit("type",i)}domainHasZero(){const n=this.get("type");if(We([Fn.LOG,Fn.TIME,Fn.UTC],n))return"definitely-not";const i=this.get("zero");if(i===!0||i===void 0&&We([Fn.LINEAR,Fn.SQRT,Fn.POW],n))return"definitely";const r=this.get("domains");if(r.length>0){let a=!1,o=!1,l=!1;for(const c of r){if(ie(c)){const f=c[0],d=c[c.length-1];if(lt(f)&&lt(d))if(f<=0&&d>=0){a=!0;continue}else{o=!0;continue}}l=!0}if(a)return"definitely";if(o&&!l)return"definitely-not"}return"maybe"}}const bEe=["range","scheme"];function xEe(e){const t=e.component.scales;for(const n of EM){const i=t[n];if(!i)continue;const r=SEe(n,e);i.setWithExplicit("range",r)}}function G8(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:i,field:r}=n,a=qi(t),o=e.getName(a);if(xe(i)&&i.binned&&i.step!==void 0)return new xn(()=>{const l=e.scaleName(t),c=`(domain("${l}")[1] - domain("${l}")[0]) / ${i.step}`;return`${e.getSignalName(o)} / (${c})`});if(Tt(i)){const l=_k(e,r,i);return new xn(()=>{const c=e.getSignalName(l),f=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(o)} / (${f})`})}}}function SEe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const g of bEe)if(n[g]!==void 0){const p=PA(a,g),y=VP(e,g);if(!p)de(TP(a,g,e));else if(y)de(y);else switch(g){case"range":{const v=n.range;if(ie(v)){if(Jt(e))return Ra(v.map(b=>{if(b==="width"||b==="height"){const S=t.getName(b),_=t.getSignalName.bind(t);return xn.fromName(_,S)}return b}))}else if(xe(v))return Ra({data:t.requestDataName(qt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Ra(v)}case"scheme":return Ra(EEe(n[g]))}}const o=e===Ut||e==="xOffset"?"width":"height",l=i[o];if(eo(l)){if(Jt(e))if(Vt(a)){const g=lY(l,t,e);if(g)return Ra({step:g})}else de(MP(o));else if(m0(e)){const g=e===Rl?"x":"y";if(t.getScaleComponent(g).get("type")==="band"){const v=uY(l,a);if(v)return Ra(v)}}}const{rangeMin:c,rangeMax:f}=n,d=_Ee(e,t);return(c!==void 0||f!==void 0)&&PA(a,"rangeMin")&&ie(d)&&d.length===2?Ra([c??d[0],f??d[1]]):Ji(d)}function EEe(e){return wve(e)?{scheme:e.name,...ur(e,["name"])}:{scheme:e}}function sY(e,t,n,{center:i}={}){const r=qi(e),a=t.getName(r),o=t.getSignalName.bind(t);return e===Tn&&ha(n)?i?[xn.fromName(l=>`${o(l)}/2`,a),xn.fromName(l=>`-${o(l)}/2`,a)]:[xn.fromName(o,a),0]:i?[xn.fromName(l=>`-${o(l)}/2`,a),xn.fromName(l=>`${o(l)}/2`,a)]:[0,xn.fromName(o,a)]}function _Ee(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:o}=gn(a[e]),c=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case Ut:case Tn:{if(We(["point","band"],c)){const g=cY(e,n,i.view);if(eo(g))return{step:lY(g,t,e)}}return sY(e,t,c)}case Rl:case Vd:return wEe(e,t,c);case ds:{const g=$Ee(r,i),p=TEe(r,n,t,i);return vd(c)?CEe(g,p,AEe(c,i,f,e)):[g,p]}case Pr:return[0,Math.PI*2];case bc:return[0,360];case Sa:return[0,new xn(()=>{const g=t.getSignalName(cr(t.parent)?"child_width":"width"),p=t.getSignalName(cr(t.parent)?"child_height":"height");return`min(${g},${p})/2`})];case zl:return{step:1e3/i.scale.framesPerSecond};case Ul:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Bl:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Bi:return"symbol";case Ui:case uo:case co:return c==="ordinal"?o==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case hs:case Fl:case Ll:return[i.scale.minOpacity,i.scale.maxOpacity]}}function lY(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=vM(n),o=i[a];if(jH({step:e,offsetIsDiscrete:Ue(o)&&UM(o.type)})==="offset"&&SH(i,a)){const c=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(c.get("type")==="band"){const p=c.get("paddingInner")??c.get("padding")??0,y=c.get("paddingOuter")??c.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const g=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${j1e(g)})`}}else return e.step}function uY(e,t){if(jH({step:e,offsetIsDiscrete:Vt(t)})==="offset")return{step:e.step}}function wEe(e,t,n){const i=e===Rl?"x":"y",r=t.getScaleComponent(i);if(!r)return sY(i,t,n,{center:!0});const a=r.get("type"),o=t.scaleName(i),{markDef:l,config:c}=t;if(a==="band"){const f=cY(i,t.size,t.config.view);if(eo(f)){const d=uY(f,n);if(d)return d}return[0,{signal:`bandwidth('${o}')`}]}else{const f=t.encoding[i];if(he(f)&&f.timeUnit){const d=BP(f.timeUnit,v=>`scale('${o}', ${v})`),g=t.config.scale.bandWithNestedOffsetPaddingInner,p=Al({fieldDef:f,markDef:l,config:c})-.5,y=p!==0?` + ${p}`:"";if(g){const v=$e(g)?`${g.signal}/2${y}`:`${g/2+p}`,b=$e(g)?`(1 - ${g.signal}/2)${y}`:`${1-g/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return VI(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function cY(e,t,n){const i=e===Ut?"width":"height",r=t[i];return r!==void 0?r:Mv(n,i)}function AEe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ie(n)?n.length+1:(de(Vye(i)),3)}}function CEe(e,t,n){const i=()=>{const r=oa(t),a=oa(e),o=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${o}, ${o})`};return $e(t)?new xn(i):{signal:i()}}function $Ee(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(sx("size",e))}const Y8=.95;function TEe(e,t,n,i){const r={x:G8(n,"x"),y:G8(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=X8(t,r,i.view);return lt(a)?a-1:new xn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=X8(t,r,i.view);return lt(a)?Math.pow(Y8*a,2):new xn(()=>`pow(${Y8} * ${a.signal}, 2)`)}}throw new Error(sx("size",e))}function X8(e,t,n){const i=eo(e.width)?e.width.step:XA(n,"width"),r=eo(e.height)?e.height.step:XA(n,"height");return t.x||t.y?new xn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function fY(e,t){Ft(e)?MEe(e,t):hY(e,t)}function MEe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:o}=e;for(const l of le(n)){const c=o[l],f=n[l],d=e.getScaleComponent(l),g=gn(r[l]),p=c[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),S=PA(y,t),_=VP(l,t);if(p!==void 0&&(S?_&&de(_):de(TP(y,t,l))),S&&_===void 0)if(p!==void 0){const w=g.timeUnit,A=g.type;switch(t){case"domainMax":case"domainMin":_c(c[t])||A==="temporal"||w?f.set(t,{signal:vx(c[t],{type:A,timeUnit:w})},!0):f.set(t,c[t],!0);break;default:f.copyKeyFromObject(t,c)}}else{const w=ce(V8,t)?V8[t]({model:e,channel:l,fieldOrDatumDef:g,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:a,config:i,hasNestedOffsetScale:EH(r,l),hasSecondaryRangeChannel:!!r[fo(l)]}):i.scale[t];w!==void 0&&f.set(t,w,!1)}}}const V8={bins:({model:e,fieldOrDatumDef:t})=>he(t)?kEe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>OEe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>DEe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>NEe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>REe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>zEe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=he(e)?e.sort:void 0;return FEe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:o})=>LEe(e,t,n,i,r,a.scale,o)};function dY(e){Ft(e)?xEe(e):hY(e,"range")}function hY(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?dY(i):fY(i,t);for(const i of le(n)){let r;for(const a of e.children){const o=a.component.scales[i];if(o){const l=o.getWithExplicit(t);r=Cl(r,l,t,"scale",tG((c,f)=>{switch(t){case"range":return c.step&&f.step?c.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function kEe(e,t){const n=t.bin;if(Tt(n)){const i=_k(e,t.field,n);return new xn(()=>e.getSignalName(i))}else if(Rn(n)&&Sc(n)&&n.step!==void 0)return{step:n.step}}function OEe(e,t){if(We([Ui,uo,co],e)&&t!=="nominal")return"hcl"}function DEe(e,t,n,i,r,a){var o;if(!((o=pa(a))!=null&&o.bin||ie(n)||r!=null||i!=null||We([Fn.TIME,Fn.UTC],e)))return Jt(t)?!0:void 0}function NEe(e,t,n,i,r,a){if(Jt(e)){if(Ba(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:l}=r;if(o==="bar"&&!(he(i)&&(i.bin||i.timeUnit))&&(l==="vertical"&&e==="x"||l==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Fn.POINT)return n.pointPadding}}function REe(e,t,n,i,r,a=!1){if(e===void 0){if(Jt(t)){const{bandPaddingInner:o,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Kt(o,n==="bar"?l:n==="tick"?f:c)}else if(m0(t)&&i===Fn.BAND)return r.offsetBandPaddingInner}}function zEe(e,t,n,i,r,a=!1){if(e===void 0){if(Jt(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:l}=r;if(a)return l;if(n===Fn.BAND)return Kt(o,$e(i)?{signal:`${i.signal}/2`}:i/2)}else if(m0(t)){if(n===Fn.POINT)return .5;if(n===Fn.BAND)return r.offsetBandPaddingOuter}}}function FEe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return ha(e)&&t==="descending"?$e(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(ha(e)&&t==="descending")return!0}function LEe(e,t,n,i,r,a,o){if(!!n&&n!=="unaggregated"&&ha(r)){if(ie(n)){const c=n[0],f=n[n.length-1];if(lt(c)&&c<=0&&lt(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!vd(r))return!0;if(!(he(t)&&t.bin)&&We([...gs,...E1e],e)){const{orient:c,type:f}=i;return We(["bar","area","line","trail"],f)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:We(["bar","area"],f)&&!o?!0:a==null?void 0:a.zero}return!1}function UEe(e,t,n,i,r=!1){const a=BEe(t,n,i,r),{type:o}=e;return ho(t)?o!==void 0?Ove(t,o)?he(n)&&!kve(o,n.type)?(de(Oye(o,a)),a):o:(de(kye(t,o,a)),a):a:null}function BEe(e,t,n,i){var r;switch(t.type){case"nominal":case"ordinal":{if(jf(e)||y_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&de(v_(e,"ordinal")),"ordinal";if(m_(e))return"band";if(Jt(e)||m0(e)){if(We(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in SM)return"band";const a=n[qi(e)];return ic(a)||xd(t)&&((r=t.axis)!=null&&r.tickBand)?"band":"point"}case"temporal":return jf(e)?"time":y_(e)==="discrete"?(de(v_(e,"temporal")),"ordinal"):he(t)&&t.timeUnit&&Cn(t.timeUnit).utc?"utc":m_(e)?"band":"time";case"quantitative":return jf(e)?he(t)&&Tt(t.bin)?"bin-ordinal":"linear":y_(e)==="discrete"?(de(v_(e,"quantitative")),"ordinal"):m_(e)?"band":"linear";case"geojson":return}throw new Error(CP(t.type))}function qEe(e,{ignoreRange:t}={}){gY(e),JG(e);for(const n of Mve)fY(e,n);t||dY(e)}function gY(e){Ft(e)?e.component.scales=jEe(e):e.component.scales=PEe(e)}function jEe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of EM){const o=gn(t[a]);if(o&&n===ZP&&a===Bi&&o.type===Wd)continue;let l=o&&o.scale;if(o&&l!==null&&l!==!1){l??(l={});const c=EH(t,a),f=UEe(l,a,o,i,c);r[a]=new oY(e.scaleName(`${a}`,!0),{value:f,explicit:l.type===f})}}return r}const IEe=tG((e,t)=>e8(e)-e8(t));function PEe(e){var r;const t=e.component.scales={},n={},i=e.component.resolve;for(const a of e.children){gY(a);for(const o of le(a.component.scales))if((r=i.scale)[o]??(r[o]=HG(o,e)),i.scale[o]==="shared"){const l=n[o],c=a.component.scales[o].getWithExplicit("type");l?bve(l.value,c.value)?n[o]=Cl(l,c,"type","scale",IEe):(i.scale[o]="independent",delete n[o]):n[o]=c}}for(const a of le(n)){const o=e.scaleName(a,!0),l=n[a];t[a]=new oY(o,l);for(const c of e.children){const f=c.component.scales[a];f&&(c.renameScale(f.get("name"),o),f.merged=!0)}}return t}class k_{constructor(){se(this,"nameMap");this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ft(e){return(e==null?void 0:e.type)==="unit"}function cr(e){return(e==null?void 0:e.type)==="facet"}function Tk(e){return(e==null?void 0:e.type)==="concat"}function eh(e){return(e==null?void 0:e.type)==="layer"}class Mk{constructor(t,n,i,r,a,o,l){se(this,"type");se(this,"parent");se(this,"config");se(this,"name");se(this,"size");se(this,"title");se(this,"description");se(this,"data");se(this,"transforms");se(this,"layout");se(this,"scaleNameMap");se(this,"projectionNameMap");se(this,"signalNameMap");se(this,"component");se(this,"view");this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=zn(l),this.name=t.name??r,this.title=Qs(t.title)?{text:t.title}:t.title?zn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new k_,this.projectionNameMap=i?i.projectionNameMap:new k_,this.signalNameMap=i?i.signalNameMap:new k_,this.data=t.data,this.description=t.description,this.transforms=Hxe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Vbe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:px(t)||(i==null?void 0:i.component.data.isFaceted)&&t.data===void 0},layoutSize:new ms,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Le(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){qEe(this)}parseProjection(){rY(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){WG(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of le(i)){const o=i[a];o!==void 0&&(r[a]=Dt(o))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Dt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:$t(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=aSe(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Dr)t[i].title&&n.push(J2e(this,i));for(const i of bk)n=n.concat(eSe(this,i));return n}assembleAxes(){return q2e(this.component.axes,this.config)}assembleLegends(){return tY(this)}assembleProjections(){return fEe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...mP(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return We(["unit","layer"],this.type)?We(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),$t(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||cr(this.parent)?aY(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Lt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(qt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(cr(this.parent)){const n=IG(t),i=rx(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),o=r.get("range");if(Vt(a)&&Ec(o)){const l=r.get("name"),c=lc(this,i),f=$k(c);if(f){const d=be({aggregate:"distinct",field:f},{expr:"datum"});return{signal:jG(l,r,d)}}else return de(AM(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(lP(t)&&ho(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(Y1e(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class pY extends Mk{vgField(t,n={}){const i=this.fieldDef(t);if(i)return be(i,n)}reduceFieldDef(t,n){return _be(this.getMapping(),(i,r,a)=>{const o=pa(r);return o?t(i,o,a):i},n)}forEachFieldDef(t,n){ek(this.getMapping(),(i,r)=>{const a=pa(i);a&&t(a,r)},n)}}class Mx extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i,this.transform=Le(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const a=this.transform.resolve??"shared";this.transform.resolve=a}clone(){return new Mx(null,Le(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ge(this.transform)}`}assemble(){const{density:n,...i}=this.transform,r={type:"kde",field:n,...i};return r.resolve=this.transform.resolve,r}}class kx extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i,this.transform=Le(i)}clone(){return new kx(null,Le(this.transform))}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ge(this.transform)}`}assemble(){const{extent:n,param:i}=this.transform;return{type:"extent",field:n,signal:i}}}class Ox extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i,this.transform=Le(i);const{flatten:r,as:a=[]}=this.transform;this.transform.as=r.map((o,l)=>a[l]??o)}clone(){return new Ox(this.parent,Le(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ge(this.transform)}`}assemble(){const{flatten:n,as:i}=this.transform;return{type:"flatten",fields:n,as:i}}}class Dx extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i,this.transform=Le(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}clone(){return new Dx(null,Le(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ge(this.transform)}`}assemble(){const{fold:n,as:i}=this.transform;return{type:"fold",fields:n,as:i}}}class Hf extends xt{constructor(n,i,r,a){super(n);se(this,"fields");se(this,"geojson");se(this,"signal");this.fields=i,this.geojson=r,this.signal=a}clone(){return new Hf(null,Le(this.fields),this.geojson,this.signal)}static parseAll(n,i){if(i.component.projection&&!i.component.projection.isFit)return n;let r=0;for(const a of[[_a,Ea],[jr,wa]]){const o=a.map(l=>{const c=gn(i.encoding[l]);return he(c)?c.field:go(c)?{expr:`${c.datum}`}:ga(c)?{expr:`${c.value}`}:void 0});(o[0]||o[1])&&(n=new Hf(n,o,null,i.getName(`geojson_${r++}`)))}if(i.channelHasField(Bi)){const a=i.typedFieldDef(Bi);a.type===Wd&&(n=new Hf(n,null,a.field,i.getName(`geojson_${r++}`)))}return n}dependentFields(){const n=(this.fields??[]).filter(Se);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ge(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Dp extends xt{constructor(n,i,r,a){super(n);se(this,"projection");se(this,"fields");se(this,"as");this.projection=i,this.fields=r,this.as=a}clone(){return new Dp(null,this.projection,Le(this.fields),Le(this.as))}static parseAll(n,i){if(!i.projectionName())return n;for(const r of[[_a,Ea],[jr,wa]]){const a=r.map(l=>{const c=gn(i.encoding[l]);return he(c)?c.field:go(c)?{expr:`${c.datum}`}:ga(c)?{expr:`${c.value}`}:void 0}),o=r[0]===jr?"2":"";(a[0]||a[1])&&(n=new Dp(n,i.projectionName(),a,[i.getName(`x${o}`),i.getName(`y${o}`)]))}return n}dependentFields(){return new Set(this.fields.filter(Se))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ge(this.fields)} ${Ge(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Uu extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i}clone(){return new Uu(null,Le(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(n){const{start:i=0,stop:r,step:a}=n;return{signal:`sequence(${[i,r,...a?[a]:[]].join(",")})`}}static makeFromTransform(n,i){return new Uu(n,i)}static makeFromEncoding(n,i){const r=i.encoding,a=r.x,o=r.y;if(he(a)&&he(o)){const l=a.impute?a:o.impute?o:void 0;if(l===void 0)return;const c=a.impute?o:o.impute?a:void 0,{method:f,value:d,frame:g,keyvals:p}=l.impute,y=AH(i.mark,r);return new Uu(n,{impute:l.field,key:c.field,...f?{method:f}:{},...d!==void 0?{value:d}:{},...g?{frame:g}:{},...p!==void 0?{keyvals:p}:{},...y.length?{groupby:y}:{}})}return null}hash(){return`Impute ${Ge(this.transform)}`}assemble(){const{impute:n,key:i,keyvals:r,method:a,groupby:o,value:l,frame:c=[null,null]}=this.transform,f={type:"impute",field:n,key:i,...r?{keyvals:Axe(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!a||a==="value"?l:null};if(a&&a!=="value"){const d={type:"window",as:[`imputed_${n}_value`],ops:[a],fields:[n],frame:c,ignorePeers:!1,...o?{groupby:o}:{}},g={type:"formula",expr:`datum.${n} === null ? datum.imputed_${n}_value : datum.${n}`,as:n};return[f,d,g]}else return[f]}}class Nx extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i,this.transform=Le(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??i.on,r[1]??i.loess]}clone(){return new Nx(null,Le(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ge(this.transform)}`}assemble(){const{loess:n,on:i,...r}=this.transform;return{type:"loess",x:i,y:n,...r}}}class Np extends xt{constructor(n,i,r){super(n);se(this,"transform");se(this,"secondary");this.transform=i,this.secondary=r}clone(){return new Np(null,Le(this.transform),this.secondary)}static make(n,i,r,a){const o=i.component.data.sources,{from:l}=r;let c=null;if(Cxe(l)){let f=vY(l.data,o);f||(f=new sc(l.data),o.push(f));const d=i.getName(`lookup_${a}`);c=new Ri(f,d,qt.Lookup,i.component.data.outputNodeRefCounts),i.component.data.outputNodes[d]=c}else if($xe(l)){const f=l.param;r={as:f,...r};let d;try{d=i.getSelectionComponent(Lt(f),f)}catch{throw new Error(Q1e(f))}if(c=d.materialized,!c)throw new Error(Z1e(f))}return new Np(n,r,c.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ee(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ge({transform:this.transform,secondary:this.secondary})}`}assemble(){let n;if(this.transform.from.fields)n={values:this.transform.from.fields,...this.transform.as?{as:Ee(this.transform.as)}:{}};else{let i=this.transform.as;Se(i)||(de(lye),i="_lookup"),n={as:[i]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...n,...this.transform.default?{default:this.transform.default}:{}}}}class Rx extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i,this.transform=Le(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}clone(){return new Rx(null,Le(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ge(this.transform)}`}assemble(){const{quantile:n,...i}=this.transform;return{type:"quantile",field:n,...i}}}class zx extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i,this.transform=Le(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??i.on,r[1]??i.regression]}clone(){return new zx(null,Le(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ge(this.transform)}`}assemble(){const{regression:n,on:i,...r}=this.transform;return{type:"regression",x:i,y:n,...r}}}class Fx extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i}clone(){return new Fx(null,Le(this.transform))}addDimensions(n){this.transform.groupby=rr((this.transform.groupby??[]).concat(n),i=>i)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ge(this.transform)}`}assemble(){const{pivot:n,value:i,groupby:r,limit:a,op:o}=this.transform;return{type:"pivot",field:n,value:i,...a!==void 0?{limit:a}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class Lx extends xt{constructor(n,i){super(n);se(this,"transform");this.transform=i}clone(){return new Lx(null,Le(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ge(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function mY(e){let t=0;function n(i,r){if(i instanceof sc&&!i.isGenerator&&!_d(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Zn&&(i.parent instanceof sc&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Kd){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof C0||i instanceof $0||i instanceof Td||i instanceof Zd||i instanceof Ad||i instanceof Dp||i instanceof ua||i instanceof Np||i instanceof Jd||i instanceof $c||i instanceof Dx||i instanceof Ox||i instanceof Mx||i instanceof Nx||i instanceof Rx||i instanceof zx||i instanceof $l||i instanceof Lx||i instanceof Fx||i instanceof kx)&&r.transform.push(i.assemble()),(i instanceof Ga||i instanceof Pa||i instanceof Uu||i instanceof ts||i instanceof Hf)&&r.transform.push(...i.assemble()),i instanceof Ri&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Ri?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Ri&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const o of i.children)n(o,{name:null,source:a,transform:[]});break}}}return n}function HEe(e){const t=[],n=mY(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function GEe(e,t){const n=[],i=mY(n);let r=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${r++}`);const l=o.assemble();i(o,l)}for(const o of n)o.transform.length===0&&delete o.transform;let a=0;for(const[o,l]of n.entries())(l.transform??[]).length===0&&!l.source&&n.splice(a++,0,n.splice(o,1)[0]);for(const o of n)for(const l of o.transform??[])l.type==="lookup"&&(l.from=e.outputNodes[l.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function YEe(e){return e==="top"||e==="left"||$e(e)?"header":"footer"}function XEe(e){for(const t of Dr)VEe(e,t);W8(e,"x"),W8(e,"y")}function VEe(e,t){var o;const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const l=n[t],c=$d("title",null,i,t);let f=If(l,i,{allowDisabling:!0,includeDefault:c===void 0||!!c});r.component.layoutHeaders[t].title&&(f=ie(f)?f.join(", "):f,f+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const d=$d("labelOrient",l.header,i,t),g=l.header!==null?Kt((o=l.header)==null?void 0:o.labels,i.header.labels,!0):!1,p=We(["bottom","right"],d)?"footer":"header";a.layoutHeaders[t]={title:l.header!==null?f:null,facetFieldDef:l,[p]:t==="facet"?[]:[yY(e,t,g)]}}}function yY(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function W8(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=Ek(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",o=i[a];for(const l of n.component.axes[t]){const c=YEe(l.get("orient"));o[c]??(o[c]=[yY(e,a,!1)]);const f=Pg(l,"main",e.config,{header:!0});f&&o[c][0].axes.push(f),l.mainExtracted=!0}}}}function WEe(e){kk(e),Nv(e,"width"),Nv(e,"height")}function QEe(e){kk(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Nv(e,t),Nv(e,n)}function kk(e){for(const t of e.children)t.parseLayoutSize()}function Nv(e,t){const n=IG(t),i=rx(n),r=e.component.resolve,a=e.component.layoutSize;let o;for(const l of e.children){const c=l.component.layoutSize.getWithExplicit(n),f=r.scale[i]??HG(i,e);if(f==="independent"&&c.value==="step"){o=void 0;break}if(o){if(f==="independent"&&o.value!==c.value){o=void 0;break}o=Cl(o,c,n,"")}else o=c}if(o){for(const l of e.children)e.renameSignal(l.getName(n),e.getName(t)),l.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,o)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function ZEe(e){const{size:t,component:n}=e;for(const i of gs){const r=qi(i);if(t[r]!=null&&t[r]!=null){const a=t[r];n.layoutSize.set(r,eo(a)?"step":a,!0)}else{const a=KEe(e,r);n.layoutSize.set(r,a,!1)}}}function KEe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),o=r.get("range");if(Vt(a)){const l=Mv(i.view,t);return Ec(o)||eo(l)?"step":l}else return YA(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return YA(i.view,t);{const a=Mv(i.view,t);return eo(a)?a.step:a}}}function fC(e,t,n){return be(t,{suffix:`by_${be(e)}`,...n})}class rp extends pY{constructor(n,i,r,a){super(n,"facet",i,r,a,n.resolve);se(this,"facet");se(this,"child");se(this,"children");this.child=zk(n.spec,this,this.getName("child"),void 0,a),this.children=[this.child],this.facet=this.initFacet(n.facet)}initFacet(n){if(!x0(n))return{facet:this.initFacetFieldDef(n,"facet")};const i=le(n),r={};for(const a of i){if(![Zo,Ko].includes(a)){de(sx(a,"facet"));break}const o=n[a];if(o.field===void 0){de(jA(o,a));break}r[a]=this.initFacetFieldDef(o,a)}return r}initFacetFieldDef(n,i){const r=JM(n,i);return r.header?r.header=zn(r.header):r.header===null&&(r.header=null),r}channelHasField(n){return ce(this.facet,n)}fieldDef(n){return this.facet[n]}parseData(){this.component.data=Ux(this),this.child.parseData()}parseLayoutSize(){kk(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,ln(this.component.selection).some(n=>Ha(n))&&$M(CM)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),XEe(this)}assembleSelectionTopLevelSignals(n){return this.child.assembleSelectionTopLevelSignals(n)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(n){return this.child.assembleSelectionData(n)}getHeaderLayoutMixins(){const n={};for(const i of Dr)for(const r of xk){const a=this.component.layoutHeaders[i],o=a[r],{facetFieldDef:l}=a;if(l){const c=$d("titleOrient",l.header,this.config,i);if(["right","bottom"].includes(c)){const f=$x(i,c);n.titleAnchor??(n.titleAnchor={}),n.titleAnchor[f]="end"}}if(o!=null&&o[0]){const c=i==="row"?"height":"width",f=r==="header"?"headerBand":"footerBand";i!=="facet"&&!this.child.component.layoutSize.get(c)&&(n[f]??(n[f]={}),n[f][i]=.5),a.title&&(n.offset??(n.offset={}),n.offset[i==="row"?"rowTitle":"columnTitle"]=10)}}return n}assembleDefaultLayout(){const{column:n,row:i}=this.facet,r=n?this.columnDistinctSignal():i?1:void 0;let a="all";return(!i&&this.component.resolve.scale.x==="independent"||!n&&this.component.resolve.scale.y==="independent")&&(a="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:a}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof rp))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(n){return this.parent&&this.parent instanceof rp?{...this.channelHasField("column")?{encode:{update:{columns:{field:be(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(n)}:super.assembleGroup(n)}getCardinalityAggregateForChild(){const n=[],i=[],r=[];if(this.child instanceof rp){if(this.child.channelHasField("column")){const a=be(this.child.facet.column);n.push(a),i.push("distinct"),r.push(`distinct_${a}`)}}else for(const a of gs){const o=this.child.component.scales[a];if(o&&!o.merged){const l=o.get("type"),c=o.get("range");if(Vt(l)&&Ec(c)){const f=lc(this.child,a),d=$k(f);d?(n.push(d),i.push("distinct"),r.push(`distinct_${d}`)):de(AM(a))}}}return{fields:n,ops:i,as:r}}assembleFacet(){const{name:n,data:i}=this.component.data.facetRoot,{row:r,column:a}=this.facet,{fields:o,ops:l,as:c}=this.getCardinalityAggregateForChild(),f=[];for(const g of Dr){const p=this.facet[g];if(p){f.push(be(p));const{bin:y,sort:v}=p;if(Tt(y)&&f.push(be(p,{binSuffix:"end"})),Jo(v)){const{field:b,op:S=gx}=v,_=fC(p,v);r&&a?(o.push(_),l.push("max"),c.push(_)):(o.push(b),l.push(S),c.push(_))}else if(ie(v)){const b=Cd(p,g);o.push(b),l.push("max"),c.push(b)}}}const d=!!r&&!!a;return{name:n,data:i,groupby:f,...d||o.length>0?{aggregate:{...d?{cross:d}:{},...o.length?{fields:o,ops:l,as:c}:{}}}:{}}}facetSortFields(n){const{facet:i}=this,r=i[n];return r?Jo(r.sort)?[fC(r,r.sort,{expr:"datum"})]:ie(r.sort)?[Cd(r,n,{expr:"datum"})]:[be(r,{expr:"datum"})]:[]}facetSortOrder(n){const{facet:i}=this,r=i[n];if(r){const{sort:a}=r;return[(Jo(a)?a.order:!ie(a)&&a)||"ascending"]}return[]}assembleLabelTitle(){var a;const{facet:n,config:i}=this;if(n.facet)return iC(n.facet,"facet",i);const r={row:["top","bottom"],column:["left","right"]};for(const o of bk)if(n[o]){const l=$d("labelOrient",(a=n[o])==null?void 0:a.header,i,o);if(r[o].includes(l))return iC(n[o],o,i)}}assembleMarks(){const{child:n}=this,i=this.component.data.facetRoot,r=HEe(i),a=n.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||n.assembleTitle(),l=n.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...l?{style:l}:{},from:{facet:this.assembleFacet()},sort:{field:Dr.map(f=>this.facetSortFields(f)).flat(),order:Dr.map(f=>this.facetSortOrder(f)).flat()},...r.length>0?{data:r}:{},...a?{encode:{update:a}}:{},...n.assembleGroup(u2e(this,[]))}]}getMapping(){return this.facet}}function JEe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(Jo(a.sort)){const{field:o,op:l=gx}=a.sort;e=r=new $c(e,{joinaggregate:[{op:l,field:o,as:fC(a,a.sort,{forAs:!0})}],groupby:[be(a)]})}return r}return null}function vY(e,t){var n,i,r,a;for(const o of t){const l=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const c=(n=e.format)==null?void 0:n.mesh,f=(i=l.format)==null?void 0:i.feature;if(c&&f)continue;const d=(r=e.format)==null?void 0:r.feature;if((d||f)&&d!==f)continue;const g=(a=l.format)==null?void 0:a.mesh;if(!((c||g)&&c!==g)){if(Op(e)&&Op(l)){if(ar(e.values,l.values))return o}else if(_d(e)&&_d(l)){if(e.url===l.url)return o}else if(nG(e)&&e.name===o.dataName)return o}}return null}function e_e(e,t){if(e.data||!e.parent){if(e.data===null){const i=new sc({values:[]});return t.push(i),i}const n=vY(e.data,t);if(n)return dl(e.data)||(n.data.format=WI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new sc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function t_e(e,t,n){let i=0;for(const r of t.transforms){let a,o;if(Lxe(r))o=e=new Ad(e,r),a="derived";else if(fk(r)){const l=DSe(r);o=e=Zn.makeWithAncestors(e,{},l,n)??e,e=new Zd(e,t,r.filter)}else if(ZH(r))o=e=Ga.makeFromTransform(e,r,t),a="number";else if(Bxe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new Zn(e,{[r.field]:a}),n.set(r.field,a,!1)),o=e=Pa.makeFromTransform(e,r);else if(qxe(r))o=e=ua.makeFromTransform(e,r),a="number",vk(t)&&(e=new $l(e));else if(QH(r))o=e=Np.make(e,t,r,i++),a="derived";else if(Rxe(r))o=e=new Jd(e,r),a="number";else if(zxe(r))o=e=new $c(e,r),a="number";else if(jxe(r))o=e=ts.makeFromTransform(e,r),a="derived";else if(Ixe(r))o=e=new Dx(e,r),a="derived";else if(Pxe(r))o=e=new kx(e,r),a="derived";else if(Fxe(r))o=e=new Ox(e,r),a="derived";else if(Txe(r))o=e=new Fx(e,r),a="derived";else if(Nxe(r))e=new Lx(e,r);else if(Uxe(r))o=e=Uu.makeFromTransform(e,r),a="derived";else if(Mxe(r))o=e=new Mx(e,r),a="derived";else if(kxe(r))o=e=new Rx(e,r),a="derived";else if(Oxe(r))o=e=new zx(e,r),a="derived";else if(Dxe(r))o=e=new Nx(e,r),a="derived";else{de(sye(r));continue}if(o&&a!==void 0)for(const l of o.producedFields()??[])n.set(l,a,!1)}return e}function Ux(e){var S;let t=e_e(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,o=!(r&&(dl(r)||_d(r)||Op(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new t2e;dl(r)?(iG(r)?t=new $0(t,r.sequence):dk(r)&&(t=new C0(t,r.graticule)),o.parseNothing=!0):((S=r==null?void 0:r.format)==null?void 0:S.parse)===null&&(o.parseNothing=!0),t=Zn.makeExplicit(t,e,o)??t,t=new $l(t);const l=e.parent&&eh(e.parent);(Ft(e)||cr(e))&&l&&(t=Ga.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=t_e(t,e,o));const c=RSe(e),f=NSe(e);t=Zn.makeWithAncestors(t,{},{...c,...f},o)??t,Ft(e)&&(t=Hf.parseAll(t,e),t=Dp.parseAll(t,e)),(Ft(e)||cr(e))&&(l||(t=Ga.makeFromEncoding(t,e)??t),t=Pa.makeFromEncoding(t,e)??t,t=Ad.parseAllForSortIndex(t,e));const d=t=w1(qt.Raw,e,t);if(Ft(e)){const _=ua.makeFromEncoding(t,e);_&&(t=_,vk(e)&&(t=new $l(t))),t=Uu.makeFromEncoding(t,e)??t,t=ts.makeFromEncoding(t,e)??t}let g,p;if(Ft(e)){const{markDef:_,mark:w,config:A}=e,$=gt("invalid",_,A),{marks:M,scales:k}=p=aG({invalid:$,isPath:jl(w)});M!==k&&k==="include-invalid-values"&&(g=t=w1(qt.PreFilterInvalid,e,t)),M==="exclude-invalid-values"&&(t=Td.make(t,e,p)??t)}const y=t=w1(qt.Main,e,t);let v;if(Ft(e)&&p){const{marks:_,scales:w}=p;_==="include-invalid-values"&&w==="exclude-invalid-values"&&(t=Td.make(t,e,p)??t,v=t=w1(qt.PostFilterInvalid,e,t))}Ft(e)&&U2e(e,y);let b=null;if(cr(e)){const _=e.getName("facet");t=JEe(t,e.facet)??t,b=new Kd(t,e,_,y.getSource()),n[_]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:o,preFilterInvalid:g,postFilterInvalid:v}}function w1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),o=new Ri(n,a,e,r);return i[a]=o,o}class n_e extends Mk{constructor(n,i,r,a){var o,l,c,f;super(n,"concat",i,r,a,n.resolve);se(this,"children");(((l=(o=n.resolve)==null?void 0:o.axis)==null?void 0:l.x)==="shared"||((f=(c=n.resolve)==null?void 0:c.axis)==null?void 0:f.y)==="shared")&&de(rye),this.children=this.getChildren(n).map((d,g)=>zk(d,this,this.getName(`concat_${g}`),void 0,a))}parseData(){this.component.data=Ux(this);for(const n of this.children)n.parseData()}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const i of le(n.component.selection))this.component.selection[i]=n.component.selection[i]}ln(this.component.selection).some(n=>Ha(n))&&$M(CM)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){for(const n of this.children)n.parseAxesAndHeaders()}getChildren(n){return Sx(n)?n.vconcat:uk(n)?n.hconcat:n.concat}parseLayoutSize(){QEe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(n){return this.children.reduce((i,r)=>r.assembleSelectionTopLevelSignals(i),n)}assembleSignals(){return this.children.forEach(n=>n.assembleSignals()),[]}assembleLayoutSignals(){const n=Sk(this);for(const i of this.children)n.push(...i.assembleLayoutSignals());return n}assembleSelectionData(n){return this.children.reduce((i,r)=>r.assembleSelectionData(i),n)}assembleMarks(){return this.children.map(n=>{const i=n.assembleTitle(),r=n.assembleGroupStyle(),a=n.assembleGroupEncodeEntry(!1);return{type:"group",name:n.getName("group"),...i?{title:i}:{},...r?{style:r}:{},...a?{encode:{update:a}}:{},...n.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const n=this.layout.columns;return{...n!=null?{columns:n}:{},bounds:"full",align:"each"}}}function i_e(e){return e===!1||e===null}const r_e={disable:1,gridScale:1,scale:1,...bH,labelExpr:1,encode:1},bY=le(r_e);class Ok extends ms{constructor(n={},i={},r=!1){super();se(this,"explicit");se(this,"implicit");se(this,"mainExtracted");this.explicit=n,this.implicit=i,this.mainExtracted=r}clone(){return new Ok(Le(this.explicit),Le(this.implicit),this.mainExtracted)}hasAxisPart(n){return n==="axis"?!0:n==="grid"||n==="title"?!!this.get(n):!i_e(this.get(n))}hasOrientSignalRef(){return $e(this.explicit.orient)}}function a_e(e,t,n){const{encoding:i,config:r}=e,a=gn(i[t])??gn(i[fo(t)]),o=e.axis(t)||{},{format:l,formatType:c}=o;if(rc(c))return{text:sa({fieldOrDatumDef:a,field:"datum.value",format:l,formatType:c,config:r}),...n};if(l===void 0&&c===void 0&&r.customFormatTypes){if(bd(a)==="quantitative"){if(xd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:sa({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:sa({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(bd(a)==="temporal"&&r.timeFormatType&&he(a)&&!a.timeUnit)return{text:sa({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function o_e(e){return gs.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[h_e(n,e)]),t),{})}const s_e={bottom:"top",top:"bottom",left:"right",right:"left"};function l_e(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of le(r.component.axes))n.axis[a]=Ek(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=u_e(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of gs){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const o of a.component.axes[r]){const{value:l,explicit:c}=o.getWithExplicit("orient");if(!$e(l)){if(i[l]>0&&!c){const f=s_e[l];i[l]>i[f]&&o.set("orient",f,!1)}i[l]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,o]of(t[r]||[]).entries())a>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function u_e(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const o=r.getWithExplicit("orient"),l=a.getWithExplicit("orient");if(o.explicit&&l.explicit&&o.value!==l.value)return;e[i]=c_e(r,a)}}}else return t.map(n=>n.clone());return e}function c_e(e,t){for(const n of bY){const i=Cl(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return wP(r,a);case"gridScale":return{explicit:r.explicit,value:Kt(r.value,a.value)}}return _x(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function f_e(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===($e(n.labelAngle)?n.labelAngle:Mp(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===LG(i,r))return!0}return e===n[t]}const d_e=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function h_e(e,t){var _,w;let n=t.axis(e);const i=new Ok,r=gn(t.encoding[e]),{mark:a,config:o}=t,l=(n==null?void 0:n.orient)||((_=o[e==="x"?"axisX":"axisY"])==null?void 0:_.orient)||((w=o.axis)==null?void 0:w.orient)||V2e(e),c=t.getScaleComponent(e).get("type"),f=j2e(e,c,l,t.config),d=n!==void 0?!n:tC("disable",o.style,n==null?void 0:n.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const g=G2e(r,n,e,o.style,f),p=aH(n.formatType,r,c),y=rH(r,r.type,n.format,n.formatType,o,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:c,orient:l,labelAngle:g,format:y,formatType:p,mark:a,config:o};for(const A of bY){const $=A in R8?R8[A](v):s8(A)?n[A]:void 0,M=$!==void 0,k=f_e($,A,n,t,e);if(M&&k)i.set(A,$,k);else{const{configValue:T=void 0,configFrom:N=void 0}=s8(A)&&A!=="values"?tC(A,o.style,n.style,f):{},R=T!==void 0;M&&!R?i.set(A,$,k):(N!=="vgAxisConfig"||d_e.has(A)&&R||w0(T)||$e(T))&&i.set(A,T,!1)}}const b=n.encoding??{},S=vH.reduce((A,$)=>{if(!i.hasAxisPart($))return A;const M=PG(b[$]??{},t),k=$==="labels"?a_e(t,e,M):M;return k!==void 0&&!$t(k)&&(A[$]={update:k}),A},{});return $t(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function g_e({encoding:e,size:t}){for(const n of gs){const i=qi(n);eo(t[i])&&ol(e[n])&&(delete t[i],de(MP(i)))}return t}const p_e={vgMark:"arc",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...os(e,"radius"),...os(e,"theta")})},m_e={vgMark:"area",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...kv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...kv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...yk(e)})},y_e={vgMark:"rect",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...os(e,"x"),...os(e,"y")})},v_e={vgMark:"shape",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&he(n)&&n.type===Wd?{field:be(n,{expr:"datum"})}:{}}]}},b_e={vgMark:"image",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...os(e,"x"),...os(e,"y"),...gk(e,"url")})},x_e={vgMark:"line",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...Ln("size",e,{vgChannel:"strokeWidth"}),...yk(e)})},S_e={vgMark:"trail",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...Ln("size",e),...yk(e)})};function Dk(e,t){const{config:n}=e;return{...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...Ln("size",e),...Ln("angle",e),...E_e(e,n,t)}}function E_e(e,t,n){return n?{shape:{value:n}}:Ln("shape",e)}const __e={vgMark:"symbol",encodeEntry:e=>Dk(e)},w_e={vgMark:"symbol",encodeEntry:e=>Dk(e,"circle")},A_e={vgMark:"symbol",encodeEntry:e=>Dk(e,"square")},C_e={vgMark:"rect",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...os(e,"x"),...os(e,"y")})},$_e={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...kv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...kv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ln("size",e,{vgChannel:"strokeWidth"})}}},T_e={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Hr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...gk(e),...Ln("size",e,{vgChannel:"fontSize"}),...Ln("angle",e),...k8("align",M_e(e.markDef,n,t)),...k8("baseline",k_e(e.markDef,n,t)),...gi("radius",e,{defaultPos:null}),...gi("theta",e,{defaultPos:null})}}};function M_e(e,t,n){if(gt("align",e,n)===void 0)return"center"}function k_e(e,t,n){if(gt("baseline",e,n)===void 0)return"middle"}const O_e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",o=i==="horizontal"?"height":"width";return{...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...os(e,r),...gi(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[o]:Dt(gt("thickness",n,t))}}},A1={arc:p_e,area:m_e,bar:y_e,circle:w_e,geoshape:v_e,image:b_e,line:x_e,point:__e,rect:C_e,rule:$_e,square:A_e,text:T_e,tick:O_e,trail:S_e};function D_e(e){if(We([dx,cx,zve],e.mark)){const t=AH(e.mark,e.encoding);if(t.length>0)return N_e(e,t)}else if(e.mark===fx){const t=BA.some(n=>gt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return R_e(e)}return Nk(e)}const Q8="faceted_path_";function N_e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Q8+e.requestDataName(qt.Main),data:e.requestDataName(qt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Nk(e,{fromPrefix:Q8})}]}const Z8="stack_group_";function R_e(e){var f;const[t]=Nk(e,{fromPrefix:Z8}),n=e.scaleName(e.stack.fieldChannel),i=(d={})=>e.vgField(e.stack.fieldChannel,d),r=(d,g)=>{const p=[i({prefix:"min",suffix:"start",expr:g}),i({prefix:"max",suffix:"start",expr:g}),i({prefix:"min",suffix:"end",expr:g}),i({prefix:"max",suffix:"end",expr:g})];return`${d}(${p.map(y=>`scale('${n}',${y})`).join(",")})`};let a,o;e.stack.fieldChannel==="x"?(a={...dd(t.encode.update,["y","yc","y2","height",...BA]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ur(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...dd(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ur(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const d of BA){const g=Ka(d,e.markDef,e.config);t.encode.update[d]?(a[d]=t.encode.update[d],delete t.encode.update[d]):g&&(a[d]=Dt(g)),g&&(t.encode.update[d]={value:0})}const l=[];if(((f=e.stack.groupbyChannels)==null?void 0:f.length)>0)for(const d of e.stack.groupbyChannels){const g=e.fieldDef(d),p=be(g);p&&l.push(p),(g!=null&&g.bin||g!=null&&g.timeUnit)&&l.push(be(g,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((d,g)=>{if(t.encode.update[g])return{...d,[g]:t.encode.update[g]};{const p=Ka(g,e.markDef,e.config);return p!==void 0?{...d,[g]:Dt(p)}:d}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(qt.Main),name:Z8+e.requestDataName(qt.Main),groupby:l,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function z_e(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,o=t.order;if(!(!ie(o)&&ga(o)&&LA(o.value)||!o&&LA(gt("order",r,a)))){if((ie(o)||he(o))&&!n)return SP(o,{expr:"datum"});if(jl(i)){const l=r.orient==="horizontal"?"y":"x",c=t[l];if(he(c))return{field:l}}}}function Nk(e,t={fromPrefix:""}){var y;const{mark:n,markDef:i,encoding:r,config:a}=e,o=Kt(i.clip,F_e(e),L_e(e)),l=bP(i),c=r.key,f=z_e(e),d=U_e(e);d&&Object.values(e.component.selection).some(v=>v.type==="point"&&!v.bind&&v.on!=="pointerover")&&((y=e.markDef).cursor??(y.cursor="pointer"));const g=gt("aria",i,a),p=A1[n].postEncodingTransform?A1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:A1[n].vgMark,...o?{clip:o}:{},...l?{style:l}:{},...c?{key:c.field}:{},...f?{sort:f}:{},...d||{},...g===!1?{aria:g}:{},from:{data:t.fromPrefix+e.requestDataName(qt.Main)},encode:{update:A1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function F_e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function L_e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function U_e(e){if(!e.component.selection)return null;const t=le(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=le(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class xY extends pY{constructor(n,i,r,a={},o){super(n,"unit",i,r,o,void 0,u8(n)?n.view:void 0);se(this,"markDef");se(this,"encoding");se(this,"specifiedScales",{});se(this,"stack");se(this,"specifiedAxes",{});se(this,"specifiedLegends",{});se(this,"specifiedProjection",{});se(this,"selection",[]);se(this,"children",[]);se(this,"correctDataNames",n=>{var i,r,a;return(i=n.from)!=null&&i.data&&(n.from.data=this.lookupDataSource(n.from.data),"time"in this.encoding&&(n.from.data=n.from.data+sG)),(a=(r=n.from)==null?void 0:r.facet)!=null&&a.data&&(n.from.facet.data=this.lookupDataSource(n.from.facet.data)),n});const l=Ja(n.mark)?{...n.mark}:{type:n.mark},c=l.type;l.filled===void 0&&(l.filled=yxe(l,o,{graticule:n.data&&dk(n.data)}));const f=this.encoding=Sbe(n.encoding||{},c,l.filled,o);this.markDef=YH(l,f,o),this.size=g_e({encoding:f,size:u8(n)?{...a,...n.width!==void 0?{width:n.width}:{},...n.height!==void 0?{height:n.height}:{}}:a}),this.stack=GH(this.markDef,f),this.specifiedScales=this.initScales(c,f),this.specifiedAxes=this.initAxes(f),this.specifiedLegends=this.initLegends(f),this.specifiedProjection=n.projection,this.selection=(n.params??[]).filter(d=>sk(d)),this.alignStackOrderWithColorDomain()}get hasProjection(){const{encoding:n}=this,i=this.mark===ZP,r=n&&h1e.some(a=>Ue(n[a]));return i||r}scaleDomain(n){const i=this.specifiedScales[n];return i?i.domain:void 0}axis(n){return this.specifiedAxes[n]}legend(n){return this.specifiedLegends[n]}initScales(n,i){return EM.reduce((r,a)=>{const o=gn(i[a]);return o&&(r[a]=this.initScale(o.scale??{})),r},{})}initScale(n){const{domain:i,range:r}=n,a=zn(n);return ie(i)&&(a.domain=i.map(nr)),ie(r)&&(a.range=r.map(nr)),a}initAxes(n){return gs.reduce((i,r)=>{const a=n[r];if(Ue(a)||r===Ut&&Ue(n.x2)||r===Tn&&Ue(n.y2)){const o=Ue(a)?a.axis:void 0;i[r]=o&&this.initAxis({...o})}return i},{})}initAxis(n){const i=le(n),r={};for(const a of i){const o=n[a];r[a]=w0(o)?vP(o):nr(o)}return r}initLegends(n){return w1e.reduce((i,r)=>{const a=gn(n[r]);if(a&&C1e(r)){const o=a.legend;i[r]=o&&zn(o)}return i},{})}alignStackOrderWithColorDomain(){var S;const{color:n,fill:i,order:r,xOffset:a,yOffset:o}=this.encoding,l=i||n,c=he(l)?l:void 0,f=c==null?void 0:c.field,d=c==null?void 0:c.scale,g=c==null?void 0:c.type,p=d==null?void 0:d.domain,y=a||o,v=he(y)?y:void 0,b=`_${f}_sort_index`;if(!r&&Array.isArray(p)&&typeof f=="string"&&g==="nominal")if(v&&!v.sort)v.sort=p;else{if(!this.stack)return;const _=`indexof(${ge(p)}, datum['${f}'])`,w=((S=this.markDef)==null?void 0:S.orient)==="horizontal"?"ascending":"descending";this.transforms.push({calculate:_,as:b}),this.encoding.order={field:b,type:"quantitative",sort:w}}}parseData(){this.component.data=Ux(this)}parseLayoutSize(){ZEe(this)}parseSelections(){this.component.selection=L2e(this,this.selection)}parseMarkGroup(){this.component.mark=D_e(this)}parseAxesAndHeaders(){this.component.axes=o_e(this)}assembleSelectionTopLevelSignals(n){return c2e(this,n)}assembleSignals(){return[...RG(this),...l2e(this,[])]}assembleSelectionData(n){return f2e(this,n)}assembleLayout(){return null}assembleLayoutSignals(){return Sk(this)}assembleMarks(){let n=this.component.mark??[];return(!this.parent||!eh(this.parent))&&(n=fG(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:n}=this.view||{};return n!==void 0?n:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(n){return Fu(this.encoding,n)}fieldDef(n){const i=this.encoding[n];return pa(i)}typedFieldDef(n){const i=this.fieldDef(n);return bi(i)?i:null}}class Rk extends Mk{constructor(n,i,r,a,o){super(n,"layer",i,r,o,n.resolve,n.view);se(this,"children");const l={...a,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}};this.children=n.layer.map((c,f)=>{if(Ex(c))return new Rk(c,this,this.getName(`layer_${f}`),l,o);if(ps(c))return new xY(c,this,this.getName(`layer_${f}`),l,o);throw new Error(wM(c))})}parseData(){this.component.data=Ux(this);for(const n of this.children)n.parseData()}parseLayoutSize(){WEe(this)}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const i of le(n.component.selection))this.component.selection[i]=n.component.selection[i]}ln(this.component.selection).some(n=>Ha(n))&&$M(CM)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){l_e(this)}assembleSelectionTopLevelSignals(n){return this.children.reduce((i,r)=>r.assembleSelectionTopLevelSignals(i),n)}assembleSignals(){return this.children.reduce((n,i)=>n.concat(i.assembleSignals()),RG(this))}assembleLayoutSignals(){return this.children.reduce((n,i)=>n.concat(i.assembleLayoutSignals()),Sk(this))}assembleSelectionData(n){return this.children.reduce((i,r)=>r.assembleSelectionData(i),n)}assembleGroupStyle(){const n=new Set;for(const r of this.children)for(const a of Ee(r.assembleGroupStyle()))n.add(a);const i=Array.from(n);return i.length>1?i:i.length===1?i[0]:void 0}assembleTitle(){let n=super.assembleTitle();if(n)return n;for(const i of this.children)if(n=i.assembleTitle(),n)return n}assembleLayout(){return null}assembleMarks(){return d2e(this,this.children.flatMap(n=>n.assembleMarks()))}assembleLegends(){return this.children.reduce((n,i)=>n.concat(i.assembleLegends()),tY(this))}}function zk(e,t,n,i,r){if(px(e))return new rp(e,t,n,r);if(Ex(e))return new Rk(e,t,n,i,r);if(ps(e))return new xY(e,t,n,i,r);if(Gbe(e))return new n_e(e,t,n,r);throw new Error(wM(e))}function B_e(e,t={}){t.logger&&Wye(t.logger),t.fieldTitle&&pH(t.fieldTitle);try{const n=HH(kd(t.config,e.config)),i=eG(e,n),r=zk(i,null,"",void 0,n);return r.parse(),WSe(r.component.data,r),{spec:j_e(r,q_e(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&Qye(),t.fieldTitle&&dbe()}}function q_e(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Se(t)&&(t={type:t}),r&&a&&Kxe(t.type)){if(r==="step"&&a==="step")de(Xz()),t.type="pad";else if(r==="step"||a==="step"){const o=r==="step"?"width":"height";de(Xz(rx(o)));const l=o==="width"?"height":"width";t.type=Jxe(l)}}return{...le(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...S8(n,!1),...S8(e,!0)}}function j_e(e,t,n={},i){const r=e.config?axe(e.config):void 0,a=GEe(e.component.data,n),o=e.assembleSelectionData(a),l=e.assembleProjections(),c=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let g=e.assembleLayoutSignals();g=g.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...c?{title:c}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:o,...l.length>0?{projections:l}:{},...e.assembleGroup([...g,...e.assembleSelectionTopLevelSignals([]),...qH(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const I_e=s1e.version,P_e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:pd,accessPathWithDatum:gM,accessWithDatumToUnescapedPath:yt,compile:B_e,contains:We,deepEqual:ar,deleteNestedProperty:Sv,duplicate:Le,entries:_l,every:fM,fieldIntersection:hM,flatAccessWithDatum:ZI,getFirstDefined:Kt,hasIntersection:dM,hasProperty:ce,hash:Ge,internalField:tP,isBoolean:gd,isEmpty:$t,isEqual:u1e,isInternalField:nP,isNullOrFalse:LA,isNumeric:Kb,isPrimitive:xv,keys:le,logicalExpr:np,mergeDeep:WI,never:VI,normalize:eG,normalizeAngle:Mp,omit:ur,pick:dd,prefixGenerator:UA,removePathFromField:Xd,replaceAll:Ku,replacePathInField:qr,resetIdCounter:f1e,setEqual:QI,some:hd,stringify:bt,titleCase:h0,unescapeSingleQuoteAndPathDot:KI,unique:rr,uniqueId:eP,vals:ln,varName:Lt,version:I_e},Symbol.toStringTag,{value:"Module"}));function SY(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var H_e="3.0.0",G_e={version:H_e};const wf="#fff",K8="#888",Y_e={background:"#333",view:{stroke:K8},title:{color:wf,subtitleColor:wf},style:{"guide-label":{fill:wf},"guide-title":{fill:wf}},axis:{domainColor:wf,gridColor:K8,tickColor:wf}},cu="#4572a7",X_e={background:"#fff",arc:{fill:cu},area:{fill:cu},line:{stroke:cu,strokeWidth:2},path:{stroke:cu},rect:{fill:cu},shape:{stroke:cu},symbol:{fill:cu,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},fu="#30a2da",O_="#cbcbcb",V_e="#999",W_e="#333",J8="#f0f0f0",eF="#333",Q_e={arc:{fill:fu},area:{fill:fu},axis:{domainColor:O_,grid:!0,gridColor:O_,gridWidth:1,labelColor:V_e,labelFontSize:10,titleColor:W_e,tickColor:O_,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:J8,group:{fill:J8},legend:{labelColor:eF,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:eF,titleFontSize:14,titlePadding:10},line:{stroke:fu,strokeWidth:2},path:{stroke:fu,strokeWidth:.5},rect:{fill:fu},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:fu},bar:{binSpacing:2,fill:fu,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},du="#000",Z_e={group:{fill:"#e5e5e5"},arc:{fill:du},area:{fill:du},line:{stroke:du},path:{stroke:du},rect:{fill:du},shape:{stroke:du},symbol:{fill:du,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},K_e=22,J_e="normal",tF="Benton Gothic, sans-serif",nF=11.5,ewe="normal",hu="#82c6df",D_="Benton Gothic Bold, sans-serif",iF="normal",rF=13,vg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},twe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:D_,fontSize:K_e,fontWeight:J_e},arc:{fill:hu},area:{fill:hu},line:{stroke:hu,strokeWidth:2},path:{stroke:hu},rect:{fill:hu},shape:{stroke:hu},symbol:{fill:hu,size:30},axis:{labelFont:tF,labelFontSize:nF,labelFontWeight:ewe,titleFont:D_,titleFontSize:rF,titleFontWeight:iF},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:tF,labelFontSize:nF,symbolType:"square",titleFont:D_,titleFontSize:rF,titleFontWeight:iF},range:{category:vg["category-6"],diverging:vg["fireandice-6"],heatmap:vg["fire-7"],ordinal:vg["fire-7"],ramp:vg["fire-7"]}},gu="#ab5787",C1="#979797",nwe={background:"#f9f9f9",arc:{fill:gu},area:{fill:gu},line:{stroke:gu},path:{stroke:gu},rect:{fill:gu},shape:{stroke:gu},symbol:{fill:gu,size:30},axis:{domainColor:C1,domainWidth:.5,gridWidth:.2,labelColor:C1,tickColor:C1,tickWidth:.2,titleColor:C1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},pu="#3e5c69",iwe={background:"#fff",arc:{fill:pu},area:{fill:pu},line:{stroke:pu},path:{stroke:pu},rect:{fill:pu},shape:{stroke:pu},symbol:{fill:pu},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Cr="#1696d2",aF="#000000",rwe="#FFFFFF",$1="Lato",N_="Lato",awe="Lato",owe="#DEDDDD",swe=18,bg={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},lwe={background:rwe,title:{anchor:"start",fontSize:swe,font:$1},axisX:{domain:!0,domainColor:aF,domainWidth:1,grid:!1,labelFontSize:12,labelFont:N_,labelAngle:0,tickColor:aF,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:$1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:owe,gridWidth:1,labelFontSize:12,labelFont:N_,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:$1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:N_,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:$1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:bg["six-groups-cat-1"],diverging:bg["diverging-colors"],heatmap:bg["diverging-colors"],ordinal:bg["six-groups-seq"],ramp:bg["shades-blue"]},area:{fill:Cr},rect:{fill:Cr},line:{color:Cr,stroke:Cr,strokeWidth:5},trail:{color:Cr,stroke:Cr,strokeWidth:0,size:1},path:{stroke:Cr,strokeWidth:.5},point:{filled:!0},text:{font:awe,color:Cr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Cr,stroke:null}},arc:{fill:Cr},shape:{stroke:Cr},symbol:{fill:Cr,size:30}},mu="#3366CC",oF="#ccc",T1="Arial, sans-serif",uwe={arc:{fill:mu},area:{fill:mu},path:{stroke:mu},rect:{fill:mu},shape:{stroke:mu},symbol:{stroke:mu},circle:{fill:mu},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:T1,fontSize:12},"guide-title":{font:T1,fontSize:12},"group-title":{font:T1,fontSize:12}},title:{font:T1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:oF,tickColor:oF,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Fk=e=>e*(1/3+1),sF=Fk(9),lF=Fk(10),uF=Fk(12),xg="Segoe UI",cF="wf_standard-font, helvetica, arial, sans-serif",fF="#252423",Sg="#605E5C",dF="transparent",cwe="#C8C6C4",Zr="#118DFF",fwe="#12239E",dwe="#E66C37",hwe="#6B007B",gwe="#E044A7",pwe="#744EC2",mwe="#D9B300",ywe="#D64550",EY=Zr,_Y="#DEEFFF",hF=[_Y,EY],vwe=[_Y,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",EY],bwe={view:{stroke:dF},background:dF,font:xg,header:{titleFont:cF,titleFontSize:uF,titleColor:fF,labelFont:xg,labelFontSize:lF,labelColor:Sg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Sg,labelFontSize:sF,titleFont:cF,titleColor:fF,titleFontSize:uF,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:cwe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Zr},line:{stroke:Zr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:xg,fontSize:sF,fill:Sg},arc:{fill:Zr},area:{fill:Zr,line:!0,opacity:.6},path:{stroke:Zr},rect:{fill:Zr},point:{fill:Zr,filled:!0,size:75},shape:{stroke:Zr},symbol:{fill:Zr,strokeWidth:1.5,size:50},legend:{titleFont:xg,titleFontWeight:"bold",titleColor:Sg,labelFont:xg,labelFontSize:lF,labelColor:Sg,symbolType:"circle",symbolSize:75},range:{category:[Zr,fwe,dwe,hwe,gwe,pwe,mwe,ywe],diverging:hF,heatmap:hF,ordinal:vwe}},R_='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',xwe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',z_=400,M1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Swe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Ewe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Bx({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=M1.gridBg[e],r=M1.textPrimary[e],a=M1.textSecondary[e],o=n==="dark"?Swe:Ewe,l=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:l},area:{fill:l},path:{stroke:l},rect:{fill:l},shape:{stroke:l},symbol:{stroke:l},circle:{fill:l},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:R_,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:xwe,labelFontWeight:z_,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:M1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:R_,fill:a,fontWeight:z_},"guide-title":{font:R_,fill:a,fontWeight:z_}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const _we=Bx({theme:"white",background:"#ffffff"}),wwe=Bx({theme:"g10",background:"#f4f4f4"}),Awe=Bx({theme:"g90",background:"#262626"}),Cwe=Bx({theme:"g100",background:"#161616"}),$we=G_e.version,Twe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:wwe,carbong100:Cwe,carbong90:Awe,carbonwhite:_we,dark:Y_e,excel:X_e,fivethirtyeight:Q_e,ggplot2:Z_e,googlecharts:uwe,latimes:twe,powerbi:bwe,quartz:nwe,urbaninstitute:lwe,version:$we,vox:iwe},Symbol.toStringTag,{value:"Module"}));function Mwe(e,t,n,i){if(ie(e))return`[${e.map(r=>t(Se(r)?r:gF(r,n))).join(", ")}]`;if(xe(e)){let r="";const{title:a,image:o,...l}=e;a&&(r+=`<h2>${t(a)}</h2>`),o&&(r+=`<img src="${new URL(t(o),i||location.href).href}">`);const c=Object.keys(l);if(c.length>0){r+="<table>";for(const f of c){let d=l[f];d!==void 0&&(xe(d)&&(d=gF(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function kwe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function gF(e,t){return JSON.stringify(e,kwe(t))}var Owe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const wY="vg-tooltip-element",Dwe={offsetX:10,offsetY:10,id:wY,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Nwe,maxDepth:2,formatTooltip:Mwe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function Nwe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Rwe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Owe.toString().replaceAll(wY,e)}function AY(e,t,{offsetX:n,offsetY:i}){const r=CY({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const o of a)if($Y(r[o],t))return r[o];return r["top-left"]}function zwe(e,t,n,i,r){const{position:a,offsetX:o,offsetY:l}=r,c=e._el.getBoundingClientRect(),f=e._origin,d=Fwe(c,f,n),g=CY(d,i,o,l),p=Array.isArray(a)?a:[a];for(const y of p)if($Y(g[y],i)&&!Lwe(t,g[y],i))return g[y];return AY(t,i,r)}function Fwe(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,o=n;for(;o.mark.group;)o=o.mark.group,r+=o.x??0,a+=o.y??0;const l=i.x2-i.x1,c=i.y2-i.y1;return{x1:r,x2:r+l,y1:a,y2:a+c}}function CY(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,o=e.x1-t.width-n,l=r-t.width/2,c=e.x2+n,f=e.y1-t.height-i,d=a-t.height/2,g=e.y2+i;return{top:{x:l,y:f},bottom:{x:l,y:g},left:{x:o,y:d},right:{x:c,y:d},"top-left":{x:o,y:f},"top-right":{x:c,y:f},"bottom-left":{x:o,y:g},"bottom-right":{x:c,y:g}}}function $Y(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function Lwe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class Uwe{constructor(t){se(this,"call");se(this,"options");se(this,"el");this.options={...Dwe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=Rwe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:o}=this.options.anchor==="mark"?zwe(t,n,i,this.el.getBoundingClientRect(),this.options):AY(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${o}px`,this.el.style.left=`${a}px`}}var F_={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Bwe=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),qwe=Object.prototype.hasOwnProperty;function dC(e,t){return qwe.call(e,t)}function hC(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)dC(e,r)&&i.push(r);return i}function or(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function gC(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function bu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function TY(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function pC(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(pC(e[t]))return!0}else if(typeof e=="object"){for(var i=hC(e),r=i.length,a=0;a<r;a++)if(pC(e[i[a]]))return!0}}return!1}function pF(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var MY=(function(e){Bwe(t,e);function t(n,i,r,a,o){var l=this.constructor,c=e.call(this,pF(n,{name:i,index:r,operation:a,tree:o}))||this;return c.name=i,c.index=r,c.operation=a,c.tree=o,Object.setPrototypeOf(c,l.prototype),c.message=pF(n,{name:i,index:r,operation:a,tree:o}),c}return t})(Error),Gt=MY,jwe=or,Rf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Rv(n,this.path);i&&(i=or(i));var r=Bu(n,{op:"remove",path:this.from}).removed;return Bu(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Rv(n,this.from);return Bu(n,{op:"add",path:this.path,value:or(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Rp(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Iwe={add:function(e,t,n){return gC(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Rf.move,copy:Rf.copy,test:Rf.test,_get:Rf._get};function Rv(e,t){if(t=="")return e;var n={op:"_get",path:t};return Bu(e,n),n.value}function Bu(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):zv(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Rv(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Rp(e,t.value),o.test===!1)throw new Gt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Gt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return o}}else{i||(e=or(e));var l=t.path||"",c=l.split("/"),f=e,d=1,g=c.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=zv;;){if(y=c[d],y&&y.indexOf("~")!=-1&&(y=TY(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=c.slice(0,d).join("/"):d==g-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!gC(y))throw new Gt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);gC(y)&&(y=~~y)}if(d>=g){if(n&&t.op==="add"&&y>f.length)throw new Gt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var o=Iwe[t.op].call(t,f,y,e);if(o.test===!1)throw new Gt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}}else if(d>=g){var o=Rf[t.op].call(t,f,y,e);if(o.test===!1)throw new Gt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}if(f=f[y],n&&d<g&&(!f||typeof f!="object"))throw new Gt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function qx(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Gt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=or(e));for(var a=new Array(t.length),o=0,l=t.length;o<l;o++)a[o]=Bu(e,t[o],n,!0,r,o),e=a[o].newDocument;return a.newDocument=e,a}function Pwe(e,t,n){var i=Bu(e,t);if(i.test===!1)throw new Gt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function zv(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Gt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Rf[e.op]){if(typeof e.path!="string")throw new Gt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Gt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Gt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Gt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&pC(e.value))throw new Gt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Gt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Gt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},l=kY([o],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new Gt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Gt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function kY(e,t,n){try{if(!Array.isArray(e))throw new Gt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)qx(or(t),or(e),n||!0);else{n=n||zv;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Gt)return r;throw r}}function Rp(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,o;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Rp(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var l=Object.keys(e);if(a=l.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(l[r]))return!1;for(r=a;r--!==0;)if(o=l[r],!Rp(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}var Hwe=Object.freeze({__proto__:null,JsonPatchError:Gt,_areEquals:Rp,applyOperation:Bu,applyPatch:qx,applyReducer:Pwe,deepClone:jwe,getValueByPointer:Rv,validate:kY,validator:zv});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Lk=new WeakMap,Gwe=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),Ywe=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function Xwe(e){return Lk.get(e)}function Vwe(e,t){return e.observers.get(t)}function Wwe(e,t){e.observers.delete(t.callback)}function Qwe(e,t){t.unobserve()}function Zwe(e,t){var n=[],i,r=Xwe(e);if(!r)r=new Gwe(e),Lk.set(e,r);else{var a=Vwe(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=or(e),t){i.callback=t,i.next=null;var o=function(){mC(i)},l=function(){clearTimeout(i.next),i.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return i.patches=n,i.object=e,i.unobserve=function(){mC(i),clearTimeout(i.next),Wwe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},r.observers.set(t,new Ywe(t,i)),i}function mC(e,t){t===void 0&&(t=!1);var n=Lk.get(e.object);Uk(n.value,e.object,e.patches,"",t),e.patches.length&&qx(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function Uk(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=hC(t),o=hC(e),l=!1,c=o.length-1;c>=0;c--){var f=o[c],d=e[f];if(dC(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var g=t[f];typeof d=="object"&&d!=null&&typeof g=="object"&&g!=null&&Array.isArray(d)===Array.isArray(g)?Uk(d,g,n,i+"/"+bu(f),r):d!==g&&(r&&n.push({op:"test",path:i+"/"+bu(f),value:or(d)}),n.push({op:"replace",path:i+"/"+bu(f),value:or(g)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+bu(f),value:or(d)}),n.push({op:"remove",path:i+"/"+bu(f)}),l=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!l&&a.length==o.length))for(var c=0;c<a.length;c++){var f=a[c];!dC(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+bu(f),value:or(t[f])})}}}function Kwe(e,t,n){n===void 0&&(n=!1);var i=[];return Uk(e,t,i,"",n),i}var Jwe=Object.freeze({__proto__:null,compare:Kwe,generate:mC,observe:Zwe,unobserve:Qwe});Object.assign({},Hwe,Jwe,{JsonPatchError:MY,deepClone:or,escapePathComponent:bu,unescapePathComponent:TY});function eAe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var L_,mF;function tAe(){if(mF)return L_;mF=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return L_=e,L_}var U_,yF;function Bk(){if(yF)return U_;yF=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return U_=i=>i?typeof i!="object"?e:i:t,U_}var k1={exports:{}},B_,vF;function qk(){if(vF)return B_;vF=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return B_={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},B_}var q_,bF;function jx(){return bF||(bF=1,q_=typeof process=="object"&&F_&&F_.NODE_DEBUG&&/\bsemver\b/i.test(F_.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),q_}var xF;function jk(){return xF||(xF=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=qk(),a=jx();t=e.exports={};const o=t.re=[],l=t.safeRe=[],c=t.src=[],f=t.safeSrc=[],d=t.t={};let g=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=S=>{for(const[_,w]of y)S=S.split(`${_}*`).join(`${_}{0,${w}}`).split(`${_}+`).join(`${_}{1,${w}}`);return S},b=(S,_,w)=>{const A=v(_),$=g++;a(S,$,_),d[S]=$,c[$]=_,f[$]=A,o[$]=new RegExp(_,w?"g":void 0),l[$]=new RegExp(A,w?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),b("FULL",`^${c[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),b("LOOSE",`^${c[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),b("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?(?:${c[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",c[d.COERCE],!0),b("COERCERTLFULL",c[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(k1,k1.exports)),k1.exports}var j_,SF;function nAe(){if(SF)return j_;SF=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),o=e.test(r);return a&&o&&(i=+i,r=+r),i===r?0:a&&!o?-1:o&&!a?1:i<r?-1:1};return j_={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},j_}var I_,EF;function Ik(){if(EF)return I_;EF=1;const e=jx(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=qk(),{safeRe:i,t:r}=jk(),a=Bk(),{compareIdentifiers:o}=nAe();class l{constructor(f,d){if(d=a(d),f instanceof l){if(f.loose===!!d.loose&&f.includePrerelease===!!d.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const g=f.trim().match(d.loose?i[r.LOOSE]:i[r.FULL]);if(!g)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+g[1],this.minor=+g[2],this.patch=+g[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");g[4]?this.prerelease=g[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const y=+p;if(y>=0&&y<n)return y}return p}):this.prerelease=[],this.build=g[5]?g[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof l)){if(typeof f=="string"&&f===this.version)return 0;f=new l(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof l||(f=new l(f,this.options)),o(this.major,f.major)||o(this.minor,f.minor)||o(this.patch,f.patch)}comparePre(f){if(f instanceof l||(f=new l(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let d=0;do{const g=this.prerelease[d],p=f.prerelease[d];if(e("prerelease compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return o(g,p)}while(++d)}compareBuild(f){f instanceof l||(f=new l(f,this.options));let d=0;do{const g=this.build[d],p=f.build[d];if(e("build compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return o(g,p)}while(++d)}inc(f,d,g){if(f.startsWith("pre")){if(!d&&g===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=`-${d}`.match(this.options.loose?i[r.PRERELEASELOOSE]:i[r.PRERELEASE]);if(!p||p[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,g);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,g);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,g),this.inc("pre",d,g);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,g),this.inc("pre",d,g);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(g)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(d===this.prerelease.join(".")&&g===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let y=[d,p];g===!1&&(y=[d]),o(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return I_=l,I_}var P_,_F;function th(){if(_F)return P_;_F=1;const e=Ik();return P_=(n,i,r)=>new e(n,r).compare(new e(i,r)),P_}var H_,wF;function iAe(){if(wF)return H_;wF=1;const e=th();return H_=(n,i,r)=>e(n,i,r)===0,H_}var G_,AF;function rAe(){if(AF)return G_;AF=1;const e=th();return G_=(n,i,r)=>e(n,i,r)!==0,G_}var Y_,CF;function aAe(){if(CF)return Y_;CF=1;const e=th();return Y_=(n,i,r)=>e(n,i,r)>0,Y_}var X_,$F;function oAe(){if($F)return X_;$F=1;const e=th();return X_=(n,i,r)=>e(n,i,r)>=0,X_}var V_,TF;function sAe(){if(TF)return V_;TF=1;const e=th();return V_=(n,i,r)=>e(n,i,r)<0,V_}var W_,MF;function lAe(){if(MF)return W_;MF=1;const e=th();return W_=(n,i,r)=>e(n,i,r)<=0,W_}var Q_,kF;function uAe(){if(kF)return Q_;kF=1;const e=iAe(),t=rAe(),n=aAe(),i=oAe(),r=sAe(),a=lAe();return Q_=(l,c,f,d)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof f=="object"&&(f=f.version),l===f;case"!==":return typeof l=="object"&&(l=l.version),typeof f=="object"&&(f=f.version),l!==f;case"":case"=":case"==":return e(l,f,d);case"!=":return t(l,f,d);case">":return n(l,f,d);case">=":return i(l,f,d);case"<":return r(l,f,d);case"<=":return a(l,f,d);default:throw new TypeError(`Invalid operator: ${c}`)}},Q_}var Z_,OF;function cAe(){if(OF)return Z_;OF=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,g){if(g=n(g),d instanceof t){if(d.loose===!!g.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,g),this.options=g,this.loose=!!g.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const g=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(g);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new l(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,g){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,g).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,g).test(d.semver):(g=n(g),g.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,g)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,g)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}Z_=t;const n=Bk(),{safeRe:i,t:r}=jk(),a=uAe(),o=jx(),l=Ik(),c=OY();return Z_}var K_,DF;function OY(){if(DF)return K_;DF=1;const e=/\s+/g;class t{constructor(z,D){if(D=r(D),z instanceof t)return z.loose===!!D.loose&&z.includePrerelease===!!D.includePrerelease?z:new t(z.raw,D);if(z instanceof a)return this.raw=z.value,this.set=[[z]],this.formatted=void 0,this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=z.trim().replace(e," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(Y=>!b(Y[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&S(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let z=0;z<this.set.length;z++){z>0&&(this.formatted+="||");const D=this.set[z];for(let q=0;q<D.length;q++)q>0&&(this.formatted+=" "),this.formatted+=D[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(z){const q=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+z,Y=i.get(q);if(Y)return Y;const Z=this.options.loose,ue=Z?c[f.HYPHENRANGELOOSE]:c[f.HYPHENRANGE];z=z.replace(ue,Q(this.options.includePrerelease)),o("hyphen replace",z),z=z.replace(c[f.COMPARATORTRIM],d),o("comparator trim",z),z=z.replace(c[f.TILDETRIM],g),o("tilde trim",z),z=z.replace(c[f.CARETTRIM],p),o("caret trim",z);let F=z.split(" ").map(ve=>w(ve,this.options)).join(" ").split(/\s+/).map(ve=>U(ve,this.options));Z&&(F=F.filter(ve=>(o("loose invalid filter",ve,this.options),!!ve.match(c[f.COMPARATORLOOSE])))),o("range list",F);const H=new Map,ae=F.map(ve=>new a(ve,this.options));for(const ve of ae){if(b(ve))return[ve];H.set(ve.value,ve)}H.size>1&&H.has("")&&H.delete("");const pe=[...H.values()];return i.set(q,pe),pe}intersects(z,D){if(!(z instanceof t))throw new TypeError("a Range is required");return this.set.some(q=>_(q,D)&&z.set.some(Y=>_(Y,D)&&q.every(Z=>Y.every(ue=>Z.intersects(ue,D)))))}test(z){if(!z)return!1;if(typeof z=="string")try{z=new l(z,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(G(this.set[D],z,this.options))return!0;return!1}}K_=t;const n=tAe(),i=new n,r=Bk(),a=cAe(),o=jx(),l=Ik(),{safeRe:c,t:f,comparatorTrimReplace:d,tildeTrimReplace:g,caretTrimReplace:p}=jk(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=qk(),b=I=>I.value==="<0.0.0-0",S=I=>I.value==="",_=(I,z)=>{let D=!0;const q=I.slice();let Y=q.pop();for(;D&&q.length;)D=q.every(Z=>Y.intersects(Z,z)),Y=q.pop();return D},w=(I,z)=>(o("comp",I,z),I=k(I,z),o("caret",I),I=$(I,z),o("tildes",I),I=N(I,z),o("xrange",I),I=B(I,z),o("stars",I),I),A=I=>!I||I.toLowerCase()==="x"||I==="*",$=(I,z)=>I.trim().split(/\s+/).map(D=>M(D,z)).join(" "),M=(I,z)=>{const D=z.loose?c[f.TILDELOOSE]:c[f.TILDE];return I.replace(D,(q,Y,Z,ue,F)=>{o("tilde",I,q,Y,Z,ue,F);let H;return A(Y)?H="":A(Z)?H=`>=${Y}.0.0 <${+Y+1}.0.0-0`:A(ue)?H=`>=${Y}.${Z}.0 <${Y}.${+Z+1}.0-0`:F?(o("replaceTilde pr",F),H=`>=${Y}.${Z}.${ue}-${F} <${Y}.${+Z+1}.0-0`):H=`>=${Y}.${Z}.${ue} <${Y}.${+Z+1}.0-0`,o("tilde return",H),H})},k=(I,z)=>I.trim().split(/\s+/).map(D=>T(D,z)).join(" "),T=(I,z)=>{o("caret",I,z);const D=z.loose?c[f.CARETLOOSE]:c[f.CARET],q=z.includePrerelease?"-0":"";return I.replace(D,(Y,Z,ue,F,H)=>{o("caret",I,Y,Z,ue,F,H);let ae;return A(Z)?ae="":A(ue)?ae=`>=${Z}.0.0${q} <${+Z+1}.0.0-0`:A(F)?Z==="0"?ae=`>=${Z}.${ue}.0${q} <${Z}.${+ue+1}.0-0`:ae=`>=${Z}.${ue}.0${q} <${+Z+1}.0.0-0`:H?(o("replaceCaret pr",H),Z==="0"?ue==="0"?ae=`>=${Z}.${ue}.${F}-${H} <${Z}.${ue}.${+F+1}-0`:ae=`>=${Z}.${ue}.${F}-${H} <${Z}.${+ue+1}.0-0`:ae=`>=${Z}.${ue}.${F}-${H} <${+Z+1}.0.0-0`):(o("no pr"),Z==="0"?ue==="0"?ae=`>=${Z}.${ue}.${F}${q} <${Z}.${ue}.${+F+1}-0`:ae=`>=${Z}.${ue}.${F}${q} <${Z}.${+ue+1}.0-0`:ae=`>=${Z}.${ue}.${F} <${+Z+1}.0.0-0`),o("caret return",ae),ae})},N=(I,z)=>(o("replaceXRanges",I,z),I.split(/\s+/).map(D=>R(D,z)).join(" ")),R=(I,z)=>{I=I.trim();const D=z.loose?c[f.XRANGELOOSE]:c[f.XRANGE];return I.replace(D,(q,Y,Z,ue,F,H)=>{o("xRange",I,q,Y,Z,ue,F,H);const ae=A(Z),pe=ae||A(ue),ve=pe||A(F),De=ve;return Y==="="&&De&&(Y=""),H=z.includePrerelease?"-0":"",ae?Y===">"||Y==="<"?q="<0.0.0-0":q="*":Y&&De?(pe&&(ue=0),F=0,Y===">"?(Y=">=",pe?(Z=+Z+1,ue=0,F=0):(ue=+ue+1,F=0)):Y==="<="&&(Y="<",pe?Z=+Z+1:ue=+ue+1),Y==="<"&&(H="-0"),q=`${Y+Z}.${ue}.${F}${H}`):pe?q=`>=${Z}.0.0${H} <${+Z+1}.0.0-0`:ve&&(q=`>=${Z}.${ue}.0${H} <${Z}.${+ue+1}.0-0`),o("xRange return",q),q})},B=(I,z)=>(o("replaceStars",I,z),I.trim().replace(c[f.STAR],"")),U=(I,z)=>(o("replaceGTE0",I,z),I.trim().replace(c[z.includePrerelease?f.GTE0PRE:f.GTE0],"")),Q=I=>(z,D,q,Y,Z,ue,F,H,ae,pe,ve,De)=>(A(q)?D="":A(Y)?D=`>=${q}.0.0${I?"-0":""}`:A(Z)?D=`>=${q}.${Y}.0${I?"-0":""}`:ue?D=`>=${D}`:D=`>=${D}${I?"-0":""}`,A(ae)?H="":A(pe)?H=`<${+ae+1}.0.0-0`:A(ve)?H=`<${ae}.${+pe+1}.0-0`:De?H=`<=${ae}.${pe}.${ve}-${De}`:I?H=`<${ae}.${pe}.${+ve+1}-0`:H=`<=${H}`,`${D} ${H}`.trim()),G=(I,z,D)=>{for(let q=0;q<I.length;q++)if(!I[q].test(z))return!1;if(z.prerelease.length&&!D.includePrerelease){for(let q=0;q<I.length;q++)if(o(I[q].semver),I[q].semver!==a.ANY&&I[q].semver.prerelease.length>0){const Y=I[q].semver;if(Y.major===z.major&&Y.minor===z.minor&&Y.patch===z.patch)return!0}return!1}return!0};return K_}var J_,NF;function fAe(){if(NF)return J_;NF=1;const e=OY();return J_=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},J_}var dAe=fAe(),DY=eAe(dAe);function hAe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let o=40;function l(f){f.source===i&&(o=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function c(){o<=0||(i.postMessage(n,a),setTimeout(c,r),o-=1)}setTimeout(c,r)}var gAe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function NY(e,...t){for(const n of t)pAe(e,n);return e}function pAe(e,t){for(const n of Object.keys(t))Od(e,n,t[n],!0)}const Da=Wme;let zp=P_e;const O1=typeof window<"u"?window:void 0;var BF;zp===void 0&&((BF=O1==null?void 0:O1.vl)!=null&&BF.compile)&&(zp=O1.vl);const mAe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},yAe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Hg={vega:"Vega","vega-lite":"Vega-Lite"},Fv={vega:Da.version,"vega-lite":zp?zp.version:"not available"},vAe={vega:e=>e,"vega-lite":(e,t,n)=>zp.compile(e,{config:n,logger:t}).spec},bAe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,xAe="chart-wrapper";function SAe(e){return typeof e=="function"}function RF(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(r+e+a),o.document.title=`${Hg[i]} JSON Source`}function EAe(e,t,n){if(e.$schema){const i=SY(e.$schema);n&&n!==i.library&&t.warn(`The given visualization spec is written in ${Hg[i.library]}, but mode argument sets ${Hg[n]??n}.`);const r=i.library;return DY(Fv[r],`^${i.version.slice(1)}`)||t.warn(`The input spec uses ${Hg[r]} ${i.version}, but the current version of ${Hg[r]} is v${Fv[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":n??"vega"}function RY(e){return!!(e&&"load"in e)}function zF(e){return RY(e)?e:Da.loader(e)}function _Ae(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Se(t.defaultStyle)&&(t.defaultStyle=!1),t}async function wAe(e,t,n={}){let i,r;Se(t)?(r=zF(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=_Ae(i),o=a.loader;(!r||o)&&(r=zF(n.loader??o));const l=await FF(a,r),c=await FF(n,r),f={...NY(c,l),config:kd(c.config??{},l.config??{})};return await CAe(e,i,f,r)}async function FF(e,t){const n=Se(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Se(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function AAe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function CAe(e,t,n={},i){const r=n.theme?kd(Twe[n.theme],n.config??{}):n.config,a=uc(n.actions)?n.actions:NY({},mAe,n.actions??{}),o={...yAe,...n.i18n},l=n.renderer??"svg",c=n.logger??Lv(Da.Warn);n.logLevel!==void 0&&c.level(n.logLevel);const f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const M="vega-embed-style",{root:k,rootContainer:T}=AAe(d);if(!k.getElementById(M)){const N=document.createElement("style");N.id=M,N.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?gAe.toString():n.defaultStyle,T.appendChild(N)}}const g=EAe(t,c,n.mode);let p=vAe[g](t,c,r);if(g==="vega-lite"&&p.$schema){const M=SY(p.$schema);DY(Fv.vega,`^${M.version.slice(1)}`)||c.warn(`The compiled spec uses Vega ${M.version}, but current version is v${Fv.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const M=document.createElement("div");M.classList.add(xAe),d.appendChild(M),y=M}const v=n.patch;if(v&&(p=v instanceof Function?v(p):qx(p,v,!0,!1).newDocument),n.formatLocale&&Da.formatLocale(n.formatLocale),n.timeFormatLocale&&Da.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const M in n.expressionFunctions){const k=n.expressionFunctions[M];"fn"in k?Da.expressionFunction(M,k.fn,k.visitor):k instanceof Function&&Da.expressionFunction(M,k)}const{ast:b}=n,S=Da.parse(p,g==="vega-lite"?{}:r,{ast:b}),_=new(n.viewClass||Da.View)(S,{loader:i,logger:c,renderer:l,...b?{expr:Da.expressionInterpreter??n.expr??a1e}:{}});if(_.addSignalListener("autosize",(M,k)=>{const{type:T}=k;T=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):T=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):T=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:M,tooltip:k}=n,T=M&&!RY(M)?M==null?void 0:M.baseURL:void 0,N=SAe(k)?k:new Uwe({baseURL:T,...k===!0?{}:k}).call;_.tooltip(N)}let{hover:w}=n;if(w===void 0&&(w=g==="vega"),w){const{hoverSet:M,updateSet:k}=typeof w=="boolean"?{}:w;_.hover(M,k)}n&&(n.width!=null&&_.width(n.width),n.height!=null&&_.height(n.height),n.padding!=null&&_.padding(n.padding)),await _.initialize(y,n.bind).runAsync();let A;if(a!==!1){let M=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,d.append(T),M=T;const N=document.createElement("summary");N.innerHTML=bAe,T.append(N),A=R=>{T.contains(R.target)||T.removeAttribute("open")},document.addEventListener("click",A)}const k=document.createElement("div");if(M.append(k),k.classList.add("vega-actions"),a===!0||a.export!==!1){for(const T of["svg","png"])if(a===!0||a.export===!0||a.export[T]){const N=o[`${T.toUpperCase()}_ACTION`],R=document.createElement("a"),B=xe(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;R.text=N,R.href="#",R.target="_blank",R.download=`${f}.${T}`,R.addEventListener("mousedown",async function(U){U.preventDefault();const Q=await _.toImageURL(T,B);this.href=Q}),k.append(R)}}if(a===!0||a.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(N){RF(cE(t),n.sourceHeader??"",n.sourceFooter??"",g),N.preventDefault()}),k.append(T)}if(g==="vega-lite"&&(a===!0||a.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(N){RF(cE(p),n.sourceHeader??"",n.sourceFooter??"","vega"),N.preventDefault()}),k.append(T)}if(a===!0||a.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",N=document.createElement("a");N.text=o.EDITOR_ACTION,N.href="#",N.addEventListener("click",function(R){hAe(window,T,{config:r,mode:v?"vega":g,renderer:l,spec:cE(v?p:t)}),R.preventDefault()}),k.append(N)}}function $(){A&&document.removeEventListener("click",A),_.finalize()}return{view:_,spec:t,vgSpec:p,finalize:$,embedOptions:n}}function $Ae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var LF,UF;function TAe(){return UF||(UF=1,LF=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),i=a.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;r--!==0;){var o=a[r];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),LF}var MAe=TAe();const kAe=$Ae(MAe);function OAe(e){const[t,n]=Mu.useState(null),{ref:i,spec:r,onEmbed:a,onError:o,options:l={}}=e;return DAe(()=>{let c=!1,f=null;return(async()=>{if(!(!i.current||c))try{if(f=await wAe(i.current,r,l),c){f.finalize();return}n(f),a==null||a(f)}catch(d){console.error(`[react-vega] Error creating view: ${d}`),o==null||o(d)}})(),()=>{c=!0,f==null||f.finalize()}},[r,l]),t}function DAe(e,t){const n=Mu.useRef(null),i=Mu.useRef(0);(!n.current||!kAe(t,n.current))&&(i.current+=1),n.current=t,Mu.useEffect(e,[i.current])}const zY=Mu.forwardRef((e,t)=>{const{spec:n,options:i,onEmbed:r,onError:a,...o}=e,l=Mu.useRef(null);return Mu.useImperativeHandle(t,()=>{if(!l.current)throw new Error("VegaEmbed: ref is not attached to a div element");return l.current},[]),OAe({ref:l,spec:n,onEmbed:r,onError:a,options:i}),ap.jsx("div",{ref:l,...o})});zY.displayName="VegaEmbed";const NAe="https://vega.github.io/schema/vega-lite/v4.json",RAe={text:"Push-ups Progress",fontSize:20,font:"system-ui",anchor:"start",color:"#1a1a2e",offset:16},zAe={type:"bar",cornerRadiusTopLeft:3,cornerRadiusTopRight:3},FAe={x:{field:"date",type:"temporal",axis:{title:null,format:"%b %d, %Y",labelAngle:-40,labelColor:"#64748b",tickColor:"#e2e8f0",domainColor:"#e2e8f0",grid:!1,labelFont:"system-ui",labelFontSize:11}},y:{aggregate:"sum",field:"amount",type:"quantitative",axis:{title:"Total reps",titleColor:"#64748b",titleFont:"system-ui",titleFontSize:12,titlePadding:12,labelColor:"#64748b",labelFont:"system-ui",labelFontSize:11,tickColor:"#e2e8f0",domainColor:"#e2e8f0",gridColor:"#f1f5f9",gridDash:[4,4]}},color:{field:"serieIndex",type:"nominal",scale:{domain:[1,2,3,4,5,6],range:["#6366f1","#8b5cf6","#a78bfa","#c4b5fd","#ddd6fe","#ede9fe"]},legend:{title:"Set",titleColor:"#64748b",titleFont:"system-ui",titleFontSize:12,labelColor:"#64748b",labelFont:"system-ui",labelFontSize:11,orient:"top",direction:"horizontal",symbolType:"circle",symbolSize:80}},tooltip:[{field:"date",type:"temporal",title:"Date",format:"%b %d, %Y"},{field:"serieIndex",type:"nominal",title:"Set"},{field:"amount",type:"quantitative",title:"Reps"}]},LAe=780,UAe=380,BAe={top:8,right:16,bottom:8,left:8},qAe={view:{stroke:null},background:"#ffffff"},jAe={$schema:NAe,title:RAe,mark:zAe,encoding:FAe,width:LAe,height:UAe,padding:BAe,config:qAe};function IAe(e){const t=e.trim().split(/\r?\n/),n=[];for(let i=1;i<t.length;i++){const r=t[i].split(","),a=r[0];for(let o=1;o<=6;o++)n.push({date:a,serieIndex:o,amount:parseInt(r[o])||0})}return n}const PAe=()=>{const[e,t]=ew.useState(null);if(ew.useEffect(()=>{fetch("/push-ups/pushups.csv").then(i=>i.text()).then(i=>t(IAe(i)))},[]),!e)return null;const n={...jAe,data:{values:e}};return ap.jsx(zY,{spec:n})};function HAe(){return ap.jsx("div",{className:"container",children:ap.jsx(PAe,{})})}const GAe=mW.createRoot(document.getElementById("root"));GAe.render(ap.jsx(HAe,{}));
